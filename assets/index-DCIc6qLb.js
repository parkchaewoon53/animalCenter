var GB=Object.defineProperty;var $B=(i,t,e)=>t in i?GB(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var w=(i,t,e)=>$B(i,typeof t!="symbol"?t+"":t,e);function jB(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(i,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function ap(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ny={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk;function KB(){if(yk)return Ou;yk=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,o){var r=null;if(o!==void 0&&(r=""+o),s.key!==void 0&&(r=""+s.key),"key"in s){o={};for(var a in s)a!=="key"&&(o[a]=s[a])}else o=s;return s=o.ref,{$$typeof:i,type:n,key:r,ref:s!==void 0?s:null,props:o}}return Ou.Fragment=t,Ou.jsx=e,Ou.jsxs=e,Ou}var _k;function ZB(){return _k||(_k=1,ny.exports=KB()),ny.exports}var A=ZB(),iy={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk;function YB(){if(vk)return je;vk=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function p(V){return V===null||typeof V!="object"?null:(V=m&&V[m]||V["@@iterator"],typeof V=="function"?V:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function k(V,se,pe){this.props=V,this.context=se,this.refs=x,this.updater=pe||v}k.prototype.isReactComponent={},k.prototype.setState=function(V,se){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,se,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function S(){}S.prototype=k.prototype;function I(V,se,pe){this.props=V,this.context=se,this.refs=x,this.updater=pe||v}var P=I.prototype=new S;P.constructor=I,C(P,k.prototype),P.isPureReactComponent=!0;var L=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function F(V,se,pe,de,$,W){return pe=W.ref,{$$typeof:i,type:V,key:se,ref:pe!==void 0?pe:null,props:W}}function j(V,se){return F(V.type,se,void 0,void 0,void 0,V.props)}function U(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function X(V){var se={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(pe){return se[pe]})}var le=/\/+/g;function me(V,se){return typeof V=="object"&&V!==null&&V.key!=null?X(""+V.key):se.toString(36)}function Ie(){}function ze(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Ie,Ie):(V.status="pending",V.then(function(se){V.status==="pending"&&(V.status="fulfilled",V.value=se)},function(se){V.status==="pending"&&(V.status="rejected",V.reason=se)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function ke(V,se,pe,de,$){var W=typeof V;(W==="undefined"||W==="boolean")&&(V=null);var Q=!1;if(V===null)Q=!0;else switch(W){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(V.$$typeof){case i:case t:Q=!0;break;case h:return Q=V._init,ke(Q(V._payload),se,pe,de,$)}}if(Q)return $=$(V),Q=de===""?"."+me(V,0):de,L($)?(pe="",Q!=null&&(pe=Q.replace(le,"$&/")+"/"),ke($,se,pe,"",function(Ce){return Ce})):$!=null&&(U($)&&($=j($,pe+($.key==null||V&&V.key===$.key?"":(""+$.key).replace(le,"$&/")+"/")+Q)),se.push($)),1;Q=0;var ve=de===""?".":de+":";if(L(V))for(var be=0;be<V.length;be++)de=V[be],W=ve+me(de,be),Q+=ke(de,se,pe,W,$);else if(be=p(V),typeof be=="function")for(V=be.call(V),be=0;!(de=V.next()).done;)de=de.value,W=ve+me(de,be++),Q+=ke(de,se,pe,W,$);else if(W==="object"){if(typeof V.then=="function")return ke(ze(V),se,pe,de,$);throw se=String(V),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Q}function D(V,se,pe){if(V==null)return V;var de=[],$=0;return ke(V,de,"","",function(W){return se.call(pe,W,$++)}),de}function oe(V){if(V._status===-1){var se=V._result;se=se(),se.then(function(pe){(V._status===0||V._status===-1)&&(V._status=1,V._result=pe)},function(pe){(V._status===0||V._status===-1)&&(V._status=2,V._result=pe)}),V._status===-1&&(V._status=0,V._result=se)}if(V._status===1)return V._result.default;throw V._result}var ce=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Ne(){}return je.Children={map:D,forEach:function(V,se,pe){D(V,function(){se.apply(this,arguments)},pe)},count:function(V){var se=0;return D(V,function(){se++}),se},toArray:function(V){return D(V,function(se){return se})||[]},only:function(V){if(!U(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},je.Component=k,je.Fragment=e,je.Profiler=s,je.PureComponent=I,je.StrictMode=n,je.Suspense=l,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,je.__COMPILER_RUNTIME={__proto__:null,c:function(V){return O.H.useMemoCache(V)}},je.cache=function(V){return function(){return V.apply(null,arguments)}},je.cloneElement=function(V,se,pe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var de=C({},V.props),$=V.key,W=void 0;if(se!=null)for(Q in se.ref!==void 0&&(W=void 0),se.key!==void 0&&($=""+se.key),se)!J.call(se,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&se.ref===void 0||(de[Q]=se[Q]);var Q=arguments.length-2;if(Q===1)de.children=pe;else if(1<Q){for(var ve=Array(Q),be=0;be<Q;be++)ve[be]=arguments[be+2];de.children=ve}return F(V.type,$,void 0,void 0,W,de)},je.createContext=function(V){return V={$$typeof:r,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},je.createElement=function(V,se,pe){var de,$={},W=null;if(se!=null)for(de in se.key!==void 0&&(W=""+se.key),se)J.call(se,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&($[de]=se[de]);var Q=arguments.length-2;if(Q===1)$.children=pe;else if(1<Q){for(var ve=Array(Q),be=0;be<Q;be++)ve[be]=arguments[be+2];$.children=ve}if(V&&V.defaultProps)for(de in Q=V.defaultProps,Q)$[de]===void 0&&($[de]=Q[de]);return F(V,W,void 0,void 0,null,$)},je.createRef=function(){return{current:null}},je.forwardRef=function(V){return{$$typeof:a,render:V}},je.isValidElement=U,je.lazy=function(V){return{$$typeof:h,_payload:{_status:-1,_result:V},_init:oe}},je.memo=function(V,se){return{$$typeof:u,type:V,compare:se===void 0?null:se}},je.startTransition=function(V){var se=O.T,pe={};O.T=pe;try{var de=V(),$=O.S;$!==null&&$(pe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Ne,ce)}catch(W){ce(W)}finally{O.T=se}},je.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},je.use=function(V){return O.H.use(V)},je.useActionState=function(V,se,pe){return O.H.useActionState(V,se,pe)},je.useCallback=function(V,se){return O.H.useCallback(V,se)},je.useContext=function(V){return O.H.useContext(V)},je.useDebugValue=function(){},je.useDeferredValue=function(V,se){return O.H.useDeferredValue(V,se)},je.useEffect=function(V,se,pe){var de=O.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(V,se)},je.useId=function(){return O.H.useId()},je.useImperativeHandle=function(V,se,pe){return O.H.useImperativeHandle(V,se,pe)},je.useInsertionEffect=function(V,se){return O.H.useInsertionEffect(V,se)},je.useLayoutEffect=function(V,se){return O.H.useLayoutEffect(V,se)},je.useMemo=function(V,se){return O.H.useMemo(V,se)},je.useOptimistic=function(V,se){return O.H.useOptimistic(V,se)},je.useReducer=function(V,se,pe){return O.H.useReducer(V,se,pe)},je.useRef=function(V){return O.H.useRef(V)},je.useState=function(V){return O.H.useState(V)},je.useSyncExternalStore=function(V,se,pe){return O.H.useSyncExternalStore(V,se,pe)},je.useTransition=function(){return O.H.useTransition()},je.version="19.1.0",je}var Ck;function Wv(){return Ck||(Ck=1,iy.exports=YB()),iy.exports}var H=Wv();const So=ap(H);var sy={exports:{}},Du={},oy={exports:{}},ry={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function JB(){return Tk||(Tk=1,function(i){function t(D,oe){var ce=D.length;D.push(oe);e:for(;0<ce;){var Ne=ce-1>>>1,V=D[Ne];if(0<s(V,oe))D[Ne]=oe,D[ce]=V,ce=Ne;else break e}}function e(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var oe=D[0],ce=D.pop();if(ce!==oe){D[0]=ce;e:for(var Ne=0,V=D.length,se=V>>>1;Ne<se;){var pe=2*(Ne+1)-1,de=D[pe],$=pe+1,W=D[$];if(0>s(de,ce))$<V&&0>s(W,de)?(D[Ne]=W,D[$]=ce,Ne=$):(D[Ne]=de,D[pe]=ce,Ne=pe);else if($<V&&0>s(W,ce))D[Ne]=W,D[$]=ce,Ne=$;else break e}}return oe}function s(D,oe){var ce=D.sortIndex-oe.sortIndex;return ce!==0?ce:D.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();i.unstable_now=function(){return r.now()-a}}var l=[],u=[],h=1,m=null,p=3,v=!1,C=!1,x=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function L(D){for(var oe=e(u);oe!==null;){if(oe.callback===null)n(u);else if(oe.startTime<=D)n(u),oe.sortIndex=oe.expirationTime,t(l,oe);else break;oe=e(u)}}function O(D){if(x=!1,L(D),!C)if(e(l)!==null)C=!0,J||(J=!0,me());else{var oe=e(u);oe!==null&&ke(O,oe.startTime-D)}}var J=!1,F=-1,j=5,U=-1;function X(){return k?!0:!(i.unstable_now()-U<j)}function le(){if(k=!1,J){var D=i.unstable_now();U=D;var oe=!0;try{e:{C=!1,x&&(x=!1,I(F),F=-1),v=!0;var ce=p;try{t:{for(L(D),m=e(l);m!==null&&!(m.expirationTime>D&&X());){var Ne=m.callback;if(typeof Ne=="function"){m.callback=null,p=m.priorityLevel;var V=Ne(m.expirationTime<=D);if(D=i.unstable_now(),typeof V=="function"){m.callback=V,L(D),oe=!0;break t}m===e(l)&&n(l),L(D)}else n(l);m=e(l)}if(m!==null)oe=!0;else{var se=e(u);se!==null&&ke(O,se.startTime-D),oe=!1}}break e}finally{m=null,p=ce,v=!1}oe=void 0}}finally{oe?me():J=!1}}}var me;if(typeof P=="function")me=function(){P(le)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,ze=Ie.port2;Ie.port1.onmessage=le,me=function(){ze.postMessage(null)}}else me=function(){S(le,0)};function ke(D,oe){F=S(function(){D(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(D){D.callback=null},i.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_next=function(D){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var ce=p;p=oe;try{return D()}finally{p=ce}},i.unstable_requestPaint=function(){k=!0},i.unstable_runWithPriority=function(D,oe){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ce=p;p=D;try{return oe()}finally{p=ce}},i.unstable_scheduleCallback=function(D,oe,ce){var Ne=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ne+ce:Ne):ce=Ne,D){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ce+V,D={id:h++,callback:oe,priorityLevel:D,startTime:ce,expirationTime:V,sortIndex:-1},ce>Ne?(D.sortIndex=ce,t(u,D),e(l)===null&&D===e(u)&&(x?(I(F),F=-1):x=!0,ke(O,ce-Ne))):(D.sortIndex=V,t(l,D),C||v||(C=!0,J||(J=!0,me()))),D},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(D){var oe=p;return function(){var ce=p;p=oe;try{return D.apply(this,arguments)}finally{p=ce}}}}(ry)),ry}var xk;function XB(){return xk||(xk=1,oy.exports=JB()),oy.exports}var ay={exports:{}},zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function QB(){if(kk)return zn;kk=1;var i=Wv();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,u,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:l,containerInfo:u,implementation:h}}var r=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,zn.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return o(l,u,null,h)},zn.flushSync=function(l){var u=r.T,h=n.p;try{if(r.T=null,n.p=2,l)return l()}finally{r.T=u,n.p=h,n.d.f()}},zn.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},zn.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},zn.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,m=a(h,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:v}):h==="script"&&n.d.X(l,{crossOrigin:m,integrity:p,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},zn.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=a(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},zn.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,m=a(h,u.crossOrigin);n.d.L(l,h,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},zn.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=a(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},zn.requestFormReset=function(l){n.d.r(l)},zn.unstable_batchedUpdates=function(l,u){return l(u)},zn.useFormState=function(l,u,h){return r.H.useFormState(l,u,h)},zn.useFormStatus=function(){return r.H.useHostTransitionStatus()},zn.version="19.1.0",zn}var Ek;function e3(){if(Ek)return ay.exports;Ek=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),ay.exports=QB(),ay.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk;function t3(){if(Sk)return Du;Sk=1;var i=XB(),t=Wv(),e=e3();function n(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function o(c){var d=c,f=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(f=d.return),c=d.return;while(c)}return d.tag===3?f:null}function r(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function a(c){if(o(c)!==c)throw Error(n(188))}function l(c){var d=c.alternate;if(!d){if(d=o(c),d===null)throw Error(n(188));return d!==c?null:c}for(var f=c,g=d;;){var _=f.return;if(_===null)break;var T=_.alternate;if(T===null){if(g=_.return,g!==null){f=g;continue}break}if(_.child===T.child){for(T=_.child;T;){if(T===f)return a(_),c;if(T===g)return a(_),d;T=T.sibling}throw Error(n(188))}if(f.return!==g.return)f=_,g=T;else{for(var E=!1,R=_.child;R;){if(R===f){E=!0,f=_,g=T;break}if(R===g){E=!0,g=_,f=T;break}R=R.sibling}if(!E){for(R=T.child;R;){if(R===f){E=!0,f=T,g=_;break}if(R===g){E=!0,g=T,f=_;break}R=R.sibling}if(!E)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?c:d}function u(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(d=u(c),d!==null)return d;c=c.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),P=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function me(c){return c===null||typeof c!="object"?null:(c=le&&c[le]||c["@@iterator"],typeof c=="function"?c:null)}var Ie=Symbol.for("react.client.reference");function ze(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Ie?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case C:return"Fragment";case k:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case J:return"SuspenseList";case U:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case P:return(c.displayName||"Context")+".Provider";case I:return(c._context.displayName||"Context")+".Consumer";case L:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case F:return d=c.displayName||null,d!==null?d:ze(c.type)||"Memo";case j:d=c._payload,c=c._init;try{return ze(c(d))}catch{}}return null}var ke=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ne=[],V=-1;function se(c){return{current:c}}function pe(c){0>V||(c.current=Ne[V],Ne[V]=null,V--)}function de(c,d){V++,Ne[V]=c.current,c.current=d}var $=se(null),W=se(null),Q=se(null),ve=se(null);function be(c,d){switch(de(Q,d),de(W,c),de($,null),d.nodeType){case 9:case 11:c=(c=d.documentElement)&&(c=c.namespaceURI)?jx(c):0;break;default:if(c=d.tagName,d=d.namespaceURI)d=jx(d),c=Kx(d,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}pe($),de($,c)}function Ce(){pe($),pe(W),pe(Q)}function we(c){c.memoizedState!==null&&de(ve,c);var d=$.current,f=Kx(d,c.type);d!==f&&(de(W,c),de($,f))}function Me(c){W.current===c&&(pe($),pe(W)),ve.current===c&&(pe(ve),Iu._currentValue=ce)}var Ae=Object.prototype.hasOwnProperty,it=i.unstable_scheduleCallback,nt=i.unstable_cancelCallback,Bn=i.unstable_shouldYield,wn=i.unstable_requestPaint,He=i.unstable_now,An=i.unstable_getCurrentPriorityLevel,ct=i.unstable_ImmediatePriority,gt=i.unstable_UserBlockingPriority,xi=i.unstable_NormalPriority,ri=i.unstable_LowPriority,un=i.unstable_IdlePriority,st=i.log,dn=i.unstable_setDisableYieldValue,$e=null,Pt=null;function xt(c){if(typeof st=="function"&&dn(c),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode($e,c)}catch{}}var jt=Math.clz32?Math.clz32:ft,Zs=Math.log,el=Math.LN2;function ft(c){return c>>>=0,c===0?32:31-(Zs(c)/el|0)|0}var ut=256,qr=4194304;function Rn(c){var d=c&42;if(d!==0)return d;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function tl(c,d,f){var g=c.pendingLanes;if(g===0)return 0;var _=0,T=c.suspendedLanes,E=c.pingedLanes;c=c.warmLanes;var R=g&134217727;return R!==0?(g=R&~T,g!==0?_=Rn(g):(E&=R,E!==0?_=Rn(E):f||(f=R&~c,f!==0&&(_=Rn(f))))):(R=g&~T,R!==0?_=Rn(R):E!==0?_=Rn(E):f||(f=g&~c,f!==0&&(_=Rn(f)))),_===0?0:d!==0&&d!==_&&(d&T)===0&&(T=_&-_,f=d&-d,T>=f||T===32&&(f&4194048)!==0)?d:_}function Ys(c,d){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&d)===0}function MD(c,d){switch(c){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I1(){var c=ut;return ut<<=1,(ut&4194048)===0&&(ut=256),c}function P1(){var c=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),c}function Gp(c){for(var d=[],f=0;31>f;f++)d.push(c);return d}function Uc(c,d){c.pendingLanes|=d,d!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function VD(c,d,f,g,_,T){var E=c.pendingLanes;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=f,c.entangledLanes&=f,c.errorRecoveryDisabledLanes&=f,c.shellSuspendCounter=0;var R=c.entanglements,M=c.expirationTimes,G=c.hiddenUpdates;for(f=E&~f;0<f;){var ne=31-jt(f),re=1<<ne;R[ne]=0,M[ne]=-1;var K=G[ne];if(K!==null)for(G[ne]=null,ne=0;ne<K.length;ne++){var Y=K[ne];Y!==null&&(Y.lane&=-536870913)}f&=~re}g!==0&&M1(c,g,0),T!==0&&_===0&&c.tag!==0&&(c.suspendedLanes|=T&~(E&~d))}function M1(c,d,f){c.pendingLanes|=d,c.suspendedLanes&=~d;var g=31-jt(d);c.entangledLanes|=d,c.entanglements[g]=c.entanglements[g]|1073741824|f&4194090}function V1(c,d){var f=c.entangledLanes|=d;for(c=c.entanglements;f;){var g=31-jt(f),_=1<<g;_&d|c[g]&d&&(c[g]|=d),f&=~_}}function $p(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function jp(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function N1(){var c=oe.p;return c!==0?c:(c=window.event,c===void 0?32:fk(c.type))}function ND(c,d){var f=oe.p;try{return oe.p=c,d()}finally{oe.p=f}}var Wo=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Wo,ai="__reactProps$"+Wo,nl="__reactContainer$"+Wo,Kp="__reactEvents$"+Wo,OD="__reactListeners$"+Wo,DD="__reactHandles$"+Wo,O1="__reactResources$"+Wo,zc="__reactMarker$"+Wo;function Zp(c){delete c[Fn],delete c[ai],delete c[Kp],delete c[OD],delete c[DD]}function il(c){var d=c[Fn];if(d)return d;for(var f=c.parentNode;f;){if(d=f[nl]||f[Fn]){if(f=d.alternate,d.child!==null||f!==null&&f.child!==null)for(c=Xx(c);c!==null;){if(f=c[Fn])return f;c=Xx(c)}return d}c=f,f=c.parentNode}return null}function sl(c){if(c=c[Fn]||c[nl]){var d=c.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return c}return null}function Hc(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c.stateNode;throw Error(n(33))}function ol(c){var d=c[O1];return d||(d=c[O1]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function yn(c){c[zc]=!0}var D1=new Set,L1={};function Gr(c,d){rl(c,d),rl(c+"Capture",d)}function rl(c,d){for(L1[c]=d,c=0;c<d.length;c++)D1.add(d[c])}var LD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),B1={},F1={};function BD(c){return Ae.call(F1,c)?!0:Ae.call(B1,c)?!1:LD.test(c)?F1[c]=!0:(B1[c]=!0,!1)}function Bh(c,d,f){if(BD(d))if(f===null)c.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":c.removeAttribute(d);return;case"boolean":var g=d.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){c.removeAttribute(d);return}}c.setAttribute(d,""+f)}}function Fh(c,d,f){if(f===null)c.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(d);return}c.setAttribute(d,""+f)}}function Js(c,d,f,g){if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttributeNS(d,f,""+g)}}var Yp,U1;function al(c){if(Yp===void 0)try{throw Error()}catch(f){var d=f.stack.trim().match(/\n( *(at )?)/);Yp=d&&d[1]||"",U1=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yp+c+U1}var Jp=!1;function Xp(c,d){if(!c||Jp)return"";Jp=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(d){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Y){var K=Y}Reflect.construct(c,[],re)}else{try{re.call()}catch(Y){K=Y}c.call(re.prototype)}}else{try{throw Error()}catch(Y){K=Y}(re=c())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Y){if(Y&&K&&typeof Y.stack=="string")return[Y.stack,K.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),E=T[0],R=T[1];if(E&&R){var M=E.split(`
`),G=R.split(`
`);for(_=g=0;g<M.length&&!M[g].includes("DetermineComponentFrameRoot");)g++;for(;_<G.length&&!G[_].includes("DetermineComponentFrameRoot");)_++;if(g===M.length||_===G.length)for(g=M.length-1,_=G.length-1;1<=g&&0<=_&&M[g]!==G[_];)_--;for(;1<=g&&0<=_;g--,_--)if(M[g]!==G[_]){if(g!==1||_!==1)do if(g--,_--,0>_||M[g]!==G[_]){var ne=`
`+M[g].replace(" at new "," at ");return c.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",c.displayName)),ne}while(1<=g&&0<=_);break}}}finally{Jp=!1,Error.prepareStackTrace=f}return(f=c?c.displayName||c.name:"")?al(f):""}function FD(c){switch(c.tag){case 26:case 27:case 5:return al(c.type);case 16:return al("Lazy");case 13:return al("Suspense");case 19:return al("SuspenseList");case 0:case 15:return Xp(c.type,!1);case 11:return Xp(c.type.render,!1);case 1:return Xp(c.type,!0);case 31:return al("Activity");default:return""}}function z1(c){try{var d="";do d+=FD(c),c=c.return;while(c);return d}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Fi(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function H1(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function UD(c){var d=H1(c)?"checked":"value",f=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),g=""+c[d];if(!c.hasOwnProperty(d)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,T=f.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return _.call(this)},set:function(E){g=""+E,T.call(this,E)}}),Object.defineProperty(c,d,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(E){g=""+E},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Uh(c){c._valueTracker||(c._valueTracker=UD(c))}function W1(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var f=d.getValue(),g="";return c&&(g=H1(c)?c.checked?"true":"false":c.value),c=g,c!==f?(d.setValue(c),!0):!1}function zh(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var zD=/[\n"\\]/g;function Ui(c){return c.replace(zD,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Qp(c,d,f,g,_,T,E,R){c.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?c.type=E:c.removeAttribute("type"),d!=null?E==="number"?(d===0&&c.value===""||c.value!=d)&&(c.value=""+Fi(d)):c.value!==""+Fi(d)&&(c.value=""+Fi(d)):E!=="submit"&&E!=="reset"||c.removeAttribute("value"),d!=null?eb(c,E,Fi(d)):f!=null?eb(c,E,Fi(f)):g!=null&&c.removeAttribute("value"),_==null&&T!=null&&(c.defaultChecked=!!T),_!=null&&(c.checked=_&&typeof _!="function"&&typeof _!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?c.name=""+Fi(R):c.removeAttribute("name")}function q1(c,d,f,g,_,T,E,R){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(c.type=T),d!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||d!=null))return;f=f!=null?""+Fi(f):"",d=d!=null?""+Fi(d):f,R||d===c.value||(c.value=d),c.defaultValue=d}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,c.checked=R?c.checked:!!g,c.defaultChecked=!!g,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(c.name=E)}function eb(c,d,f){d==="number"&&zh(c.ownerDocument)===c||c.defaultValue===""+f||(c.defaultValue=""+f)}function ll(c,d,f,g){if(c=c.options,d){d={};for(var _=0;_<f.length;_++)d["$"+f[_]]=!0;for(f=0;f<c.length;f++)_=d.hasOwnProperty("$"+c[f].value),c[f].selected!==_&&(c[f].selected=_),_&&g&&(c[f].defaultSelected=!0)}else{for(f=""+Fi(f),d=null,_=0;_<c.length;_++){if(c[_].value===f){c[_].selected=!0,g&&(c[_].defaultSelected=!0);return}d!==null||c[_].disabled||(d=c[_])}d!==null&&(d.selected=!0)}}function G1(c,d,f){if(d!=null&&(d=""+Fi(d),d!==c.value&&(c.value=d),f==null)){c.defaultValue!==d&&(c.defaultValue=d);return}c.defaultValue=f!=null?""+Fi(f):""}function $1(c,d,f,g){if(d==null){if(g!=null){if(f!=null)throw Error(n(92));if(ke(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),d=f}f=Fi(d),c.defaultValue=f,g=c.textContent,g===f&&g!==""&&g!==null&&(c.value=g)}function cl(c,d){if(d){var f=c.firstChild;if(f&&f===c.lastChild&&f.nodeType===3){f.nodeValue=d;return}}c.textContent=d}var HD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function j1(c,d,f){var g=d.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?c.setProperty(d,""):d==="float"?c.cssFloat="":c[d]="":g?c.setProperty(d,f):typeof f!="number"||f===0||HD.has(d)?d==="float"?c.cssFloat=f:c[d]=(""+f).trim():c[d]=f+"px"}function K1(c,d,f){if(d!=null&&typeof d!="object")throw Error(n(62));if(c=c.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||d!=null&&d.hasOwnProperty(g)||(g.indexOf("--")===0?c.setProperty(g,""):g==="float"?c.cssFloat="":c[g]="");for(var _ in d)g=d[_],d.hasOwnProperty(_)&&f[_]!==g&&j1(c,_,g)}else for(var T in d)d.hasOwnProperty(T)&&j1(c,T,d[T])}function tb(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hh(c){return qD.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var nb=null;function ib(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var ul=null,dl=null;function Z1(c){var d=sl(c);if(d&&(c=d.stateNode)){var f=c[ai]||null;e:switch(c=d.stateNode,d.type){case"input":if(Qp(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),d=f.name,f.type==="radio"&&d!=null){for(f=c;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ui(""+d)+'"][type="radio"]'),d=0;d<f.length;d++){var g=f[d];if(g!==c&&g.form===c.form){var _=g[ai]||null;if(!_)throw Error(n(90));Qp(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(d=0;d<f.length;d++)g=f[d],g.form===c.form&&W1(g)}break e;case"textarea":G1(c,f.value,f.defaultValue);break e;case"select":d=f.value,d!=null&&ll(c,!!f.multiple,d,!1)}}}var sb=!1;function Y1(c,d,f){if(sb)return c(d,f);sb=!0;try{var g=c(d);return g}finally{if(sb=!1,(ul!==null||dl!==null)&&(Af(),ul&&(d=ul,c=dl,dl=ul=null,Z1(d),c)))for(d=0;d<c.length;d++)Z1(c[d])}}function Wc(c,d){var f=c.stateNode;if(f===null)return null;var g=f[ai]||null;if(g===null)return null;f=g[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(c=c.type,g=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!g;break e;default:c=!1}if(c)return null;if(f&&typeof f!="function")throw Error(n(231,d,typeof f));return f}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ob=!1;if(Xs)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){ob=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{ob=!1}var qo=null,rb=null,Wh=null;function J1(){if(Wh)return Wh;var c,d=rb,f=d.length,g,_="value"in qo?qo.value:qo.textContent,T=_.length;for(c=0;c<f&&d[c]===_[c];c++);var E=f-c;for(g=1;g<=E&&d[f-g]===_[T-g];g++);return Wh=_.slice(c,1<g?1-g:void 0)}function qh(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function Gh(){return!0}function X1(){return!1}function li(c){function d(f,g,_,T,E){this._reactName=f,this._targetInst=_,this.type=g,this.nativeEvent=T,this.target=E,this.currentTarget=null;for(var R in c)c.hasOwnProperty(R)&&(f=c[R],this[R]=f?f(T):T[R]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Gh:X1,this.isPropagationStopped=X1,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Gh)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Gh)},persist:function(){},isPersistent:Gh}),d}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$h=li($r),Gc=h({},$r,{view:0,detail:0}),GD=li(Gc),ab,lb,$c,jh=h({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ub,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==$c&&($c&&c.type==="mousemove"?(ab=c.screenX-$c.screenX,lb=c.screenY-$c.screenY):lb=ab=0,$c=c),ab)},movementY:function(c){return"movementY"in c?c.movementY:lb}}),Q1=li(jh),$D=h({},jh,{dataTransfer:0}),jD=li($D),KD=h({},Gc,{relatedTarget:0}),cb=li(KD),ZD=h({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),YD=li(ZD),JD=h({},$r,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),XD=li(JD),QD=h({},$r,{data:0}),eC=li(QD),eL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iL(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=nL[c])?!!d[c]:!1}function ub(){return iL}var sL=h({},Gc,{key:function(c){if(c.key){var d=eL[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=qh(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?tL[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ub,charCode:function(c){return c.type==="keypress"?qh(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?qh(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),oL=li(sL),rL=h({},jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tC=li(rL),aL=h({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ub}),lL=li(aL),cL=h({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),uL=li(cL),dL=h({},jh,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),hL=li(dL),fL=h({},$r,{newState:0,oldState:0}),mL=li(fL),gL=[9,13,27,32],db=Xs&&"CompositionEvent"in window,jc=null;Xs&&"documentMode"in document&&(jc=document.documentMode);var pL=Xs&&"TextEvent"in window&&!jc,nC=Xs&&(!db||jc&&8<jc&&11>=jc),iC=" ",sC=!1;function oC(c,d){switch(c){case"keyup":return gL.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var hl=!1;function bL(c,d){switch(c){case"compositionend":return rC(d);case"keypress":return d.which!==32?null:(sC=!0,iC);case"textInput":return c=d.data,c===iC&&sC?null:c;default:return null}}function wL(c,d){if(hl)return c==="compositionend"||!db&&oC(c,d)?(c=J1(),Wh=rb=qo=null,hl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return nC&&d.locale!=="ko"?null:d.data;default:return null}}var yL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aC(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!yL[c.type]:d==="textarea"}function lC(c,d,f,g){ul?dl?dl.push(g):dl=[g]:ul=g,d=Nf(d,"onChange"),0<d.length&&(f=new $h("onChange","change",null,f,g),c.push({event:f,listeners:d}))}var Kc=null,Zc=null;function _L(c){Hx(c,0)}function Kh(c){var d=Hc(c);if(W1(d))return c}function cC(c,d){if(c==="change")return d}var uC=!1;if(Xs){var hb;if(Xs){var fb="oninput"in document;if(!fb){var dC=document.createElement("div");dC.setAttribute("oninput","return;"),fb=typeof dC.oninput=="function"}hb=fb}else hb=!1;uC=hb&&(!document.documentMode||9<document.documentMode)}function hC(){Kc&&(Kc.detachEvent("onpropertychange",fC),Zc=Kc=null)}function fC(c){if(c.propertyName==="value"&&Kh(Zc)){var d=[];lC(d,Zc,c,ib(c)),Y1(_L,d)}}function vL(c,d,f){c==="focusin"?(hC(),Kc=d,Zc=f,Kc.attachEvent("onpropertychange",fC)):c==="focusout"&&hC()}function CL(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Kh(Zc)}function TL(c,d){if(c==="click")return Kh(d)}function xL(c,d){if(c==="input"||c==="change")return Kh(d)}function kL(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var ki=typeof Object.is=="function"?Object.is:kL;function Yc(c,d){if(ki(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var f=Object.keys(c),g=Object.keys(d);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var _=f[g];if(!Ae.call(d,_)||!ki(c[_],d[_]))return!1}return!0}function mC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function gC(c,d){var f=mC(c);c=0;for(var g;f;){if(f.nodeType===3){if(g=c+f.textContent.length,c<=d&&g>=d)return{node:f,offset:d-c};c=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=mC(f)}}function pC(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?pC(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function bC(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var d=zh(c.document);d instanceof c.HTMLIFrameElement;){try{var f=typeof d.contentWindow.location.href=="string"}catch{f=!1}if(f)c=d.contentWindow;else break;d=zh(c.document)}return d}function mb(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}var EL=Xs&&"documentMode"in document&&11>=document.documentMode,fl=null,gb=null,Jc=null,pb=!1;function wC(c,d,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;pb||fl==null||fl!==zh(g)||(g=fl,"selectionStart"in g&&mb(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Jc&&Yc(Jc,g)||(Jc=g,g=Nf(gb,"onSelect"),0<g.length&&(d=new $h("onSelect","select",null,d,f),c.push({event:d,listeners:g}),d.target=fl)))}function jr(c,d){var f={};return f[c.toLowerCase()]=d.toLowerCase(),f["Webkit"+c]="webkit"+d,f["Moz"+c]="moz"+d,f}var ml={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionrun:jr("Transition","TransitionRun"),transitionstart:jr("Transition","TransitionStart"),transitioncancel:jr("Transition","TransitionCancel"),transitionend:jr("Transition","TransitionEnd")},bb={},yC={};Xs&&(yC=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Kr(c){if(bb[c])return bb[c];if(!ml[c])return c;var d=ml[c],f;for(f in d)if(d.hasOwnProperty(f)&&f in yC)return bb[c]=d[f];return c}var _C=Kr("animationend"),vC=Kr("animationiteration"),CC=Kr("animationstart"),SL=Kr("transitionrun"),AL=Kr("transitionstart"),RL=Kr("transitioncancel"),TC=Kr("transitionend"),xC=new Map,wb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wb.push("scrollEnd");function us(c,d){xC.set(c,d),Gr(d,[c])}var kC=new WeakMap;function zi(c,d){if(typeof c=="object"&&c!==null){var f=kC.get(c);return f!==void 0?f:(d={value:c,source:d,stack:z1(d)},kC.set(c,d),d)}return{value:c,source:d,stack:z1(d)}}var Hi=[],gl=0,yb=0;function Zh(){for(var c=gl,d=yb=gl=0;d<c;){var f=Hi[d];Hi[d++]=null;var g=Hi[d];Hi[d++]=null;var _=Hi[d];Hi[d++]=null;var T=Hi[d];if(Hi[d++]=null,g!==null&&_!==null){var E=g.pending;E===null?_.next=_:(_.next=E.next,E.next=_),g.pending=_}T!==0&&EC(f,_,T)}}function Yh(c,d,f,g){Hi[gl++]=c,Hi[gl++]=d,Hi[gl++]=f,Hi[gl++]=g,yb|=g,c.lanes|=g,c=c.alternate,c!==null&&(c.lanes|=g)}function _b(c,d,f,g){return Yh(c,d,f,g),Jh(c)}function pl(c,d){return Yh(c,null,null,d),Jh(c)}function EC(c,d,f){c.lanes|=f;var g=c.alternate;g!==null&&(g.lanes|=f);for(var _=!1,T=c.return;T!==null;)T.childLanes|=f,g=T.alternate,g!==null&&(g.childLanes|=f),T.tag===22&&(c=T.stateNode,c===null||c._visibility&1||(_=!0)),c=T,T=T.return;return c.tag===3?(T=c.stateNode,_&&d!==null&&(_=31-jt(f),c=T.hiddenUpdates,g=c[_],g===null?c[_]=[d]:g.push(d),d.lane=f|536870912),T):null}function Jh(c){if(50<Cu)throw Cu=0,Ew=null,Error(n(185));for(var d=c.return;d!==null;)c=d,d=c.return;return c.tag===3?c.stateNode:null}var bl={};function IL(c,d,f,g){this.tag=c,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(c,d,f,g){return new IL(c,d,f,g)}function vb(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Qs(c,d){var f=c.alternate;return f===null?(f=Ei(c.tag,d,c.key,c.mode),f.elementType=c.elementType,f.type=c.type,f.stateNode=c.stateNode,f.alternate=c,c.alternate=f):(f.pendingProps=d,f.type=c.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=c.flags&65011712,f.childLanes=c.childLanes,f.lanes=c.lanes,f.child=c.child,f.memoizedProps=c.memoizedProps,f.memoizedState=c.memoizedState,f.updateQueue=c.updateQueue,d=c.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},f.sibling=c.sibling,f.index=c.index,f.ref=c.ref,f.refCleanup=c.refCleanup,f}function SC(c,d){c.flags&=65011714;var f=c.alternate;return f===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,d=f.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),c}function Xh(c,d,f,g,_,T){var E=0;if(g=c,typeof c=="function")vb(c)&&(E=1);else if(typeof c=="string")E=MB(c,f,$.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case U:return c=Ei(31,f,d,_),c.elementType=U,c.lanes=T,c;case C:return Zr(f.children,_,T,d);case x:E=8,_|=24;break;case k:return c=Ei(12,f,d,_|2),c.elementType=k,c.lanes=T,c;case O:return c=Ei(13,f,d,_),c.elementType=O,c.lanes=T,c;case J:return c=Ei(19,f,d,_),c.elementType=J,c.lanes=T,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case S:case P:E=10;break e;case I:E=9;break e;case L:E=11;break e;case F:E=14;break e;case j:E=16,g=null;break e}E=29,f=Error(n(130,c===null?"null":typeof c,"")),g=null}return d=Ei(E,f,d,_),d.elementType=c,d.type=g,d.lanes=T,d}function Zr(c,d,f,g){return c=Ei(7,c,g,d),c.lanes=f,c}function Cb(c,d,f){return c=Ei(6,c,null,d),c.lanes=f,c}function Tb(c,d,f){return d=Ei(4,c.children!==null?c.children:[],c.key,d),d.lanes=f,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}var wl=[],yl=0,Qh=null,ef=0,Wi=[],qi=0,Yr=null,eo=1,to="";function Jr(c,d){wl[yl++]=ef,wl[yl++]=Qh,Qh=c,ef=d}function AC(c,d,f){Wi[qi++]=eo,Wi[qi++]=to,Wi[qi++]=Yr,Yr=c;var g=eo;c=to;var _=32-jt(g)-1;g&=~(1<<_),f+=1;var T=32-jt(d)+_;if(30<T){var E=_-_%5;T=(g&(1<<E)-1).toString(32),g>>=E,_-=E,eo=1<<32-jt(d)+_|f<<_|g,to=T+c}else eo=1<<T|f<<_|g,to=c}function xb(c){c.return!==null&&(Jr(c,1),AC(c,1,0))}function kb(c){for(;c===Qh;)Qh=wl[--yl],wl[yl]=null,ef=wl[--yl],wl[yl]=null;for(;c===Yr;)Yr=Wi[--qi],Wi[qi]=null,to=Wi[--qi],Wi[qi]=null,eo=Wi[--qi],Wi[qi]=null}var Xn=null,Kt=null,mt=!1,Xr=null,Ss=!1,Eb=Error(n(519));function Qr(c){var d=Error(n(418,""));throw eu(zi(d,c)),Eb}function RC(c){var d=c.stateNode,f=c.type,g=c.memoizedProps;switch(d[Fn]=c,d[ai]=g,f){case"dialog":et("cancel",d),et("close",d);break;case"iframe":case"object":case"embed":et("load",d);break;case"video":case"audio":for(f=0;f<xu.length;f++)et(xu[f],d);break;case"source":et("error",d);break;case"img":case"image":case"link":et("error",d),et("load",d);break;case"details":et("toggle",d);break;case"input":et("invalid",d),q1(d,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Uh(d);break;case"select":et("invalid",d);break;case"textarea":et("invalid",d),$1(d,g.value,g.defaultValue,g.children),Uh(d)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||d.textContent===""+f||g.suppressHydrationWarning===!0||$x(d.textContent,f)?(g.popover!=null&&(et("beforetoggle",d),et("toggle",d)),g.onScroll!=null&&et("scroll",d),g.onScrollEnd!=null&&et("scrollend",d),g.onClick!=null&&(d.onclick=Of),d=!0):d=!1,d||Qr(c)}function IC(c){for(Xn=c.return;Xn;)switch(Xn.tag){case 5:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:Xn=Xn.return}}function Xc(c){if(c!==Xn)return!1;if(!mt)return IC(c),mt=!0,!1;var d=c.tag,f;if((f=d!==3&&d!==27)&&((f=d===5)&&(f=c.type,f=!(f!=="form"&&f!=="button")||Hw(c.type,c.memoizedProps)),f=!f),f&&Kt&&Qr(c),IC(c),d===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8)if(f=c.data,f==="/$"){if(d===0){Kt=hs(c.nextSibling);break e}d--}else f!=="$"&&f!=="$!"&&f!=="$?"||d++;c=c.nextSibling}Kt=null}}else d===27?(d=Kt,rr(c.type)?(c=$w,$w=null,Kt=c):Kt=d):Kt=Xn?hs(c.stateNode.nextSibling):null;return!0}function Qc(){Kt=Xn=null,mt=!1}function PC(){var c=Xr;return c!==null&&(di===null?di=c:di.push.apply(di,c),Xr=null),c}function eu(c){Xr===null?Xr=[c]:Xr.push(c)}var Sb=se(null),ea=null,no=null;function Go(c,d,f){de(Sb,d._currentValue),d._currentValue=f}function io(c){c._currentValue=Sb.current,pe(Sb)}function Ab(c,d,f){for(;c!==null;){var g=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,g!==null&&(g.childLanes|=d)):g!==null&&(g.childLanes&d)!==d&&(g.childLanes|=d),c===f)break;c=c.return}}function Rb(c,d,f,g){var _=c.child;for(_!==null&&(_.return=c);_!==null;){var T=_.dependencies;if(T!==null){var E=_.child;T=T.firstContext;e:for(;T!==null;){var R=T;T=_;for(var M=0;M<d.length;M++)if(R.context===d[M]){T.lanes|=f,R=T.alternate,R!==null&&(R.lanes|=f),Ab(T.return,f,c),g||(E=null);break e}T=R.next}}else if(_.tag===18){if(E=_.return,E===null)throw Error(n(341));E.lanes|=f,T=E.alternate,T!==null&&(T.lanes|=f),Ab(E,f,c),E=null}else E=_.child;if(E!==null)E.return=_;else for(E=_;E!==null;){if(E===c){E=null;break}if(_=E.sibling,_!==null){_.return=E.return,E=_;break}E=E.return}_=E}}function tu(c,d,f,g){c=null;for(var _=d,T=!1;_!==null;){if(!T){if((_.flags&524288)!==0)T=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var E=_.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var R=_.type;ki(_.pendingProps.value,E.value)||(c!==null?c.push(R):c=[R])}}else if(_===ve.current){if(E=_.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(c!==null?c.push(Iu):c=[Iu])}_=_.return}c!==null&&Rb(d,c,f,g),d.flags|=262144}function tf(c){for(c=c.firstContext;c!==null;){if(!ki(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function ta(c){ea=c,no=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Un(c){return MC(ea,c)}function nf(c,d){return ea===null&&ta(c),MC(c,d)}function MC(c,d){var f=d._currentValue;if(d={context:d,memoizedValue:f,next:null},no===null){if(c===null)throw Error(n(308));no=d,c.dependencies={lanes:0,firstContext:d},c.flags|=524288}else no=no.next=d;return f}var PL=typeof AbortController<"u"?AbortController:function(){var c=[],d=this.signal={aborted:!1,addEventListener:function(f,g){c.push(g)}};this.abort=function(){d.aborted=!0,c.forEach(function(f){return f()})}},ML=i.unstable_scheduleCallback,VL=i.unstable_NormalPriority,hn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ib(){return{controller:new PL,data:new Map,refCount:0}}function nu(c){c.refCount--,c.refCount===0&&ML(VL,function(){c.controller.abort()})}var iu=null,Pb=0,_l=0,vl=null;function NL(c,d){if(iu===null){var f=iu=[];Pb=0,_l=Vw(),vl={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Pb++,d.then(VC,VC),d}function VC(){if(--Pb===0&&iu!==null){vl!==null&&(vl.status="fulfilled");var c=iu;iu=null,_l=0,vl=null;for(var d=0;d<c.length;d++)(0,c[d])()}}function OL(c,d){var f=[],g={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return c.then(function(){g.status="fulfilled",g.value=d;for(var _=0;_<f.length;_++)(0,f[_])(d)},function(_){for(g.status="rejected",g.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),g}var NC=D.S;D.S=function(c,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&NL(c,d),NC!==null&&NC(c,d)};var na=se(null);function Mb(){var c=na.current;return c!==null?c:Dt.pooledCache}function sf(c,d){d===null?de(na,na.current):de(na,d.pool)}function OC(){var c=Mb();return c===null?null:{parent:hn._currentValue,pool:c}}var su=Error(n(460)),DC=Error(n(474)),of=Error(n(542)),Vb={then:function(){}};function LC(c){return c=c.status,c==="fulfilled"||c==="rejected"}function rf(){}function BC(c,d,f){switch(f=c[f],f===void 0?c.push(d):f!==d&&(d.then(rf,rf),d=f),d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,UC(c),c;default:if(typeof d.status=="string")d.then(rf,rf);else{if(c=Dt,c!==null&&100<c.shellSuspendCounter)throw Error(n(482));c=d,c.status="pending",c.then(function(g){if(d.status==="pending"){var _=d;_.status="fulfilled",_.value=g}},function(g){if(d.status==="pending"){var _=d;_.status="rejected",_.reason=g}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,UC(c),c}throw ou=d,su}}var ou=null;function FC(){if(ou===null)throw Error(n(459));var c=ou;return ou=null,c}function UC(c){if(c===su||c===of)throw Error(n(483))}var $o=!1;function Nb(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ob(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function jo(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Ko(c,d,f){var g=c.updateQueue;if(g===null)return null;if(g=g.shared,(_t&2)!==0){var _=g.pending;return _===null?d.next=d:(d.next=_.next,_.next=d),g.pending=d,d=Jh(c),EC(c,null,f),d}return Yh(c,g,d,f),Jh(c)}function ru(c,d,f){if(d=d.updateQueue,d!==null&&(d=d.shared,(f&4194048)!==0)){var g=d.lanes;g&=c.pendingLanes,f|=g,d.lanes=f,V1(c,f)}}function Db(c,d){var f=c.updateQueue,g=c.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var _=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var E={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?_=T=E:T=T.next=E,f=f.next}while(f!==null);T===null?_=T=d:T=T.next=d}else _=T=d;f={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},c.updateQueue=f;return}c=f.lastBaseUpdate,c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=d}var Lb=!1;function au(){if(Lb){var c=vl;if(c!==null)throw c}}function lu(c,d,f,g){Lb=!1;var _=c.updateQueue;$o=!1;var T=_.firstBaseUpdate,E=_.lastBaseUpdate,R=_.shared.pending;if(R!==null){_.shared.pending=null;var M=R,G=M.next;M.next=null,E===null?T=G:E.next=G,E=M;var ne=c.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==E&&(R===null?ne.firstBaseUpdate=G:R.next=G,ne.lastBaseUpdate=M))}if(T!==null){var re=_.baseState;E=0,ne=G=M=null,R=T;do{var K=R.lane&-536870913,Y=K!==R.lane;if(Y?(ot&K)===K:(g&K)===K){K!==0&&K===_l&&(Lb=!0),ne!==null&&(ne=ne.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Le=c,Ve=R;K=d;var St=f;switch(Ve.tag){case 1:if(Le=Ve.payload,typeof Le=="function"){re=Le.call(St,re,K);break e}re=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Ve.payload,K=typeof Le=="function"?Le.call(St,re,K):Le,K==null)break e;re=h({},re,K);break e;case 2:$o=!0}}K=R.callback,K!==null&&(c.flags|=64,Y&&(c.flags|=8192),Y=_.callbacks,Y===null?_.callbacks=[K]:Y.push(K))}else Y={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?(G=ne=Y,M=re):ne=ne.next=Y,E|=K;if(R=R.next,R===null){if(R=_.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,_.lastBaseUpdate=Y,_.shared.pending=null}}while(!0);ne===null&&(M=re),_.baseState=M,_.firstBaseUpdate=G,_.lastBaseUpdate=ne,T===null&&(_.shared.lanes=0),nr|=E,c.lanes=E,c.memoizedState=re}}function zC(c,d){if(typeof c!="function")throw Error(n(191,c));c.call(d)}function HC(c,d){var f=c.callbacks;if(f!==null)for(c.callbacks=null,c=0;c<f.length;c++)zC(f[c],d)}var Cl=se(null),af=se(0);function WC(c,d){c=uo,de(af,c),de(Cl,d),uo=c|d.baseLanes}function Bb(){de(af,uo),de(Cl,Cl.current)}function Fb(){uo=af.current,pe(Cl),pe(af)}var Zo=0,Je=null,kt=null,an=null,lf=!1,Tl=!1,ia=!1,cf=0,cu=0,xl=null,DL=0;function tn(){throw Error(n(321))}function Ub(c,d){if(d===null)return!1;for(var f=0;f<d.length&&f<c.length;f++)if(!ki(c[f],d[f]))return!1;return!0}function zb(c,d,f,g,_,T){return Zo=T,Je=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,D.H=c===null||c.memoizedState===null?ET:ST,ia=!1,T=f(g,_),ia=!1,Tl&&(T=GC(d,f,g,_)),qC(c),T}function qC(c){D.H=gf;var d=kt!==null&&kt.next!==null;if(Zo=0,an=kt=Je=null,lf=!1,cu=0,xl=null,d)throw Error(n(300));c===null||_n||(c=c.dependencies,c!==null&&tf(c)&&(_n=!0))}function GC(c,d,f,g){Je=c;var _=0;do{if(Tl&&(xl=null),cu=0,Tl=!1,25<=_)throw Error(n(301));if(_+=1,an=kt=null,c.updateQueue!=null){var T=c.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}D.H=WL,T=d(f,g)}while(Tl);return T}function LL(){var c=D.H,d=c.useState()[0];return d=typeof d.then=="function"?uu(d):d,c=c.useState()[0],(kt!==null?kt.memoizedState:null)!==c&&(Je.flags|=1024),d}function Hb(){var c=cf!==0;return cf=0,c}function Wb(c,d,f){d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~f}function qb(c){if(lf){for(c=c.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}lf=!1}Zo=0,an=kt=Je=null,Tl=!1,cu=cf=0,xl=null}function ci(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Je.memoizedState=an=c:an=an.next=c,an}function ln(){if(kt===null){var c=Je.alternate;c=c!==null?c.memoizedState:null}else c=kt.next;var d=an===null?Je.memoizedState:an.next;if(d!==null)an=d,kt=c;else{if(c===null)throw Je.alternate===null?Error(n(467)):Error(n(310));kt=c,c={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},an===null?Je.memoizedState=an=c:an=an.next=c}return an}function Gb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(c){var d=cu;return cu+=1,xl===null&&(xl=[]),c=BC(xl,c,d),d=Je,(an===null?d.memoizedState:an.next)===null&&(d=d.alternate,D.H=d===null||d.memoizedState===null?ET:ST),c}function uf(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return uu(c);if(c.$$typeof===P)return Un(c)}throw Error(n(438,String(c)))}function $b(c){var d=null,f=Je.updateQueue;if(f!==null&&(d=f.memoCache),d==null){var g=Je.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(d={data:g.data.map(function(_){return _.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),f===null&&(f=Gb(),Je.updateQueue=f),f.memoCache=d,f=d.data[d.index],f===void 0)for(f=d.data[d.index]=Array(c),g=0;g<c;g++)f[g]=X;return d.index++,f}function so(c,d){return typeof d=="function"?d(c):d}function df(c){var d=ln();return jb(d,kt,c)}function jb(c,d,f){var g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var _=c.baseQueue,T=g.pending;if(T!==null){if(_!==null){var E=_.next;_.next=T.next,T.next=E}d.baseQueue=_=T,g.pending=null}if(T=c.baseState,_===null)c.memoizedState=T;else{d=_.next;var R=E=null,M=null,G=d,ne=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(ot&re)===re:(Zo&re)===re){var K=G.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===_l&&(ne=!0);else if((Zo&K)===K){G=G.next,K===_l&&(ne=!0);continue}else re={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(R=M=re,E=T):M=M.next=re,Je.lanes|=K,nr|=K;re=G.action,ia&&f(T,re),T=G.hasEagerState?G.eagerState:f(T,re)}else K={lane:re,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(R=M=K,E=T):M=M.next=K,Je.lanes|=re,nr|=re;G=G.next}while(G!==null&&G!==d);if(M===null?E=T:M.next=R,!ki(T,c.memoizedState)&&(_n=!0,ne&&(f=vl,f!==null)))throw f;c.memoizedState=T,c.baseState=E,c.baseQueue=M,g.lastRenderedState=T}return _===null&&(g.lanes=0),[c.memoizedState,g.dispatch]}function Kb(c){var d=ln(),f=d.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var g=f.dispatch,_=f.pending,T=d.memoizedState;if(_!==null){f.pending=null;var E=_=_.next;do T=c(T,E.action),E=E.next;while(E!==_);ki(T,d.memoizedState)||(_n=!0),d.memoizedState=T,d.baseQueue===null&&(d.baseState=T),f.lastRenderedState=T}return[T,g]}function $C(c,d,f){var g=Je,_=ln(),T=mt;if(T){if(f===void 0)throw Error(n(407));f=f()}else f=d();var E=!ki((kt||_).memoizedState,f);E&&(_.memoizedState=f,_n=!0),_=_.queue;var R=ZC.bind(null,g,_,c);if(du(2048,8,R,[c]),_.getSnapshot!==d||E||an!==null&&an.memoizedState.tag&1){if(g.flags|=2048,kl(9,hf(),KC.bind(null,g,_,f,d),null),Dt===null)throw Error(n(349));T||(Zo&124)!==0||jC(g,d,f)}return f}function jC(c,d,f){c.flags|=16384,c={getSnapshot:d,value:f},d=Je.updateQueue,d===null?(d=Gb(),Je.updateQueue=d,d.stores=[c]):(f=d.stores,f===null?d.stores=[c]:f.push(c))}function KC(c,d,f,g){d.value=f,d.getSnapshot=g,YC(d)&&JC(c)}function ZC(c,d,f){return f(function(){YC(d)&&JC(c)})}function YC(c){var d=c.getSnapshot;c=c.value;try{var f=d();return!ki(c,f)}catch{return!0}}function JC(c){var d=pl(c,2);d!==null&&Pi(d,c,2)}function Zb(c){var d=ci();if(typeof c=="function"){var f=c;if(c=f(),ia){xt(!0);try{f()}finally{xt(!1)}}}return d.memoizedState=d.baseState=c,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:c},d}function XC(c,d,f,g){return c.baseState=f,jb(c,kt,typeof g=="function"?g:so)}function BL(c,d,f,g,_){if(mf(c))throw Error(n(485));if(c=d.action,c!==null){var T={payload:_,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){T.listeners.push(E)}};D.T!==null?f(!0):T.isTransition=!1,g(T),f=d.pending,f===null?(T.next=d.pending=T,QC(d,T)):(T.next=f.next,d.pending=f.next=T)}}function QC(c,d){var f=d.action,g=d.payload,_=c.state;if(d.isTransition){var T=D.T,E={};D.T=E;try{var R=f(_,g),M=D.S;M!==null&&M(E,R),eT(c,d,R)}catch(G){Yb(c,d,G)}finally{D.T=T}}else try{T=f(_,g),eT(c,d,T)}catch(G){Yb(c,d,G)}}function eT(c,d,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){tT(c,d,g)},function(g){return Yb(c,d,g)}):tT(c,d,f)}function tT(c,d,f){d.status="fulfilled",d.value=f,nT(d),c.state=f,d=c.pending,d!==null&&(f=d.next,f===d?c.pending=null:(f=f.next,d.next=f,QC(c,f)))}function Yb(c,d,f){var g=c.pending;if(c.pending=null,g!==null){g=g.next;do d.status="rejected",d.reason=f,nT(d),d=d.next;while(d!==g)}c.action=null}function nT(c){c=c.listeners;for(var d=0;d<c.length;d++)(0,c[d])()}function iT(c,d){return d}function sT(c,d){if(mt){var f=Dt.formState;if(f!==null){e:{var g=Je;if(mt){if(Kt){t:{for(var _=Kt,T=Ss;_.nodeType!==8;){if(!T){_=null;break t}if(_=hs(_.nextSibling),_===null){_=null;break t}}T=_.data,_=T==="F!"||T==="F"?_:null}if(_){Kt=hs(_.nextSibling),g=_.data==="F!";break e}}Qr(g)}g=!1}g&&(d=f[0])}}return f=ci(),f.memoizedState=f.baseState=d,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iT,lastRenderedState:d},f.queue=g,f=TT.bind(null,Je,g),g.dispatch=f,g=Zb(!1),T=tw.bind(null,Je,!1,g.queue),g=ci(),_={state:d,dispatch:null,action:c,pending:null},g.queue=_,f=BL.bind(null,Je,_,T,f),_.dispatch=f,g.memoizedState=c,[d,f,!1]}function oT(c){var d=ln();return rT(d,kt,c)}function rT(c,d,f){if(d=jb(c,d,iT)[0],c=df(so)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var g=uu(d)}catch(E){throw E===su?of:E}else g=d;d=ln();var _=d.queue,T=_.dispatch;return f!==d.memoizedState&&(Je.flags|=2048,kl(9,hf(),FL.bind(null,_,f),null)),[g,T,c]}function FL(c,d){c.action=d}function aT(c){var d=ln(),f=kt;if(f!==null)return rT(d,f,c);ln(),d=d.memoizedState,f=ln();var g=f.queue.dispatch;return f.memoizedState=c,[d,g,!1]}function kl(c,d,f,g){return c={tag:c,create:f,deps:g,inst:d,next:null},d=Je.updateQueue,d===null&&(d=Gb(),Je.updateQueue=d),f=d.lastEffect,f===null?d.lastEffect=c.next=c:(g=f.next,f.next=c,c.next=g,d.lastEffect=c),c}function hf(){return{destroy:void 0,resource:void 0}}function lT(){return ln().memoizedState}function ff(c,d,f,g){var _=ci();g=g===void 0?null:g,Je.flags|=c,_.memoizedState=kl(1|d,hf(),f,g)}function du(c,d,f,g){var _=ln();g=g===void 0?null:g;var T=_.memoizedState.inst;kt!==null&&g!==null&&Ub(g,kt.memoizedState.deps)?_.memoizedState=kl(d,T,f,g):(Je.flags|=c,_.memoizedState=kl(1|d,T,f,g))}function cT(c,d){ff(8390656,8,c,d)}function uT(c,d){du(2048,8,c,d)}function dT(c,d){return du(4,2,c,d)}function hT(c,d){return du(4,4,c,d)}function fT(c,d){if(typeof d=="function"){c=c();var f=d(c);return function(){typeof f=="function"?f():d(null)}}if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function mT(c,d,f){f=f!=null?f.concat([c]):null,du(4,4,fT.bind(null,d,c),f)}function Jb(){}function gT(c,d){var f=ln();d=d===void 0?null:d;var g=f.memoizedState;return d!==null&&Ub(d,g[1])?g[0]:(f.memoizedState=[c,d],c)}function pT(c,d){var f=ln();d=d===void 0?null:d;var g=f.memoizedState;if(d!==null&&Ub(d,g[1]))return g[0];if(g=c(),ia){xt(!0);try{c()}finally{xt(!1)}}return f.memoizedState=[g,d],g}function Xb(c,d,f){return f===void 0||(Zo&1073741824)!==0?c.memoizedState=d:(c.memoizedState=f,c=yx(),Je.lanes|=c,nr|=c,f)}function bT(c,d,f,g){return ki(f,d)?f:Cl.current!==null?(c=Xb(c,f,g),ki(c,d)||(_n=!0),c):(Zo&42)===0?(_n=!0,c.memoizedState=f):(c=yx(),Je.lanes|=c,nr|=c,d)}function wT(c,d,f,g,_){var T=oe.p;oe.p=T!==0&&8>T?T:8;var E=D.T,R={};D.T=R,tw(c,!1,d,f);try{var M=_(),G=D.S;if(G!==null&&G(R,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=OL(M,g);hu(c,d,ne,Ii(c))}else hu(c,d,g,Ii(c))}catch(re){hu(c,d,{then:function(){},status:"rejected",reason:re},Ii())}finally{oe.p=T,D.T=E}}function UL(){}function Qb(c,d,f,g){if(c.tag!==5)throw Error(n(476));var _=yT(c).queue;wT(c,_,d,ce,f===null?UL:function(){return _T(c),f(g)})}function yT(c){var d=c.memoizedState;if(d!==null)return d;d={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:ce},next:null};var f={};return d.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:f},next:null},c.memoizedState=d,c=c.alternate,c!==null&&(c.memoizedState=d),d}function _T(c){var d=yT(c).next.queue;hu(c,d,{},Ii())}function ew(){return Un(Iu)}function vT(){return ln().memoizedState}function CT(){return ln().memoizedState}function zL(c){for(var d=c.return;d!==null;){switch(d.tag){case 24:case 3:var f=Ii();c=jo(f);var g=Ko(d,c,f);g!==null&&(Pi(g,d,f),ru(g,d,f)),d={cache:Ib()},c.payload=d;return}d=d.return}}function HL(c,d,f){var g=Ii();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},mf(c)?xT(d,f):(f=_b(c,d,f,g),f!==null&&(Pi(f,c,g),kT(f,d,g)))}function TT(c,d,f){var g=Ii();hu(c,d,f,g)}function hu(c,d,f,g){var _={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(mf(c))xT(d,_);else{var T=c.alternate;if(c.lanes===0&&(T===null||T.lanes===0)&&(T=d.lastRenderedReducer,T!==null))try{var E=d.lastRenderedState,R=T(E,f);if(_.hasEagerState=!0,_.eagerState=R,ki(R,E))return Yh(c,d,_,0),Dt===null&&Zh(),!1}catch{}finally{}if(f=_b(c,d,_,g),f!==null)return Pi(f,c,g),kT(f,d,g),!0}return!1}function tw(c,d,f,g){if(g={lane:2,revertLane:Vw(),action:g,hasEagerState:!1,eagerState:null,next:null},mf(c)){if(d)throw Error(n(479))}else d=_b(c,f,g,2),d!==null&&Pi(d,c,2)}function mf(c){var d=c.alternate;return c===Je||d!==null&&d===Je}function xT(c,d){Tl=lf=!0;var f=c.pending;f===null?d.next=d:(d.next=f.next,f.next=d),c.pending=d}function kT(c,d,f){if((f&4194048)!==0){var g=d.lanes;g&=c.pendingLanes,f|=g,d.lanes=f,V1(c,f)}}var gf={readContext:Un,use:uf,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},ET={readContext:Un,use:uf,useCallback:function(c,d){return ci().memoizedState=[c,d===void 0?null:d],c},useContext:Un,useEffect:cT,useImperativeHandle:function(c,d,f){f=f!=null?f.concat([c]):null,ff(4194308,4,fT.bind(null,d,c),f)},useLayoutEffect:function(c,d){return ff(4194308,4,c,d)},useInsertionEffect:function(c,d){ff(4,2,c,d)},useMemo:function(c,d){var f=ci();d=d===void 0?null:d;var g=c();if(ia){xt(!0);try{c()}finally{xt(!1)}}return f.memoizedState=[g,d],g},useReducer:function(c,d,f){var g=ci();if(f!==void 0){var _=f(d);if(ia){xt(!0);try{f(d)}finally{xt(!1)}}}else _=d;return g.memoizedState=g.baseState=_,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:_},g.queue=c,c=c.dispatch=HL.bind(null,Je,c),[g.memoizedState,c]},useRef:function(c){var d=ci();return c={current:c},d.memoizedState=c},useState:function(c){c=Zb(c);var d=c.queue,f=TT.bind(null,Je,d);return d.dispatch=f,[c.memoizedState,f]},useDebugValue:Jb,useDeferredValue:function(c,d){var f=ci();return Xb(f,c,d)},useTransition:function(){var c=Zb(!1);return c=wT.bind(null,Je,c.queue,!0,!1),ci().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,d,f){var g=Je,_=ci();if(mt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=d(),Dt===null)throw Error(n(349));(ot&124)!==0||jC(g,d,f)}_.memoizedState=f;var T={value:f,getSnapshot:d};return _.queue=T,cT(ZC.bind(null,g,T,c),[c]),g.flags|=2048,kl(9,hf(),KC.bind(null,g,T,f,d),null),f},useId:function(){var c=ci(),d=Dt.identifierPrefix;if(mt){var f=to,g=eo;f=(g&~(1<<32-jt(g)-1)).toString(32)+f,d="«"+d+"R"+f,f=cf++,0<f&&(d+="H"+f.toString(32)),d+="»"}else f=DL++,d="«"+d+"r"+f.toString(32)+"»";return c.memoizedState=d},useHostTransitionStatus:ew,useFormState:sT,useActionState:sT,useOptimistic:function(c){var d=ci();d.memoizedState=d.baseState=c;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=f,d=tw.bind(null,Je,!0,f),f.dispatch=d,[c,d]},useMemoCache:$b,useCacheRefresh:function(){return ci().memoizedState=zL.bind(null,Je)}},ST={readContext:Un,use:uf,useCallback:gT,useContext:Un,useEffect:uT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:hT,useMemo:pT,useReducer:df,useRef:lT,useState:function(){return df(so)},useDebugValue:Jb,useDeferredValue:function(c,d){var f=ln();return bT(f,kt.memoizedState,c,d)},useTransition:function(){var c=df(so)[0],d=ln().memoizedState;return[typeof c=="boolean"?c:uu(c),d]},useSyncExternalStore:$C,useId:vT,useHostTransitionStatus:ew,useFormState:oT,useActionState:oT,useOptimistic:function(c,d){var f=ln();return XC(f,kt,c,d)},useMemoCache:$b,useCacheRefresh:CT},WL={readContext:Un,use:uf,useCallback:gT,useContext:Un,useEffect:uT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:hT,useMemo:pT,useReducer:Kb,useRef:lT,useState:function(){return Kb(so)},useDebugValue:Jb,useDeferredValue:function(c,d){var f=ln();return kt===null?Xb(f,c,d):bT(f,kt.memoizedState,c,d)},useTransition:function(){var c=Kb(so)[0],d=ln().memoizedState;return[typeof c=="boolean"?c:uu(c),d]},useSyncExternalStore:$C,useId:vT,useHostTransitionStatus:ew,useFormState:aT,useActionState:aT,useOptimistic:function(c,d){var f=ln();return kt!==null?XC(f,kt,c,d):(f.baseState=c,[c,f.queue.dispatch])},useMemoCache:$b,useCacheRefresh:CT},El=null,fu=0;function pf(c){var d=fu;return fu+=1,El===null&&(El=[]),BC(El,c,d)}function mu(c,d){d=d.props.ref,c.ref=d!==void 0?d:null}function bf(c,d){throw d.$$typeof===m?Error(n(525)):(c=Object.prototype.toString.call(d),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)))}function AT(c){var d=c._init;return d(c._payload)}function RT(c){function d(z,B){if(c){var q=z.deletions;q===null?(z.deletions=[B],z.flags|=16):q.push(B)}}function f(z,B){if(!c)return null;for(;B!==null;)d(z,B),B=B.sibling;return null}function g(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function _(z,B){return z=Qs(z,B),z.index=0,z.sibling=null,z}function T(z,B,q){return z.index=q,c?(q=z.alternate,q!==null?(q=q.index,q<B?(z.flags|=67108866,B):q):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function E(z){return c&&z.alternate===null&&(z.flags|=67108866),z}function R(z,B,q,ie){return B===null||B.tag!==6?(B=Cb(q,z.mode,ie),B.return=z,B):(B=_(B,q),B.return=z,B)}function M(z,B,q,ie){var Te=q.type;return Te===C?ne(z,B,q.props.children,ie,q.key):B!==null&&(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===j&&AT(Te)===B.type)?(B=_(B,q.props),mu(B,q),B.return=z,B):(B=Xh(q.type,q.key,q.props,null,z.mode,ie),mu(B,q),B.return=z,B)}function G(z,B,q,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=Tb(q,z.mode,ie),B.return=z,B):(B=_(B,q.children||[]),B.return=z,B)}function ne(z,B,q,ie,Te){return B===null||B.tag!==7?(B=Zr(q,z.mode,ie,Te),B.return=z,B):(B=_(B,q),B.return=z,B)}function re(z,B,q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Cb(""+B,z.mode,q),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case p:return q=Xh(B.type,B.key,B.props,null,z.mode,q),mu(q,B),q.return=z,q;case v:return B=Tb(B,z.mode,q),B.return=z,B;case j:var ie=B._init;return B=ie(B._payload),re(z,B,q)}if(ke(B)||me(B))return B=Zr(B,z.mode,q,null),B.return=z,B;if(typeof B.then=="function")return re(z,pf(B),q);if(B.$$typeof===P)return re(z,nf(z,B),q);bf(z,B)}return null}function K(z,B,q,ie){var Te=B!==null?B.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Te!==null?null:R(z,B,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case p:return q.key===Te?M(z,B,q,ie):null;case v:return q.key===Te?G(z,B,q,ie):null;case j:return Te=q._init,q=Te(q._payload),K(z,B,q,ie)}if(ke(q)||me(q))return Te!==null?null:ne(z,B,q,ie,null);if(typeof q.then=="function")return K(z,B,pf(q),ie);if(q.$$typeof===P)return K(z,B,nf(z,q),ie);bf(z,q)}return null}function Y(z,B,q,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return z=z.get(q)||null,R(B,z,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case p:return z=z.get(ie.key===null?q:ie.key)||null,M(B,z,ie,Te);case v:return z=z.get(ie.key===null?q:ie.key)||null,G(B,z,ie,Te);case j:var Xe=ie._init;return ie=Xe(ie._payload),Y(z,B,q,ie,Te)}if(ke(ie)||me(ie))return z=z.get(q)||null,ne(B,z,ie,Te,null);if(typeof ie.then=="function")return Y(z,B,q,pf(ie),Te);if(ie.$$typeof===P)return Y(z,B,q,nf(B,ie),Te);bf(B,ie)}return null}function Le(z,B,q,ie){for(var Te=null,Xe=null,Re=B,Oe=B=0,Cn=null;Re!==null&&Oe<q.length;Oe++){Re.index>Oe?(Cn=Re,Re=null):Cn=Re.sibling;var dt=K(z,Re,q[Oe],ie);if(dt===null){Re===null&&(Re=Cn);break}c&&Re&&dt.alternate===null&&d(z,Re),B=T(dt,B,Oe),Xe===null?Te=dt:Xe.sibling=dt,Xe=dt,Re=Cn}if(Oe===q.length)return f(z,Re),mt&&Jr(z,Oe),Te;if(Re===null){for(;Oe<q.length;Oe++)Re=re(z,q[Oe],ie),Re!==null&&(B=T(Re,B,Oe),Xe===null?Te=Re:Xe.sibling=Re,Xe=Re);return mt&&Jr(z,Oe),Te}for(Re=g(Re);Oe<q.length;Oe++)Cn=Y(Re,z,Oe,q[Oe],ie),Cn!==null&&(c&&Cn.alternate!==null&&Re.delete(Cn.key===null?Oe:Cn.key),B=T(Cn,B,Oe),Xe===null?Te=Cn:Xe.sibling=Cn,Xe=Cn);return c&&Re.forEach(function(dr){return d(z,dr)}),mt&&Jr(z,Oe),Te}function Ve(z,B,q,ie){if(q==null)throw Error(n(151));for(var Te=null,Xe=null,Re=B,Oe=B=0,Cn=null,dt=q.next();Re!==null&&!dt.done;Oe++,dt=q.next()){Re.index>Oe?(Cn=Re,Re=null):Cn=Re.sibling;var dr=K(z,Re,dt.value,ie);if(dr===null){Re===null&&(Re=Cn);break}c&&Re&&dr.alternate===null&&d(z,Re),B=T(dr,B,Oe),Xe===null?Te=dr:Xe.sibling=dr,Xe=dr,Re=Cn}if(dt.done)return f(z,Re),mt&&Jr(z,Oe),Te;if(Re===null){for(;!dt.done;Oe++,dt=q.next())dt=re(z,dt.value,ie),dt!==null&&(B=T(dt,B,Oe),Xe===null?Te=dt:Xe.sibling=dt,Xe=dt);return mt&&Jr(z,Oe),Te}for(Re=g(Re);!dt.done;Oe++,dt=q.next())dt=Y(Re,z,Oe,dt.value,ie),dt!==null&&(c&&dt.alternate!==null&&Re.delete(dt.key===null?Oe:dt.key),B=T(dt,B,Oe),Xe===null?Te=dt:Xe.sibling=dt,Xe=dt);return c&&Re.forEach(function(qB){return d(z,qB)}),mt&&Jr(z,Oe),Te}function St(z,B,q,ie){if(typeof q=="object"&&q!==null&&q.type===C&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case p:e:{for(var Te=q.key;B!==null;){if(B.key===Te){if(Te=q.type,Te===C){if(B.tag===7){f(z,B.sibling),ie=_(B,q.props.children),ie.return=z,z=ie;break e}}else if(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===j&&AT(Te)===B.type){f(z,B.sibling),ie=_(B,q.props),mu(ie,q),ie.return=z,z=ie;break e}f(z,B);break}else d(z,B);B=B.sibling}q.type===C?(ie=Zr(q.props.children,z.mode,ie,q.key),ie.return=z,z=ie):(ie=Xh(q.type,q.key,q.props,null,z.mode,ie),mu(ie,q),ie.return=z,z=ie)}return E(z);case v:e:{for(Te=q.key;B!==null;){if(B.key===Te)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){f(z,B.sibling),ie=_(B,q.children||[]),ie.return=z,z=ie;break e}else{f(z,B);break}else d(z,B);B=B.sibling}ie=Tb(q,z.mode,ie),ie.return=z,z=ie}return E(z);case j:return Te=q._init,q=Te(q._payload),St(z,B,q,ie)}if(ke(q))return Le(z,B,q,ie);if(me(q)){if(Te=me(q),typeof Te!="function")throw Error(n(150));return q=Te.call(q),Ve(z,B,q,ie)}if(typeof q.then=="function")return St(z,B,pf(q),ie);if(q.$$typeof===P)return St(z,B,nf(z,q),ie);bf(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,B!==null&&B.tag===6?(f(z,B.sibling),ie=_(B,q),ie.return=z,z=ie):(f(z,B),ie=Cb(q,z.mode,ie),ie.return=z,z=ie),E(z)):f(z,B)}return function(z,B,q,ie){try{fu=0;var Te=St(z,B,q,ie);return El=null,Te}catch(Re){if(Re===su||Re===of)throw Re;var Xe=Ei(29,Re,null,z.mode);return Xe.lanes=ie,Xe.return=z,Xe}finally{}}}var Sl=RT(!0),IT=RT(!1),Gi=se(null),As=null;function Yo(c){var d=c.alternate;de(fn,fn.current&1),de(Gi,c),As===null&&(d===null||Cl.current!==null||d.memoizedState!==null)&&(As=c)}function PT(c){if(c.tag===22){if(de(fn,fn.current),de(Gi,c),As===null){var d=c.alternate;d!==null&&d.memoizedState!==null&&(As=c)}}else Jo()}function Jo(){de(fn,fn.current),de(Gi,Gi.current)}function oo(c){pe(Gi),As===c&&(As=null),pe(fn)}var fn=se(0);function wf(c){for(var d=c;d!==null;){if(d.tag===13){var f=d.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Gw(f)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function nw(c,d,f,g){d=c.memoizedState,f=f(g,d),f=f==null?d:h({},d,f),c.memoizedState=f,c.lanes===0&&(c.updateQueue.baseState=f)}var iw={enqueueSetState:function(c,d,f){c=c._reactInternals;var g=Ii(),_=jo(g);_.payload=d,f!=null&&(_.callback=f),d=Ko(c,_,g),d!==null&&(Pi(d,c,g),ru(d,c,g))},enqueueReplaceState:function(c,d,f){c=c._reactInternals;var g=Ii(),_=jo(g);_.tag=1,_.payload=d,f!=null&&(_.callback=f),d=Ko(c,_,g),d!==null&&(Pi(d,c,g),ru(d,c,g))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var f=Ii(),g=jo(f);g.tag=2,d!=null&&(g.callback=d),d=Ko(c,g,f),d!==null&&(Pi(d,c,f),ru(d,c,f))}};function MT(c,d,f,g,_,T,E){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(g,T,E):d.prototype&&d.prototype.isPureReactComponent?!Yc(f,g)||!Yc(_,T):!0}function VT(c,d,f,g){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(f,g),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(f,g),d.state!==c&&iw.enqueueReplaceState(d,d.state,null)}function sa(c,d){var f=d;if("ref"in d){f={};for(var g in d)g!=="ref"&&(f[g]=d[g])}if(c=c.defaultProps){f===d&&(f=h({},f));for(var _ in c)f[_]===void 0&&(f[_]=c[_])}return f}var yf=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function NT(c){yf(c)}function OT(c){console.error(c)}function DT(c){yf(c)}function _f(c,d){try{var f=c.onUncaughtError;f(d.value,{componentStack:d.stack})}catch(g){setTimeout(function(){throw g})}}function LT(c,d,f){try{var g=c.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function sw(c,d,f){return f=jo(f),f.tag=3,f.payload={element:null},f.callback=function(){_f(c,d)},f}function BT(c){return c=jo(c),c.tag=3,c}function FT(c,d,f,g){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var T=g.value;c.payload=function(){return _(T)},c.callback=function(){LT(d,f,g)}}var E=f.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(c.callback=function(){LT(d,f,g),typeof _!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var R=g.stack;this.componentDidCatch(g.value,{componentStack:R!==null?R:""})})}function qL(c,d,f,g,_){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(d=f.alternate,d!==null&&tu(d,f,_,!0),f=Gi.current,f!==null){switch(f.tag){case 13:return As===null?Aw():f.alternate===null&&Zt===0&&(Zt=3),f.flags&=-257,f.flags|=65536,f.lanes=_,g===Vb?f.flags|=16384:(d=f.updateQueue,d===null?f.updateQueue=new Set([g]):d.add(g),Iw(c,g,_)),!1;case 22:return f.flags|=65536,g===Vb?f.flags|=16384:(d=f.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=d):(f=d.retryQueue,f===null?d.retryQueue=new Set([g]):f.add(g)),Iw(c,g,_)),!1}throw Error(n(435,f.tag))}return Iw(c,g,_),Aw(),!1}if(mt)return d=Gi.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=_,g!==Eb&&(c=Error(n(422),{cause:g}),eu(zi(c,f)))):(g!==Eb&&(d=Error(n(423),{cause:g}),eu(zi(d,f))),c=c.current.alternate,c.flags|=65536,_&=-_,c.lanes|=_,g=zi(g,f),_=sw(c.stateNode,g,_),Db(c,_),Zt!==4&&(Zt=2)),!1;var T=Error(n(520),{cause:g});if(T=zi(T,f),vu===null?vu=[T]:vu.push(T),Zt!==4&&(Zt=2),d===null)return!0;g=zi(g,f),f=d;do{switch(f.tag){case 3:return f.flags|=65536,c=_&-_,f.lanes|=c,c=sw(f.stateNode,g,c),Db(f,c),!1;case 1:if(d=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ir===null||!ir.has(T))))return f.flags|=65536,_&=-_,f.lanes|=_,_=BT(_),FT(_,c,f,g),Db(f,_),!1}f=f.return}while(f!==null);return!1}var UT=Error(n(461)),_n=!1;function In(c,d,f,g){d.child=c===null?IT(d,null,f,g):Sl(d,c.child,f,g)}function zT(c,d,f,g,_){f=f.render;var T=d.ref;if("ref"in g){var E={};for(var R in g)R!=="ref"&&(E[R]=g[R])}else E=g;return ta(d),g=zb(c,d,f,E,T,_),R=Hb(),c!==null&&!_n?(Wb(c,d,_),ro(c,d,_)):(mt&&R&&xb(d),d.flags|=1,In(c,d,g,_),d.child)}function HT(c,d,f,g,_){if(c===null){var T=f.type;return typeof T=="function"&&!vb(T)&&T.defaultProps===void 0&&f.compare===null?(d.tag=15,d.type=T,WT(c,d,T,g,_)):(c=Xh(f.type,null,g,d,d.mode,_),c.ref=d.ref,c.return=d,d.child=c)}if(T=c.child,!hw(c,_)){var E=T.memoizedProps;if(f=f.compare,f=f!==null?f:Yc,f(E,g)&&c.ref===d.ref)return ro(c,d,_)}return d.flags|=1,c=Qs(T,g),c.ref=d.ref,c.return=d,d.child=c}function WT(c,d,f,g,_){if(c!==null){var T=c.memoizedProps;if(Yc(T,g)&&c.ref===d.ref)if(_n=!1,d.pendingProps=g=T,hw(c,_))(c.flags&131072)!==0&&(_n=!0);else return d.lanes=c.lanes,ro(c,d,_)}return ow(c,d,f,g,_)}function qT(c,d,f){var g=d.pendingProps,_=g.children,T=c!==null?c.memoizedState:null;if(g.mode==="hidden"){if((d.flags&128)!==0){if(g=T!==null?T.baseLanes|f:f,c!==null){for(_=d.child=c.child,T=0;_!==null;)T=T|_.lanes|_.childLanes,_=_.sibling;d.childLanes=T&~g}else d.childLanes=0,d.child=null;return GT(c,d,g,f)}if((f&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},c!==null&&sf(d,T!==null?T.cachePool:null),T!==null?WC(d,T):Bb(),PT(d);else return d.lanes=d.childLanes=536870912,GT(c,d,T!==null?T.baseLanes|f:f,f)}else T!==null?(sf(d,T.cachePool),WC(d,T),Jo(),d.memoizedState=null):(c!==null&&sf(d,null),Bb(),Jo());return In(c,d,_,f),d.child}function GT(c,d,f,g){var _=Mb();return _=_===null?null:{parent:hn._currentValue,pool:_},d.memoizedState={baseLanes:f,cachePool:_},c!==null&&sf(d,null),Bb(),PT(d),c!==null&&tu(c,d,g,!0),null}function vf(c,d){var f=d.ref;if(f===null)c!==null&&c.ref!==null&&(d.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(c===null||c.ref!==f)&&(d.flags|=4194816)}}function ow(c,d,f,g,_){return ta(d),f=zb(c,d,f,g,void 0,_),g=Hb(),c!==null&&!_n?(Wb(c,d,_),ro(c,d,_)):(mt&&g&&xb(d),d.flags|=1,In(c,d,f,_),d.child)}function $T(c,d,f,g,_,T){return ta(d),d.updateQueue=null,f=GC(d,g,f,_),qC(c),g=Hb(),c!==null&&!_n?(Wb(c,d,T),ro(c,d,T)):(mt&&g&&xb(d),d.flags|=1,In(c,d,f,T),d.child)}function jT(c,d,f,g,_){if(ta(d),d.stateNode===null){var T=bl,E=f.contextType;typeof E=="object"&&E!==null&&(T=Un(E)),T=new f(g,T),d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=iw,d.stateNode=T,T._reactInternals=d,T=d.stateNode,T.props=g,T.state=d.memoizedState,T.refs={},Nb(d),E=f.contextType,T.context=typeof E=="object"&&E!==null?Un(E):bl,T.state=d.memoizedState,E=f.getDerivedStateFromProps,typeof E=="function"&&(nw(d,f,E,g),T.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(E=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),E!==T.state&&iw.enqueueReplaceState(T,T.state,null),lu(d,g,T,_),au(),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308),g=!0}else if(c===null){T=d.stateNode;var R=d.memoizedProps,M=sa(f,R);T.props=M;var G=T.context,ne=f.contextType;E=bl,typeof ne=="object"&&ne!==null&&(E=Un(ne));var re=f.getDerivedStateFromProps;ne=typeof re=="function"||typeof T.getSnapshotBeforeUpdate=="function",R=d.pendingProps!==R,ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R||G!==E)&&VT(d,T,g,E),$o=!1;var K=d.memoizedState;T.state=K,lu(d,g,T,_),au(),G=d.memoizedState,R||K!==G||$o?(typeof re=="function"&&(nw(d,f,re,g),G=d.memoizedState),(M=$o||MT(d,f,M,g,K,G,E))?(ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(d.flags|=4194308)):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=g,d.memoizedState=G),T.props=g,T.state=G,T.context=E,g=M):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),g=!1)}else{T=d.stateNode,Ob(c,d),E=d.memoizedProps,ne=sa(f,E),T.props=ne,re=d.pendingProps,K=T.context,G=f.contextType,M=bl,typeof G=="object"&&G!==null&&(M=Un(G)),R=f.getDerivedStateFromProps,(G=typeof R=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(E!==re||K!==M)&&VT(d,T,g,M),$o=!1,K=d.memoizedState,T.state=K,lu(d,g,T,_),au();var Y=d.memoizedState;E!==re||K!==Y||$o||c!==null&&c.dependencies!==null&&tf(c.dependencies)?(typeof R=="function"&&(nw(d,f,R,g),Y=d.memoizedState),(ne=$o||MT(d,f,ne,g,K,Y,M)||c!==null&&c.dependencies!==null&&tf(c.dependencies))?(G||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,Y,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,Y,M)),typeof T.componentDidUpdate=="function"&&(d.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof T.componentDidUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=1024),d.memoizedProps=g,d.memoizedState=Y),T.props=g,T.state=Y,T.context=M,g=ne):(typeof T.componentDidUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=1024),g=!1)}return T=g,vf(c,d),g=(d.flags&128)!==0,T||g?(T=d.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:T.render(),d.flags|=1,c!==null&&g?(d.child=Sl(d,c.child,null,_),d.child=Sl(d,null,f,_)):In(c,d,f,_),d.memoizedState=T.state,c=d.child):c=ro(c,d,_),c}function KT(c,d,f,g){return Qc(),d.flags|=256,In(c,d,f,g),d.child}var rw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function aw(c){return{baseLanes:c,cachePool:OC()}}function lw(c,d,f){return c=c!==null?c.childLanes&~f:0,d&&(c|=$i),c}function ZT(c,d,f){var g=d.pendingProps,_=!1,T=(d.flags&128)!==0,E;if((E=T)||(E=c!==null&&c.memoizedState===null?!1:(fn.current&2)!==0),E&&(_=!0,d.flags&=-129),E=(d.flags&32)!==0,d.flags&=-33,c===null){if(mt){if(_?Yo(d):Jo(),mt){var R=Kt,M;if(M=R){e:{for(M=R,R=Ss;M.nodeType!==8;){if(!R){R=null;break e}if(M=hs(M.nextSibling),M===null){R=null;break e}}R=M}R!==null?(d.memoizedState={dehydrated:R,treeContext:Yr!==null?{id:eo,overflow:to}:null,retryLane:536870912,hydrationErrors:null},M=Ei(18,null,null,0),M.stateNode=R,M.return=d,d.child=M,Xn=d,Kt=null,M=!0):M=!1}M||Qr(d)}if(R=d.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return Gw(R)?d.lanes=32:d.lanes=536870912,null;oo(d)}return R=g.children,g=g.fallback,_?(Jo(),_=d.mode,R=Cf({mode:"hidden",children:R},_),g=Zr(g,_,f,null),R.return=d,g.return=d,R.sibling=g,d.child=R,_=d.child,_.memoizedState=aw(f),_.childLanes=lw(c,E,f),d.memoizedState=rw,g):(Yo(d),cw(d,R))}if(M=c.memoizedState,M!==null&&(R=M.dehydrated,R!==null)){if(T)d.flags&256?(Yo(d),d.flags&=-257,d=uw(c,d,f)):d.memoizedState!==null?(Jo(),d.child=c.child,d.flags|=128,d=null):(Jo(),_=g.fallback,R=d.mode,g=Cf({mode:"visible",children:g.children},R),_=Zr(_,R,f,null),_.flags|=2,g.return=d,_.return=d,g.sibling=_,d.child=g,Sl(d,c.child,null,f),g=d.child,g.memoizedState=aw(f),g.childLanes=lw(c,E,f),d.memoizedState=rw,d=_);else if(Yo(d),Gw(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var G=E.dgst;E=G,g=Error(n(419)),g.stack="",g.digest=E,eu({value:g,source:null,stack:null}),d=uw(c,d,f)}else if(_n||tu(c,d,f,!1),E=(f&c.childLanes)!==0,_n||E){if(E=Dt,E!==null&&(g=f&-f,g=(g&42)!==0?1:$p(g),g=(g&(E.suspendedLanes|f))!==0?0:g,g!==0&&g!==M.retryLane))throw M.retryLane=g,pl(c,g),Pi(E,c,g),UT;R.data==="$?"||Aw(),d=uw(c,d,f)}else R.data==="$?"?(d.flags|=192,d.child=c.child,d=null):(c=M.treeContext,Kt=hs(R.nextSibling),Xn=d,mt=!0,Xr=null,Ss=!1,c!==null&&(Wi[qi++]=eo,Wi[qi++]=to,Wi[qi++]=Yr,eo=c.id,to=c.overflow,Yr=d),d=cw(d,g.children),d.flags|=4096);return d}return _?(Jo(),_=g.fallback,R=d.mode,M=c.child,G=M.sibling,g=Qs(M,{mode:"hidden",children:g.children}),g.subtreeFlags=M.subtreeFlags&65011712,G!==null?_=Qs(G,_):(_=Zr(_,R,f,null),_.flags|=2),_.return=d,g.return=d,g.sibling=_,d.child=g,g=_,_=d.child,R=c.child.memoizedState,R===null?R=aw(f):(M=R.cachePool,M!==null?(G=hn._currentValue,M=M.parent!==G?{parent:G,pool:G}:M):M=OC(),R={baseLanes:R.baseLanes|f,cachePool:M}),_.memoizedState=R,_.childLanes=lw(c,E,f),d.memoizedState=rw,g):(Yo(d),f=c.child,c=f.sibling,f=Qs(f,{mode:"visible",children:g.children}),f.return=d,f.sibling=null,c!==null&&(E=d.deletions,E===null?(d.deletions=[c],d.flags|=16):E.push(c)),d.child=f,d.memoizedState=null,f)}function cw(c,d){return d=Cf({mode:"visible",children:d},c.mode),d.return=c,c.child=d}function Cf(c,d){return c=Ei(22,c,null,d),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function uw(c,d,f){return Sl(d,c.child,null,f),c=cw(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function YT(c,d,f){c.lanes|=d;var g=c.alternate;g!==null&&(g.lanes|=d),Ab(c.return,d,f)}function dw(c,d,f,g,_){var T=c.memoizedState;T===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:_}:(T.isBackwards=d,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=f,T.tailMode=_)}function JT(c,d,f){var g=d.pendingProps,_=g.revealOrder,T=g.tail;if(In(c,d,g.children,f),g=fn.current,(g&2)!==0)g=g&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&YT(c,f,d);else if(c.tag===19)YT(c,f,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}g&=1}switch(de(fn,g),_){case"forwards":for(f=d.child,_=null;f!==null;)c=f.alternate,c!==null&&wf(c)===null&&(_=f),f=f.sibling;f=_,f===null?(_=d.child,d.child=null):(_=f.sibling,f.sibling=null),dw(d,!1,_,f,T);break;case"backwards":for(f=null,_=d.child,d.child=null;_!==null;){if(c=_.alternate,c!==null&&wf(c)===null){d.child=_;break}c=_.sibling,_.sibling=f,f=_,_=c}dw(d,!0,f,null,T);break;case"together":dw(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ro(c,d,f){if(c!==null&&(d.dependencies=c.dependencies),nr|=d.lanes,(f&d.childLanes)===0)if(c!==null){if(tu(c,d,f,!1),(f&d.childLanes)===0)return null}else return null;if(c!==null&&d.child!==c.child)throw Error(n(153));if(d.child!==null){for(c=d.child,f=Qs(c,c.pendingProps),d.child=f,f.return=d;c.sibling!==null;)c=c.sibling,f=f.sibling=Qs(c,c.pendingProps),f.return=d;f.sibling=null}return d.child}function hw(c,d){return(c.lanes&d)!==0?!0:(c=c.dependencies,!!(c!==null&&tf(c)))}function GL(c,d,f){switch(d.tag){case 3:be(d,d.stateNode.containerInfo),Go(d,hn,c.memoizedState.cache),Qc();break;case 27:case 5:we(d);break;case 4:be(d,d.stateNode.containerInfo);break;case 10:Go(d,d.type,d.memoizedProps.value);break;case 13:var g=d.memoizedState;if(g!==null)return g.dehydrated!==null?(Yo(d),d.flags|=128,null):(f&d.child.childLanes)!==0?ZT(c,d,f):(Yo(d),c=ro(c,d,f),c!==null?c.sibling:null);Yo(d);break;case 19:var _=(c.flags&128)!==0;if(g=(f&d.childLanes)!==0,g||(tu(c,d,f,!1),g=(f&d.childLanes)!==0),_){if(g)return JT(c,d,f);d.flags|=128}if(_=d.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),de(fn,fn.current),g)break;return null;case 22:case 23:return d.lanes=0,qT(c,d,f);case 24:Go(d,hn,c.memoizedState.cache)}return ro(c,d,f)}function XT(c,d,f){if(c!==null)if(c.memoizedProps!==d.pendingProps)_n=!0;else{if(!hw(c,f)&&(d.flags&128)===0)return _n=!1,GL(c,d,f);_n=(c.flags&131072)!==0}else _n=!1,mt&&(d.flags&1048576)!==0&&AC(d,ef,d.index);switch(d.lanes=0,d.tag){case 16:e:{c=d.pendingProps;var g=d.elementType,_=g._init;if(g=_(g._payload),d.type=g,typeof g=="function")vb(g)?(c=sa(g,c),d.tag=1,d=jT(null,d,g,c,f)):(d.tag=0,d=ow(null,d,g,c,f));else{if(g!=null){if(_=g.$$typeof,_===L){d.tag=11,d=zT(null,d,g,c,f);break e}else if(_===F){d.tag=14,d=HT(null,d,g,c,f);break e}}throw d=ze(g)||g,Error(n(306,d,""))}}return d;case 0:return ow(c,d,d.type,d.pendingProps,f);case 1:return g=d.type,_=sa(g,d.pendingProps),jT(c,d,g,_,f);case 3:e:{if(be(d,d.stateNode.containerInfo),c===null)throw Error(n(387));g=d.pendingProps;var T=d.memoizedState;_=T.element,Ob(c,d),lu(d,g,null,f);var E=d.memoizedState;if(g=E.cache,Go(d,hn,g),g!==T.cache&&Rb(d,[hn],f,!0),au(),g=E.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:E.cache},d.updateQueue.baseState=T,d.memoizedState=T,d.flags&256){d=KT(c,d,g,f);break e}else if(g!==_){_=zi(Error(n(424)),d),eu(_),d=KT(c,d,g,f);break e}else{switch(c=d.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Kt=hs(c.firstChild),Xn=d,mt=!0,Xr=null,Ss=!0,f=IT(d,null,g,f),d.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Qc(),g===_){d=ro(c,d,f);break e}In(c,d,g,f)}d=d.child}return d;case 26:return vf(c,d),c===null?(f=nk(d.type,null,d.pendingProps,null))?d.memoizedState=f:mt||(f=d.type,c=d.pendingProps,g=Df(Q.current).createElement(f),g[Fn]=d,g[ai]=c,Mn(g,f,c),yn(g),d.stateNode=g):d.memoizedState=nk(d.type,c.memoizedProps,d.pendingProps,c.memoizedState),null;case 27:return we(d),c===null&&mt&&(g=d.stateNode=Qx(d.type,d.pendingProps,Q.current),Xn=d,Ss=!0,_=Kt,rr(d.type)?($w=_,Kt=hs(g.firstChild)):Kt=_),In(c,d,d.pendingProps.children,f),vf(c,d),c===null&&(d.flags|=4194304),d.child;case 5:return c===null&&mt&&((_=g=Kt)&&(g=yB(g,d.type,d.pendingProps,Ss),g!==null?(d.stateNode=g,Xn=d,Kt=hs(g.firstChild),Ss=!1,_=!0):_=!1),_||Qr(d)),we(d),_=d.type,T=d.pendingProps,E=c!==null?c.memoizedProps:null,g=T.children,Hw(_,T)?g=null:E!==null&&Hw(_,E)&&(d.flags|=32),d.memoizedState!==null&&(_=zb(c,d,LL,null,null,f),Iu._currentValue=_),vf(c,d),In(c,d,g,f),d.child;case 6:return c===null&&mt&&((c=f=Kt)&&(f=_B(f,d.pendingProps,Ss),f!==null?(d.stateNode=f,Xn=d,Kt=null,c=!0):c=!1),c||Qr(d)),null;case 13:return ZT(c,d,f);case 4:return be(d,d.stateNode.containerInfo),g=d.pendingProps,c===null?d.child=Sl(d,null,g,f):In(c,d,g,f),d.child;case 11:return zT(c,d,d.type,d.pendingProps,f);case 7:return In(c,d,d.pendingProps,f),d.child;case 8:return In(c,d,d.pendingProps.children,f),d.child;case 12:return In(c,d,d.pendingProps.children,f),d.child;case 10:return g=d.pendingProps,Go(d,d.type,g.value),In(c,d,g.children,f),d.child;case 9:return _=d.type._context,g=d.pendingProps.children,ta(d),_=Un(_),g=g(_),d.flags|=1,In(c,d,g,f),d.child;case 14:return HT(c,d,d.type,d.pendingProps,f);case 15:return WT(c,d,d.type,d.pendingProps,f);case 19:return JT(c,d,f);case 31:return g=d.pendingProps,f=d.mode,g={mode:g.mode,children:g.children},c===null?(f=Cf(g,f),f.ref=d.ref,d.child=f,f.return=d,d=f):(f=Qs(c.child,g),f.ref=d.ref,d.child=f,f.return=d,d=f),d;case 22:return qT(c,d,f);case 24:return ta(d),g=Un(hn),c===null?(_=Mb(),_===null&&(_=Dt,T=Ib(),_.pooledCache=T,T.refCount++,T!==null&&(_.pooledCacheLanes|=f),_=T),d.memoizedState={parent:g,cache:_},Nb(d),Go(d,hn,_)):((c.lanes&f)!==0&&(Ob(c,d),lu(d,null,null,f),au()),_=c.memoizedState,T=d.memoizedState,_.parent!==g?(_={parent:g,cache:g},d.memoizedState=_,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=_),Go(d,hn,g)):(g=T.cache,Go(d,hn,g),g!==_.cache&&Rb(d,[hn],f,!0))),In(c,d,d.pendingProps.children,f),d.child;case 29:throw d.pendingProps}throw Error(n(156,d.tag))}function ao(c){c.flags|=4}function QT(c,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!ak(d)){if(d=Gi.current,d!==null&&((ot&4194048)===ot?As!==null:(ot&62914560)!==ot&&(ot&536870912)===0||d!==As))throw ou=Vb,DC;c.flags|=8192}}function Tf(c,d){d!==null&&(c.flags|=4),c.flags&16384&&(d=c.tag!==22?P1():536870912,c.lanes|=d,Pl|=d)}function gu(c,d){if(!mt)switch(c.tailMode){case"hidden":d=c.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?c.tail=null:f.sibling=null;break;case"collapsed":f=c.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:g.sibling=null}}function Ht(c){var d=c.alternate!==null&&c.alternate.child===c.child,f=0,g=0;if(d)for(var _=c.child;_!==null;)f|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=c,_=_.sibling;else for(_=c.child;_!==null;)f|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=c,_=_.sibling;return c.subtreeFlags|=g,c.childLanes=f,d}function $L(c,d,f){var g=d.pendingProps;switch(kb(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(d),null;case 1:return Ht(d),null;case 3:return f=d.stateNode,g=null,c!==null&&(g=c.memoizedState.cache),d.memoizedState.cache!==g&&(d.flags|=2048),io(hn),Ce(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(c===null||c.child===null)&&(Xc(d)?ao(d):c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,PC())),Ht(d),null;case 26:return f=d.memoizedState,c===null?(ao(d),f!==null?(Ht(d),QT(d,f)):(Ht(d),d.flags&=-16777217)):f?f!==c.memoizedState?(ao(d),Ht(d),QT(d,f)):(Ht(d),d.flags&=-16777217):(c.memoizedProps!==g&&ao(d),Ht(d),d.flags&=-16777217),null;case 27:Me(d),f=Q.current;var _=d.type;if(c!==null&&d.stateNode!=null)c.memoizedProps!==g&&ao(d);else{if(!g){if(d.stateNode===null)throw Error(n(166));return Ht(d),null}c=$.current,Xc(d)?RC(d):(c=Qx(_,g,f),d.stateNode=c,ao(d))}return Ht(d),null;case 5:if(Me(d),f=d.type,c!==null&&d.stateNode!=null)c.memoizedProps!==g&&ao(d);else{if(!g){if(d.stateNode===null)throw Error(n(166));return Ht(d),null}if(c=$.current,Xc(d))RC(d);else{switch(_=Df(Q.current),c){case 1:c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":c=_.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof g.is=="string"?_.createElement("select",{is:g.is}):_.createElement("select"),g.multiple?c.multiple=!0:g.size&&(c.size=g.size);break;default:c=typeof g.is=="string"?_.createElement(f,{is:g.is}):_.createElement(f)}}c[Fn]=d,c[ai]=g;e:for(_=d.child;_!==null;){if(_.tag===5||_.tag===6)c.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break e;for(;_.sibling===null;){if(_.return===null||_.return===d)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}d.stateNode=c;e:switch(Mn(c,f,g),f){case"button":case"input":case"select":case"textarea":c=!!g.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ao(d)}}return Ht(d),d.flags&=-16777217,null;case 6:if(c&&d.stateNode!=null)c.memoizedProps!==g&&ao(d);else{if(typeof g!="string"&&d.stateNode===null)throw Error(n(166));if(c=Q.current,Xc(d)){if(c=d.stateNode,f=d.memoizedProps,g=null,_=Xn,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}c[Fn]=d,c=!!(c.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||$x(c.nodeValue,f)),c||Qr(d)}else c=Df(c).createTextNode(g),c[Fn]=d,d.stateNode=c}return Ht(d),null;case 13:if(g=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(_=Xc(d),g!==null&&g.dehydrated!==null){if(c===null){if(!_)throw Error(n(318));if(_=d.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Fn]=d}else Qc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ht(d),_=!1}else _=PC(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=_),_=!0;if(!_)return d.flags&256?(oo(d),d):(oo(d),null)}if(oo(d),(d.flags&128)!==0)return d.lanes=f,d;if(f=g!==null,c=c!==null&&c.memoizedState!==null,f){g=d.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool);var T=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==_&&(g.flags|=2048)}return f!==c&&f&&(d.child.flags|=8192),Tf(d,d.updateQueue),Ht(d),null;case 4:return Ce(),c===null&&Lw(d.stateNode.containerInfo),Ht(d),null;case 10:return io(d.type),Ht(d),null;case 19:if(pe(fn),_=d.memoizedState,_===null)return Ht(d),null;if(g=(d.flags&128)!==0,T=_.rendering,T===null)if(g)gu(_,!1);else{if(Zt!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(T=wf(c),T!==null){for(d.flags|=128,gu(_,!1),c=T.updateQueue,d.updateQueue=c,Tf(d,c),d.subtreeFlags=0,c=f,f=d.child;f!==null;)SC(f,c),f=f.sibling;return de(fn,fn.current&1|2),d.child}c=c.sibling}_.tail!==null&&He()>Ef&&(d.flags|=128,g=!0,gu(_,!1),d.lanes=4194304)}else{if(!g)if(c=wf(T),c!==null){if(d.flags|=128,g=!0,c=c.updateQueue,d.updateQueue=c,Tf(d,c),gu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!mt)return Ht(d),null}else 2*He()-_.renderingStartTime>Ef&&f!==536870912&&(d.flags|=128,g=!0,gu(_,!1),d.lanes=4194304);_.isBackwards?(T.sibling=d.child,d.child=T):(c=_.last,c!==null?c.sibling=T:d.child=T,_.last=T)}return _.tail!==null?(d=_.tail,_.rendering=d,_.tail=d.sibling,_.renderingStartTime=He(),d.sibling=null,c=fn.current,de(fn,g?c&1|2:c&1),d):(Ht(d),null);case 22:case 23:return oo(d),Fb(),g=d.memoizedState!==null,c!==null?c.memoizedState!==null!==g&&(d.flags|=8192):g&&(d.flags|=8192),g?(f&536870912)!==0&&(d.flags&128)===0&&(Ht(d),d.subtreeFlags&6&&(d.flags|=8192)):Ht(d),f=d.updateQueue,f!==null&&Tf(d,f.retryQueue),f=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),g=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==f&&(d.flags|=2048),c!==null&&pe(na),null;case 24:return f=null,c!==null&&(f=c.memoizedState.cache),d.memoizedState.cache!==f&&(d.flags|=2048),io(hn),Ht(d),null;case 25:return null;case 30:return null}throw Error(n(156,d.tag))}function jL(c,d){switch(kb(d),d.tag){case 1:return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return io(hn),Ce(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 26:case 27:case 5:return Me(d),null;case 13:if(oo(d),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Qc()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return pe(fn),null;case 4:return Ce(),null;case 10:return io(d.type),null;case 22:case 23:return oo(d),Fb(),c!==null&&pe(na),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 24:return io(hn),null;case 25:return null;default:return null}}function ex(c,d){switch(kb(d),d.tag){case 3:io(hn),Ce();break;case 26:case 27:case 5:Me(d);break;case 4:Ce();break;case 13:oo(d);break;case 19:pe(fn);break;case 10:io(d.type);break;case 22:case 23:oo(d),Fb(),c!==null&&pe(na);break;case 24:io(hn)}}function pu(c,d){try{var f=d.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var _=g.next;f=_;do{if((f.tag&c)===c){g=void 0;var T=f.create,E=f.inst;g=T(),E.destroy=g}f=f.next}while(f!==_)}}catch(R){Mt(d,d.return,R)}}function Xo(c,d,f){try{var g=d.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var T=_.next;g=T;do{if((g.tag&c)===c){var E=g.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,_=d;var M=f,G=R;try{G()}catch(ne){Mt(_,M,ne)}}}g=g.next}while(g!==T)}}catch(ne){Mt(d,d.return,ne)}}function tx(c){var d=c.updateQueue;if(d!==null){var f=c.stateNode;try{HC(d,f)}catch(g){Mt(c,c.return,g)}}}function nx(c,d,f){f.props=sa(c.type,c.memoizedProps),f.state=c.memoizedState;try{f.componentWillUnmount()}catch(g){Mt(c,d,g)}}function bu(c,d){try{var f=c.ref;if(f!==null){switch(c.tag){case 26:case 27:case 5:var g=c.stateNode;break;case 30:g=c.stateNode;break;default:g=c.stateNode}typeof f=="function"?c.refCleanup=f(g):f.current=g}}catch(_){Mt(c,d,_)}}function Rs(c,d){var f=c.ref,g=c.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(_){Mt(c,d,_)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Mt(c,d,_)}else f.current=null}function ix(c){var d=c.type,f=c.memoizedProps,g=c.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(_){Mt(c,c.return,_)}}function fw(c,d,f){try{var g=c.stateNode;mB(g,c.type,f,d),g[ai]=d}catch(_){Mt(c,c.return,_)}}function sx(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&rr(c.type)||c.tag===4}function mw(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||sx(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&rr(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function gw(c,d,f){var g=c.tag;if(g===5||g===6)c=c.stateNode,d?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(c,d):(d=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,d.appendChild(c),f=f._reactRootContainer,f!=null||d.onclick!==null||(d.onclick=Of));else if(g!==4&&(g===27&&rr(c.type)&&(f=c.stateNode,d=null),c=c.child,c!==null))for(gw(c,d,f),c=c.sibling;c!==null;)gw(c,d,f),c=c.sibling}function xf(c,d,f){var g=c.tag;if(g===5||g===6)c=c.stateNode,d?f.insertBefore(c,d):f.appendChild(c);else if(g!==4&&(g===27&&rr(c.type)&&(f=c.stateNode),c=c.child,c!==null))for(xf(c,d,f),c=c.sibling;c!==null;)xf(c,d,f),c=c.sibling}function ox(c){var d=c.stateNode,f=c.memoizedProps;try{for(var g=c.type,_=d.attributes;_.length;)d.removeAttributeNode(_[0]);Mn(d,g,f),d[Fn]=c,d[ai]=f}catch(T){Mt(c,c.return,T)}}var lo=!1,nn=!1,pw=!1,rx=typeof WeakSet=="function"?WeakSet:Set,vn=null;function KL(c,d){if(c=c.containerInfo,Uw=Hf,c=bC(c),mb(c)){if("selectionStart"in c)var f={start:c.selectionStart,end:c.selectionEnd};else e:{f=(f=c.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var _=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var E=0,R=-1,M=-1,G=0,ne=0,re=c,K=null;t:for(;;){for(var Y;re!==f||_!==0&&re.nodeType!==3||(R=E+_),re!==T||g!==0&&re.nodeType!==3||(M=E+g),re.nodeType===3&&(E+=re.nodeValue.length),(Y=re.firstChild)!==null;)K=re,re=Y;for(;;){if(re===c)break t;if(K===f&&++G===_&&(R=E),K===T&&++ne===g&&(M=E),(Y=re.nextSibling)!==null)break;re=K,K=re.parentNode}re=Y}f=R===-1||M===-1?null:{start:R,end:M}}else f=null}f=f||{start:0,end:0}}else f=null;for(zw={focusedElem:c,selectionRange:f},Hf=!1,vn=d;vn!==null;)if(d=vn,c=d.child,(d.subtreeFlags&1024)!==0&&c!==null)c.return=d,vn=c;else for(;vn!==null;){switch(d=vn,T=d.alternate,c=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&T!==null){c=void 0,f=d,_=T.memoizedProps,T=T.memoizedState,g=f.stateNode;try{var Le=sa(f.type,_,f.elementType===f.type);c=g.getSnapshotBeforeUpdate(Le,T),g.__reactInternalSnapshotBeforeUpdate=c}catch(Ve){Mt(f,f.return,Ve)}}break;case 3:if((c&1024)!==0){if(c=d.stateNode.containerInfo,f=c.nodeType,f===9)qw(c);else if(f===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":qw(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(n(163))}if(c=d.sibling,c!==null){c.return=d.return,vn=c;break}vn=d.return}}function ax(c,d,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Qo(c,f),g&4&&pu(5,f);break;case 1:if(Qo(c,f),g&4)if(c=f.stateNode,d===null)try{c.componentDidMount()}catch(E){Mt(f,f.return,E)}else{var _=sa(f.type,d.memoizedProps);d=d.memoizedState;try{c.componentDidUpdate(_,d,c.__reactInternalSnapshotBeforeUpdate)}catch(E){Mt(f,f.return,E)}}g&64&&tx(f),g&512&&bu(f,f.return);break;case 3:if(Qo(c,f),g&64&&(c=f.updateQueue,c!==null)){if(d=null,f.child!==null)switch(f.child.tag){case 27:case 5:d=f.child.stateNode;break;case 1:d=f.child.stateNode}try{HC(c,d)}catch(E){Mt(f,f.return,E)}}break;case 27:d===null&&g&4&&ox(f);case 26:case 5:Qo(c,f),d===null&&g&4&&ix(f),g&512&&bu(f,f.return);break;case 12:Qo(c,f);break;case 13:Qo(c,f),g&4&&ux(c,f),g&64&&(c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(f=iB.bind(null,f),vB(c,f))));break;case 22:if(g=f.memoizedState!==null||lo,!g){d=d!==null&&d.memoizedState!==null||nn,_=lo;var T=nn;lo=g,(nn=d)&&!T?er(c,f,(f.subtreeFlags&8772)!==0):Qo(c,f),lo=_,nn=T}break;case 30:break;default:Qo(c,f)}}function lx(c){var d=c.alternate;d!==null&&(c.alternate=null,lx(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&Zp(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Ut=null,ui=!1;function co(c,d,f){for(f=f.child;f!==null;)cx(c,d,f),f=f.sibling}function cx(c,d,f){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount($e,f)}catch{}switch(f.tag){case 26:nn||Rs(f,d),co(c,d,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:nn||Rs(f,d);var g=Ut,_=ui;rr(f.type)&&(Ut=f.stateNode,ui=!1),co(c,d,f),Eu(f.stateNode),Ut=g,ui=_;break;case 5:nn||Rs(f,d);case 6:if(g=Ut,_=ui,Ut=null,co(c,d,f),Ut=g,ui=_,Ut!==null)if(ui)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(f.stateNode)}catch(T){Mt(f,d,T)}else try{Ut.removeChild(f.stateNode)}catch(T){Mt(f,d,T)}break;case 18:Ut!==null&&(ui?(c=Ut,Jx(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,f.stateNode),Nu(c)):Jx(Ut,f.stateNode));break;case 4:g=Ut,_=ui,Ut=f.stateNode.containerInfo,ui=!0,co(c,d,f),Ut=g,ui=_;break;case 0:case 11:case 14:case 15:nn||Xo(2,f,d),nn||Xo(4,f,d),co(c,d,f);break;case 1:nn||(Rs(f,d),g=f.stateNode,typeof g.componentWillUnmount=="function"&&nx(f,d,g)),co(c,d,f);break;case 21:co(c,d,f);break;case 22:nn=(g=nn)||f.memoizedState!==null,co(c,d,f),nn=g;break;default:co(c,d,f)}}function ux(c,d){if(d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Nu(c)}catch(f){Mt(d,d.return,f)}}function ZL(c){switch(c.tag){case 13:case 19:var d=c.stateNode;return d===null&&(d=c.stateNode=new rx),d;case 22:return c=c.stateNode,d=c._retryCache,d===null&&(d=c._retryCache=new rx),d;default:throw Error(n(435,c.tag))}}function bw(c,d){var f=ZL(c);d.forEach(function(g){var _=sB.bind(null,c,g);f.has(g)||(f.add(g),g.then(_,_))})}function Si(c,d){var f=d.deletions;if(f!==null)for(var g=0;g<f.length;g++){var _=f[g],T=c,E=d,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(rr(R.type)){Ut=R.stateNode,ui=!1;break e}break;case 5:Ut=R.stateNode,ui=!1;break e;case 3:case 4:Ut=R.stateNode.containerInfo,ui=!0;break e}R=R.return}if(Ut===null)throw Error(n(160));cx(T,E,_),Ut=null,ui=!1,T=_.alternate,T!==null&&(T.return=null),_.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)dx(d,c),d=d.sibling}var ds=null;function dx(c,d){var f=c.alternate,g=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Si(d,c),Ai(c),g&4&&(Xo(3,c,c.return),pu(3,c),Xo(5,c,c.return));break;case 1:Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),g&64&&lo&&(c=c.updateQueue,c!==null&&(g=c.callbacks,g!==null&&(f=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var _=ds;if(Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),g&4){var T=f!==null?f.memoizedState:null;if(g=c.memoizedState,f===null)if(g===null)if(c.stateNode===null){e:{g=c.type,f=c.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":T=_.getElementsByTagName("title")[0],(!T||T[zc]||T[Fn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=_.createElement(g),_.head.insertBefore(T,_.querySelector("head > title"))),Mn(T,g,f),T[Fn]=c,yn(T),g=T;break e;case"link":var E=ok("link","href",_).get(g+(f.href||""));if(E){for(var R=0;R<E.length;R++)if(T=E[R],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){E.splice(R,1);break t}}T=_.createElement(g),Mn(T,g,f),_.head.appendChild(T);break;case"meta":if(E=ok("meta","content",_).get(g+(f.content||""))){for(R=0;R<E.length;R++)if(T=E[R],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){E.splice(R,1);break t}}T=_.createElement(g),Mn(T,g,f),_.head.appendChild(T);break;default:throw Error(n(468,g))}T[Fn]=c,yn(T),g=T}c.stateNode=g}else rk(_,c.type,c.stateNode);else c.stateNode=sk(_,g,c.memoizedProps);else T!==g?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,g===null?rk(_,c.type,c.stateNode):sk(_,g,c.memoizedProps)):g===null&&c.stateNode!==null&&fw(c,c.memoizedProps,f.memoizedProps)}break;case 27:Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),f!==null&&g&4&&fw(c,c.memoizedProps,f.memoizedProps);break;case 5:if(Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),c.flags&32){_=c.stateNode;try{cl(_,"")}catch(Y){Mt(c,c.return,Y)}}g&4&&c.stateNode!=null&&(_=c.memoizedProps,fw(c,_,f!==null?f.memoizedProps:_)),g&1024&&(pw=!0);break;case 6:if(Si(d,c),Ai(c),g&4){if(c.stateNode===null)throw Error(n(162));g=c.memoizedProps,f=c.stateNode;try{f.nodeValue=g}catch(Y){Mt(c,c.return,Y)}}break;case 3:if(Ff=null,_=ds,ds=Lf(d.containerInfo),Si(d,c),ds=_,Ai(c),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Nu(d.containerInfo)}catch(Y){Mt(c,c.return,Y)}pw&&(pw=!1,hx(c));break;case 4:g=ds,ds=Lf(c.stateNode.containerInfo),Si(d,c),Ai(c),ds=g;break;case 12:Si(d,c),Ai(c);break;case 13:Si(d,c),Ai(c),c.child.flags&8192&&c.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Tw=He()),g&4&&(g=c.updateQueue,g!==null&&(c.updateQueue=null,bw(c,g)));break;case 22:_=c.memoizedState!==null;var M=f!==null&&f.memoizedState!==null,G=lo,ne=nn;if(lo=G||_,nn=ne||M,Si(d,c),nn=ne,lo=G,Ai(c),g&8192)e:for(d=c.stateNode,d._visibility=_?d._visibility&-2:d._visibility|1,_&&(f===null||M||lo||nn||oa(c)),f=null,d=c;;){if(d.tag===5||d.tag===26){if(f===null){M=f=d;try{if(T=M.stateNode,_)E=T.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=M.stateNode;var re=M.memoizedProps.style,K=re!=null&&re.hasOwnProperty("display")?re.display:null;R.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Y){Mt(M,M.return,Y)}}}else if(d.tag===6){if(f===null){M=d;try{M.stateNode.nodeValue=_?"":M.memoizedProps}catch(Y){Mt(M,M.return,Y)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}g&4&&(g=c.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,bw(c,f))));break;case 19:Si(d,c),Ai(c),g&4&&(g=c.updateQueue,g!==null&&(c.updateQueue=null,bw(c,g)));break;case 30:break;case 21:break;default:Si(d,c),Ai(c)}}function Ai(c){var d=c.flags;if(d&2){try{for(var f,g=c.return;g!==null;){if(sx(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var _=f.stateNode,T=mw(c);xf(c,T,_);break;case 5:var E=f.stateNode;f.flags&32&&(cl(E,""),f.flags&=-33);var R=mw(c);xf(c,R,E);break;case 3:case 4:var M=f.stateNode.containerInfo,G=mw(c);gw(c,G,M);break;default:throw Error(n(161))}}catch(ne){Mt(c,c.return,ne)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function hx(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var d=c;hx(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),c=c.sibling}}function Qo(c,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)ax(c,d.alternate,d),d=d.sibling}function oa(c){for(c=c.child;c!==null;){var d=c;switch(d.tag){case 0:case 11:case 14:case 15:Xo(4,d,d.return),oa(d);break;case 1:Rs(d,d.return);var f=d.stateNode;typeof f.componentWillUnmount=="function"&&nx(d,d.return,f),oa(d);break;case 27:Eu(d.stateNode);case 26:case 5:Rs(d,d.return),oa(d);break;case 22:d.memoizedState===null&&oa(d);break;case 30:oa(d);break;default:oa(d)}c=c.sibling}}function er(c,d,f){for(f=f&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var g=d.alternate,_=c,T=d,E=T.flags;switch(T.tag){case 0:case 11:case 15:er(_,T,f),pu(4,T);break;case 1:if(er(_,T,f),g=T,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(G){Mt(g,g.return,G)}if(g=T,_=g.updateQueue,_!==null){var R=g.stateNode;try{var M=_.shared.hiddenCallbacks;if(M!==null)for(_.shared.hiddenCallbacks=null,_=0;_<M.length;_++)zC(M[_],R)}catch(G){Mt(g,g.return,G)}}f&&E&64&&tx(T),bu(T,T.return);break;case 27:ox(T);case 26:case 5:er(_,T,f),f&&g===null&&E&4&&ix(T),bu(T,T.return);break;case 12:er(_,T,f);break;case 13:er(_,T,f),f&&E&4&&ux(_,T);break;case 22:T.memoizedState===null&&er(_,T,f),bu(T,T.return);break;case 30:break;default:er(_,T,f)}d=d.sibling}}function ww(c,d){var f=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),c=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(c=d.memoizedState.cachePool.pool),c!==f&&(c!=null&&c.refCount++,f!=null&&nu(f))}function yw(c,d){c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&nu(c))}function Is(c,d,f,g){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)fx(c,d,f,g),d=d.sibling}function fx(c,d,f,g){var _=d.flags;switch(d.tag){case 0:case 11:case 15:Is(c,d,f,g),_&2048&&pu(9,d);break;case 1:Is(c,d,f,g);break;case 3:Is(c,d,f,g),_&2048&&(c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&nu(c)));break;case 12:if(_&2048){Is(c,d,f,g),c=d.stateNode;try{var T=d.memoizedProps,E=T.id,R=T.onPostCommit;typeof R=="function"&&R(E,d.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(M){Mt(d,d.return,M)}}else Is(c,d,f,g);break;case 13:Is(c,d,f,g);break;case 23:break;case 22:T=d.stateNode,E=d.alternate,d.memoizedState!==null?T._visibility&2?Is(c,d,f,g):wu(c,d):T._visibility&2?Is(c,d,f,g):(T._visibility|=2,Al(c,d,f,g,(d.subtreeFlags&10256)!==0)),_&2048&&ww(E,d);break;case 24:Is(c,d,f,g),_&2048&&yw(d.alternate,d);break;default:Is(c,d,f,g)}}function Al(c,d,f,g,_){for(_=_&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var T=c,E=d,R=f,M=g,G=E.flags;switch(E.tag){case 0:case 11:case 15:Al(T,E,R,M,_),pu(8,E);break;case 23:break;case 22:var ne=E.stateNode;E.memoizedState!==null?ne._visibility&2?Al(T,E,R,M,_):wu(T,E):(ne._visibility|=2,Al(T,E,R,M,_)),_&&G&2048&&ww(E.alternate,E);break;case 24:Al(T,E,R,M,_),_&&G&2048&&yw(E.alternate,E);break;default:Al(T,E,R,M,_)}d=d.sibling}}function wu(c,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var f=c,g=d,_=g.flags;switch(g.tag){case 22:wu(f,g),_&2048&&ww(g.alternate,g);break;case 24:wu(f,g),_&2048&&yw(g.alternate,g);break;default:wu(f,g)}d=d.sibling}}var yu=8192;function Rl(c){if(c.subtreeFlags&yu)for(c=c.child;c!==null;)mx(c),c=c.sibling}function mx(c){switch(c.tag){case 26:Rl(c),c.flags&yu&&c.memoizedState!==null&&NB(ds,c.memoizedState,c.memoizedProps);break;case 5:Rl(c);break;case 3:case 4:var d=ds;ds=Lf(c.stateNode.containerInfo),Rl(c),ds=d;break;case 22:c.memoizedState===null&&(d=c.alternate,d!==null&&d.memoizedState!==null?(d=yu,yu=16777216,Rl(c),yu=d):Rl(c));break;default:Rl(c)}}function gx(c){var d=c.alternate;if(d!==null&&(c=d.child,c!==null)){d.child=null;do d=c.sibling,c.sibling=null,c=d;while(c!==null)}}function _u(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];vn=g,bx(g,c)}gx(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)px(c),c=c.sibling}function px(c){switch(c.tag){case 0:case 11:case 15:_u(c),c.flags&2048&&Xo(9,c,c.return);break;case 3:_u(c);break;case 12:_u(c);break;case 22:var d=c.stateNode;c.memoizedState!==null&&d._visibility&2&&(c.return===null||c.return.tag!==13)?(d._visibility&=-3,kf(c)):_u(c);break;default:_u(c)}}function kf(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];vn=g,bx(g,c)}gx(c)}for(c=c.child;c!==null;){switch(d=c,d.tag){case 0:case 11:case 15:Xo(8,d,d.return),kf(d);break;case 22:f=d.stateNode,f._visibility&2&&(f._visibility&=-3,kf(d));break;default:kf(d)}c=c.sibling}}function bx(c,d){for(;vn!==null;){var f=vn;switch(f.tag){case 0:case 11:case 15:Xo(8,f,d);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:nu(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,vn=g;else e:for(f=c;vn!==null;){g=vn;var _=g.sibling,T=g.return;if(lx(g),g===f){vn=null;break e}if(_!==null){_.return=T,vn=_;break e}vn=T}}}var YL={getCacheForType:function(c){var d=Un(hn),f=d.data.get(c);return f===void 0&&(f=c(),d.data.set(c,f)),f}},JL=typeof WeakMap=="function"?WeakMap:Map,_t=0,Dt=null,Qe=null,ot=0,vt=0,Ri=null,tr=!1,Il=!1,_w=!1,uo=0,Zt=0,nr=0,ra=0,vw=0,$i=0,Pl=0,vu=null,di=null,Cw=!1,Tw=0,Ef=1/0,Sf=null,ir=null,Pn=0,sr=null,Ml=null,Vl=0,xw=0,kw=null,wx=null,Cu=0,Ew=null;function Ii(){if((_t&2)!==0&&ot!==0)return ot&-ot;if(D.T!==null){var c=_l;return c!==0?c:Vw()}return N1()}function yx(){$i===0&&($i=(ot&536870912)===0||mt?I1():536870912);var c=Gi.current;return c!==null&&(c.flags|=32),$i}function Pi(c,d,f){(c===Dt&&(vt===2||vt===9)||c.cancelPendingCommit!==null)&&(Nl(c,0),or(c,ot,$i,!1)),Uc(c,f),((_t&2)===0||c!==Dt)&&(c===Dt&&((_t&2)===0&&(ra|=f),Zt===4&&or(c,ot,$i,!1)),Ps(c))}function _x(c,d,f){if((_t&6)!==0)throw Error(n(327));var g=!f&&(d&124)===0&&(d&c.expiredLanes)===0||Ys(c,d),_=g?eB(c,d):Rw(c,d,!0),T=g;do{if(_===0){Il&&!g&&or(c,d,0,!1);break}else{if(f=c.current.alternate,T&&!XL(f)){_=Rw(c,d,!1),T=!1;continue}if(_===2){if(T=d,c.errorRecoveryDisabledLanes&T)var E=0;else E=c.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){d=E;e:{var R=c;_=vu;var M=R.current.memoizedState.isDehydrated;if(M&&(Nl(R,E).flags|=256),E=Rw(R,E,!1),E!==2){if(_w&&!M){R.errorRecoveryDisabledLanes|=T,ra|=T,_=4;break e}T=di,di=_,T!==null&&(di===null?di=T:di.push.apply(di,T))}_=E}if(T=!1,_!==2)continue}}if(_===1){Nl(c,0),or(c,d,0,!0);break}e:{switch(g=c,T=_,T){case 0:case 1:throw Error(n(345));case 4:if((d&4194048)!==d)break;case 6:or(g,d,$i,!tr);break e;case 2:di=null;break;case 3:case 5:break;default:throw Error(n(329))}if((d&62914560)===d&&(_=Tw+300-He(),10<_)){if(or(g,d,$i,!tr),tl(g,0,!0)!==0)break e;g.timeoutHandle=Zx(vx.bind(null,g,f,di,Sf,Cw,d,$i,ra,Pl,tr,T,2,-0,0),_);break e}vx(g,f,di,Sf,Cw,d,$i,ra,Pl,tr,T,0,-0,0)}}break}while(!0);Ps(c)}function vx(c,d,f,g,_,T,E,R,M,G,ne,re,K,Y){if(c.timeoutHandle=-1,re=d.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Ru={stylesheets:null,count:0,unsuspend:VB},mx(d),re=OB(),re!==null)){c.cancelPendingCommit=re(Ax.bind(null,c,d,T,f,g,_,E,R,M,ne,1,K,Y)),or(c,T,E,!G);return}Ax(c,d,T,f,g,_,E,R,M)}function XL(c){for(var d=c;;){var f=d.tag;if((f===0||f===11||f===15)&&d.flags&16384&&(f=d.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var _=f[g],T=_.getSnapshot;_=_.value;try{if(!ki(T(),_))return!1}catch{return!1}}if(f=d.child,d.subtreeFlags&16384&&f!==null)f.return=d,d=f;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function or(c,d,f,g){d&=~vw,d&=~ra,c.suspendedLanes|=d,c.pingedLanes&=~d,g&&(c.warmLanes|=d),g=c.expirationTimes;for(var _=d;0<_;){var T=31-jt(_),E=1<<T;g[T]=-1,_&=~E}f!==0&&M1(c,f,d)}function Af(){return(_t&6)===0?(Tu(0),!1):!0}function Sw(){if(Qe!==null){if(vt===0)var c=Qe.return;else c=Qe,no=ea=null,qb(c),El=null,fu=0,c=Qe;for(;c!==null;)ex(c.alternate,c),c=c.return;Qe=null}}function Nl(c,d){var f=c.timeoutHandle;f!==-1&&(c.timeoutHandle=-1,pB(f)),f=c.cancelPendingCommit,f!==null&&(c.cancelPendingCommit=null,f()),Sw(),Dt=c,Qe=f=Qs(c.current,null),ot=d,vt=0,Ri=null,tr=!1,Il=Ys(c,d),_w=!1,Pl=$i=vw=ra=nr=Zt=0,di=vu=null,Cw=!1,(d&8)!==0&&(d|=d&32);var g=c.entangledLanes;if(g!==0)for(c=c.entanglements,g&=d;0<g;){var _=31-jt(g),T=1<<_;d|=c[_],g&=~T}return uo=d,Zh(),f}function Cx(c,d){Je=null,D.H=gf,d===su||d===of?(d=FC(),vt=3):d===DC?(d=FC(),vt=4):vt=d===UT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ri=d,Qe===null&&(Zt=1,_f(c,zi(d,c.current)))}function Tx(){var c=D.H;return D.H=gf,c===null?gf:c}function xx(){var c=D.A;return D.A=YL,c}function Aw(){Zt=4,tr||(ot&4194048)!==ot&&Gi.current!==null||(Il=!0),(nr&134217727)===0&&(ra&134217727)===0||Dt===null||or(Dt,ot,$i,!1)}function Rw(c,d,f){var g=_t;_t|=2;var _=Tx(),T=xx();(Dt!==c||ot!==d)&&(Sf=null,Nl(c,d)),d=!1;var E=Zt;e:do try{if(vt!==0&&Qe!==null){var R=Qe,M=Ri;switch(vt){case 8:Sw(),E=6;break e;case 3:case 2:case 9:case 6:Gi.current===null&&(d=!0);var G=vt;if(vt=0,Ri=null,Ol(c,R,M,G),f&&Il){E=0;break e}break;default:G=vt,vt=0,Ri=null,Ol(c,R,M,G)}}QL(),E=Zt;break}catch(ne){Cx(c,ne)}while(!0);return d&&c.shellSuspendCounter++,no=ea=null,_t=g,D.H=_,D.A=T,Qe===null&&(Dt=null,ot=0,Zh()),E}function QL(){for(;Qe!==null;)kx(Qe)}function eB(c,d){var f=_t;_t|=2;var g=Tx(),_=xx();Dt!==c||ot!==d?(Sf=null,Ef=He()+500,Nl(c,d)):Il=Ys(c,d);e:do try{if(vt!==0&&Qe!==null){d=Qe;var T=Ri;t:switch(vt){case 1:vt=0,Ri=null,Ol(c,d,T,1);break;case 2:case 9:if(LC(T)){vt=0,Ri=null,Ex(d);break}d=function(){vt!==2&&vt!==9||Dt!==c||(vt=7),Ps(c)},T.then(d,d);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:LC(T)?(vt=0,Ri=null,Ex(d)):(vt=0,Ri=null,Ol(c,d,T,7));break;case 5:var E=null;switch(Qe.tag){case 26:E=Qe.memoizedState;case 5:case 27:var R=Qe;if(!E||ak(E)){vt=0,Ri=null;var M=R.sibling;if(M!==null)Qe=M;else{var G=R.return;G!==null?(Qe=G,Rf(G)):Qe=null}break t}}vt=0,Ri=null,Ol(c,d,T,5);break;case 6:vt=0,Ri=null,Ol(c,d,T,6);break;case 8:Sw(),Zt=6;break e;default:throw Error(n(462))}}tB();break}catch(ne){Cx(c,ne)}while(!0);return no=ea=null,D.H=g,D.A=_,_t=f,Qe!==null?0:(Dt=null,ot=0,Zh(),Zt)}function tB(){for(;Qe!==null&&!Bn();)kx(Qe)}function kx(c){var d=XT(c.alternate,c,uo);c.memoizedProps=c.pendingProps,d===null?Rf(c):Qe=d}function Ex(c){var d=c,f=d.alternate;switch(d.tag){case 15:case 0:d=$T(f,d,d.pendingProps,d.type,void 0,ot);break;case 11:d=$T(f,d,d.pendingProps,d.type.render,d.ref,ot);break;case 5:qb(d);default:ex(f,d),d=Qe=SC(d,uo),d=XT(f,d,uo)}c.memoizedProps=c.pendingProps,d===null?Rf(c):Qe=d}function Ol(c,d,f,g){no=ea=null,qb(d),El=null,fu=0;var _=d.return;try{if(qL(c,_,d,f,ot)){Zt=1,_f(c,zi(f,c.current)),Qe=null;return}}catch(T){if(_!==null)throw Qe=_,T;Zt=1,_f(c,zi(f,c.current)),Qe=null;return}d.flags&32768?(mt||g===1?c=!0:Il||(ot&536870912)!==0?c=!1:(tr=c=!0,(g===2||g===9||g===3||g===6)&&(g=Gi.current,g!==null&&g.tag===13&&(g.flags|=16384))),Sx(d,c)):Rf(d)}function Rf(c){var d=c;do{if((d.flags&32768)!==0){Sx(d,tr);return}c=d.return;var f=$L(d.alternate,d,uo);if(f!==null){Qe=f;return}if(d=d.sibling,d!==null){Qe=d;return}Qe=d=c}while(d!==null);Zt===0&&(Zt=5)}function Sx(c,d){do{var f=jL(c.alternate,c);if(f!==null){f.flags&=32767,Qe=f;return}if(f=c.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!d&&(c=c.sibling,c!==null)){Qe=c;return}Qe=c=f}while(c!==null);Zt=6,Qe=null}function Ax(c,d,f,g,_,T,E,R,M){c.cancelPendingCommit=null;do If();while(Pn!==0);if((_t&6)!==0)throw Error(n(327));if(d!==null){if(d===c.current)throw Error(n(177));if(T=d.lanes|d.childLanes,T|=yb,VD(c,f,T,E,R,M),c===Dt&&(Qe=Dt=null,ot=0),Ml=d,sr=c,Vl=f,xw=T,kw=_,wx=g,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,oB(xi,function(){return Vx(),null})):(c.callbackNode=null,c.callbackPriority=0),g=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||g){g=D.T,D.T=null,_=oe.p,oe.p=2,E=_t,_t|=4;try{KL(c,d,f)}finally{_t=E,oe.p=_,D.T=g}}Pn=1,Rx(),Ix(),Px()}}function Rx(){if(Pn===1){Pn=0;var c=sr,d=Ml,f=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||f){f=D.T,D.T=null;var g=oe.p;oe.p=2;var _=_t;_t|=4;try{dx(d,c);var T=zw,E=bC(c.containerInfo),R=T.focusedElem,M=T.selectionRange;if(E!==R&&R&&R.ownerDocument&&pC(R.ownerDocument.documentElement,R)){if(M!==null&&mb(R)){var G=M.start,ne=M.end;if(ne===void 0&&(ne=G),"selectionStart"in R)R.selectionStart=G,R.selectionEnd=Math.min(ne,R.value.length);else{var re=R.ownerDocument||document,K=re&&re.defaultView||window;if(K.getSelection){var Y=K.getSelection(),Le=R.textContent.length,Ve=Math.min(M.start,Le),St=M.end===void 0?Ve:Math.min(M.end,Le);!Y.extend&&Ve>St&&(E=St,St=Ve,Ve=E);var z=gC(R,Ve),B=gC(R,St);if(z&&B&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==B.node||Y.focusOffset!==B.offset)){var q=re.createRange();q.setStart(z.node,z.offset),Y.removeAllRanges(),Ve>St?(Y.addRange(q),Y.extend(B.node,B.offset)):(q.setEnd(B.node,B.offset),Y.addRange(q))}}}}for(re=[],Y=R;Y=Y.parentNode;)Y.nodeType===1&&re.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<re.length;R++){var ie=re[R];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Hf=!!Uw,zw=Uw=null}finally{_t=_,oe.p=g,D.T=f}}c.current=d,Pn=2}}function Ix(){if(Pn===2){Pn=0;var c=sr,d=Ml,f=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||f){f=D.T,D.T=null;var g=oe.p;oe.p=2;var _=_t;_t|=4;try{ax(c,d.alternate,d)}finally{_t=_,oe.p=g,D.T=f}}Pn=3}}function Px(){if(Pn===4||Pn===3){Pn=0,wn();var c=sr,d=Ml,f=Vl,g=wx;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Pn=5:(Pn=0,Ml=sr=null,Mx(c,c.pendingLanes));var _=c.pendingLanes;if(_===0&&(ir=null),jp(f),d=d.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot($e,d,void 0,(d.current.flags&128)===128)}catch{}if(g!==null){d=D.T,_=oe.p,oe.p=2,D.T=null;try{for(var T=c.onRecoverableError,E=0;E<g.length;E++){var R=g[E];T(R.value,{componentStack:R.stack})}}finally{D.T=d,oe.p=_}}(Vl&3)!==0&&If(),Ps(c),_=c.pendingLanes,(f&4194090)!==0&&(_&42)!==0?c===Ew?Cu++:(Cu=0,Ew=c):Cu=0,Tu(0)}}function Mx(c,d){(c.pooledCacheLanes&=d)===0&&(d=c.pooledCache,d!=null&&(c.pooledCache=null,nu(d)))}function If(c){return Rx(),Ix(),Px(),Vx()}function Vx(){if(Pn!==5)return!1;var c=sr,d=xw;xw=0;var f=jp(Vl),g=D.T,_=oe.p;try{oe.p=32>f?32:f,D.T=null,f=kw,kw=null;var T=sr,E=Vl;if(Pn=0,Ml=sr=null,Vl=0,(_t&6)!==0)throw Error(n(331));var R=_t;if(_t|=4,px(T.current),fx(T,T.current,E,f),_t=R,Tu(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot($e,T)}catch{}return!0}finally{oe.p=_,D.T=g,Mx(c,d)}}function Nx(c,d,f){d=zi(f,d),d=sw(c.stateNode,d,2),c=Ko(c,d,2),c!==null&&(Uc(c,2),Ps(c))}function Mt(c,d,f){if(c.tag===3)Nx(c,c,f);else for(;d!==null;){if(d.tag===3){Nx(d,c,f);break}else if(d.tag===1){var g=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ir===null||!ir.has(g))){c=zi(f,c),f=BT(2),g=Ko(d,f,2),g!==null&&(FT(f,g,d,c),Uc(g,2),Ps(g));break}}d=d.return}}function Iw(c,d,f){var g=c.pingCache;if(g===null){g=c.pingCache=new JL;var _=new Set;g.set(d,_)}else _=g.get(d),_===void 0&&(_=new Set,g.set(d,_));_.has(f)||(_w=!0,_.add(f),c=nB.bind(null,c,d,f),d.then(c,c))}function nB(c,d,f){var g=c.pingCache;g!==null&&g.delete(d),c.pingedLanes|=c.suspendedLanes&f,c.warmLanes&=~f,Dt===c&&(ot&f)===f&&(Zt===4||Zt===3&&(ot&62914560)===ot&&300>He()-Tw?(_t&2)===0&&Nl(c,0):vw|=f,Pl===ot&&(Pl=0)),Ps(c)}function Ox(c,d){d===0&&(d=P1()),c=pl(c,d),c!==null&&(Uc(c,d),Ps(c))}function iB(c){var d=c.memoizedState,f=0;d!==null&&(f=d.retryLane),Ox(c,f)}function sB(c,d){var f=0;switch(c.tag){case 13:var g=c.stateNode,_=c.memoizedState;_!==null&&(f=_.retryLane);break;case 19:g=c.stateNode;break;case 22:g=c.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(d),Ox(c,f)}function oB(c,d){return it(c,d)}var Pf=null,Dl=null,Pw=!1,Mf=!1,Mw=!1,aa=0;function Ps(c){c!==Dl&&c.next===null&&(Dl===null?Pf=Dl=c:Dl=Dl.next=c),Mf=!0,Pw||(Pw=!0,aB())}function Tu(c,d){if(!Mw&&Mf){Mw=!0;do for(var f=!1,g=Pf;g!==null;){if(c!==0){var _=g.pendingLanes;if(_===0)var T=0;else{var E=g.suspendedLanes,R=g.pingedLanes;T=(1<<31-jt(42|c)+1)-1,T&=_&~(E&~R),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,Fx(g,T))}else T=ot,T=tl(g,g===Dt?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Ys(g,T)||(f=!0,Fx(g,T));g=g.next}while(f);Mw=!1}}function rB(){Dx()}function Dx(){Mf=Pw=!1;var c=0;aa!==0&&(gB()&&(c=aa),aa=0);for(var d=He(),f=null,g=Pf;g!==null;){var _=g.next,T=Lx(g,d);T===0?(g.next=null,f===null?Pf=_:f.next=_,_===null&&(Dl=f)):(f=g,(c!==0||(T&3)!==0)&&(Mf=!0)),g=_}Tu(c)}function Lx(c,d){for(var f=c.suspendedLanes,g=c.pingedLanes,_=c.expirationTimes,T=c.pendingLanes&-62914561;0<T;){var E=31-jt(T),R=1<<E,M=_[E];M===-1?((R&f)===0||(R&g)!==0)&&(_[E]=MD(R,d)):M<=d&&(c.expiredLanes|=R),T&=~R}if(d=Dt,f=ot,f=tl(c,c===d?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),g=c.callbackNode,f===0||c===d&&(vt===2||vt===9)||c.cancelPendingCommit!==null)return g!==null&&g!==null&&nt(g),c.callbackNode=null,c.callbackPriority=0;if((f&3)===0||Ys(c,f)){if(d=f&-f,d===c.callbackPriority)return d;switch(g!==null&&nt(g),jp(f)){case 2:case 8:f=gt;break;case 32:f=xi;break;case 268435456:f=un;break;default:f=xi}return g=Bx.bind(null,c),f=it(f,g),c.callbackPriority=d,c.callbackNode=f,d}return g!==null&&g!==null&&nt(g),c.callbackPriority=2,c.callbackNode=null,2}function Bx(c,d){if(Pn!==0&&Pn!==5)return c.callbackNode=null,c.callbackPriority=0,null;var f=c.callbackNode;if(If()&&c.callbackNode!==f)return null;var g=ot;return g=tl(c,c===Dt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),g===0?null:(_x(c,g,d),Lx(c,He()),c.callbackNode!=null&&c.callbackNode===f?Bx.bind(null,c):null)}function Fx(c,d){if(If())return null;_x(c,d,!0)}function aB(){bB(function(){(_t&6)!==0?it(ct,rB):Dx()})}function Vw(){return aa===0&&(aa=I1()),aa}function Ux(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Hh(""+c)}function zx(c,d){var f=d.ownerDocument.createElement("input");return f.name=d.name,f.value=d.value,c.id&&f.setAttribute("form",c.id),d.parentNode.insertBefore(f,d),c=new FormData(c),f.parentNode.removeChild(f),c}function lB(c,d,f,g,_){if(d==="submit"&&f&&f.stateNode===_){var T=Ux((_[ai]||null).action),E=g.submitter;E&&(d=(d=E[ai]||null)?Ux(d.formAction):E.getAttribute("formAction"),d!==null&&(T=d,E=null));var R=new $h("action","action",null,g,_);c.push({event:R,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(aa!==0){var M=E?zx(_,E):new FormData(_);Qb(f,{pending:!0,data:M,method:_.method,action:T},null,M)}}else typeof T=="function"&&(R.preventDefault(),M=E?zx(_,E):new FormData(_),Qb(f,{pending:!0,data:M,method:_.method,action:T},T,M))},currentTarget:_}]})}}for(var Nw=0;Nw<wb.length;Nw++){var Ow=wb[Nw],cB=Ow.toLowerCase(),uB=Ow[0].toUpperCase()+Ow.slice(1);us(cB,"on"+uB)}us(_C,"onAnimationEnd"),us(vC,"onAnimationIteration"),us(CC,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(SL,"onTransitionRun"),us(AL,"onTransitionStart"),us(RL,"onTransitionCancel"),us(TC,"onTransitionEnd"),rl("onMouseEnter",["mouseout","mouseover"]),rl("onMouseLeave",["mouseout","mouseover"]),rl("onPointerEnter",["pointerout","pointerover"]),rl("onPointerLeave",["pointerout","pointerover"]),Gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function Hx(c,d){d=(d&4)!==0;for(var f=0;f<c.length;f++){var g=c[f],_=g.event;g=g.listeners;e:{var T=void 0;if(d)for(var E=g.length-1;0<=E;E--){var R=g[E],M=R.instance,G=R.currentTarget;if(R=R.listener,M!==T&&_.isPropagationStopped())break e;T=R,_.currentTarget=G;try{T(_)}catch(ne){yf(ne)}_.currentTarget=null,T=M}else for(E=0;E<g.length;E++){if(R=g[E],M=R.instance,G=R.currentTarget,R=R.listener,M!==T&&_.isPropagationStopped())break e;T=R,_.currentTarget=G;try{T(_)}catch(ne){yf(ne)}_.currentTarget=null,T=M}}}}function et(c,d){var f=d[Kp];f===void 0&&(f=d[Kp]=new Set);var g=c+"__bubble";f.has(g)||(Wx(d,c,2,!1),f.add(g))}function Dw(c,d,f){var g=0;d&&(g|=4),Wx(f,c,g,d)}var Vf="_reactListening"+Math.random().toString(36).slice(2);function Lw(c){if(!c[Vf]){c[Vf]=!0,D1.forEach(function(f){f!=="selectionchange"&&(dB.has(f)||Dw(f,!1,c),Dw(f,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[Vf]||(d[Vf]=!0,Dw("selectionchange",!1,d))}}function Wx(c,d,f,g){switch(fk(d)){case 2:var _=BB;break;case 8:_=FB;break;default:_=Jw}f=_.bind(null,d,f,c),_=void 0,!ob||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(_=!0),g?_!==void 0?c.addEventListener(d,f,{capture:!0,passive:_}):c.addEventListener(d,f,!0):_!==void 0?c.addEventListener(d,f,{passive:_}):c.addEventListener(d,f,!1)}function Bw(c,d,f,g,_){var T=g;if((d&1)===0&&(d&2)===0&&g!==null)e:for(;;){if(g===null)return;var E=g.tag;if(E===3||E===4){var R=g.stateNode.containerInfo;if(R===_)break;if(E===4)for(E=g.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===_)return;E=E.return}for(;R!==null;){if(E=il(R),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){g=T=E;continue e}R=R.parentNode}}g=g.return}Y1(function(){var G=T,ne=ib(f),re=[];e:{var K=xC.get(c);if(K!==void 0){var Y=$h,Le=c;switch(c){case"keypress":if(qh(f)===0)break e;case"keydown":case"keyup":Y=oL;break;case"focusin":Le="focus",Y=cb;break;case"focusout":Le="blur",Y=cb;break;case"beforeblur":case"afterblur":Y=cb;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Q1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=jD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=lL;break;case _C:case vC:case CC:Y=YD;break;case TC:Y=uL;break;case"scroll":case"scrollend":Y=GD;break;case"wheel":Y=hL;break;case"copy":case"cut":case"paste":Y=XD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=tC;break;case"toggle":case"beforetoggle":Y=mL}var Ve=(d&4)!==0,St=!Ve&&(c==="scroll"||c==="scrollend"),z=Ve?K!==null?K+"Capture":null:K;Ve=[];for(var B=G,q;B!==null;){var ie=B;if(q=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||q===null||z===null||(ie=Wc(B,z),ie!=null&&Ve.push(ku(B,ie,q))),St)break;B=B.return}0<Ve.length&&(K=new Y(K,Le,null,f,ne),re.push({event:K,listeners:Ve}))}}if((d&7)===0){e:{if(K=c==="mouseover"||c==="pointerover",Y=c==="mouseout"||c==="pointerout",K&&f!==nb&&(Le=f.relatedTarget||f.fromElement)&&(il(Le)||Le[nl]))break e;if((Y||K)&&(K=ne.window===ne?ne:(K=ne.ownerDocument)?K.defaultView||K.parentWindow:window,Y?(Le=f.relatedTarget||f.toElement,Y=G,Le=Le?il(Le):null,Le!==null&&(St=o(Le),Ve=Le.tag,Le!==St||Ve!==5&&Ve!==27&&Ve!==6)&&(Le=null)):(Y=null,Le=G),Y!==Le)){if(Ve=Q1,ie="onMouseLeave",z="onMouseEnter",B="mouse",(c==="pointerout"||c==="pointerover")&&(Ve=tC,ie="onPointerLeave",z="onPointerEnter",B="pointer"),St=Y==null?K:Hc(Y),q=Le==null?K:Hc(Le),K=new Ve(ie,B+"leave",Y,f,ne),K.target=St,K.relatedTarget=q,ie=null,il(ne)===G&&(Ve=new Ve(z,B+"enter",Le,f,ne),Ve.target=q,Ve.relatedTarget=St,ie=Ve),St=ie,Y&&Le)t:{for(Ve=Y,z=Le,B=0,q=Ve;q;q=Ll(q))B++;for(q=0,ie=z;ie;ie=Ll(ie))q++;for(;0<B-q;)Ve=Ll(Ve),B--;for(;0<q-B;)z=Ll(z),q--;for(;B--;){if(Ve===z||z!==null&&Ve===z.alternate)break t;Ve=Ll(Ve),z=Ll(z)}Ve=null}else Ve=null;Y!==null&&qx(re,K,Y,Ve,!1),Le!==null&&St!==null&&qx(re,St,Le,Ve,!0)}}e:{if(K=G?Hc(G):window,Y=K.nodeName&&K.nodeName.toLowerCase(),Y==="select"||Y==="input"&&K.type==="file")var Te=cC;else if(aC(K))if(uC)Te=xL;else{Te=CL;var Xe=vL}else Y=K.nodeName,!Y||Y.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&tb(G.elementType)&&(Te=cC):Te=TL;if(Te&&(Te=Te(c,G))){lC(re,Te,f,ne);break e}Xe&&Xe(c,K,G),c==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&eb(K,"number",K.value)}switch(Xe=G?Hc(G):window,c){case"focusin":(aC(Xe)||Xe.contentEditable==="true")&&(fl=Xe,gb=G,Jc=null);break;case"focusout":Jc=gb=fl=null;break;case"mousedown":pb=!0;break;case"contextmenu":case"mouseup":case"dragend":pb=!1,wC(re,f,ne);break;case"selectionchange":if(EL)break;case"keydown":case"keyup":wC(re,f,ne)}var Re;if(db)e:{switch(c){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else hl?oC(c,f)&&(Oe="onCompositionEnd"):c==="keydown"&&f.keyCode===229&&(Oe="onCompositionStart");Oe&&(nC&&f.locale!=="ko"&&(hl||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&hl&&(Re=J1()):(qo=ne,rb="value"in qo?qo.value:qo.textContent,hl=!0)),Xe=Nf(G,Oe),0<Xe.length&&(Oe=new eC(Oe,c,null,f,ne),re.push({event:Oe,listeners:Xe}),Re?Oe.data=Re:(Re=rC(f),Re!==null&&(Oe.data=Re)))),(Re=pL?bL(c,f):wL(c,f))&&(Oe=Nf(G,"onBeforeInput"),0<Oe.length&&(Xe=new eC("onBeforeInput","beforeinput",null,f,ne),re.push({event:Xe,listeners:Oe}),Xe.data=Re)),lB(re,c,G,f,ne)}Hx(re,d)})}function ku(c,d,f){return{instance:c,listener:d,currentTarget:f}}function Nf(c,d){for(var f=d+"Capture",g=[];c!==null;){var _=c,T=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||T===null||(_=Wc(c,f),_!=null&&g.unshift(ku(c,_,T)),_=Wc(c,d),_!=null&&g.push(ku(c,_,T))),c.tag===3)return g;c=c.return}return[]}function Ll(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function qx(c,d,f,g,_){for(var T=d._reactName,E=[];f!==null&&f!==g;){var R=f,M=R.alternate,G=R.stateNode;if(R=R.tag,M!==null&&M===g)break;R!==5&&R!==26&&R!==27||G===null||(M=G,_?(G=Wc(f,T),G!=null&&E.unshift(ku(f,G,M))):_||(G=Wc(f,T),G!=null&&E.push(ku(f,G,M)))),f=f.return}E.length!==0&&c.push({event:d,listeners:E})}var hB=/\r\n?/g,fB=/\u0000|\uFFFD/g;function Gx(c){return(typeof c=="string"?c:""+c).replace(hB,`
`).replace(fB,"")}function $x(c,d){return d=Gx(d),Gx(c)===d}function Of(){}function Et(c,d,f,g,_,T){switch(f){case"children":typeof g=="string"?d==="body"||d==="textarea"&&g===""||cl(c,g):(typeof g=="number"||typeof g=="bigint")&&d!=="body"&&cl(c,""+g);break;case"className":Fh(c,"class",g);break;case"tabIndex":Fh(c,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Fh(c,f,g);break;case"style":K1(c,g,T);break;case"data":if(d!=="object"){Fh(c,"data",g);break}case"src":case"href":if(g===""&&(d!=="a"||f!=="href")){c.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){c.removeAttribute(f);break}g=Hh(""+g),c.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){c.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(d!=="input"&&Et(c,d,"name",_.name,_,null),Et(c,d,"formEncType",_.formEncType,_,null),Et(c,d,"formMethod",_.formMethod,_,null),Et(c,d,"formTarget",_.formTarget,_,null)):(Et(c,d,"encType",_.encType,_,null),Et(c,d,"method",_.method,_,null),Et(c,d,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){c.removeAttribute(f);break}g=Hh(""+g),c.setAttribute(f,g);break;case"onClick":g!=null&&(c.onclick=Of);break;case"onScroll":g!=null&&et("scroll",c);break;case"onScrollEnd":g!=null&&et("scrollend",c);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(_.children!=null)throw Error(n(60));c.innerHTML=f}}break;case"multiple":c.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":c.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){c.removeAttribute("xlink:href");break}f=Hh(""+g),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(f,""+g):c.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(f,""):c.removeAttribute(f);break;case"capture":case"download":g===!0?c.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(f,g):c.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?c.setAttribute(f,g):c.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?c.removeAttribute(f):c.setAttribute(f,g);break;case"popover":et("beforetoggle",c),et("toggle",c),Bh(c,"popover",g);break;case"xlinkActuate":Js(c,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Js(c,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Js(c,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Js(c,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Js(c,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Js(c,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Js(c,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Js(c,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Js(c,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Bh(c,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=WD.get(f)||f,Bh(c,f,g))}}function Fw(c,d,f,g,_,T){switch(f){case"style":K1(c,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(_.children!=null)throw Error(n(60));c.innerHTML=f}}break;case"children":typeof g=="string"?cl(c,g):(typeof g=="number"||typeof g=="bigint")&&cl(c,""+g);break;case"onScroll":g!=null&&et("scroll",c);break;case"onScrollEnd":g!=null&&et("scrollend",c);break;case"onClick":g!=null&&(c.onclick=Of);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!L1.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),d=f.slice(2,_?f.length-7:void 0),T=c[ai]||null,T=T!=null?T[f]:null,typeof T=="function"&&c.removeEventListener(d,T,_),typeof g=="function")){typeof T!="function"&&T!==null&&(f in c?c[f]=null:c.hasAttribute(f)&&c.removeAttribute(f)),c.addEventListener(d,g,_);break e}f in c?c[f]=g:g===!0?c.setAttribute(f,""):Bh(c,f,g)}}}function Mn(c,d,f){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",c),et("load",c);var g=!1,_=!1,T;for(T in f)if(f.hasOwnProperty(T)){var E=f[T];if(E!=null)switch(T){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Et(c,d,T,E,f,null)}}_&&Et(c,d,"srcSet",f.srcSet,f,null),g&&Et(c,d,"src",f.src,f,null);return;case"input":et("invalid",c);var R=T=E=_=null,M=null,G=null;for(g in f)if(f.hasOwnProperty(g)){var ne=f[g];if(ne!=null)switch(g){case"name":_=ne;break;case"type":E=ne;break;case"checked":M=ne;break;case"defaultChecked":G=ne;break;case"value":T=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,d));break;default:Et(c,d,g,ne,f,null)}}q1(c,T,R,M,G,E,_,!1),Uh(c);return;case"select":et("invalid",c),g=E=T=null;for(_ in f)if(f.hasOwnProperty(_)&&(R=f[_],R!=null))switch(_){case"value":T=R;break;case"defaultValue":E=R;break;case"multiple":g=R;default:Et(c,d,_,R,f,null)}d=T,f=E,c.multiple=!!g,d!=null?ll(c,!!g,d,!1):f!=null&&ll(c,!!g,f,!0);return;case"textarea":et("invalid",c),T=_=g=null;for(E in f)if(f.hasOwnProperty(E)&&(R=f[E],R!=null))switch(E){case"value":g=R;break;case"defaultValue":_=R;break;case"children":T=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:Et(c,d,E,R,f,null)}$1(c,g,_,T),Uh(c);return;case"option":for(M in f)if(f.hasOwnProperty(M)&&(g=f[M],g!=null))switch(M){case"selected":c.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Et(c,d,M,g,f,null)}return;case"dialog":et("beforetoggle",c),et("toggle",c),et("cancel",c),et("close",c);break;case"iframe":case"object":et("load",c);break;case"video":case"audio":for(g=0;g<xu.length;g++)et(xu[g],c);break;case"image":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"embed":case"source":case"link":et("error",c),et("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in f)if(f.hasOwnProperty(G)&&(g=f[G],g!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Et(c,d,G,g,f,null)}return;default:if(tb(d)){for(ne in f)f.hasOwnProperty(ne)&&(g=f[ne],g!==void 0&&Fw(c,d,ne,g,f,void 0));return}}for(R in f)f.hasOwnProperty(R)&&(g=f[R],g!=null&&Et(c,d,R,g,f,null))}function mB(c,d,f,g){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,T=null,E=null,R=null,M=null,G=null,ne=null;for(Y in f){var re=f[Y];if(f.hasOwnProperty(Y)&&re!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":M=re;default:g.hasOwnProperty(Y)||Et(c,d,Y,null,g,re)}}for(var K in g){var Y=g[K];if(re=f[K],g.hasOwnProperty(K)&&(Y!=null||re!=null))switch(K){case"type":T=Y;break;case"name":_=Y;break;case"checked":G=Y;break;case"defaultChecked":ne=Y;break;case"value":E=Y;break;case"defaultValue":R=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,d));break;default:Y!==re&&Et(c,d,K,Y,g,re)}}Qp(c,E,R,M,G,ne,T,_);return;case"select":Y=E=R=K=null;for(T in f)if(M=f[T],f.hasOwnProperty(T)&&M!=null)switch(T){case"value":break;case"multiple":Y=M;default:g.hasOwnProperty(T)||Et(c,d,T,null,g,M)}for(_ in g)if(T=g[_],M=f[_],g.hasOwnProperty(_)&&(T!=null||M!=null))switch(_){case"value":K=T;break;case"defaultValue":R=T;break;case"multiple":E=T;default:T!==M&&Et(c,d,_,T,g,M)}d=R,f=E,g=Y,K!=null?ll(c,!!f,K,!1):!!g!=!!f&&(d!=null?ll(c,!!f,d,!0):ll(c,!!f,f?[]:"",!1));return;case"textarea":Y=K=null;for(R in f)if(_=f[R],f.hasOwnProperty(R)&&_!=null&&!g.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Et(c,d,R,null,g,_)}for(E in g)if(_=g[E],T=f[E],g.hasOwnProperty(E)&&(_!=null||T!=null))switch(E){case"value":K=_;break;case"defaultValue":Y=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==T&&Et(c,d,E,_,g,T)}G1(c,K,Y);return;case"option":for(var Le in f)if(K=f[Le],f.hasOwnProperty(Le)&&K!=null&&!g.hasOwnProperty(Le))switch(Le){case"selected":c.selected=!1;break;default:Et(c,d,Le,null,g,K)}for(M in g)if(K=g[M],Y=f[M],g.hasOwnProperty(M)&&K!==Y&&(K!=null||Y!=null))switch(M){case"selected":c.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Et(c,d,M,K,g,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in f)K=f[Ve],f.hasOwnProperty(Ve)&&K!=null&&!g.hasOwnProperty(Ve)&&Et(c,d,Ve,null,g,K);for(G in g)if(K=g[G],Y=f[G],g.hasOwnProperty(G)&&K!==Y&&(K!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,d));break;default:Et(c,d,G,K,g,Y)}return;default:if(tb(d)){for(var St in f)K=f[St],f.hasOwnProperty(St)&&K!==void 0&&!g.hasOwnProperty(St)&&Fw(c,d,St,void 0,g,K);for(ne in g)K=g[ne],Y=f[ne],!g.hasOwnProperty(ne)||K===Y||K===void 0&&Y===void 0||Fw(c,d,ne,K,g,Y);return}}for(var z in f)K=f[z],f.hasOwnProperty(z)&&K!=null&&!g.hasOwnProperty(z)&&Et(c,d,z,null,g,K);for(re in g)K=g[re],Y=f[re],!g.hasOwnProperty(re)||K===Y||K==null&&Y==null||Et(c,d,re,K,g,Y)}var Uw=null,zw=null;function Df(c){return c.nodeType===9?c:c.ownerDocument}function jx(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kx(c,d){if(c===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&d==="foreignObject"?0:c}function Hw(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ww=null;function gB(){var c=window.event;return c&&c.type==="popstate"?c===Ww?!1:(Ww=c,!0):(Ww=null,!1)}var Zx=typeof setTimeout=="function"?setTimeout:void 0,pB=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,bB=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(c){return Yx.resolve(null).then(c).catch(wB)}:Zx;function wB(c){setTimeout(function(){throw c})}function rr(c){return c==="head"}function Jx(c,d){var f=d,g=0,_=0;do{var T=f.nextSibling;if(c.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<g&&8>g){f=g;var E=c.ownerDocument;if(f&1&&Eu(E.documentElement),f&2&&Eu(E.body),f&4)for(f=E.head,Eu(f),E=f.firstChild;E;){var R=E.nextSibling,M=E.nodeName;E[zc]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||f.removeChild(E),E=R}}if(_===0){c.removeChild(T),Nu(d);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:g=f.charCodeAt(0)-48;else g=0;f=T}while(f);Nu(d)}function qw(c){var d=c.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var f=d;switch(d=d.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":qw(f),Zp(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}c.removeChild(f)}}function yB(c,d,f,g){for(;c.nodeType===1;){var _=f;if(c.nodeName.toLowerCase()!==d.toLowerCase()){if(!g&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(g){if(!c[zc])switch(d){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(T=c.getAttribute("rel"),T==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(T!==_.rel||c.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||c.getAttribute("title")!==(_.title==null?null:_.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(T=c.getAttribute("src"),(T!==(_.src==null?null:_.src)||c.getAttribute("type")!==(_.type==null?null:_.type)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&T&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(d==="input"&&c.type==="hidden"){var T=_.name==null?null:""+_.name;if(_.type==="hidden"&&c.getAttribute("name")===T)return c}else return c;if(c=hs(c.nextSibling),c===null)break}return null}function _B(c,d,f){if(d==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=hs(c.nextSibling),c===null))return null;return c}function Gw(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function vB(c,d){var f=c.ownerDocument;if(c.data!=="$?"||f.readyState==="complete")d();else{var g=function(){d(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),c._reactRetry=g}}function hs(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return c}var $w=null;function Xx(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var f=c.data;if(f==="$"||f==="$!"||f==="$?"){if(d===0)return c;d--}else f==="/$"&&d++}c=c.previousSibling}return null}function Qx(c,d,f){switch(d=Df(f),c){case"html":if(c=d.documentElement,!c)throw Error(n(452));return c;case"head":if(c=d.head,!c)throw Error(n(453));return c;case"body":if(c=d.body,!c)throw Error(n(454));return c;default:throw Error(n(451))}}function Eu(c){for(var d=c.attributes;d.length;)c.removeAttributeNode(d[0]);Zp(c)}var ji=new Map,ek=new Set;function Lf(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var ho=oe.d;oe.d={f:CB,r:TB,D:xB,C:kB,L:EB,m:SB,X:RB,S:AB,M:IB};function CB(){var c=ho.f(),d=Af();return c||d}function TB(c){var d=sl(c);d!==null&&d.tag===5&&d.type==="form"?_T(d):ho.r(c)}var Bl=typeof document>"u"?null:document;function tk(c,d,f){var g=Bl;if(g&&typeof d=="string"&&d){var _=Ui(d);_='link[rel="'+c+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),ek.has(_)||(ek.add(_),c={rel:c,crossOrigin:f,href:d},g.querySelector(_)===null&&(d=g.createElement("link"),Mn(d,"link",c),yn(d),g.head.appendChild(d)))}}function xB(c){ho.D(c),tk("dns-prefetch",c,null)}function kB(c,d){ho.C(c,d),tk("preconnect",c,d)}function EB(c,d,f){ho.L(c,d,f);var g=Bl;if(g&&c&&d){var _='link[rel="preload"][as="'+Ui(d)+'"]';d==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+Ui(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+Ui(f.imageSizes)+'"]')):_+='[href="'+Ui(c)+'"]';var T=_;switch(d){case"style":T=Fl(c);break;case"script":T=Ul(c)}ji.has(T)||(c=h({rel:"preload",href:d==="image"&&f&&f.imageSrcSet?void 0:c,as:d},f),ji.set(T,c),g.querySelector(_)!==null||d==="style"&&g.querySelector(Su(T))||d==="script"&&g.querySelector(Au(T))||(d=g.createElement("link"),Mn(d,"link",c),yn(d),g.head.appendChild(d)))}}function SB(c,d){ho.m(c,d);var f=Bl;if(f&&c){var g=d&&typeof d.as=="string"?d.as:"script",_='link[rel="modulepreload"][as="'+Ui(g)+'"][href="'+Ui(c)+'"]',T=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ul(c)}if(!ji.has(T)&&(c=h({rel:"modulepreload",href:c},d),ji.set(T,c),f.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Au(T)))return}g=f.createElement("link"),Mn(g,"link",c),yn(g),f.head.appendChild(g)}}}function AB(c,d,f){ho.S(c,d,f);var g=Bl;if(g&&c){var _=ol(g).hoistableStyles,T=Fl(c);d=d||"default";var E=_.get(T);if(!E){var R={loading:0,preload:null};if(E=g.querySelector(Su(T)))R.loading=5;else{c=h({rel:"stylesheet",href:c,"data-precedence":d},f),(f=ji.get(T))&&jw(c,f);var M=E=g.createElement("link");yn(M),Mn(M,"link",c),M._p=new Promise(function(G,ne){M.onload=G,M.onerror=ne}),M.addEventListener("load",function(){R.loading|=1}),M.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Bf(E,d,g)}E={type:"stylesheet",instance:E,count:1,state:R},_.set(T,E)}}}function RB(c,d){ho.X(c,d);var f=Bl;if(f&&c){var g=ol(f).hoistableScripts,_=Ul(c),T=g.get(_);T||(T=f.querySelector(Au(_)),T||(c=h({src:c,async:!0},d),(d=ji.get(_))&&Kw(c,d),T=f.createElement("script"),yn(T),Mn(T,"link",c),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(_,T))}}function IB(c,d){ho.M(c,d);var f=Bl;if(f&&c){var g=ol(f).hoistableScripts,_=Ul(c),T=g.get(_);T||(T=f.querySelector(Au(_)),T||(c=h({src:c,async:!0,type:"module"},d),(d=ji.get(_))&&Kw(c,d),T=f.createElement("script"),yn(T),Mn(T,"link",c),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(_,T))}}function nk(c,d,f,g){var _=(_=Q.current)?Lf(_):null;if(!_)throw Error(n(446));switch(c){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(d=Fl(f.href),f=ol(_).hoistableStyles,g=f.get(d),g||(g={type:"style",instance:null,count:0,state:null},f.set(d,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){c=Fl(f.href);var T=ol(_).hoistableStyles,E=T.get(c);if(E||(_=_.ownerDocument||_,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(c,E),(T=_.querySelector(Su(c)))&&!T._p&&(E.instance=T,E.state.loading=5),ji.has(c)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ji.set(c,f),T||PB(_,c,f,E.state))),d&&g===null)throw Error(n(528,""));return E}if(d&&g!==null)throw Error(n(529,""));return null;case"script":return d=f.async,f=f.src,typeof f=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Ul(f),f=ol(_).hoistableScripts,g=f.get(d),g||(g={type:"script",instance:null,count:0,state:null},f.set(d,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,c))}}function Fl(c){return'href="'+Ui(c)+'"'}function Su(c){return'link[rel="stylesheet"]['+c+"]"}function ik(c){return h({},c,{"data-precedence":c.precedence,precedence:null})}function PB(c,d,f,g){c.querySelector('link[rel="preload"][as="style"]['+d+"]")?g.loading=1:(d=c.createElement("link"),g.preload=d,d.addEventListener("load",function(){return g.loading|=1}),d.addEventListener("error",function(){return g.loading|=2}),Mn(d,"link",f),yn(d),c.head.appendChild(d))}function Ul(c){return'[src="'+Ui(c)+'"]'}function Au(c){return"script[async]"+c}function sk(c,d,f){if(d.count++,d.instance===null)switch(d.type){case"style":var g=c.querySelector('style[data-href~="'+Ui(f.href)+'"]');if(g)return d.instance=g,yn(g),g;var _=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(c.ownerDocument||c).createElement("style"),yn(g),Mn(g,"style",_),Bf(g,f.precedence,c),d.instance=g;case"stylesheet":_=Fl(f.href);var T=c.querySelector(Su(_));if(T)return d.state.loading|=4,d.instance=T,yn(T),T;g=ik(f),(_=ji.get(_))&&jw(g,_),T=(c.ownerDocument||c).createElement("link"),yn(T);var E=T;return E._p=new Promise(function(R,M){E.onload=R,E.onerror=M}),Mn(T,"link",g),d.state.loading|=4,Bf(T,f.precedence,c),d.instance=T;case"script":return T=Ul(f.src),(_=c.querySelector(Au(T)))?(d.instance=_,yn(_),_):(g=f,(_=ji.get(T))&&(g=h({},f),Kw(g,_)),c=c.ownerDocument||c,_=c.createElement("script"),yn(_),Mn(_,"link",g),c.head.appendChild(_),d.instance=_);case"void":return null;default:throw Error(n(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(g=d.instance,d.state.loading|=4,Bf(g,f.precedence,c));return d.instance}function Bf(c,d,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,T=_,E=0;E<g.length;E++){var R=g[E];if(R.dataset.precedence===d)T=R;else if(T!==_)break}T?T.parentNode.insertBefore(c,T.nextSibling):(d=f.nodeType===9?f.head:f,d.insertBefore(c,d.firstChild))}function jw(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.title==null&&(c.title=d.title)}function Kw(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.integrity==null&&(c.integrity=d.integrity)}var Ff=null;function ok(c,d,f){if(Ff===null){var g=new Map,_=Ff=new Map;_.set(f,g)}else _=Ff,g=_.get(f),g||(g=new Map,_.set(f,g));if(g.has(c))return g;for(g.set(c,null),f=f.getElementsByTagName(c),_=0;_<f.length;_++){var T=f[_];if(!(T[zc]||T[Fn]||c==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var E=T.getAttribute(d)||"";E=c+E;var R=g.get(E);R?R.push(T):g.set(E,[T])}}return g}function rk(c,d,f){c=c.ownerDocument||c,c.head.insertBefore(f,d==="title"?c.querySelector("head > title"):null)}function MB(c,d,f){if(f===1||d.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return c=d.disabled,typeof d.precedence=="string"&&c==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function ak(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Ru=null;function VB(){}function NB(c,d,f){if(Ru===null)throw Error(n(475));var g=Ru;if(d.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var _=Fl(f.href),T=c.querySelector(Su(_));if(T){c=T._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(g.count++,g=Uf.bind(g),c.then(g,g)),d.state.loading|=4,d.instance=T,yn(T);return}T=c.ownerDocument||c,f=ik(f),(_=ji.get(_))&&jw(f,_),T=T.createElement("link"),yn(T);var E=T;E._p=new Promise(function(R,M){E.onload=R,E.onerror=M}),Mn(T,"link",f),d.instance=T}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(d,c),(c=d.state.preload)&&(d.state.loading&3)===0&&(g.count++,d=Uf.bind(g),c.addEventListener("load",d),c.addEventListener("error",d))}}function OB(){if(Ru===null)throw Error(n(475));var c=Ru;return c.stylesheets&&c.count===0&&Zw(c,c.stylesheets),0<c.count?function(d){var f=setTimeout(function(){if(c.stylesheets&&Zw(c,c.stylesheets),c.unsuspend){var g=c.unsuspend;c.unsuspend=null,g()}},6e4);return c.unsuspend=d,function(){c.unsuspend=null,clearTimeout(f)}}:null}function Uf(){if(this.count--,this.count===0){if(this.stylesheets)Zw(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var zf=null;function Zw(c,d){c.stylesheets=null,c.unsuspend!==null&&(c.count++,zf=new Map,d.forEach(DB,c),zf=null,Uf.call(c))}function DB(c,d){if(!(d.state.loading&4)){var f=zf.get(c);if(f)var g=f.get(null);else{f=new Map,zf.set(c,f);for(var _=c.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<_.length;T++){var E=_[T];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(f.set(E.dataset.precedence,E),g=E)}g&&f.set(null,g)}_=d.instance,E=_.getAttribute("data-precedence"),T=f.get(E)||g,T===g&&f.set(null,_),f.set(E,_),this.count++,g=Uf.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),T?T.parentNode.insertBefore(_,T.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(_,c.firstChild)),d.state.loading|=4}}var Iu={$$typeof:P,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function LB(c,d,f,g,_,T,E,R){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gp(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gp(0),this.hiddenUpdates=Gp(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=T,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function lk(c,d,f,g,_,T,E,R,M,G,ne,re){return c=new LB(c,d,f,E,R,M,G,re),d=1,T===!0&&(d|=24),T=Ei(3,null,null,d),c.current=T,T.stateNode=c,d=Ib(),d.refCount++,c.pooledCache=d,d.refCount++,T.memoizedState={element:g,isDehydrated:f,cache:d},Nb(T),c}function ck(c){return c?(c=bl,c):bl}function uk(c,d,f,g,_,T){_=ck(_),g.context===null?g.context=_:g.pendingContext=_,g=jo(d),g.payload={element:f},T=T===void 0?null:T,T!==null&&(g.callback=T),f=Ko(c,g,d),f!==null&&(Pi(f,c,d),ru(f,c,d))}function dk(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var f=c.retryLane;c.retryLane=f!==0&&f<d?f:d}}function Yw(c,d){dk(c,d),(c=c.alternate)&&dk(c,d)}function hk(c){if(c.tag===13){var d=pl(c,67108864);d!==null&&Pi(d,c,67108864),Yw(c,67108864)}}var Hf=!0;function BB(c,d,f,g){var _=D.T;D.T=null;var T=oe.p;try{oe.p=2,Jw(c,d,f,g)}finally{oe.p=T,D.T=_}}function FB(c,d,f,g){var _=D.T;D.T=null;var T=oe.p;try{oe.p=8,Jw(c,d,f,g)}finally{oe.p=T,D.T=_}}function Jw(c,d,f,g){if(Hf){var _=Xw(g);if(_===null)Bw(c,d,g,Wf,f),mk(c,g);else if(zB(_,c,d,f,g))g.stopPropagation();else if(mk(c,g),d&4&&-1<UB.indexOf(c)){for(;_!==null;){var T=sl(_);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var E=Rn(T.pendingLanes);if(E!==0){var R=T;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var M=1<<31-jt(E);R.entanglements[1]|=M,E&=~M}Ps(T),(_t&6)===0&&(Ef=He()+500,Tu(0))}}break;case 13:R=pl(T,2),R!==null&&Pi(R,T,2),Af(),Yw(T,2)}if(T=Xw(g),T===null&&Bw(c,d,g,Wf,f),T===_)break;_=T}_!==null&&g.stopPropagation()}else Bw(c,d,g,null,f)}}function Xw(c){return c=ib(c),Qw(c)}var Wf=null;function Qw(c){if(Wf=null,c=il(c),c!==null){var d=o(c);if(d===null)c=null;else{var f=d.tag;if(f===13){if(c=r(d),c!==null)return c;c=null}else if(f===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return Wf=c,null}function fk(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(An()){case ct:return 2;case gt:return 8;case xi:case ri:return 32;case un:return 268435456;default:return 32}default:return 32}}var ey=!1,ar=null,lr=null,cr=null,Pu=new Map,Mu=new Map,ur=[],UB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mk(c,d){switch(c){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Pu.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(d.pointerId)}}function Vu(c,d,f,g,_,T){return c===null||c.nativeEvent!==T?(c={blockedOn:d,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[_]},d!==null&&(d=sl(d),d!==null&&hk(d)),c):(c.eventSystemFlags|=g,d=c.targetContainers,_!==null&&d.indexOf(_)===-1&&d.push(_),c)}function zB(c,d,f,g,_){switch(d){case"focusin":return ar=Vu(ar,c,d,f,g,_),!0;case"dragenter":return lr=Vu(lr,c,d,f,g,_),!0;case"mouseover":return cr=Vu(cr,c,d,f,g,_),!0;case"pointerover":var T=_.pointerId;return Pu.set(T,Vu(Pu.get(T)||null,c,d,f,g,_)),!0;case"gotpointercapture":return T=_.pointerId,Mu.set(T,Vu(Mu.get(T)||null,c,d,f,g,_)),!0}return!1}function gk(c){var d=il(c.target);if(d!==null){var f=o(d);if(f!==null){if(d=f.tag,d===13){if(d=r(f),d!==null){c.blockedOn=d,ND(c.priority,function(){if(f.tag===13){var g=Ii();g=$p(g);var _=pl(f,g);_!==null&&Pi(_,f,g),Yw(f,g)}});return}}else if(d===3&&f.stateNode.current.memoizedState.isDehydrated){c.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}c.blockedOn=null}function qf(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var f=Xw(c.nativeEvent);if(f===null){f=c.nativeEvent;var g=new f.constructor(f.type,f);nb=g,f.target.dispatchEvent(g),nb=null}else return d=sl(f),d!==null&&hk(d),c.blockedOn=f,!1;d.shift()}return!0}function pk(c,d,f){qf(c)&&f.delete(d)}function HB(){ey=!1,ar!==null&&qf(ar)&&(ar=null),lr!==null&&qf(lr)&&(lr=null),cr!==null&&qf(cr)&&(cr=null),Pu.forEach(pk),Mu.forEach(pk)}function Gf(c,d){c.blockedOn===d&&(c.blockedOn=null,ey||(ey=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,HB)))}var $f=null;function bk(c){$f!==c&&($f=c,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){$f===c&&($f=null);for(var d=0;d<c.length;d+=3){var f=c[d],g=c[d+1],_=c[d+2];if(typeof g!="function"){if(Qw(g||f)===null)continue;break}var T=sl(f);T!==null&&(c.splice(d,3),d-=3,Qb(T,{pending:!0,data:_,method:f.method,action:g},g,_))}}))}function Nu(c){function d(M){return Gf(M,c)}ar!==null&&Gf(ar,c),lr!==null&&Gf(lr,c),cr!==null&&Gf(cr,c),Pu.forEach(d),Mu.forEach(d);for(var f=0;f<ur.length;f++){var g=ur[f];g.blockedOn===c&&(g.blockedOn=null)}for(;0<ur.length&&(f=ur[0],f.blockedOn===null);)gk(f),f.blockedOn===null&&ur.shift();if(f=(c.ownerDocument||c).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var _=f[g],T=f[g+1],E=_[ai]||null;if(typeof T=="function")E||bk(f);else if(E){var R=null;if(T&&T.hasAttribute("formAction")){if(_=T,E=T[ai]||null)R=E.formAction;else if(Qw(_)!==null)continue}else R=E.action;typeof R=="function"?f[g+1]=R:(f.splice(g,3),g-=3),bk(f)}}}function ty(c){this._internalRoot=c}jf.prototype.render=ty.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(n(409));var f=d.current,g=Ii();uk(f,g,c,d,null,null)},jf.prototype.unmount=ty.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;uk(c.current,2,null,c,null,null),Af(),d[nl]=null}};function jf(c){this._internalRoot=c}jf.prototype.unstable_scheduleHydration=function(c){if(c){var d=N1();c={blockedOn:null,target:c,priority:d};for(var f=0;f<ur.length&&d!==0&&d<ur[f].priority;f++);ur.splice(f,0,c),f===0&&gk(c)}};var wk=t.version;if(wk!=="19.1.0")throw Error(n(527,wk,"19.1.0"));oe.findDOMNode=function(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=l(d),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var WB={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{$e=Kf.inject(WB),Pt=Kf}catch{}}return Du.createRoot=function(c,d){if(!s(c))throw Error(n(299));var f=!1,g="",_=NT,T=OT,E=DT,R=null;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(E=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(R=d.unstable_transitionCallbacks)),d=lk(c,1,!1,null,null,f,g,_,T,E,R,null),c[nl]=d.current,Lw(c),new ty(d)},Du.hydrateRoot=function(c,d,f){if(!s(c))throw Error(n(299));var g=!1,_="",T=NT,E=OT,R=DT,M=null,G=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(E=f.onCaughtError),f.onRecoverableError!==void 0&&(R=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(M=f.unstable_transitionCallbacks),f.formState!==void 0&&(G=f.formState)),d=lk(c,1,!0,d,f??null,g,_,T,E,R,M,G),d.context=ck(null),f=d.current,g=Ii(),g=$p(g),_=jo(g),_.callback=null,Ko(f,_,g),f=g,d.current.lanes=f,Uc(d,f),Ps(d),c[nl]=d.current,Lw(c),new jf(d)},Du.version="19.1.0",Du}var Ak;function n3(){if(Ak)return sy.exports;Ak=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),sy.exports=t3(),sy.exports}var i3=n3(),Lu={},Rk;function s3(){if(Rk)return Lu;Rk=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.parse=r,Lu.serialize=u;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function r(p,v){const C=new o,x=p.length;if(x<2)return C;const k=(v==null?void 0:v.decode)||h;let S=0;do{const I=p.indexOf("=",S);if(I===-1)break;const P=p.indexOf(";",S),L=P===-1?x:P;if(I>L){S=p.lastIndexOf(";",I-1)+1;continue}const O=a(p,S,I),J=l(p,I,O),F=p.slice(O,J);if(C[F]===void 0){let j=a(p,I+1,L),U=l(p,L,j);const X=k(p.slice(j,U));C[F]=X}S=L+1}while(S<x);return C}function a(p,v,C){do{const x=p.charCodeAt(v);if(x!==32&&x!==9)return v}while(++v<C);return C}function l(p,v,C){for(;v>C;){const x=p.charCodeAt(--v);if(x!==32&&x!==9)return v+1}return C}function u(p,v,C){const x=(C==null?void 0:C.encode)||encodeURIComponent;if(!i.test(p))throw new TypeError(`argument name is invalid: ${p}`);const k=x(v);if(!t.test(k))throw new TypeError(`argument val is invalid: ${v}`);let S=p+"="+k;if(!C)return S;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);S+="; Max-Age="+C.maxAge}if(C.domain){if(!e.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);S+="; Domain="+C.domain}if(C.path){if(!n.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);S+="; Path="+C.path}if(C.expires){if(!m(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);S+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(S+="; HttpOnly"),C.secure&&(S+="; Secure"),C.partitioned&&(S+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return S}function h(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return s.call(p)==="[object Date]"}return Lu}s3();var Ik="popstate";function o3(i={}){function t(s,o){let{pathname:r="/",search:a="",hash:l=""}=za(s.location.hash.substring(1));return!r.startsWith("/")&&!r.startsWith(".")&&(r="/"+r),p_("",{pathname:r,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(s,o){let r=s.document.querySelector("base"),a="";if(r&&r.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof o=="string"?o:Ld(o))}function n(s,o){es(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return a3(t,e,n,i)}function $t(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function es(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function r3(){return Math.random().toString(36).substring(2,10)}function Pk(i,t){return{usr:i.state,key:i.key,idx:t}}function p_(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?za(t):t,state:e,key:t&&t.key||n||r3()}}function Ld({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function za(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function a3(i,t,e,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,r=s.history,a="POP",l=null,u=h();u==null&&(u=0,r.replaceState({...r.state,idx:u},""));function h(){return(r.state||{idx:null}).idx}function m(){a="POP";let k=h(),S=k==null?null:k-u;u=k,l&&l({action:a,location:x.location,delta:S})}function p(k,S){a="PUSH";let I=p_(x.location,k,S);e&&e(I,k),u=h()+1;let P=Pk(I,u),L=x.createHref(I);try{r.pushState(P,"",L)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(L)}o&&l&&l({action:a,location:x.location,delta:1})}function v(k,S){a="REPLACE";let I=p_(x.location,k,S);e&&e(I,k),u=h();let P=Pk(I,u),L=x.createHref(I);r.replaceState(P,"",L),o&&l&&l({action:a,location:x.location,delta:0})}function C(k){return l3(k)}let x={get action(){return a},get location(){return i(s,r)},listen(k){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ik,m),l=k,()=>{s.removeEventListener(Ik,m),l=null}},createHref(k){return t(s,k)},createURL:C,encodeLocation(k){let S=C(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:v,go(k){return r.go(k)}};return x}function l3(i,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),$t(e,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Ld(i);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function QI(i,t,e="/"){return c3(i,t,e,!1)}function c3(i,t,e,n){let s=typeof t=="string"?za(t):t,o=Po(s.pathname||"/",e);if(o==null)return null;let r=eP(i);u3(r);let a=null;for(let l=0;a==null&&l<r.length;++l){let u=v3(o);a=y3(r[l],u,n)}return a}function eP(i,t=[],e=[],n=""){let s=(o,r,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:r,route:o};l.relativePath.startsWith("/")&&($t(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=Ao([n,l.relativePath]),h=e.concat(l);o.children&&o.children.length>0&&($t(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),eP(o.children,t,h,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:b3(u,o.index),routesMeta:h})};return i.forEach((o,r)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,r);else for(let l of tP(o.path))s(o,r,l)}),t}function tP(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let r=tP(n.join("/")),a=[];return a.push(...r.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...r),a.map(l=>i.startsWith("/")&&l===""?"/":l)}function u3(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:w3(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var d3=/^:[\w-]+$/,h3=3,f3=2,m3=1,g3=10,p3=-2,Mk=i=>i==="*";function b3(i,t){let e=i.split("/"),n=e.length;return e.some(Mk)&&(n+=p3),t&&(n+=f3),e.filter(s=>!Mk(s)).reduce((s,o)=>s+(d3.test(o)?h3:o===""?m3:g3),n)}function w3(i,t){return i.length===t.length&&i.slice(0,-1).every((n,s)=>n===t[s])?i[i.length-1]-t[t.length-1]:0}function y3(i,t,e=!1){let{routesMeta:n}=i,s={},o="/",r=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,h=o==="/"?t:t.slice(o.length)||"/",m=rg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!m&&u&&e&&!n[n.length-1].route.index&&(m=rg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),r.push({params:s,pathname:Ao([o,m.pathname]),pathnameBase:k3(Ao([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=Ao([o,m.pathnameBase]))}return r}function rg(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=_3(i.path,i.caseSensitive,i.end),s=t.match(e);if(!s)return null;let o=s[0],r=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:m},p)=>{if(h==="*"){let C=a[p]||"";r=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const v=a[p];return m&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:r,pattern:i}}function _3(i,t=!1,e=!0){es(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function v3(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return es(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Po(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function C3(i,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof i=="string"?za(i):i;return{pathname:e?e.startsWith("/")?e:T3(e,t):t,search:E3(n),hash:S3(s)}}function T3(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function ly(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function x3(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function nP(i){let t=x3(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function iP(i,t,e,n=!1){let s;typeof i=="string"?s=za(i):(s={...i},$t(!s.pathname||!s.pathname.includes("?"),ly("?","pathname","search",s)),$t(!s.pathname||!s.pathname.includes("#"),ly("#","pathname","hash",s)),$t(!s.search||!s.search.includes("#"),ly("#","search","hash",s)));let o=i===""||s.pathname==="",r=o?"/":s.pathname,a;if(r==null)a=e;else{let m=t.length-1;if(!n&&r.startsWith("..")){let p=r.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}a=m>=0?t[m]:"/"}let l=C3(s,a),u=r&&r!=="/"&&r.endsWith("/"),h=(o||r===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var Ao=i=>i.join("/").replace(/\/\/+/g,"/"),k3=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),E3=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,S3=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function A3(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var sP=["POST","PUT","PATCH","DELETE"];new Set(sP);var R3=["GET",...sP];new Set(R3);var Pc=H.createContext(null);Pc.displayName="DataRouter";var lp=H.createContext(null);lp.displayName="DataRouterState";var oP=H.createContext({isTransitioning:!1});oP.displayName="ViewTransition";var I3=H.createContext(new Map);I3.displayName="Fetchers";var P3=H.createContext(null);P3.displayName="Await";var js=H.createContext(null);js.displayName="Navigation";var Th=H.createContext(null);Th.displayName="Location";var Do=H.createContext({outlet:null,matches:[],isDataRoute:!1});Do.displayName="Route";var qv=H.createContext(null);qv.displayName="RouteError";function M3(i,{relative:t}={}){$t(xh(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=H.useContext(js),{hash:s,pathname:o,search:r}=kh(i,{relative:t}),a=o;return e!=="/"&&(a=o==="/"?e:Ao([e,o])),n.createHref({pathname:a,search:r,hash:s})}function xh(){return H.useContext(Th)!=null}function Br(){return $t(xh(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Th).location}var rP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aP(i){H.useContext(js).static||H.useLayoutEffect(i)}function cp(){let{isDataRoute:i}=H.useContext(Do);return i?G3():V3()}function V3(){$t(xh(),"useNavigate() may be used only in the context of a <Router> component.");let i=H.useContext(Pc),{basename:t,navigator:e}=H.useContext(js),{matches:n}=H.useContext(Do),{pathname:s}=Br(),o=JSON.stringify(nP(n)),r=H.useRef(!1);return aP(()=>{r.current=!0}),H.useCallback((l,u={})=>{if(es(r.current,rP),!r.current)return;if(typeof l=="number"){e.go(l);return}let h=iP(l,JSON.parse(o),s,u.relative==="path");i==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ao([t,h.pathname])),(u.replace?e.replace:e.push)(h,u.state,u)},[t,e,o,s,i])}H.createContext(null);function kh(i,{relative:t}={}){let{matches:e}=H.useContext(Do),{pathname:n}=Br(),s=JSON.stringify(nP(e));return H.useMemo(()=>iP(i,JSON.parse(s),n,t==="path"),[i,s,n,t])}function N3(i,t){return lP(i,t)}function lP(i,t,e,n){var I;$t(xh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=H.useContext(js),{matches:r}=H.useContext(Do),a=r[r.length-1],l=a?a.params:{},u=a?a.pathname:"/",h=a?a.pathnameBase:"/",m=a&&a.route;{let P=m&&m.path||"";cP(u,!m||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let p=Br(),v;if(t){let P=typeof t=="string"?za(t):t;$t(h==="/"||((I=P.pathname)==null?void 0:I.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${P.pathname}" was given in the \`location\` prop.`),v=P}else v=p;let C=v.pathname||"/",x=C;if(h!=="/"){let P=h.replace(/^\//,"").split("/");x="/"+C.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=!o&&e&&e.matches&&e.matches.length>0?e.matches:QI(i,{pathname:x});es(m||k!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),es(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=F3(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:Ao([h,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?h:Ao([h,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),r,e,n);return t&&S?H.createElement(Th.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function O3(){let i=q3(),t=A3(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},r=null;return console.error("Error handled by React Router default ErrorBoundary:",i),r=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:o},"ErrorBoundary")," or"," ",H.createElement("code",{style:o},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),e?H.createElement("pre",{style:s},e):null,r)}var D3=H.createElement(O3,null),L3=class extends H.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?H.createElement(Do.Provider,{value:this.props.routeContext},H.createElement(qv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function B3({routeContext:i,match:t,children:e}){let n=H.useContext(Pc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Do.Provider,{value:i},e)}function F3(i,t=[],e=null,n=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let s=i,o=e==null?void 0:e.errors;if(o!=null){let l=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);$t(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let r=!1,a=-1;if(e)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:h,errors:m}=e,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||p){r=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,h)=>{let m,p=!1,v=null,C=null;e&&(m=o&&u.route.id?o[u.route.id]:void 0,v=u.route.errorElement||D3,r&&(a<0&&h===0?(cP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,C=null):a===h&&(p=!0,C=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,h+1)),k=()=>{let S;return m?S=v:p?S=C:u.route.Component?S=H.createElement(u.route.Component,null):u.route.element?S=u.route.element:S=l,H.createElement(B3,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:e!=null},children:S})};return e&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?H.createElement(L3,{location:e.location,revalidation:e.revalidation,component:v,error:m,children:k(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):k()},null)}function Gv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U3(i){let t=H.useContext(Pc);return $t(t,Gv(i)),t}function z3(i){let t=H.useContext(lp);return $t(t,Gv(i)),t}function H3(i){let t=H.useContext(Do);return $t(t,Gv(i)),t}function $v(i){let t=H3(i),e=t.matches[t.matches.length-1];return $t(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function W3(){return $v("useRouteId")}function q3(){var n;let i=H.useContext(qv),t=z3("useRouteError"),e=$v("useRouteError");return i!==void 0?i:(n=t.errors)==null?void 0:n[e]}function G3(){let{router:i}=U3("useNavigate"),t=$v("useNavigate"),e=H.useRef(!1);return aP(()=>{e.current=!0}),H.useCallback(async(s,o={})=>{es(e.current,rP),e.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:t,...o}))},[i,t])}var Vk={};function cP(i,t,e){!t&&!Vk[i]&&(Vk[i]=!0,es(!1,e))}H.memo($3);function $3({routes:i,future:t,state:e}){return lP(i,void 0,e,t)}function fs(i){$t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function j3({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:o=!1}){$t(!xh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=i.replace(/^\/*/,"/"),a=H.useMemo(()=>({basename:r,navigator:s,static:o,future:{}}),[r,s,o]);typeof e=="string"&&(e=za(e));let{pathname:l="/",search:u="",hash:h="",state:m=null,key:p="default"}=e,v=H.useMemo(()=>{let C=Po(l,r);return C==null?null:{location:{pathname:C,search:u,hash:h,state:m,key:p},navigationType:n}},[r,l,u,h,m,p,n]);return es(v!=null,`<Router basename="${r}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:H.createElement(js.Provider,{value:a},H.createElement(Th.Provider,{children:t,value:v}))}function K3({children:i,location:t}){return N3(b_(i),t)}function b_(i,t=[]){let e=[];return H.Children.forEach(i,(n,s)=>{if(!H.isValidElement(n))return;let o=[...t,s];if(n.type===H.Fragment){e.push.apply(e,b_(n.props.children,o));return}$t(n.type===fs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$t(!n.props.index||!n.props.children,"An index route cannot have child routes.");let r={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(r.children=b_(n.props.children,o)),e.push(r)}),e}var Vm="get",Nm="application/x-www-form-urlencoded";function up(i){return i!=null&&typeof i.tagName=="string"}function Z3(i){return up(i)&&i.tagName.toLowerCase()==="button"}function Y3(i){return up(i)&&i.tagName.toLowerCase()==="form"}function J3(i){return up(i)&&i.tagName.toLowerCase()==="input"}function X3(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Q3(i,t){return i.button===0&&(!t||t==="_self")&&!X3(i)}function w_(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((t,e)=>{let n=i[e];return t.concat(Array.isArray(n)?n.map(s=>[e,s]):[[e,n]])},[]))}function e4(i,t){let e=w_(i);return t&&t.forEach((n,s)=>{e.has(s)||t.getAll(s).forEach(o=>{e.append(s,o)})}),e}var Zf=null;function t4(){if(Zf===null)try{new FormData(document.createElement("form"),0),Zf=!1}catch{Zf=!0}return Zf}var n4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cy(i){return i!=null&&!n4.has(i)?(es(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nm}"`),null):i}function i4(i,t){let e,n,s,o,r;if(Y3(i)){let a=i.getAttribute("action");n=a?Po(a,t):null,e=i.getAttribute("method")||Vm,s=cy(i.getAttribute("enctype"))||Nm,o=new FormData(i)}else if(Z3(i)||J3(i)&&(i.type==="submit"||i.type==="image")){let a=i.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=i.getAttribute("formaction")||a.getAttribute("action");if(n=l?Po(l,t):null,e=i.getAttribute("formmethod")||a.getAttribute("method")||Vm,s=cy(i.getAttribute("formenctype"))||cy(a.getAttribute("enctype"))||Nm,o=new FormData(a,i),!t4()){let{name:u,type:h,value:m}=i;if(h==="image"){let p=u?`${u}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else u&&o.append(u,m)}}else{if(up(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Vm,n=null,s=Nm,r=i}return o&&s==="text/plain"&&(r=o,o=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:o,body:r}}function jv(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}async function s4(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o4(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function r4(i,t,e){let n=await Promise.all(i.map(async s=>{let o=t.routes[s.route.id];if(o){let r=await s4(o,e);return r.links?r.links():[]}return[]}));return u4(n.flat(1).filter(o4).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Nk(i,t,e,n,s,o){let r=(l,u)=>e[u]?l.route.id!==e[u].route.id:!0,a=(l,u)=>{var h;return e[u].pathname!==l.pathname||((h=e[u].route.path)==null?void 0:h.endsWith("*"))&&e[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>r(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var m;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(r(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=e[0])==null?void 0:m.params)||{},nextUrl:new URL(i,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function a4(i,t,{includeHydrateFallback:e}={}){return l4(i.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function l4(i){return[...new Set(i)]}function c4(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function u4(i,t){let e=new Set;return new Set(t),i.reduce((n,s)=>{let o=JSON.stringify(c4(s));return e.has(o)||(e.add(o),n.push({key:o,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var d4=new Set([100,101,204,205]);function h4(i,t){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":t&&Po(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function uP(){let i=H.useContext(Pc);return jv(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function f4(){let i=H.useContext(lp);return jv(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Kv=H.createContext(void 0);Kv.displayName="FrameworkContext";function dP(){let i=H.useContext(Kv);return jv(i,"You must render this element inside a <HydratedRouter> element"),i}function m4(i,t){let e=H.useContext(Kv),[n,s]=H.useState(!1),[o,r]=H.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:m}=t,p=H.useRef(null);H.useEffect(()=>{if(i==="render"&&r(!0),i==="viewport"){let x=S=>{S.forEach(I=>{r(I.isIntersecting)})},k=new IntersectionObserver(x,{threshold:.5});return p.current&&k.observe(p.current),()=>{k.disconnect()}}},[i]),H.useEffect(()=>{if(n){let x=setTimeout(()=>{r(!0)},100);return()=>{clearTimeout(x)}}},[n]);let v=()=>{s(!0)},C=()=>{s(!1),r(!1)};return e?i!=="intent"?[o,p,{}]:[o,p,{onFocus:Bu(a,v),onBlur:Bu(l,C),onMouseEnter:Bu(u,v),onMouseLeave:Bu(h,C),onTouchStart:Bu(m,v)}]:[!1,p,{}]}function Bu(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function g4({page:i,...t}){let{router:e}=uP(),n=H.useMemo(()=>QI(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?H.createElement(b4,{page:i,matches:n,...t}):null}function p4(i){let{manifest:t,routeModules:e}=dP(),[n,s]=H.useState([]);return H.useEffect(()=>{let o=!1;return r4(i,t,e).then(r=>{o||s(r)}),()=>{o=!0}},[i,t,e]),n}function b4({page:i,matches:t,...e}){let n=Br(),{manifest:s,routeModules:o}=dP(),{basename:r}=uP(),{loaderData:a,matches:l}=f4(),u=H.useMemo(()=>Nk(i,t,l,s,n,"data"),[i,t,l,s,n]),h=H.useMemo(()=>Nk(i,t,l,s,n,"assets"),[i,t,l,s,n]),m=H.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let C=new Set,x=!1;if(t.forEach(S=>{var P;let I=s.routes[S.route.id];!I||!I.hasLoader||(!u.some(L=>L.route.id===S.route.id)&&S.route.id in a&&((P=o[S.route.id])!=null&&P.shouldRevalidate)||I.hasClientLoader?x=!0:C.add(S.route.id))}),C.size===0)return[];let k=h4(i,r);return x&&C.size>0&&k.searchParams.set("_routes",t.filter(S=>C.has(S.route.id)).map(S=>S.route.id).join(",")),[k.pathname+k.search]},[r,a,n,s,u,t,i,o]),p=H.useMemo(()=>a4(h,s),[h,s]),v=p4(h);return H.createElement(H.Fragment,null,m.map(C=>H.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...e})),p.map(C=>H.createElement("link",{key:C,rel:"modulepreload",href:C,...e})),v.map(({key:C,link:x})=>H.createElement("link",{key:C,...x})))}function w4(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var hP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hP&&(window.__reactRouterVersion="7.6.0")}catch{}function y4({basename:i,children:t,window:e}){let n=H.useRef();n.current==null&&(n.current=o3({window:e,v5Compat:!0}));let s=n.current,[o,r]=H.useState({action:s.action,location:s.location}),a=H.useCallback(l=>{H.startTransition(()=>r(l))},[r]);return H.useLayoutEffect(()=>s.listen(a),[s,a]),H.createElement(j3,{basename:i,children:t,location:o.location,navigationType:o.action,navigator:s})}var fP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_a=H.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:o,replace:r,state:a,target:l,to:u,preventScrollReset:h,viewTransition:m,...p},v){let{basename:C}=H.useContext(js),x=typeof u=="string"&&fP.test(u),k,S=!1;if(typeof u=="string"&&x&&(k=u,hP))try{let U=new URL(window.location.href),X=u.startsWith("//")?new URL(U.protocol+u):new URL(u),le=Po(X.pathname,C);X.origin===U.origin&&le!=null?u=le+X.search+X.hash:S=!0}catch{es(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=M3(u,{relative:s}),[P,L,O]=m4(n,p),J=T4(u,{replace:r,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:m});function F(U){t&&t(U),U.defaultPrevented||J(U)}let j=H.createElement("a",{...p,...O,href:k||I,onClick:S||o?t:F,ref:w4(v,L),target:l,"data-discover":!x&&e==="render"?"true":void 0});return P&&!x?H.createElement(H.Fragment,null,j,H.createElement(g4,{page:I})):j});_a.displayName="Link";var _4=H.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:o,to:r,viewTransition:a,children:l,...u},h){let m=kh(r,{relative:u.relative}),p=Br(),v=H.useContext(lp),{navigator:C,basename:x}=H.useContext(js),k=v!=null&&R4(m)&&a===!0,S=C.encodeLocation?C.encodeLocation(m).pathname:m.pathname,I=p.pathname,P=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(I=I.toLowerCase(),P=P?P.toLowerCase():null,S=S.toLowerCase()),P&&x&&(P=Po(P,x)||P);const L=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=I===S||!s&&I.startsWith(S)&&I.charAt(L)==="/",J=P!=null&&(P===S||!s&&P.startsWith(S)&&P.charAt(S.length)==="/"),F={isActive:O,isPending:J,isTransitioning:k},j=O?t:void 0,U;typeof n=="function"?U=n(F):U=[n,O?"active":null,J?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let X=typeof o=="function"?o(F):o;return H.createElement(_a,{...u,"aria-current":j,className:U,ref:h,style:X,to:r,viewTransition:a},typeof l=="function"?l(F):l)});_4.displayName="NavLink";var v4=H.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:o,method:r=Vm,action:a,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:m,...p},v)=>{let C=S4(),x=A4(a,{relative:u}),k=r.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&fP.test(a),I=P=>{if(l&&l(P),P.defaultPrevented)return;P.preventDefault();let L=P.nativeEvent.submitter,O=(L==null?void 0:L.getAttribute("formmethod"))||r;C(L||P.currentTarget,{fetcherKey:t,method:O,navigate:e,replace:s,state:o,relative:u,preventScrollReset:h,viewTransition:m})};return H.createElement("form",{ref:v,method:k,action:x,onSubmit:n?l:I,...p,"data-discover":!S&&i==="render"?"true":void 0})});v4.displayName="Form";function C4(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mP(i){let t=H.useContext(Pc);return $t(t,C4(i)),t}function T4(i,{target:t,replace:e,state:n,preventScrollReset:s,relative:o,viewTransition:r}={}){let a=cp(),l=Br(),u=kh(i,{relative:o});return H.useCallback(h=>{if(Q3(h,t)){h.preventDefault();let m=e!==void 0?e:Ld(l)===Ld(u);a(i,{replace:m,state:n,preventScrollReset:s,relative:o,viewTransition:r})}},[l,a,u,e,n,t,i,s,o,r])}function x4(i){es(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=H.useRef(w_(i)),e=H.useRef(!1),n=Br(),s=H.useMemo(()=>e4(n.search,e.current?null:t.current),[n.search]),o=cp(),r=H.useCallback((a,l)=>{const u=w_(typeof a=="function"?a(s):a);e.current=!0,o("?"+u,l)},[o,s]);return[s,r]}var k4=0,E4=()=>`__${String(++k4)}__`;function S4(){let{router:i}=mP("useSubmit"),{basename:t}=H.useContext(js),e=W3();return H.useCallback(async(n,s={})=>{let{action:o,method:r,encType:a,formData:l,body:u}=i4(n,t);if(s.navigate===!1){let h=s.fetcherKey||E4();await i.fetch(h,e,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||r,formEncType:s.encType||a,flushSync:s.flushSync})}else await i.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||r,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,t,e])}function A4(i,{relative:t}={}){let{basename:e}=H.useContext(js),n=H.useContext(Do);$t(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...kh(i||".",{relative:t})},r=Br();if(i==null){o.search=r.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(m=>m).forEach(m=>a.append("index",m));let h=a.toString();o.search=h?`?${h}`:""}}return(!i||i===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Ao([e,o.pathname])),Ld(o)}function R4(i,t={}){let e=H.useContext(oP);$t(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=mP("useViewTransitionState"),s=kh(i,{relative:t.relative});if(!e.isTransitioning)return!1;let o=Po(e.currentLocation.pathname,n)||e.currentLocation.pathname,r=Po(e.nextLocation.pathname,n)||e.nextLocation.pathname;return rg(s.pathname,r)!=null||rg(s.pathname,o)!=null}[...d4];const I4="/animalCenter/assets/banner-CERUORKF.png",P4="/animalCenter/assets/logos-Cdnk2mcR.png",y_=[{title:"동물보호센터",link:"/IntroCenter",sub:[{subTitle:"동물보호센터 소개",subLink:"/IntroCenter"},{subTitle:"오시는길",subLink:"/ContactUs"}]},{title:"동물보호정보",link:"/Information",sub:[{subTitle:"유기동물 현황",subLink:"/Current"},{subTitle:"유기동물 보호정보",subLink:"/Information"},{subTitle:"유기동물 신고",subLink:"/Call"}]},{title:"반려생활 길잡이",link:"/Guide",sub:[{subTitle:"반려생활 길잡이",subLink:"/Guide"},{subTitle:"반려동물 출입식당",subLink:"/Restaurant"},{subTitle:"무엇이든 물어보살",subLink:"/QnA"}]}],M4="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M29%2046H169'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3cpath%20d='M69%20100H169'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3cpath%20d='M29%20154L169%20154'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3c/svg%3e",V4="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1_13)'%3e%3cpath%20d='M36%2036L163.279%20163.279'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3cpath%20d='M163%2036L35.7208%20163.279'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1_13'%3e%3crect%20width='200'%20height='200'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";function N4(){const[i,t]=H.useState(!1),[e,n]=H.useState(4);return A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx(_a,{to:"/",children:A.jsx("img",{className:"h-20",src:P4,alt:""})}),A.jsx("ul",{className:"flex items-center font-nanum max-sm:hidden",children:y_.map((s,o)=>A.jsxs("li",{className:"relative h-full flex items-center group",children:[A.jsx(_a,{className:"py-4 px-6 font-bold hover:text-primary-500",to:s.link,children:s.title}),A.jsx("ul",{className:"bg-white absolute top-full left-1/2 -translate-x-1/2 shadow rounded overflow-hidden hidden group-hover:block w-30",children:s.sub.map((r,a)=>A.jsx("li",{children:A.jsx(_a,{to:r.subLink,className:"p-3 block hover:bg-primary-500 hover:text-white",children:r.subTitle})},a))})]},o))}),A.jsx("img",{src:M4,alt:"",className:"w-10 h-10 sm:hidden me-4 ml-auto",onClick:()=>t(!0)}),A.jsxs("div",{className:`fixed right-0 w-2/3 bg-slate-700 h-full z-2 top-0 transition-transform duration-400 ${i?"":"translate-x-full"}`,children:[A.jsx("div",{className:"flex justify-end",children:A.jsx("img",{src:V4,alt:"",className:"w-12 h-12 p-2 invert",onClick:()=>t(!1)})}),A.jsx("h1",{className:"mt-4 text-xl text-center font-bold text-white",children:"대전 동물보호센터"}),A.jsx("ul",{className:"mt-8",children:y_.map((s,o)=>A.jsxs("li",{children:[A.jsxs("div",{className:`flex justify-between p-4 ${e==o?"bg-blue-600":"bg-slate-800"}`,onClick:()=>n(o),children:[A.jsx("span",{className:"text-white font-bold",children:s.title}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"white",className:`size-6 ${e==o?"rotate-180":null}`,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),A.jsx("div",{className:`overflow-hidden duration-75 ${e==o?null:"h-0"}`,children:s.sub.map((r,a)=>A.jsx(_a,{onClick:()=>t(!1),to:r.subTitle,className:"w-full p-4 bg-white block border-y border-y-gray-200",children:r.subTitle},a))})]},o))})]}),i&&A.jsx("div",{className:"fixed w-full h-full top-0 left-0 bg-[#00000077] z-1",onClick:()=>t(!1)})]})}function O4(){return A.jsxs("footer",{className:"bg-slate-600 p-10",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-amber-300 font-bold pe-4",children:"개인정보처리방침"}),A.jsx("span",{className:"font-bold text-gray-400 px-4 border-s border-s-gray-500",children:"누리집 개선의견"}),A.jsx("span",{className:"font-bold text-gray-400 px-4 border-s border-s-gray-500",children:"오시는 길"})]}),A.jsxs("div",{className:"mt-6 text-white text-sm",children:[A.jsx("p",{children:"(34001) 대전광역시 유성구 금고길 7(금고동) 대전반려동물공원"}),A.jsx("p",{children:"(34001) 대전광역시 유성구 금남구즉로 1234(금고동) 대전동물보호센터 / 대표전화 (042) 270-7239"})]}),A.jsx("div",{className:"mt-2 text-gray-300 text-[14px]",children:"COPYRIGHT 2023 (c) DAEJEON METROPOLITAN CITY. ALL RIGHTS RESERVED."})]})}function gP(i,t){return function(){return i.apply(t,arguments)}}const{toString:D4}=Object.prototype,{getPrototypeOf:Zv}=Object,{iterator:dp,toStringTag:pP}=Symbol,hp=(i=>t=>{const e=D4.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Es=i=>(i=i.toLowerCase(),t=>hp(t)===i),fp=i=>t=>typeof t===i,{isArray:Mc}=Array,Bd=fp("undefined");function L4(i){return i!==null&&!Bd(i)&&i.constructor!==null&&!Bd(i.constructor)&&_i(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const bP=Es("ArrayBuffer");function B4(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&bP(i.buffer),t}const F4=fp("string"),_i=fp("function"),wP=fp("number"),mp=i=>i!==null&&typeof i=="object",U4=i=>i===!0||i===!1,Om=i=>{if(hp(i)!=="object")return!1;const t=Zv(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(pP in i)&&!(dp in i)},z4=Es("Date"),H4=Es("File"),W4=Es("Blob"),q4=Es("FileList"),G4=i=>mp(i)&&_i(i.pipe),$4=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||_i(i.append)&&((t=hp(i))==="formdata"||t==="object"&&_i(i.toString)&&i.toString()==="[object FormData]"))},j4=Es("URLSearchParams"),[K4,Z4,Y4,J4]=["ReadableStream","Request","Response","Headers"].map(Es),X4=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eh(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),Mc(i))for(n=0,s=i.length;n<s;n++)t.call(null,i[n],n,i);else{const o=e?Object.getOwnPropertyNames(i):Object.keys(i),r=o.length;let a;for(n=0;n<r;n++)a=o[n],t.call(null,i[a],a,i)}}function yP(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,s;for(;n-- >0;)if(s=e[n],t===s.toLowerCase())return s;return null}const va=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_P=i=>!Bd(i)&&i!==va;function __(){const{caseless:i}=_P(this)&&this||{},t={},e=(n,s)=>{const o=i&&yP(t,s)||s;Om(t[o])&&Om(n)?t[o]=__(t[o],n):Om(n)?t[o]=__({},n):Mc(n)?t[o]=n.slice():t[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Eh(arguments[n],e);return t}const Q4=(i,t,e,{allOwnKeys:n}={})=>(Eh(t,(s,o)=>{e&&_i(s)?i[o]=gP(s,e):i[o]=s},{allOwnKeys:n}),i),eF=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),tF=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},nF=(i,t,e,n)=>{let s,o,r;const a={};if(t=t||{},i==null)return t;do{for(s=Object.getOwnPropertyNames(i),o=s.length;o-- >0;)r=s[o],(!n||n(r,i,t))&&!a[r]&&(t[r]=i[r],a[r]=!0);i=e!==!1&&Zv(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},iF=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},sF=i=>{if(!i)return null;if(Mc(i))return i;let t=i.length;if(!wP(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},oF=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&Zv(Uint8Array)),rF=(i,t)=>{const n=(i&&i[dp]).call(i);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(i,o[0],o[1])}},aF=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},lF=Es("HTMLFormElement"),cF=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),Ok=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),uF=Es("RegExp"),vP=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};Eh(e,(s,o)=>{let r;(r=t(s,o,i))!==!1&&(n[o]=r||s)}),Object.defineProperties(i,n)},dF=i=>{vP(i,(t,e)=>{if(_i(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(_i(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},hF=(i,t)=>{const e={},n=s=>{s.forEach(o=>{e[o]=!0})};return Mc(i)?n(i):n(String(i).split(t)),e},fF=()=>{},mF=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t;function gF(i){return!!(i&&_i(i.append)&&i[pP]==="FormData"&&i[dp])}const pF=i=>{const t=new Array(10),e=(n,s)=>{if(mp(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const o=Mc(n)?[]:{};return Eh(n,(r,a)=>{const l=e(r,s+1);!Bd(l)&&(o[a]=l)}),t[s]=void 0,o}}return n};return e(i,0)},bF=Es("AsyncFunction"),wF=i=>i&&(mp(i)||_i(i))&&_i(i.then)&&_i(i.catch),CP=((i,t)=>i?setImmediate:t?((e,n)=>(va.addEventListener("message",({source:s,data:o})=>{s===va&&o===e&&n.length&&n.shift()()},!1),s=>{n.push(s),va.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",_i(va.postMessage)),yF=typeof queueMicrotask<"u"?queueMicrotask.bind(va):typeof process<"u"&&process.nextTick||CP,_F=i=>i!=null&&_i(i[dp]),ee={isArray:Mc,isArrayBuffer:bP,isBuffer:L4,isFormData:$4,isArrayBufferView:B4,isString:F4,isNumber:wP,isBoolean:U4,isObject:mp,isPlainObject:Om,isReadableStream:K4,isRequest:Z4,isResponse:Y4,isHeaders:J4,isUndefined:Bd,isDate:z4,isFile:H4,isBlob:W4,isRegExp:uF,isFunction:_i,isStream:G4,isURLSearchParams:j4,isTypedArray:oF,isFileList:q4,forEach:Eh,merge:__,extend:Q4,trim:X4,stripBOM:eF,inherits:tF,toFlatObject:nF,kindOf:hp,kindOfTest:Es,endsWith:iF,toArray:sF,forEachEntry:rF,matchAll:aF,isHTMLForm:lF,hasOwnProperty:Ok,hasOwnProp:Ok,reduceDescriptors:vP,freezeMethods:dF,toObjectSet:hF,toCamelCase:cF,noop:fF,toFiniteNumber:mF,findKey:yP,global:va,isContextDefined:_P,isSpecCompliantForm:gF,toJSONObject:pF,isAsyncFn:bF,isThenable:wF,setImmediate:CP,asap:yF,isIterable:_F};function We(i,t,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ee.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const TP=We.prototype,xP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{xP[i]={value:i}});Object.defineProperties(We,xP);Object.defineProperty(TP,"isAxiosError",{value:!0});We.from=(i,t,e,n,s,o)=>{const r=Object.create(TP);return ee.toFlatObject(i,r,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),We.call(r,i.message,t,e,n,s),r.cause=i,r.name=i.name,o&&Object.assign(r,o),r};const vF=null;function v_(i){return ee.isPlainObject(i)||ee.isArray(i)}function kP(i){return ee.endsWith(i,"[]")?i.slice(0,-2):i}function Dk(i,t,e){return i?i.concat(t).map(function(s,o){return s=kP(s),!e&&o?"["+s+"]":s}).join(e?".":""):t}function CF(i){return ee.isArray(i)&&!i.some(v_)}const TF=ee.toFlatObject(ee,{},null,function(t){return/^is[A-Z]/.test(t)});function gp(i,t,e){if(!ee.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=ee.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,k){return!ee.isUndefined(k[x])});const n=e.metaTokens,s=e.visitor||h,o=e.dots,r=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(t);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function u(C){if(C===null)return"";if(ee.isDate(C))return C.toISOString();if(!l&&ee.isBlob(C))throw new We("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(C)||ee.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function h(C,x,k){let S=C;if(C&&!k&&typeof C=="object"){if(ee.endsWith(x,"{}"))x=n?x:x.slice(0,-2),C=JSON.stringify(C);else if(ee.isArray(C)&&CF(C)||(ee.isFileList(C)||ee.endsWith(x,"[]"))&&(S=ee.toArray(C)))return x=kP(x),S.forEach(function(P,L){!(ee.isUndefined(P)||P===null)&&t.append(r===!0?Dk([x],L,o):r===null?x:x+"[]",u(P))}),!1}return v_(C)?!0:(t.append(Dk(k,x,o),u(C)),!1)}const m=[],p=Object.assign(TF,{defaultVisitor:h,convertValue:u,isVisitable:v_});function v(C,x){if(!ee.isUndefined(C)){if(m.indexOf(C)!==-1)throw Error("Circular reference detected in "+x.join("."));m.push(C),ee.forEach(C,function(S,I){(!(ee.isUndefined(S)||S===null)&&s.call(t,S,ee.isString(I)?I.trim():I,x,p))===!0&&v(S,x?x.concat(I):[I])}),m.pop()}}if(!ee.isObject(i))throw new TypeError("data must be an object");return v(i),t}function Lk(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Yv(i,t){this._pairs=[],i&&gp(i,this,t)}const EP=Yv.prototype;EP.append=function(t,e){this._pairs.push([t,e])};EP.toString=function(t){const e=t?function(n){return t.call(this,n,Lk)}:Lk;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function xF(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SP(i,t,e){if(!t)return i;const n=e&&e.encode||xF;ee.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let o;if(s?o=s(t,e):o=ee.isURLSearchParams(t)?t.toString():new Yv(t,e).toString(n),o){const r=i.indexOf("#");r!==-1&&(i=i.slice(0,r)),i+=(i.indexOf("?")===-1?"?":"&")+o}return i}class Bk{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ee.forEach(this.handlers,function(n){n!==null&&t(n)})}}const AP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kF=typeof URLSearchParams<"u"?URLSearchParams:Yv,EF=typeof FormData<"u"?FormData:null,SF=typeof Blob<"u"?Blob:null,AF={isBrowser:!0,classes:{URLSearchParams:kF,FormData:EF,Blob:SF},protocols:["http","https","file","blob","url","data"]},Jv=typeof window<"u"&&typeof document<"u",C_=typeof navigator=="object"&&navigator||void 0,RF=Jv&&(!C_||["ReactNative","NativeScript","NS"].indexOf(C_.product)<0),IF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PF=Jv&&window.location.href||"http://localhost",MF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jv,hasStandardBrowserEnv:RF,hasStandardBrowserWebWorkerEnv:IF,navigator:C_,origin:PF},Symbol.toStringTag,{value:"Module"})),$n={...MF,...AF};function VF(i,t){return gp(i,new $n.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,o){return $n.isNode&&ee.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function NF(i){return ee.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function OF(i){const t={},e=Object.keys(i);let n;const s=e.length;let o;for(n=0;n<s;n++)o=e[n],t[o]=i[o];return t}function RP(i){function t(e,n,s,o){let r=e[o++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=o>=e.length;return r=!r&&ee.isArray(s)?s.length:r,l?(ee.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a):((!s[r]||!ee.isObject(s[r]))&&(s[r]=[]),t(e,n,s[r],o)&&ee.isArray(s[r])&&(s[r]=OF(s[r])),!a)}if(ee.isFormData(i)&&ee.isFunction(i.entries)){const e={};return ee.forEachEntry(i,(n,s)=>{t(NF(n),s,e,0)}),e}return null}function DF(i,t,e){if(ee.isString(i))try{return(t||JSON.parse)(i),ee.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const Sh={transitional:AP,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,o=ee.isObject(t);if(o&&ee.isHTMLForm(t)&&(t=new FormData(t)),ee.isFormData(t))return s?JSON.stringify(RP(t)):t;if(ee.isArrayBuffer(t)||ee.isBuffer(t)||ee.isStream(t)||ee.isFile(t)||ee.isBlob(t)||ee.isReadableStream(t))return t;if(ee.isArrayBufferView(t))return t.buffer;if(ee.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return VF(t,this.formSerializer).toString();if((a=ee.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return gp(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(e.setContentType("application/json",!1),DF(t)):t}],transformResponse:[function(t){const e=this.transitional||Sh.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(t)||ee.isReadableStream(t))return t;if(t&&ee.isString(t)&&(n&&!this.responseType||s)){const r=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?We.from(a,We.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$n.classes.FormData,Blob:$n.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],i=>{Sh.headers[i]={}});const LF=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BF=i=>{const t={};let e,n,s;return i&&i.split(`
`).forEach(function(r){s=r.indexOf(":"),e=r.substring(0,s).trim().toLowerCase(),n=r.substring(s+1).trim(),!(!e||t[e]&&LF[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Fk=Symbol("internals");function Fu(i){return i&&String(i).trim().toLowerCase()}function Dm(i){return i===!1||i==null?i:ee.isArray(i)?i.map(Dm):String(i)}function FF(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const UF=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function uy(i,t,e,n,s){if(ee.isFunction(n))return n.call(this,t,e);if(s&&(t=e),!!ee.isString(t)){if(ee.isString(n))return t.indexOf(n)!==-1;if(ee.isRegExp(n))return n.test(t)}}function zF(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function HF(i,t){const e=ee.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(s,o,r){return this[n].call(this,t,s,o,r)},configurable:!0})})}let vi=class{constructor(t){t&&this.set(t)}set(t,e,n){const s=this;function o(a,l,u){const h=Fu(l);if(!h)throw new Error("header name must be a non-empty string");const m=ee.findKey(s,h);(!m||s[m]===void 0||u===!0||u===void 0&&s[m]!==!1)&&(s[m||l]=Dm(a))}const r=(a,l)=>ee.forEach(a,(u,h)=>o(u,h,l));if(ee.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if(ee.isString(t)&&(t=t.trim())&&!UF(t))r(BF(t),e);else if(ee.isObject(t)&&ee.isIterable(t)){let a={},l,u;for(const h of t){if(!ee.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[u=h[0]]=(l=a[u])?ee.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}r(a,e)}else t!=null&&o(e,t,n);return this}get(t,e){if(t=Fu(t),t){const n=ee.findKey(this,t);if(n){const s=this[n];if(!e)return s;if(e===!0)return FF(s);if(ee.isFunction(e))return e.call(this,s,n);if(ee.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Fu(t),t){const n=ee.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||uy(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let s=!1;function o(r){if(r=Fu(r),r){const a=ee.findKey(n,r);a&&(!e||uy(n,n[a],a,e))&&(delete n[a],s=!0)}}return ee.isArray(t)?t.forEach(o):o(t),s}clear(t){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const o=e[n];(!t||uy(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const e=this,n={};return ee.forEach(this,(s,o)=>{const r=ee.findKey(n,o);if(r){e[r]=Dm(s),delete e[o];return}const a=t?zF(o):String(o).trim();a!==o&&delete e[o],e[a]=Dm(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ee.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=t&&ee.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Fk]=this[Fk]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=Fu(r);n[a]||(HF(s,r),n[a]=!0)}return ee.isArray(t)?t.forEach(o):o(t),this}};vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(vi.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});ee.freezeMethods(vi);function dy(i,t){const e=this||Sh,n=t||e,s=vi.from(n.headers);let o=n.data;return ee.forEach(i,function(a){o=a.call(e,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function IP(i){return!!(i&&i.__CANCEL__)}function Vc(i,t,e){We.call(this,i??"canceled",We.ERR_CANCELED,t,e),this.name="CanceledError"}ee.inherits(Vc,We,{__CANCEL__:!0});function PP(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new We("Request failed with status code "+e.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function WF(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function qF(i,t){i=i||10;const e=new Array(i),n=new Array(i);let s=0,o=0,r;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),h=n[o];r||(r=u),e[s]=l,n[s]=u;let m=o,p=0;for(;m!==s;)p+=e[m++],m=m%i;if(s=(s+1)%i,s===o&&(o=(o+1)%i),u-r<t)return;const v=h&&u-h;return v?Math.round(p*1e3/v):void 0}}function GF(i,t){let e=0,n=1e3/t,s,o;const r=(u,h=Date.now())=>{e=h,s=null,o&&(clearTimeout(o),o=null),i.apply(null,u)};return[(...u)=>{const h=Date.now(),m=h-e;m>=n?r(u,h):(s=u,o||(o=setTimeout(()=>{o=null,r(s)},n-m)))},()=>s&&r(s)]}const ag=(i,t,e=3)=>{let n=0;const s=qF(50,250);return GF(o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,l=r-n,u=s(l),h=r<=a;n=r;const m={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-r)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};i(m)},e)},Uk=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},zk=i=>(...t)=>ee.asap(()=>i(...t)),$F=$n.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,$n.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL($n.origin),$n.navigator&&/(msie|trident)/i.test($n.navigator.userAgent)):()=>!0,jF=$n.hasStandardBrowserEnv?{write(i,t,e,n,s,o){const r=[i+"="+encodeURIComponent(t)];ee.isNumber(e)&&r.push("expires="+new Date(e).toGMTString()),ee.isString(n)&&r.push("path="+n),ee.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function KF(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function ZF(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function MP(i,t,e){let n=!KF(t);return i&&(n||e==!1)?ZF(i,t):t}const Hk=i=>i instanceof vi?{...i}:i;function Ma(i,t){t=t||{};const e={};function n(u,h,m,p){return ee.isPlainObject(u)&&ee.isPlainObject(h)?ee.merge.call({caseless:p},u,h):ee.isPlainObject(h)?ee.merge({},h):ee.isArray(h)?h.slice():h}function s(u,h,m,p){if(ee.isUndefined(h)){if(!ee.isUndefined(u))return n(void 0,u,m,p)}else return n(u,h,m,p)}function o(u,h){if(!ee.isUndefined(h))return n(void 0,h)}function r(u,h){if(ee.isUndefined(h)){if(!ee.isUndefined(u))return n(void 0,u)}else return n(void 0,h)}function a(u,h,m){if(m in t)return n(u,h);if(m in i)return n(void 0,u)}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(u,h,m)=>s(Hk(u),Hk(h),m,!0)};return ee.forEach(Object.keys(Object.assign({},i,t)),function(h){const m=l[h]||s,p=m(i[h],t[h],h);ee.isUndefined(p)&&m!==a||(e[h]=p)}),e}const VP=i=>{const t=Ma({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:r,auth:a}=t;t.headers=r=vi.from(r),t.url=SP(MP(t.baseURL,t.url,t.allowAbsoluteUrls),i.params,i.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ee.isFormData(e)){if($n.hasStandardBrowserEnv||$n.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((l=r.getContentType())!==!1){const[u,...h]=l?l.split(";").map(m=>m.trim()).filter(Boolean):[];r.setContentType([u||"multipart/form-data",...h].join("; "))}}if($n.hasStandardBrowserEnv&&(n&&ee.isFunction(n)&&(n=n(t)),n||n!==!1&&$F(t.url))){const u=s&&o&&jF.read(o);u&&r.set(s,u)}return t},YF=typeof XMLHttpRequest<"u",JF=YF&&function(i){return new Promise(function(e,n){const s=VP(i);let o=s.data;const r=vi.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,h,m,p,v,C;function x(){v&&v(),C&&C(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function S(){if(!k)return;const P=vi.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:P,config:i,request:k};PP(function(F){e(F),x()},function(F){n(F),x()},O),k=null}"onloadend"in k?k.onloadend=S:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(S)},k.onabort=function(){k&&(n(new We("Request aborted",We.ECONNABORTED,i,k)),k=null)},k.onerror=function(){n(new We("Network Error",We.ERR_NETWORK,i,k)),k=null},k.ontimeout=function(){let L=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||AP;s.timeoutErrorMessage&&(L=s.timeoutErrorMessage),n(new We(L,O.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,i,k)),k=null},o===void 0&&r.setContentType(null),"setRequestHeader"in k&&ee.forEach(r.toJSON(),function(L,O){k.setRequestHeader(O,L)}),ee.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),a&&a!=="json"&&(k.responseType=s.responseType),u&&([p,C]=ag(u,!0),k.addEventListener("progress",p)),l&&k.upload&&([m,v]=ag(l),k.upload.addEventListener("progress",m),k.upload.addEventListener("loadend",v)),(s.cancelToken||s.signal)&&(h=P=>{k&&(n(!P||P.type?new Vc(null,i,k):P),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const I=WF(s.url);if(I&&$n.protocols.indexOf(I)===-1){n(new We("Unsupported protocol "+I+":",We.ERR_BAD_REQUEST,i));return}k.send(o||null)})},XF=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,s;const o=function(u){if(!s){s=!0,a();const h=u instanceof Error?u:this.reason;n.abort(h instanceof We?h:new Vc(h instanceof Error?h.message:h))}};let r=t&&setTimeout(()=>{r=null,o(new We(`timeout ${t} of ms exceeded`,We.ETIMEDOUT))},t);const a=()=>{i&&(r&&clearTimeout(r),r=null,i.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),i=null)};i.forEach(u=>u.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=()=>ee.asap(a),l}},QF=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,s;for(;n<e;)s=n+t,yield i.slice(n,s),n=s},e7=async function*(i,t){for await(const e of t7(i))yield*QF(e,t)},t7=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Wk=(i,t,e,n)=>{const s=e7(i,t);let o=0,r,a=l=>{r||(r=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await s.next();if(u){a(),l.close();return}let m=h.byteLength;if(e){let p=o+=m;e(p)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},pp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",NP=pp&&typeof ReadableStream=="function",n7=pp&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),OP=(i,...t)=>{try{return!!i(...t)}catch{return!1}},i7=NP&&OP(()=>{let i=!1;const t=new Request($n.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),qk=64*1024,T_=NP&&OP(()=>ee.isReadableStream(new Response("").body)),lg={stream:T_&&(i=>i.body)};pp&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!lg[t]&&(lg[t]=ee.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new We(`Response type '${t}' is not supported`,We.ERR_NOT_SUPPORT,n)})})})(new Response);const s7=async i=>{if(i==null)return 0;if(ee.isBlob(i))return i.size;if(ee.isSpecCompliantForm(i))return(await new Request($n.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(i)||ee.isArrayBuffer(i))return i.byteLength;if(ee.isURLSearchParams(i)&&(i=i+""),ee.isString(i))return(await n7(i)).byteLength},o7=async(i,t)=>{const e=ee.toFiniteNumber(i.getContentLength());return e??s7(t)},r7=pp&&(async i=>{let{url:t,method:e,data:n,signal:s,cancelToken:o,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:h,withCredentials:m="same-origin",fetchOptions:p}=VP(i);u=u?(u+"").toLowerCase():"text";let v=XF([s,o&&o.toAbortSignal()],r),C;const x=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let k;try{if(l&&i7&&e!=="get"&&e!=="head"&&(k=await o7(h,n))!==0){let O=new Request(t,{method:"POST",body:n,duplex:"half"}),J;if(ee.isFormData(n)&&(J=O.headers.get("content-type"))&&h.setContentType(J),O.body){const[F,j]=Uk(k,ag(zk(l)));n=Wk(O.body,qk,F,j)}}ee.isString(m)||(m=m?"include":"omit");const S="credentials"in Request.prototype;C=new Request(t,{...p,signal:v,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:S?m:void 0});let I=await fetch(C);const P=T_&&(u==="stream"||u==="response");if(T_&&(a||P&&x)){const O={};["status","statusText","headers"].forEach(U=>{O[U]=I[U]});const J=ee.toFiniteNumber(I.headers.get("content-length")),[F,j]=a&&Uk(J,ag(zk(a),!0))||[];I=new Response(Wk(I.body,qk,F,()=>{j&&j(),x&&x()}),O)}u=u||"text";let L=await lg[ee.findKey(lg,u)||"text"](I,i);return!P&&x&&x(),await new Promise((O,J)=>{PP(O,J,{data:L,headers:vi.from(I.headers),status:I.status,statusText:I.statusText,config:i,request:C})})}catch(S){throw x&&x(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,i,C),{cause:S.cause||S}):We.from(S,S&&S.code,i,C)}}),x_={http:vF,xhr:JF,fetch:r7};ee.forEach(x_,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const Gk=i=>`- ${i}`,a7=i=>ee.isFunction(i)||i===null||i===!1,DP={getAdapter:i=>{i=ee.isArray(i)?i:[i];const{length:t}=i;let e,n;const s={};for(let o=0;o<t;o++){e=i[o];let r;if(n=e,!a7(e)&&(n=x_[(r=String(e)).toLowerCase()],n===void 0))throw new We(`Unknown adapter '${r}'`);if(n)break;s[r||"#"+o]=n}if(!n){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let r=t?o.length>1?`since :
`+o.map(Gk).join(`
`):" "+Gk(o[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n},adapters:x_};function hy(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Vc(null,i)}function $k(i){return hy(i),i.headers=vi.from(i.headers),i.data=dy.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),DP.getAdapter(i.adapter||Sh.adapter)(i).then(function(n){return hy(i),n.data=dy.call(i,i.transformResponse,n),n.headers=vi.from(n.headers),n},function(n){return IP(n)||(hy(i),n&&n.response&&(n.response.data=dy.call(i,i.transformResponse,n.response),n.response.headers=vi.from(n.response.headers))),Promise.reject(n)})}const LP="1.9.0",bp={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{bp[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const jk={};bp.transitional=function(t,e,n){function s(o,r){return"[Axios v"+LP+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(t===!1)throw new We(s(r," has been removed"+(e?" in "+e:"")),We.ERR_DEPRECATED);return e&&!jk[r]&&(jk[r]=!0,console.warn(s(r," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,r,a):!0}};bp.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function l7(i,t,e){if(typeof i!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const o=n[s],r=t[o];if(r){const a=i[o],l=a===void 0||r(a,o,i);if(l!==!0)throw new We("option "+o+" must be "+l,We.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new We("Unknown option "+o,We.ERR_BAD_OPTION)}}const Lm={assertOptions:l7,validators:bp},Ms=Lm.validators;let ka=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Bk,response:new Bk}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Ma(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:o}=e;n!==void 0&&Lm.assertOptions(n,{silentJSONParsing:Ms.transitional(Ms.boolean),forcedJSONParsing:Ms.transitional(Ms.boolean),clarifyTimeoutError:Ms.transitional(Ms.boolean)},!1),s!=null&&(ee.isFunction(s)?e.paramsSerializer={serialize:s}:Lm.assertOptions(s,{encode:Ms.function,serialize:Ms.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Lm.assertOptions(e,{baseUrl:Ms.spelling("baseURL"),withXsrfToken:Ms.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=o&&ee.merge(o.common,o[e.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],C=>{delete o[C]}),e.headers=vi.concat(r,o);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(e)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let h,m=0,p;if(!l){const C=[$k.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,u),p=C.length,h=Promise.resolve(e);m<p;)h=h.then(C[m++],C[m++]);return h}p=a.length;let v=e;for(m=0;m<p;){const C=a[m++],x=a[m++];try{v=C(v)}catch(k){x.call(this,k);break}}try{h=$k.call(this,v)}catch(C){return Promise.reject(C)}for(m=0,p=u.length;m<p;)h=h.then(u[m++],u[m++]);return h}getUri(t){t=Ma(this.defaults,t);const e=MP(t.baseURL,t.url,t.allowAbsoluteUrls);return SP(e,t.params,t.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(t){ka.prototype[t]=function(e,n){return this.request(Ma(n||{},{method:t,url:e,data:(n||{}).data}))}});ee.forEach(["post","put","patch"],function(t){function e(n){return function(o,r,a){return this.request(Ma(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}ka.prototype[t]=e(),ka.prototype[t+"Form"]=e(!0)});let c7=class BP{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{n.subscribe(a),o=a}).then(s);return r.cancel=function(){n.unsubscribe(o)},r},t(function(o,r,a){n.reason||(n.reason=new Vc(o,r,a),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new BP(function(s){t=s}),cancel:t}}};function u7(i){return function(e){return i.apply(null,e)}}function d7(i){return ee.isObject(i)&&i.isAxiosError===!0}const k_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(k_).forEach(([i,t])=>{k_[t]=i});function FP(i){const t=new ka(i),e=gP(ka.prototype.request,t);return ee.extend(e,ka.prototype,t,{allOwnKeys:!0}),ee.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return FP(Ma(i,s))},e}const Nt=FP(Sh);Nt.Axios=ka;Nt.CanceledError=Vc;Nt.CancelToken=c7;Nt.isCancel=IP;Nt.VERSION=LP;Nt.toFormData=gp;Nt.AxiosError=We;Nt.Cancel=Nt.CanceledError;Nt.all=function(t){return Promise.all(t)};Nt.spread=u7;Nt.isAxiosError=d7;Nt.mergeConfig=Ma;Nt.AxiosHeaders=vi;Nt.formToJSON=i=>RP(ee.isHTMLForm(i)?new FormData(i):i);Nt.getAdapter=DP.getAdapter;Nt.HttpStatusCode=k_;Nt.default=Nt;const{Axios:Lfe,AxiosError:Bfe,CanceledError:Ffe,isCancel:Ufe,CancelToken:zfe,VERSION:Hfe,all:Wfe,Cancel:qfe,isAxiosError:Gfe,spread:$fe,toFormData:jfe,AxiosHeaders:Kfe,HttpStatusCode:Zfe,formToJSON:Yfe,getAdapter:Jfe,mergeConfig:Xfe}=Nt;function Ca(i){return i==1?"암컷":i==2?"수컷":"성별의 자율화"}function E_(i){if(i==1)return"공고중";if(i==2)return"입양가능";if(i==3)return"입양예정";if(i==5)return"입양완료";if(i==7)return"주인반환"}function Kk(i){if(i==1)return"bg-amber-500";if(i==2)return"bg-green-500";if(i==3)return"bg-pink-500";if(i==5)return"bg-red-500";if(i==7)return"bg-blue-500"}function h7(i){return i==1?"강아지":i==2?"고양이":"기타동물"}function f7(i){return i==1?"동구":i==2?"중구":i==3?"서구":i==4?"유성구":"대덕구"}const S_="/animalCenter/assets/noImage-DDZXX0Tp.png",Fd="http://apis.data.go.kr/6300000/animalDaejeonService/animalDaejeonList",Ud="0N5jROZjYbg248ucE8OzxVjKA0x6MR8WyU%2FkXRYr4b%2BRE5Umkj2FogOfhqlzBX0aoBBLL41iaQJqrJ6GxiqzAg%3D%3D";function Fr(i){const t=i.from,[e,n]=H.useState({});return H.useEffect(()=>{y_.forEach(s=>{s.sub.forEach(o=>{o.subLink==t&&(console.log(s),n(s))})})},[]),A.jsxs("div",{className:"w-1/5 max-sm:hidden",children:[A.jsx("h1",{className:"p-4 text-2xl font-bold text-primary-500",children:e.title}),A.jsx("ul",{className:"mt-8",children:e.sub&&e.sub.map((s,o)=>A.jsx("li",{children:A.jsx(_a,{className:`px-5 py-4 block font-bold border-t border-t-gray-300 ${s.subLink==t?"bg-primary-500 text-white":"hover:text-primary-500"}`,to:s.subLink,children:s.subTitle})},o))})]})}function UP(i){H.useEffect(()=>{const t=document.title;return document.title=i,()=>{document.title=t}},[i])}function m7(){UP("유기동물 현황");const[i]=x4();console.log(i.get("regId"));const[t,e]=H.useState({});return H.useEffect(()=>{(async()=>{var s=Fd,o=`?serviceKey=${Ud}`;o+=`&regId=${i.get("regId")}`;const a=(await Nt.get(s+o)).data,h=new X2JS().xml_str2json(a).ServiceResult.MsgBody.items;console.log(h),e(h)})()},[]),A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/Information"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:hidden",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"보호동물"}),A.jsx("div",{className:"w-3/5  m-auto mt-6 aspect-3/2 p-2 border border-gray-300 mb-6",children:A.jsx("img",{className:"h-full w-full",src:t.filePath?`https://www.daejeon.go.kr/${t.filePath}`:S_,alt:""})}),A.jsx("table",{className:"border-t-2 border-t-black w-full mt-8 mb-8",children:A.jsxs("tbody",{children:[A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"관리번호"}),A.jsx("td",{className:"px-4 py-3",children:t.regId}),A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"공고번호"}),A.jsx("td",{className:"px-4 py-3",children:t.regDtTm})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"입양상태"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:E_(t.adoptionStatusCd)})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"품종"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.species})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"성별"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:Ca(t.gender)})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"발견장소"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.foundPlace})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"구조일"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.rescueDate})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"나이"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.age})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"몸무게"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.weight})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"모색"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.hitCnt})]}),A.jsxs("tr",{className:"border-y border-y-gray-300 ",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"기타정보"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.memo})]})]})}),A.jsx("div",{className:"my-6 flex justify-end",children:A.jsx("button",{className:"bg-gray-500 text-white px-5 py-2 rounded-2xl hover:bg-gray-900",children:"목록"})})]}),";",A.jsxs("div",{className:"w-full px-6 sm:hidden",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"보호동물"}),A.jsx("div",{className:"w-3/5 max-sm:w-full m-auto mt-6 aspect-3/2 p-2 border border-gray-300 mb-6",children:A.jsx("img",{className:"h-full w-full",src:t.filePath?`https://www.daejeon.go.kr/${t.filePath}`:S_,alt:""})}),A.jsx("table",{className:"border-t-2 border-t-black w-full mt-8 mb-8",children:A.jsxs("tbody",{children:[A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"관리번호"}),A.jsx("td",{className:"px-4 py-3",children:t.regId})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"공고번호"}),A.jsx("td",{className:"px-4 py-3",children:t.regDtTm})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"입양상태"}),A.jsx("td",{className:"px-4 py-3",children:E_(t.adoptionStatusCd)})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"품종"}),A.jsx("td",{className:"px-4 py-3",children:t.species})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"성별"}),A.jsx("td",{className:"px-4 py-3",children:Ca(t.gender)})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"발견장소"}),A.jsx("td",{className:"px-4 py-3",children:t.foundPlace})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"구조일"}),A.jsx("td",{className:"px-4 py-3",children:t.rescueDate})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"나이"}),A.jsx("td",{className:"px-4 py-3",children:t.age})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"몸무게"}),A.jsx("td",{className:"px-4 py-3",children:t.weight})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"모색"}),A.jsx("td",{className:"px-4 py-3",children:t.hitCnt})]}),A.jsxs("tr",{className:"border-y border-y-gray-300 ",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"기타정보"}),A.jsx("td",{className:"px-4 py-3",children:t.memo})]})]})}),A.jsx("div",{className:"my-6 flex justify-end",children:A.jsx("button",{className:"bg-gray-500 text-white px-5 py-2 rounded-2xl hover:bg-gray-900",children:"목록"})})]}),";"]})}function g7(){H.useEffect(()=>{(async()=>{var m=Fd,p=`?serviceKey=${Ud}`;p+="&pageNo=1",p+="&numOfRows=5",p+="&searchCondition3=2";const C=(await Nt.get(m+p)).data,S=new X2JS().xml_str2json(C).ServiceResult.MsgBody.items;console.log(S),t(S)})(),(async()=>{var m=Fd,p=`?serviceKey=${Ud}`;p+="&pageNo=1",p+="&numOfRows=4",p+="&searchCondition3=1";const C=(await Nt.get(m+p)).data,S=new X2JS().xml_str2json(C).ServiceResult.MsgBody.items;n(S)})()},[]);const[i,t]=H.useState([]),[e,n]=H.useState([]),[s,o]=H.useState(0),[r,a]=H.useState(0),l=cp();return A.jsxs("div",{children:[A.jsxs("div",{className:"py-4 px-2 max-sm:hidden",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-xl font-bold",children:"입양가능"}),A.jsx("span",{className:"ms-2 text-xs text-gray-600",children:"#대전동물보호센터에서 새로운 가족을 기다리고 있어요"})]}),A.jsx("div",{className:"grid grid-cols-5 gap-4 mt-4",children:i.map(u=>A.jsxs("div",{onClick:()=>l("/AnimalDetail?regId="+u.regId),className:"aspect-9/12 group cursor-pointer shadow rounded-xl overflow-hidden",children:[A.jsx("div",{className:"h-3/5 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full duration-300 group-hover:scale-125",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"h-2/5 pt-2 relative flex flex-col items-center justify-evenly border-t-4 border-t-blue-500",children:[A.jsx("p",{className:"font-bold",children:u.species}),A.jsx("p",{className:"text-sm",children:Ca(u.gender)}),A.jsx("span",{className:"bg-blue-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-1 rounded-2xl",children:"입양가능"})]})]},u.regId))})]}),A.jsxs("div",{className:"sm:hidden p-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("span",{className:"text-xl font-bold",children:"입양가능"}),A.jsxs("div",{className:"flex",children:[A.jsx("svg",{onClick:()=>o(s==0?i.length-1:s-1),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#d1d5dc",className:"size-6 border rounded-[8px] border-gray-300",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),A.jsx("svg",{onClick:()=>o(s==i.length-1?0:s+1),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#d1d5dc",class:"size-6 border rounded-[8px] border-gray-300 mx-1",children:A.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#d1d5dc",className:"size-6 border rounded-[8px] border-gray-300",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})]})]}),A.jsx("p",{className:"text-sm mt-2 text-gray-500",children:"#대전동물보호센터에서 새로운 가족을 기다리고 있어요"}),A.jsx("div",{className:"whitespace-nowrap overflow-hidden mt-4",children:i.map(u=>A.jsxs("div",{onClick:()=>l("/AnimalDetail?regId="+u.regId),className:"inline-block aspect-10/12 group cursor-pointer shadow rounded-xl overflow-hidden duration-400",style:{transform:`translateX(-${s*100}%)`},children:[A.jsx("div",{className:"h-3/5 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full duration-300 group-hover:scale-125  min-w-full",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"h-2/5 pt-2 relative flex flex-col items-center justify-evenly border-t-4 border-t-blue-500",children:[A.jsx("p",{className:"font-bold",children:u.species}),A.jsx("p",{className:"text-sm",children:Ca(u.gender)}),A.jsx("span",{className:"bg-blue-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-1 rounded-2xl",children:"입양가능"})]})]},u.regId))})]}),A.jsxs("div",{className:"bg-blue-200 py-4 px-2 max-sm:hidden",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-xl",children:"공고중인"}),A.jsx("span",{className:"text-xl font-bold",children:"보호동물"}),A.jsx("span",{className:"ms-2 text-xs text-gray-600",children:"#대전동물보호센터의 새 식구를 소개합니다"})]}),A.jsxs("div",{className:"grid grid-cols-5 gap-4 mt-4",children:[A.jsx("div",{className:"flex items-end",children:A.jsx("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAL8AzQMBIgACEQEDEQH/xAAcAAACAwEBAQEAAAAAAAAAAAAEBQIDBgEABwj/xAA/EAACAQMCAwQHBwEGBwEAAAABAgMABBESIQUxQRMiUWEGFDJxgZGhI0JSscHR8JIHFVSC4fEzU2KDk6LCFv/EABkBAAMBAQEAAAAAAAAAAAAAAAABAgMEBf/EACMRAQEAAgICAgIDAQAAAAAAAAABAhEDIRIxQVEEMhMiYUL/2gAMAwEAAhEDEQA/ANEbu7/xM/8A5W/eom7u/wDE3Hwlb964VqGK9aYz6ce66bu7/wAXcj/ut+9RN3d/4y5/8rfvXts71ZF2WcMmo07jJ8DtULy7Bz61cn/ut+9XQ8Rus4NxOffI371ZcXVnZIGeMmRgdCLzP7Cgbu8kWRDYgFgFLgMoAPltt781Fs+lSU7hurhk71xKB4mQj6k1Tc8WEUiqLyV2x9yQsPnmkFxLJfhjLK0jEBTls4OOhNURRwIoCgBhtnq3uqPGK2eS8cuOzC2zzh/xtNkD4Uut/Tq/trkxXsQkQNjKyFWA+ZB+lZxnunnIttUcbkMO0br7/hUZbR5bYGJg7IMuDzyfdvSuMOV9T4d6RWN4oIvzG+M6ZG0kU6s7iK5yYLtJiBk6JNRHvFfE4LS9wy9+MJgAHOwznHlRVrLLYN6yzOjwnKyKukj4jzrPLi+lTJ9uXVgHWxrve/E3zr5fZ/2g8SihZ7j1eYDkJY8N81P6U2tv7RVBxxHhzQrjIeN9RPw/c1lePL6V5RutTD7x+JqBkb8R+BrP2vplwe5K5neBm/5yED5jb603WeOZNcLo6H7yHINT4aPa0yt+Jv6qgZm/E39VVM1VM9OYltcZ2/E39VQM7fib+o1QZKqaSqmJbFG4b8Tf1Gom4k6SMP8AMaE7SoGWq8C8hwuH6yt/UakJ2/5rf1GlbzYG5wPHOKp7dMFXn1au7u2QoJAOfgSfhSuJ7PRMx++x/wAxr3aSdGb+o0lW+VVGGCcu7httmwM8sbKD4ZzUzc9scNM0ZUDJ1adRxudvdS1/g2SEVAirytRIr0HMo01EgrkjVy6UQqM3s6QPFsD6mqJ2tGieKQu5YEELsOX4s0rlpUjNX0pn4sNEkiJgLqJGV2znHT31KSeGHtmlgdTq1agThyOX15edGX1olzD2XaMD93HWksnCZ7VTJNKAqrtpPI9P96zq0b+5Mji5t3ePTsVzgAjwqR4s0lvMrphiO6Vbr44+VGz2UdzEGE2AU2zggsdx8dxQV3wzQxEc4LsO7GBkk/zNT2FSX89u4QFWXGMhRk/671Q0kkbBlYq2QSTsBsNxj3mq5X1d0ZwTkZ5gVbbXItz34VK+Y3akFr8QuiFZmGVbBK7E+Zrk89zcaQzvKAABtsT/AAijGt4ZnimjZYtabAnGPHaqZYzauYfWMqhyEK+7l0896YAFJreRNY0NjOcnu15klLsS2sj73iBtnen9lCMOXKtIxzqPXyqN0sOVSBwjMCxVcaSOefninoALW/lKYeNGjjABZk5Cn9hfS2jrJbymMkZ7jbN7wdjQMMMckLt2aya86+z6nP8AoK6tkhlKuAUU6hvjoOoo8ZfYbbhXpHFcakvGWKQcpB7LftTJb22mH2VxEwPLDg181utCI/YSOJl7yAD6EfvQr3LaVJkKhtx2ZIVufKpvHD2+ptICNjmqWkr5rbX5Wc9nPJEwOAVcjBGTTbhPpJNFGYeMM5wcCYActuf1o8Sa8y1W0tDR3MdwpkidXXOMrXs05iW1xlqBlqsmomq0Nre1bpXu2YVRXqeoNiUjVl1tLHo8BKuSf0+tA3Ejd4drCgABVYzq+ppTLHrAwdxzaux9pjB5Cp7+wlJGHl7Rlkz4ljv8q8oCqFBzjzqR5UFxC7ls4lbSramIwfDGaewNFckQOMGky8ZYoJEjdgDhsgYFFtxAKow6yk40qpySOvyFGwP0qFxsfI1WYkLZ0AHGOfL3efwrkUplTJUrvtnqOhqenFAJbzhbzn7OVC2c6WGGYe+l54VeBj9lkA4LA5zWqIwM5+FVNEsz5IwVpaMqtrNbVNUruWb2u6Vzj9qJSC1uczSxFnIxgndQP5j4VdeIg0u4TA6scb9N6DMF2GhZW1FNyiEb/Hp+1AE21kiK2l3kVuhOfgar0rBGscSxl8E8/YGfyqhobzZkmMW+G0sGB594jzq0XjK0mlVZ0AyFGA2Of0xTIQtyTEJNBGV7xYYAOef8PKrRMpLDKaOeV2PxoCW7ukjExjKLk/dHLGwIyKBt+IvJdlZFV3wcHGMnejYWXdkuiSeGZipc6ljbI68v540PrdrQW8oKtHhkbljb8uVUXswDL6tqUPhm7uAT+21XC6a8WOIiKN9OBLpBJIHI/SpMI0isqI+FKjvHJ3930q1gsLK+tldCOfI8s+6rYuHNM6qdUbYzpYe0Ns4NVXsSwsx7cO6nTnfcct80egYW/EXjh1WhkRwMt38435cxT7hXFtLR29/NHrZfs5AwGo+B8KwytpYafa670ySLtVUxrqjk72gHljnTlKvoZAHKo5pPwG9UotnK6mSNcIynOrypvnO/jvVk7Xq5XqAzd680ihbdGcZ7zK2CPhRiagvebJA5kYyKCgjgRBrl1yFjpbOMnwGPLFEaJEV2B1nmoJ9n+foamKcjuDI7p2eAB86DurgTu6dh2iL3Thd9x49K5LdyQlEuGXDd3vDfly/Srrcqzu8eR3skZyD4GgINYRG20wop141Fh7W/I/n8KD4bbz2baWKBHzuwYgfA04XChmK7t7QHKhbue30P2wjdTuFP3uVLQEpKoJRnyV6nGSPE499SZ9ABPe8sZpcwZ2XTIgOe6E9oH9edSmnKSxLM5IwThfcOY5jnzo2Fy3ymRI48F2PLXuMVdFKHU6M5U756GucE4U/ELtZYgvZlW1yqDke41r+H+h4W4c3BJVznwztis8uXHFUxtZbhtlJxhDFHA5QtgF84ben8PoRcynTPOREcnSAMCtxY2FvZxqkEQULttRBODXPlz2+mk42NtfQK2RQJZeakMUGCaFm9AEikZ7WXWp56jhh5Z61vO0A51Htlzis5z5favCfT5pd+hXE2gClFlYYLDXpOc7b+GKy/F/RufhtqZWhlSRGVTvkb5/Svu2QeVV3FvFcxNHKgZWGDnwq5z35TeOPzXNnK6lKnHXrUBtuNj4ivunGfQfhHEYQojMRAwGSsJx7+zy8s3LWK9tH1HhWuPNjU3CxkrG9aGTDyuAcYJGSp8R/PGi+J9nKA0nZmXAIdAe8P1pdc2s9tK8csWll2deeKqQ94BWySMD9q2lZrmtm7LWGUqfZznLDy8arVmXATWJPFTzHur2rsmVWyyq2Wj6Eiibg2skQdV0Nz1g7dM5phNSH0CLtBOCD7jkbe/n8q2XBuKxXlkplkPrKuVZDscdGJ8xisFKpTBBPaA4DZ5joR/OlNPR7icljfPOFJfRjCjOkfiHu/WjfXQ0+oR8HlYIW7iEZaQ7geQHWiPUeGjuurHHJmk9qslNdrJax3x4r2zlVOAzSMpJPPGwqEt9N2pWftA4A9pAcjGxxnao1lfk+iLiNtDZmKeJSGjI0/hxt4/pV6cXtXIQOQ2kHJUn+f6iruKWhvbfRG5U6gx8KAtOGx27CGdlMsqasY2x8fCr72QridlHchFYZJJAIblttn44FABjw1ZAxcgLlSG7pztj37/wA3pvLGoRAQgwc5Ufl9K46AKO1SNljBIbO/Ln76egHtZnu0kDlefRcah5fzpUbiwwkroSWY5IY7Y8K8bqOaNNDdkQQ2C2NsnqPdVVjxMSyG3kUJqYhNPIfw0AODKzmOQMWJC6hsBzxy/m1MuBcMub+7KQ5A2btHAJJ8D+9SghS6kVLYgMGGsAe0K+gej/BoeFQCR93xknHWuf8AI5v450148PKmfBOFw8Ot440ABHPHjTnkM0uhuFb2TkGiXbC5rz5nvtv4pvNihZbjeqZZs0JJIelGVXjiLa5qv1igXlI51WkuXrC3tr4w79Y7gq1J+VK1k7uTyrsU66+7yq5lU3CHKy5qZIdSDv5UsSbJohJa1xyZXFhvTr0QjkL3liWWRgcqo+Z8a+Yy2yxA5kUlQDpIOfdX6McCdNDbg7EV899MfRC30vNaRYY5Ymurj5visM8Pl8uyGkJLD4HnVkO0wKHfkDjPParY7STWQRmNjpBI5Vd6j9mskci5TUG0pp233/OuuMlMzvNJHDKOz04UNp6Ywa9bQntwYZApBA1cjzNW3LQSxpGpxp1bZ6Y5/r8aqQ3CdpLbgqmfhnlThNLw+9WOYq2gK50zgc8f9OTz5kfWtNw7gPo9xFZJ3VpdTZVyzFmXJ3ODtuD0r5+LuUpELjSwKjBDaT4gk/H6VxOKXaqFP2gH3tGd/wB6LNm0+zbD86qlcg6V0k4PdPM+744qm2vI5ZiMrgbBlPXqPKi+u1UkJI9yi4TvvzydgF6486rw18oL22hAQ2mXB+lMK4RQCG/huLDM1smsOD2zY2589PhUreG3vZgJZwHlGyounyPz5/GnRGQVxkdV8ab+h/CLee7kuJIVKxHKjSNj7hWfLl447XjN3Rt6Kej6cNh7WcI0hAAYjJxgYq30m4qtjbE6sYp9OwUYGNug8K+Xem1yvEOJW3D0ZmXPaS45AdB+vwrxeXLzr0OPHUbDgPEhLZxyZyrb0zkv2CnBwKzNpqihRF9gKMUxtR2r0SaVYInuX0k5yKhbXWs4qdyUUBZDgUhnufVbsOpzGTvToxaCYbZoPtMPU451mAdevOgZm+3I86inDWWQ9kMVG1LNJk8qFM+pAPAUPJxFbc4+9TOtD2qocVYtwOlIoZpZxrxmpCeTJGMYqt6R4tFFc4qVwVuYihAzgjJrNtxB0He6VZY8TWSfSDgmj+QsuPpkuM2AgnktsFS/VBnO9A21qttG6quWxhtGw+XSn/pmktpOl4AzpgqQp3JPKsle30nq+Y42Uso30H7NuWTXr8OcyxlefyY+NDX1i8Bd4kbS2+M5JPlVdpFrhMMh0uGGkgEq/kfnTm0ed0JmVkdWIcfdJ55HlvU/U7fWzqgOo5YA+NapJp7NkgmGoyqoAIzkIRnH886LsEa3DCKVSGwSez5nr+3wo6WBCuSisw6tsTQXqUPPFwpbc6VP6U9AXFw4RPNGCZ4HOVVj3wce+o8LM0GbWaOZdO8bSbgr4ahzozO9WK+n/c1Iez08K8c5GPGro5IJXxOojH40/UHauTRqh+ymWQHqAdhT2FeTqOae+i94sFwY3bSG3zSj1W4MetYiU/EDVSko4wGDg7edZ8s88LFYdZNdxviwtoHlG5OQo8TXy/hInu+MyySvrlZsk1seOAtw1TIjNqHeA5rWY4DA9vdiVTkk9edeFf2enj6bqGHTAu+GA3zQV/PxuFD6hZwN4Ey42+VH2h7UgnGfOjTb5GBpzV2iRiZE9InIkvJ4IF/6Yw5/9ifyqm1kuzd9ndTpMh5HQUP02rZ3XDHnQqWAz4UqPokpYy9vJ2o5aTtiq3s+oZcJtQsPebORkCrpLTXgLHt40TY2zCNIlz3RzI50dFFPGTkZ8KPFPkztyjQZ2+NIz2bX2qVgT0Gd61PFoJXjbs0z1xyrEx8IW9uJZL2zjLlsEOoNLrfap219pJHgKgIfrkYr12uhg2cVlTwTi/DyJeD3KsvM28zkqPcen5eVMkvbyaJY760lidebAah86LZ8Fp2+d9XcJ36ik3BeIl+MyoGLKhw2abzjZW33HWsz6NoP7+v8e1qU48Rk1nl6OPonFbZL6wLPzUZrCTAWhYpJpBOcDAr6Dw9leNkl6rpyevvrC8bsM8SmE8MWnV4/d8R4bV6P4Wf/AC4/yce9qYCLlmkRjkDGxz7s0SQVOFJOdjVFlbrbxlEc6ScgH3DlRJGdq9Jyo7jY9K4cnkcVCS4jibTI2nHMkZGKqkgimwQ7gDlpbY0ASK9XK9Uh3NezvXPh8aZWljatHm4lkDk90Jz/ACpW6Cq1DhDIBKUGR3DjBppbrNNJCvZ6Ijj2xk5qmNrbh8wa3WdyRuGQAflTG1u5prqMT9mgO+kAVhy5XxrTCdiuJ2Qli2723hWe9XWGTcYNbGTvJhOWKzvE4GyWOcfSvKs+Xfj6Vx3Wgc8VaOKBGGWz5UvEkSgAlc+Fdu/sLV5khDMFyoA9o+FLW1eTU2Nx60hKjBFFKVRNe2euaz/o/evJwqJ54uymK99M8m60XcXpa2I+9jaqxxTbsU/G7O2yGKayeXWh/wD9RG42wqk9a+Xel9/NZn1m3CiUnUzHmMbVmJPS27ZV0xgMOurO9bSWs7JH6FF1FcoGVgcjkKEuoQGVylYb+zziN3esrTuRCc7Gt/caAuochWOcaY0BgdoVAx1quRxnT1rhnUzihryViX0chvURdJvSG8aFW8hWX9F7h1448p/4b5B9/SmnG9bozEc+uKV8Bt/tAxZmIOdIG1K9+hOn0eyugEZugyaVcblWa8Z15EChILuVVIQY3NVk5JJ5k716P4nFlP71x8/JL090rhxnb2q6Op5eYqEcQRi5LN4lugr0XI88UbkGVUJHJmHKqPU4woVQ+kctLbfCiQQ2SpyOlcIzQbldVHc4RSfcKst4u1lCkNpO2VrQWkcVsmle9+lZ5XRyF3DbONG13sbYHsoRzpiJYwTHBGMjqBXlBJZhHtnc4G/zodpY0y2sjwAIP5VnvZrkh1OWl7TPmKJsIEe9URA56nOcClFt2l5ciGAHvdTnnW04RwdOHwuwOZMd731ly5STTTCW0LeK6NpDsF/ENx8aHbTjvDO3OmF0U1En2vdQDPqOP/mvNs1XZiUX1nH7cYw1VJPmMI5OQcYHUU3lhVlJOc46CkN9A+SI9WaXpfsFakcLkkVNTwTPnQR7JNEXfEIijY0ttyyKDldguhgcY3PX4UZ6K+j0XFZ/Wrm3YWkZ1HIx2h8APDxqsct1OU0Uv6JXPpA5WeIxW/ZlhIeY8MeJqUX9mPC7e3jFx28kq4Msocg58ABsK+r9gF042A5DGMCgb6IFTnx/SujGXTK1hOCWkXC52jhBEYbCa/CnN1xQRIwkYKMYyTil/FoAE1J7YG1ZG1SfjV2Ir0tFFC3sqcHI8ax5Ol4zbTWV0Lwlwk0W+Aznn50VLIyDfvDxqiKBmxHCveXai1sZ32kXGOo51k0LJYRcnZa9DY9lHJseXIU5WAQrsVPvoa8zgAb56AGqxncLK/1KYtl6/GpmuPlSwKsu/wB4VAPvivcw/WPMy9rM4qOsZ3IHvNcPOu4qku5BGxB9xrwOK51rxHv+FAaKOCGBhgFvBeQqQlVF3KRg9cAH50D64xEinKrjIOc/SuSXKgc1bG3PH0rHxXsSY1c62nJj6KN8+HvoSbu5Ck6uqEY+lCz3TuMxqFAzy2zXoXmJEJYKGONxyp61Nls59F41e8MhBBToOhrbs6rDuSD1zQXBeGwWtqhBBLKCSBzoi8kADRjpXDy5eVrqwgORFJO+c1S0CfGvNJg4qLzYrmbbUzRyIPsz8KXXEZlB20kdacmVGT7QnHgKEdFc40HT50ahy0kThr3cmmRtEfInnWohdLa3jhhXTEowo8qHSPQQMYq6VQFz18ztTh0XFchuVUXzqUwRv40smmkjOoHHwroutaEyt0q8cmdhPxNe8Tn45pHw60zeyvqLd89MCmfFp2wxXvDoPOucDtnRFZ25nJFRy3auPo5t7YxxrjTvvVkusL90jHICro9x3RiqpA4JLdKzaE8okaXEbuPEYGKjapcPfYg5qMnNNVhSSQHqapisoG4m6T4Bb2G5EHyNbcMnluseW2Rb207vpuLeKbpuAR9apm4TbSZdbV42PSM4HyNMn4fJCr9nc9oqjbtck/MUM5mXMcodHAyWBDCvQ8vpx6LhwW3kJ03Lo34WA2qiTg0gJEVxE7eByDRzcQiE3ZMQR1fJAz7qYpAZEDRSIx8ABtVeVg1GZfhV6u3ZZ9zA1X/d98u3qsv9JrVox16ZEUnwxVy8OD94Npz0Bo/mo8GHALjnkDzrsZWNsaScbcgB9arztyzUlk0rpCjz8a10laCq5kV1LjpjlR/Bng9fjF3JtnugDAzSpZGQ6oyyEcjmjeB25u+KwxhiMNqyT4VOc/rRj7fTY8CHu4x0xS6c940y0lYQD4Usujsa8vJ2Yg5DVYbAq1txVB2rNrEg+dqmHyOXLrVIO1SiI1b/AJVO1LAx/FkeFQmlKriMYNTJGTj8qXXk3Z55fGqJRdzePOgLi7WJCzthcb1bLJqGQFzjnWe4nN6zKIoyCuO/jxzR2NLbeRr661FcKp7vmK2fDbZSgPPblWe4NZAFc9K1tpCAhxRobEJb6VGmqpwoH2w6bGjIJUOFfwoDiIaNgQuQeVVZ0naqCILMSDnIoPiBxKmM5z0plw6INEzuAPjvSXikEi3Q7+lC2+TRh+yc/Qu64rDCug4/yrn60kv+JNdXCvE7oeWrbIHw3p6OAQump177dTnPKpScAsSv28rIR3mYEbH5V6ONxjksrOTzTCbM0AkAAJypDD4/70XaskqkQh4dRB3bG/vB/MUyj4DwybV9tNt1Lj9qifVLROxidpFU5Xv8v5vVXOX0UidlcXaqBqVs7HU2MfHG9F+s3IOGXTjoQDQ8SxKO30kalA3bn+9GwPE6e2gx+KPesqp8/r1aS89Db+FS0E0E4G+MlD/PjSG6tZ7VtMy6COmQfyrpmWN9MrFNNPRwn+80wdOx71K6a+js6299qK5Y7LU8v6Kw9vopJ7JcnO3Ol8+5opzm3U4xkUBMdq8uuyBpqrkHdFXvggZrzBSuPGp0vagZ0Y5jwqrAVtq9dTCGPHRSKXzXQZNSkgHel4jyMJbkKuk4/Wld5cKq6ySF86WXfGFi2kJOdhtypLdXc96xjLAKDtjajRymHEeKGUCG1bGrZm8N65w6xUd4jFU2FiAwJ54rR2tuFRcU5DtX2aqgWm8E4XGKXRpkijYxpGKaTJMMuetU3EJcAGuWr4bFF5Ucxmn8J+UYUKR7DNKuMSqFAlg1ZIAPhTV3KqTHtWev3aa7ZMZNPDullejv1graAEa3Kgc/bpVmUzNI8WtSc454+dWWjNEAZRh+XPPOuXtz6uva4OE2x512SOauB5XOrs0BXmCTyqYe2jfEcaMcb93YUuW5muWCYaNn7xAIx79vh8qMSzKJnWcHfTkkHz3p0lsUBmjzI+G6EYGK56sFP/EBPJsjAB8qkWWFWYM5yADywKtAnyTGowepbFKB/9k=",alt:""})}),e.map(u=>A.jsxs("div",{onClick:()=>l("/AnimalDetail?regId="+u.regId),className:"aspect-9/12 group cursor-pointer shadow rounded-xl overflow-hidden",children:[A.jsx("div",{className:"h-1/2 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full min-w-full duration-300 group-hover:scale-125",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"bg-white h-1/2 pt-2 px-3 relative flex flex-col items-center justify-evenly border-t-4 border-t-amber-500",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold",children:u.species}),A.jsx("span",{className:"text-sm text-gray-600 ms-1",children:Ca(u.gender)})]}),A.jsxs("div",{className:"text-sm text-gray-600 w-full",children:[A.jsxs("div",{children:[A.jsx("span",{children:"관리번호"}),A.jsx("span",{className:"ps-1",children:u.regId})]}),A.jsxs("div",{children:[A.jsx("span",{children:"공고날짜"}),A.jsx("span",{className:"ps-1",children:u.regDtTm})]}),A.jsxs("div",{children:[A.jsx("span",{children:"발견장소"}),A.jsx("span",{className:"ps-1",children:u.foundPlace.length>7?u.foundPlace.substring(0,7)+"...":u.foundPlace})]})]}),A.jsx("span",{className:"bg-amber-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-1 rounded-2xl",children:"공고중"})]})]},u.regId))]})]}),A.jsxs("div",{className:"bg-blue-200 py-4 px-2 sm:hidden",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-xl",children:"공고중인"}),A.jsx("span",{className:"text-xl font-bold",children:"보호동물"}),A.jsx("span",{className:"ms-2 text-xs text-gray-600",children:"#대전동물보호센터의 새 식구를 소개합니다"})]}),A.jsxs("div",{className:"flex justify-end mt-2",children:[A.jsx("svg",{onClick:()=>a(r==0?e.length-1:r-1),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"black",className:"size-6 border rounded-[8px] border-black",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),A.jsx("svg",{onClick:()=>a(r==e.length-1?0:r+1),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"black",className:"size-6 border rounded-[8px] border-black",children:A.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})]}),A.jsx("div",{className:"mt-4",children:A.jsx("div",{className:"whitespace-nowrap overflow-hidden items-end",children:e.map(u=>A.jsxs("div",{onClick:()=>l("/AnimalDetail?regId="+u.regId),className:"inline-block aspect-9/12 group cursor-pointer shadow rounded-xl overflow-hidden duration-300",style:{transform:`translateX(-${r*100}%)`},children:[A.jsx("div",{className:"h-1/2 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full min-w-full duration-300 group-hover:scale-125",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"bg-white h-1/2 pt-2 px-3 relative flex flex-col items-center justify-evenly border-t-4 border-t-amber-500",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold",children:u.species}),A.jsx("span",{className:"text-sm text-gray-600 ms-1",children:Ca(u.gender)})]}),A.jsxs("div",{className:"text-sm text-gray-600 w-full",children:[A.jsxs("div",{children:[A.jsx("span",{children:"관리번호"}),A.jsx("span",{className:"ps-1",children:u.regId})]}),A.jsxs("div",{children:[A.jsx("span",{children:"공고날짜"}),A.jsx("span",{className:"ps-1",children:u.regDtTm})]}),A.jsxs("div",{children:[A.jsx("span",{children:"발견장소"}),A.jsx("span",{className:"ps-1",children:u.foundPlace.length>7?u.foundPlace.substring(0,7)+"...":u.foundPlace})]})]}),A.jsx("span",{className:"bg-amber-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-1 rounded-2xl",children:"공고중"})]})]},u.regId))})})]})]})}function p7(){return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/ContactUs"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:hidden",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"오시는 길"}),A.jsx("div",{className:"mt-4 mb-4 w-4/5 aspect-video m-auto",children:A.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3208.947733252492!2d127.38046307636864!3d36.458819386868015!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357ab35759eb49f9%3A0x4e667dc771de408c!2z64yA7KCE64-Z66y867O07Zi47IS87YSw!5e0!3m2!1sko!2skr!4v1747639510170!5m2!1sko!2skr",width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx("div",{className:"aspect-video mb-4",children:A.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/gjzR26xJu6E?si=kX22jf-PpaSqqYOm",title:"YouTube video player",style:{border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),A.jsx("div",{className:"aspect-video",children:A.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/Ih0limtdYS8?si=zFQ7OUtT4li5oXI7",title:"YouTube video player",style:{border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})})]})]}),A.jsxs("div",{className:"w-full px-6 sm:hidden",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"오시는 길"}),A.jsx("div",{className:"mt-4 mb-4 w-full aspect-video m-auto",children:A.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3208.947733252492!2d127.38046307636864!3d36.458819386868015!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357ab35759eb49f9%3A0x4e667dc771de408c!2z64yA7KCE64-Z66y867O07Zi47IS87YSw!5e0!3m2!1sko!2skr!4v1747639510170!5m2!1sko!2skr",width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),A.jsxs("div",{children:[A.jsx("div",{className:"aspect-video mb-4",children:A.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/gjzR26xJu6E?si=kX22jf-PpaSqqYOm",title:"YouTube video player",style:{border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),A.jsx("div",{className:"aspect-video mb-4",children:A.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/Ih0limtdYS8?si=zFQ7OUtT4li5oXI7",title:"YouTube video player",style:{border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})})]})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ah(i){return i+.5|0}const _r=(i,t,e)=>Math.max(Math.min(i,e),t);function id(i){return _r(Ah(i*2.55),0,255)}function xr(i){return _r(Ah(i*255),0,255)}function vo(i){return _r(Ah(i/2.55)/100,0,1)}function Zk(i){return _r(Ah(i*100),0,100)}const Ki={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},A_=[..."0123456789ABCDEF"],b7=i=>A_[i&15],w7=i=>A_[(i&240)>>4]+A_[i&15],Yf=i=>(i&240)>>4===(i&15),y7=i=>Yf(i.r)&&Yf(i.g)&&Yf(i.b)&&Yf(i.a);function _7(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Ki[i[1]]*17,g:255&Ki[i[2]]*17,b:255&Ki[i[3]]*17,a:t===5?Ki[i[4]]*17:255}:(t===7||t===9)&&(e={r:Ki[i[1]]<<4|Ki[i[2]],g:Ki[i[3]]<<4|Ki[i[4]],b:Ki[i[5]]<<4|Ki[i[6]],a:t===9?Ki[i[7]]<<4|Ki[i[8]]:255})),e}const v7=(i,t)=>i<255?t(i):"";function C7(i){var t=y7(i)?b7:w7;return i?"#"+t(i.r)+t(i.g)+t(i.b)+v7(i.a,t):void 0}const T7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function zP(i,t,e){const n=t*Math.min(e,1-e),s=(o,r=(o+i/30)%12)=>e-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function x7(i,t,e){const n=(s,o=(s+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function k7(i,t,e){const n=zP(i,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)n[s]*=1-t-e,n[s]+=t;return n}function E7(i,t,e,n,s){return i===s?(t-e)/n+(t<e?6:0):t===s?(e-i)/n+2:(i-t)/n+4}function Xv(i){const e=i.r/255,n=i.g/255,s=i.b/255,o=Math.max(e,n,s),r=Math.min(e,n,s),a=(o+r)/2;let l,u,h;return o!==r&&(h=o-r,u=a>.5?h/(2-o-r):h/(o+r),l=E7(e,n,s,h,o),l=l*60+.5),[l|0,u||0,a]}function Qv(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(xr)}function e0(i,t,e){return Qv(zP,i,t,e)}function S7(i,t,e){return Qv(k7,i,t,e)}function A7(i,t,e){return Qv(x7,i,t,e)}function HP(i){return(i%360+360)%360}function R7(i){const t=T7.exec(i);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?id(+t[5]):xr(+t[5]));const s=HP(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=S7(s,o,r):t[1]==="hsv"?n=A7(s,o,r):n=e0(s,o,r),{r:n[0],g:n[1],b:n[2],a:e}}function I7(i,t){var e=Xv(i);e[0]=HP(e[0]+t),e=e0(e),i.r=e[0],i.g=e[1],i.b=e[2]}function P7(i){if(!i)return;const t=Xv(i),e=t[0],n=Zk(t[1]),s=Zk(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${s}%, ${vo(i.a)})`:`hsl(${e}, ${n}%, ${s}%)`}const Yk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function M7(){const i={},t=Object.keys(Jk),e=Object.keys(Yk);let n,s,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],s=0;s<e.length;s++)o=e[s],a=a.replace(o,Yk[o]);o=parseInt(Jk[r],16),i[a]=[o>>16&255,o>>8&255,o&255]}return i}let Jf;function V7(i){Jf||(Jf=M7(),Jf.transparent=[0,0,0,0]);const t=Jf[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const N7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function O7(i){const t=N7.exec(i);let e=255,n,s,o;if(t){if(t[7]!==n){const r=+t[7];e=t[8]?id(r):_r(r*255,0,255)}return n=+t[1],s=+t[3],o=+t[5],n=255&(t[2]?id(n):_r(n,0,255)),s=255&(t[4]?id(s):_r(s,0,255)),o=255&(t[6]?id(o):_r(o,0,255)),{r:n,g:s,b:o,a:e}}}function D7(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${vo(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const fy=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,zl=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function L7(i,t,e){const n=zl(vo(i.r)),s=zl(vo(i.g)),o=zl(vo(i.b));return{r:xr(fy(n+e*(zl(vo(t.r))-n))),g:xr(fy(s+e*(zl(vo(t.g))-s))),b:xr(fy(o+e*(zl(vo(t.b))-o))),a:i.a+e*(t.a-i.a)}}function Xf(i,t,e){if(i){let n=Xv(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=e0(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function WP(i,t){return i&&Object.assign(t||{},i)}function Xk(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=xr(i[3]))):(t=WP(i,{r:0,g:0,b:0,a:1}),t.a=xr(t.a)),t}function B7(i){return i.charAt(0)==="r"?O7(i):R7(i)}class zd{constructor(t){if(t instanceof zd)return t;const e=typeof t;let n;e==="object"?n=Xk(t):e==="string"&&(n=_7(t)||V7(t)||B7(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=WP(this._rgb);return t&&(t.a=vo(t.a)),t}set rgb(t){this._rgb=Xk(t)}rgbString(){return this._valid?D7(this._rgb):void 0}hexString(){return this._valid?C7(this._rgb):void 0}hslString(){return this._valid?P7(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,s=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,l=n.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-u,n.r=255&u*n.r+o*s.r+.5,n.g=255&u*n.g+o*s.g+.5,n.b=255&u*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=L7(this._rgb,t._rgb,e)),this}clone(){return new zd(this.rgb)}alpha(t){return this._rgb.a=xr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ah(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Xf(this._rgb,2,t),this}darken(t){return Xf(this._rgb,2,-t),this}saturate(t){return Xf(this._rgb,1,t),this}desaturate(t){return Xf(this._rgb,1,-t),this}rotate(t){return I7(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fo(){}const F7=(()=>{let i=0;return()=>i++})();function bt(i){return i==null}function mn(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function lt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function ts(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Vs(i,t){return ts(i)?i:t}function tt(i,t){return typeof i>"u"?t:i}const U7=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,qP=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Bt(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function Ct(i,t,e,n){let s,o,r;if(mn(i))for(o=i.length,s=0;s<o;s++)t.call(e,i[s],s);else if(lt(i))for(r=Object.keys(i),o=r.length,s=0;s<o;s++)t.call(e,i[r[s]],r[s])}function cg(i,t){let e,n,s,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(s=i[e],o=t[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function ug(i){if(mn(i))return i.map(ug);if(lt(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let s=0;for(;s<n;++s)t[e[s]]=ug(i[e[s]]);return t}return i}function GP(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function z7(i,t,e,n){if(!GP(i))return;const s=t[i],o=e[i];lt(s)&&lt(o)?Hd(s,o,n):t[i]=ug(o)}function Hd(i,t,e){const n=mn(t)?t:[t],s=n.length;if(!lt(i))return i;e=e||{};const o=e.merger||z7;let r;for(let a=0;a<s;++a){if(r=n[a],!lt(r))continue;const l=Object.keys(r);for(let u=0,h=l.length;u<h;++u)o(l[u],i,r,e)}return i}function bd(i,t){return Hd(i,t,{merger:H7})}function H7(i,t,e){if(!GP(i))return;const n=t[i],s=e[i];lt(n)&&lt(s)?bd(n,s):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=ug(s))}const Qk={"":i=>i,x:i=>i.x,y:i=>i.y};function W7(i){const t=i.split("."),e=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function q7(i){const t=W7(i);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Va(i,t){return(Qk[t]||(Qk[t]=q7(t)))(i)}function t0(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Wd=i=>typeof i<"u",Rr=i=>typeof i=="function",eE=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function G7(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const en=Math.PI,Qt=2*en,$7=Qt+en,dg=Number.POSITIVE_INFINITY,j7=en/180,gn=en/2,la=en/4,tE=en*2/3,$P=Math.log10,Hs=Math.sign;function wd(i,t,e){return Math.abs(i-t)<e}function nE(i){const t=Math.round(i);i=wd(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor($P(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function K7(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((s,o)=>s-o).pop(),t}function Z7(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function qd(i){return!Z7(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function Y7(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function J7(i,t,e){let n,s,o;for(n=0,s=i.length;n<s;n++)o=i[n][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ko(i){return i*(en/180)}function X7(i){return i*(180/en)}function iE(i){if(!ts(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function jP(i,t){const e=t.x-i.x,n=t.y-i.y,s=Math.sqrt(e*e+n*n);let o=Math.atan2(n,e);return o<-.5*en&&(o+=Qt),{angle:o,distance:s}}function R_(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Q7(i,t){return(i-t+$7)%Qt-en}function pr(i){return(i%Qt+Qt)%Qt}function Gd(i,t,e,n){const s=pr(i),o=pr(t),r=pr(e),a=pr(o-s),l=pr(r-s),u=pr(s-o),h=pr(s-r);return s===o||s===r||n&&o===r||a>l&&u<h}function jn(i,t,e){return Math.max(t,Math.min(e,i))}function e6(i){return jn(i,-32768,32767)}function vr(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function n0(i,t,e){e=e||(r=>i[r]<t);let n=i.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,e(o)?s=o:n=o;return{lo:s,hi:n}}const Ta=(i,t,e,n)=>n0(i,e,n?s=>{const o=i[s][t];return o<e||o===e&&i[s+1][t]===e}:s=>i[s][t]<e),t6=(i,t,e)=>n0(i,e,n=>i[n][t]>=e);function n6(i,t,e){let n=0,s=i.length;for(;n<s&&i[n]<t;)n++;for(;s>n&&i[s-1]>e;)s--;return n>0||s<i.length?i.slice(n,s):i}const KP=["push","pop","shift","splice","unshift"];function i6(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),KP.forEach(e=>{const n="_onData"+t0(e),s=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return i._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function sE(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(KP.forEach(o=>{delete i[o]}),delete i._chartjs)}function ZP(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const YP=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function JP(i,t){let e=[],n=!1;return function(...s){e=s,n||(n=!0,YP.call(window,()=>{n=!1,i.apply(t,e)}))}}function s6(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}const i0=i=>i==="start"?"left":i==="end"?"right":"center",qn=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,o6=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t;function r6(i,t,e){const n=t.length;let s=0,o=n;if(i._sorted){const{iScale:r,vScale:a,_parsed:l}=i,u=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,h=r.axis,{min:m,max:p,minDefined:v,maxDefined:C}=r.getUserBounds();if(v){if(s=Math.min(Ta(l,h,m).lo,e?n:Ta(t,h,r.getPixelForValue(m)).lo),u){const x=l.slice(0,s+1).reverse().findIndex(k=>!bt(k[a.axis]));s-=Math.max(0,x)}s=jn(s,0,n-1)}if(C){let x=Math.max(Ta(l,r.axis,p,!0).hi+1,e?0:Ta(t,h,r.getPixelForValue(p),!0).hi+1);if(u){const k=l.slice(x-1).findIndex(S=>!bt(S[a.axis]));x+=Math.max(0,k)}o=jn(x,s,n)-s}else o=n-s}return{start:s,count:o}}function a6(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=s,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,s),o}const Qf=i=>i===0||i===1,oE=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Qt/e)),rE=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Qt/e)+1,yd={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*gn)+1,easeOutSine:i=>Math.sin(i*gn),easeInOutSine:i=>-.5*(Math.cos(en*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Qf(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Qf(i)?i:oE(i,.075,.3),easeOutElastic:i=>Qf(i)?i:rE(i,.075,.3),easeInOutElastic(i){return Qf(i)?i:i<.5?.5*oE(i*2,.1125,.45):.5+.5*rE(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-yd.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?yd.easeInBounce(i*2)*.5:yd.easeOutBounce(i*2-1)*.5+.5};function s0(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function aE(i){return s0(i)?i:new zd(i)}function my(i){return s0(i)?i:new zd(i).saturate(.5).darken(.1).hexString()}const l6=["x","y","borderWidth","radius","tension"],c6=["color","borderColor","backgroundColor"];function u6(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:c6},numbers:{type:"number",properties:l6}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function d6(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const lE=new Map;function h6(i,t){t=t||{};const e=i+JSON.stringify(t);let n=lE.get(e);return n||(n=new Intl.NumberFormat(i,t),lE.set(e,n)),n}function o0(i,t,e){return h6(t,e).format(i)}const f6={values(i){return mn(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const n=this.chart.options.locale;let s,o=i;if(e.length>1){const u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),o=m6(i,e)}const r=$P(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),o0(i,n,l)}};function m6(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var XP={formatters:f6};function g6(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:XP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Na=Object.create(null),I_=Object.create(null);function _d(i,t){if(!t)return i;const e=t.split(".");for(let n=0,s=e.length;n<s;++n){const o=e[n];i=i[o]||(i[o]=Object.create(null))}return i}function gy(i,t,e){return typeof t=="string"?Hd(_d(i,t),e):Hd(_d(i,""),t)}class p6{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>my(s.backgroundColor),this.hoverBorderColor=(n,s)=>my(s.borderColor),this.hoverColor=(n,s)=>my(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return gy(this,t,e)}get(t){return _d(this,t)}describe(t,e){return gy(I_,t,e)}override(t,e){return gy(Na,t,e)}route(t,e,n,s){const o=_d(this,t),r=_d(this,n),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],u=r[s];return lt(l)?Object.assign({},u,l):tt(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var on=new p6({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[u6,d6,g6]);function b6(i){return!i||bt(i.size)||bt(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function cE(i,t,e,n,s){let o=t[s];return o||(o=t[s]=i.measureText(s).width,e.push(s)),o>n&&(n=o),n}function ca(i,t,e){const n=i.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*n)/n+s}function uE(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function P_(i,t,e,n){QP(i,t,e,n,null)}function QP(i,t,e,n,s){let o,r,a,l,u,h,m,p;const v=t.pointStyle,C=t.rotation,x=t.radius;let k=(C||0)*j7;if(v&&typeof v=="object"&&(o=v.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(k),i.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),i.restore();return}if(!(isNaN(x)||x<=0)){switch(i.beginPath(),v){default:s?i.ellipse(e,n,s/2,x,0,0,Qt):i.arc(e,n,x,0,Qt),i.closePath();break;case"triangle":h=s?s/2:x,i.moveTo(e+Math.sin(k)*h,n-Math.cos(k)*x),k+=tE,i.lineTo(e+Math.sin(k)*h,n-Math.cos(k)*x),k+=tE,i.lineTo(e+Math.sin(k)*h,n-Math.cos(k)*x),i.closePath();break;case"rectRounded":u=x*.516,l=x-u,r=Math.cos(k+la)*l,m=Math.cos(k+la)*(s?s/2-u:l),a=Math.sin(k+la)*l,p=Math.sin(k+la)*(s?s/2-u:l),i.arc(e-m,n-a,u,k-en,k-gn),i.arc(e+p,n-r,u,k-gn,k),i.arc(e+m,n+a,u,k,k+gn),i.arc(e-p,n+r,u,k+gn,k+en),i.closePath();break;case"rect":if(!C){l=Math.SQRT1_2*x,h=s?s/2:l,i.rect(e-h,n-l,2*h,2*l);break}k+=la;case"rectRot":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+p,n-r),i.lineTo(e+m,n+a),i.lineTo(e-p,n+r),i.closePath();break;case"crossRot":k+=la;case"cross":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+m,n+a),i.moveTo(e+p,n-r),i.lineTo(e-p,n+r);break;case"star":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+m,n+a),i.moveTo(e+p,n-r),i.lineTo(e-p,n+r),k+=la,m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+m,n+a),i.moveTo(e+p,n-r),i.lineTo(e-p,n+r);break;case"line":r=s?s/2:Math.cos(k)*x,a=Math.sin(k)*x,i.moveTo(e-r,n-a),i.lineTo(e+r,n+a);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(k)*(s?s/2:x),n+Math.sin(k)*x);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function $d(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function r0(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function a0(i){i.restore()}function w6(i,t,e,n,s){if(!t)return i.lineTo(e.x,e.y);if(s==="middle"){const o=(t.x+e.x)/2;i.lineTo(o,t.y),i.lineTo(o,e.y)}else s==="after"!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function y6(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function _6(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),bt(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function v6(i,t,e,n,s){if(s.strikethrough||s.underline){const o=i.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,u=e+o.actualBoundingBoxDescent,h=s.strikethrough?(l+u)/2:u;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=s.decorationWidth||2,i.moveTo(r,h),i.lineTo(a,h),i.stroke()}}function C6(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function jd(i,t,e,n,s,o={}){const r=mn(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,u;for(i.save(),i.font=s.string,_6(i,o),l=0;l<r.length;++l)u=r[l],o.backdrop&&C6(i,o.backdrop),a&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),bt(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(u,e,n,o.maxWidth)),i.fillText(u,e,n,o.maxWidth),v6(i,e,n,u,o),n+=Number(s.lineHeight);i.restore()}function hg(i,t){const{x:e,y:n,w:s,h:o,radius:r}=t;i.arc(e+r.topLeft,n+r.topLeft,r.topLeft,1.5*en,en,!0),i.lineTo(e,n+o-r.bottomLeft),i.arc(e+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,en,gn,!0),i.lineTo(e+s-r.bottomRight,n+o),i.arc(e+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,gn,0,!0),i.lineTo(e+s,n+r.topRight),i.arc(e+s-r.topRight,n+r.topRight,r.topRight,0,-gn,!0),i.lineTo(e+r.topLeft,n)}const T6=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,x6=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function k6(i,t){const e=(""+i).match(T6);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const E6=i=>+i||0;function l0(i,t){const e={},n=lt(t),s=n?Object.keys(t):t,o=lt(i)?n?r=>tt(i[r],i[t[r]]):r=>i[r]:()=>i;for(const r of s)e[r]=E6(o(r));return e}function eM(i){return l0(i,{top:"y",right:"x",bottom:"y",left:"x"})}function mc(i){return l0(i,["topLeft","topRight","bottomLeft","bottomRight"])}function ns(i){const t=eM(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Kn(i,t){i=i||{},t=t||on.font;let e=tt(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=tt(i.style,t.style);n&&!(""+n).match(x6)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:tt(i.family,t.family),lineHeight:k6(tt(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:tt(i.weight,t.weight),string:""};return s.string=b6(s),s}function em(i,t,e,n){let s,o,r;for(s=0,o=i.length;s<o;++s)if(r=i[s],r!==void 0&&r!==void 0)return r}function S6(i,t,e){const{min:n,max:s}=i,o=qP(t,(s-n)/2),r=(a,l)=>e&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function Ha(i,t){return Object.assign(Object.create(i),t)}function c0(i,t=[""],e,n,s=()=>i[0]){const o=e||i;typeof n>"u"&&(n=sM("_fallback",i));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:n,_getTarget:s,override:a=>c0([a,...i],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return nM(a,l,()=>O6(l,t,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return hE(a).includes(l)},ownKeys(a){return hE(a)},set(a,l,u){const h=a._storage||(a._storage=s());return a[l]=h[l]=u,delete a._keys,!0}})}function yc(i,t,e,n){const s={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:tM(i,n),setContext:o=>yc(i,o,e,n),override:o=>yc(i.override(o),t,e,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete i[r],!0},get(o,r,a){return nM(o,r,()=>R6(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(i,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,r)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,r){return Reflect.has(i,r)},ownKeys(){return Reflect.ownKeys(i)},set(o,r,a){return i[r]=a,delete o[r],!0}})}function tM(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=i;return{allKeys:s,scriptable:e,indexable:n,isScriptable:Rr(e)?e:()=>e,isIndexable:Rr(n)?n:()=>n}}const A6=(i,t)=>i?i+t0(t):t,u0=(i,t)=>lt(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function nM(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const n=e();return i[t]=n,n}function R6(i,t,e){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=i;let a=n[t];return Rr(a)&&r.isScriptable(t)&&(a=I6(t,a,i,e)),mn(a)&&a.length&&(a=P6(t,a,i,r.isIndexable)),u0(t,a)&&(a=yc(a,s,o&&o[t],r)),a}function I6(i,t,e,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=t(o,r||n);return a.delete(i),u0(i,l)&&(l=d0(s._scopes,s,i,l)),l}function P6(i,t,e,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=e;if(typeof o.index<"u"&&n(i))return t[o.index%t.length];if(lt(t[0])){const l=t,u=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const m=d0(u,s,i,h);t.push(yc(m,o,r&&r[i],a))}}return t}function iM(i,t,e){return Rr(i)?i(t,e):i}const M6=(i,t)=>i===!0?t:typeof i=="string"?Va(t,i):void 0;function V6(i,t,e,n,s){for(const o of t){const r=M6(e,o);if(r){i.add(r);const a=iM(r._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==n)return a}else if(r===!1&&typeof n<"u"&&e!==n)return null}return!1}function d0(i,t,e,n){const s=t._rootScopes,o=iM(t._fallback,e,n),r=[...i,...s],a=new Set;a.add(n);let l=dE(a,r,e,o||e,n);return l===null||typeof o<"u"&&o!==e&&(l=dE(a,r,o,l,n),l===null)?!1:c0(Array.from(a),[""],s,o,()=>N6(t,e,n))}function dE(i,t,e,n,s){for(;e;)e=V6(i,t,e,n,s);return e}function N6(i,t,e){const n=i._getTarget();t in n||(n[t]={});const s=n[t];return mn(s)&&lt(e)?e:s||{}}function O6(i,t,e,n){let s;for(const o of t)if(s=sM(A6(o,i),e),typeof s<"u")return u0(i,s)?d0(e,n,i,s):s}function sM(i,t){for(const e of t){if(!e)continue;const n=e[i];if(typeof n<"u")return n}}function hE(i){let t=i._keys;return t||(t=i._keys=D6(i._scopes)),t}function D6(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}const L6=Number.EPSILON||1e-14,_c=(i,t)=>t<i.length&&!i[t].skip&&i[t],oM=i=>i==="x"?"y":"x";function B6(i,t,e,n){const s=i.skip?t:i,o=t,r=e.skip?t:e,a=R_(o,s),l=R_(r,o);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const m=n*u,p=n*h;return{previous:{x:o.x-m*(r.x-s.x),y:o.y-m*(r.y-s.y)},next:{x:o.x+p*(r.x-s.x),y:o.y+p*(r.y-s.y)}}}function F6(i,t,e){const n=i.length;let s,o,r,a,l,u=_c(i,0);for(let h=0;h<n-1;++h)if(l=u,u=_c(i,h+1),!(!l||!u)){if(wd(t[h],0,L6)){e[h]=e[h+1]=0;continue}s=e[h]/t[h],o=e[h+1]/t[h],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[h]=s*r*t[h],e[h+1]=o*r*t[h])}}function U6(i,t,e="x"){const n=oM(e),s=i.length;let o,r,a,l=_c(i,0);for(let u=0;u<s;++u){if(r=a,a=l,l=_c(i,u+1),!a)continue;const h=a[e],m=a[n];r&&(o=(h-r[e])/3,a[`cp1${e}`]=h-o,a[`cp1${n}`]=m-o*t[u]),l&&(o=(l[e]-h)/3,a[`cp2${e}`]=h+o,a[`cp2${n}`]=m+o*t[u])}}function z6(i,t="x"){const e=oM(t),n=i.length,s=Array(n).fill(0),o=Array(n);let r,a,l,u=_c(i,0);for(r=0;r<n;++r)if(a=l,l=u,u=_c(i,r+1),!!l){if(u){const h=u[t]-l[t];s[r]=h!==0?(u[e]-l[e])/h:0}o[r]=a?u?Hs(s[r-1])!==Hs(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}F6(i,s,o),U6(i,o,t)}function tm(i,t,e){return Math.max(Math.min(i,e),t)}function H6(i,t){let e,n,s,o,r,a=$d(i[0],t);for(e=0,n=i.length;e<n;++e)r=o,o=a,a=e<n-1&&$d(i[e+1],t),o&&(s=i[e],r&&(s.cp1x=tm(s.cp1x,t.left,t.right),s.cp1y=tm(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=tm(s.cp2x,t.left,t.right),s.cp2y=tm(s.cp2y,t.top,t.bottom)))}function W6(i,t,e,n,s){let o,r,a,l;if(t.spanGaps&&(i=i.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")z6(i,s);else{let u=n?i[i.length-1]:i[0];for(o=0,r=i.length;o<r;++o)a=i[o],l=B6(u,a,i[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}t.capBezierPoints&&H6(i,e)}function h0(){return typeof window<"u"&&typeof document<"u"}function f0(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function fg(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}const wp=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function q6(i,t){return wp(i).getPropertyValue(t)}const G6=["top","right","bottom","left"];function Ea(i,t,e){const n={};e=e?"-"+e:"";for(let s=0;s<4;s++){const o=G6[s];n[o]=parseFloat(i[t+"-"+o+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const $6=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function j6(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:s,offsetY:o}=n;let r=!1,a,l;if($6(s,o,i.target))a=s,l=o;else{const u=t.getBoundingClientRect();a=n.clientX-u.left,l=n.clientY-u.top,r=!0}return{x:a,y:l,box:r}}function ba(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,s=wp(e),o=s.boxSizing==="border-box",r=Ea(s,"padding"),a=Ea(s,"border","width"),{x:l,y:u,box:h}=j6(i,e),m=r.left+(h&&a.left),p=r.top+(h&&a.top);let{width:v,height:C}=t;return o&&(v-=r.width+a.width,C-=r.height+a.height),{x:Math.round((l-m)/v*e.width/n),y:Math.round((u-p)/C*e.height/n)}}function K6(i,t,e){let n,s;if(t===void 0||e===void 0){const o=i&&f0(i);if(!o)t=i.clientWidth,e=i.clientHeight;else{const r=o.getBoundingClientRect(),a=wp(o),l=Ea(a,"border","width"),u=Ea(a,"padding");t=r.width-u.width-l.width,e=r.height-u.height-l.height,n=fg(a.maxWidth,o,"clientWidth"),s=fg(a.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:n||dg,maxHeight:s||dg}}const nm=i=>Math.round(i*10)/10;function Z6(i,t,e,n){const s=wp(i),o=Ea(s,"margin"),r=fg(s.maxWidth,i,"clientWidth")||dg,a=fg(s.maxHeight,i,"clientHeight")||dg,l=K6(i,t,e);let{width:u,height:h}=l;if(s.boxSizing==="content-box"){const p=Ea(s,"border","width"),v=Ea(s,"padding");u-=v.width+p.width,h-=v.height+p.height}return u=Math.max(0,u-o.width),h=Math.max(0,n?u/n:h-o.height),u=nm(Math.min(u,r,l.maxWidth)),h=nm(Math.min(h,a,l.maxHeight)),u&&!h&&(h=nm(u/2)),(t!==void 0||e!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,u=nm(Math.floor(h*n))),{width:u,height:h}}function fE(i,t,e){const n=t||1,s=Math.floor(i.height*n),o=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const r=i.canvas;return r.style&&(e||!r.style.height&&!r.style.width)&&(r.style.height=`${i.height}px`,r.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(i.currentDevicePixelRatio=n,r.height=s,r.width=o,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Y6=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};h0()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function mE(i,t){const e=q6(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function wa(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function J6(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:n==="middle"?e<.5?i.y:t.y:n==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function X6(i,t,e,n){const s={x:i.cp2x,y:i.cp2y},o={x:t.cp1x,y:t.cp1y},r=wa(i,s,e),a=wa(s,o,e),l=wa(o,t,e),u=wa(r,a,e),h=wa(a,l,e);return wa(u,h,e)}const Q6=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},eU=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function gc(i,t,e){return i?Q6(t,e):eU()}function rM(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function aM(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function lM(i){return i==="angle"?{between:Gd,compare:Q7,normalize:pr}:{between:vr,compare:(t,e)=>t-e,normalize:t=>t}}function gE({start:i,end:t,count:e,loop:n,style:s}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e===0,style:s}}function tU(i,t,e){const{property:n,start:s,end:o}=e,{between:r,normalize:a}=lM(n),l=t.length;let{start:u,end:h,loop:m}=i,p,v;if(m){for(u+=l,h+=l,p=0,v=l;p<v&&r(a(t[u%l][n]),s,o);++p)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:i.style}}function nU(i,t,e){if(!e)return[i];const{property:n,start:s,end:o}=e,r=t.length,{compare:a,between:l,normalize:u}=lM(n),{start:h,end:m,loop:p,style:v}=tU(i,t,e),C=[];let x=!1,k=null,S,I,P;const L=()=>l(s,P,S)&&a(s,P)!==0,O=()=>a(o,S)===0||l(o,P,S),J=()=>x||L(),F=()=>!x||O();for(let j=h,U=h;j<=m;++j)I=t[j%r],!I.skip&&(S=u(I[n]),S!==P&&(x=l(S,s,o),k===null&&J()&&(k=a(S,s)===0?j:U),k!==null&&F()&&(C.push(gE({start:k,end:j,loop:p,count:r,style:v})),k=null),U=j,P=S));return k!==null&&C.push(gE({start:k,end:m,loop:p,count:r,style:v})),C}function iU(i,t){const e=[],n=i.segments;for(let s=0;s<n.length;s++){const o=nU(n[s],i.points,t);o.length&&e.push(...o)}return e}function sU(i,t,e,n){let s=0,o=t-1;if(e&&!n)for(;s<t&&!i[s].skip;)s++;for(;s<t&&i[s].skip;)s++;for(s%=t,e&&(o+=s);o>s&&i[o%t].skip;)o--;return o%=t,{start:s,end:o}}function oU(i,t,e,n){const s=i.length,o=[];let r=t,a=i[t],l;for(l=t+1;l<=e;++l){const u=i[l%s];u.skip||u.stop?a.skip||(n=!1,o.push({start:t%s,end:(l-1)%s,loop:n}),t=r=u.stop?l:null):(r=l,a.skip&&(t=l)),a=u}return r!==null&&o.push({start:t%s,end:r%s,loop:n}),o}function rU(i,t){const e=i.points,n=i.options.spanGaps,s=e.length;if(!s)return[];const o=!!i._loop,{start:r,end:a}=sU(e,s,o,n);if(n===!0)return pE(i,[{start:r,end:a,loop:o}],e,t);const l=a<r?a+s:a,u=!!i._fullLoop&&r===0&&a===s-1;return pE(i,oU(e,r,l,u),e,t)}function pE(i,t,e,n){return!n||!n.setContext||!e?t:aU(i,t,e,n)}function aU(i,t,e,n){const s=i._chart.getContext(),o=bE(i.options),{_datasetIndex:r,options:{spanGaps:a}}=i,l=e.length,u=[];let h=o,m=t[0].start,p=m;function v(C,x,k,S){const I=a?-1:1;if(C!==x){for(C+=l;e[C%l].skip;)C-=I;for(;e[x%l].skip;)x+=I;C%l!==x%l&&(u.push({start:C%l,end:x%l,loop:k,style:S}),h=S,m=x%l)}}for(const C of t){m=a?m:C.start;let x=e[m%l],k;for(p=m+1;p<=C.end;p++){const S=e[p%l];k=bE(n.setContext(Ha(s,{type:"segment",p0:x,p1:S,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:r}))),lU(k,h)&&v(m,p-1,C.loop,h),x=S,h=k}m<p-1&&v(m,p-1,C.loop,h)}return u}function bE(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function lU(i,t){if(!t)return!1;const e=[],n=function(s,o){return s0(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,n)!==JSON.stringify(t,n)}function im(i,t,e){return i.options.clip?i[e]:t[e]}function cU(i,t){const{xScale:e,yScale:n}=i;return e&&n?{left:im(e,t,"left"),right:im(e,t,"right"),top:im(n,t,"top"),bottom:im(n,t,"bottom")}:t}function uU(i,t){const e=t._clip;if(e.disabled)return!1;const n=cU(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,s){const o=e.listeners[s],r=e.duration;o.forEach(a=>a({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=YP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),o.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var po=new dU;const wE="transparent",hU={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const n=aE(i||wE),s=n.valid&&aE(t||wE);return s&&s.valid?s.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class fU{constructor(t,e,n,s){const o=e[n];s=em([t.to,s,o,t.from]);const r=em([t.from,o,s]);this._active=!0,this._fn=t.fn||hU[t.type||typeof r],this._easing=yd[t.easing]||yd.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=em([t.to,e,s,t.from]),this._from=em([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||e<n),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=o;return}l=e/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][e]()}}class cM{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!lt(t))return;const e=Object.keys(on.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!lt(o))return;const r={};for(const a of e)r[a]=o[a];(mn(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,e){const n=e.options,s=gU(t,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&mU(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const u=r[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,e));continue}const h=e[u];let m=o[u];const p=n.get(u);if(m)if(p&&m.active()){m.update(p,h,a);continue}else m.cancel();if(!p||!p.duration){t[u]=h;continue}o[u]=m=new fU(p,t,u,h),s.push(m)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return po.add(this._chart,n),!0}}function mU(i,t){const e=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const o=i[n[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function gU(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function yE(i,t){const e=i&&i.options||{},n=e.reverse,s=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:n?o:s,end:n?s:o}}function pU(i,t,e){if(e===!1)return!1;const n=yE(i,e),s=yE(t,e);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function bU(i){let t,e,n,s;return lt(i)?(t=i.top,e=i.right,n=i.bottom,s=i.left):t=e=n=s=i,{top:t,right:e,bottom:n,left:s,disabled:i===!1}}function uM(i,t){const e=[],n=i._getSortedDatasetMetas(t);let s,o;for(s=0,o=n.length;s<o;++s)e.push(n[s].index);return e}function _E(i,t,e,n={}){const s=i.keys,o=n.mode==="single";let r,a,l,u;if(t===null)return;let h=!1;for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===e){if(h=!0,n.all)continue;break}u=i.values[l],ts(u)&&(o||t===0||Hs(t)===Hs(u))&&(t+=u)}return!h&&!n.all?0:t}function wU(i,t){const{iScale:e,vScale:n}=t,s=e.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(i),a=new Array(r.length);let l,u,h;for(l=0,u=r.length;l<u;++l)h=r[l],a[l]={[s]:h,[o]:i[h]};return a}function py(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function yU(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function _U(i){const{min:t,max:e,minDefined:n,maxDefined:s}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function vU(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function vE(i,t,e,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const o=i[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function CE(i,t){const{chart:e,_cachedMeta:n}=i,s=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,u=r.axis,h=yU(o,r,n),m=t.length;let p;for(let v=0;v<m;++v){const C=t[v],{[l]:x,[u]:k}=C,S=C._stacks||(C._stacks={});p=S[u]=vU(s,h,x),p[a]=k,p._top=vE(p,r,!0,n.type),p._bottom=vE(p,r,!1,n.type);const I=p._visualValues||(p._visualValues={});I[a]=k}}function by(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function CU(i,t){return Ha(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function TU(i,t,e){return Ha(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Uu(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const s of t){const o=s._stacks;if(!o||o[n]===void 0||o[n][e]===void 0)return;delete o[n][e],o[n]._visualValues!==void 0&&o[n]._visualValues[e]!==void 0&&delete o[n]._visualValues[e]}}}const wy=i=>i==="reset"||i==="none",TE=(i,t)=>t?i:Object.assign({},i),xU=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:uM(e,!0),values:null};class Sa{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=py(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Uu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),s=(m,p,v,C)=>m==="x"?p:m==="r"?C:v,o=e.xAxisID=tt(n.xAxisID,by(t,"x")),r=e.yAxisID=tt(n.yAxisID,by(t,"y")),a=e.rAxisID=tt(n.rAxisID,by(t,"r")),l=e.indexAxis,u=e.iAxisID=s(l,o,r,a),h=e.vAxisID=s(l,r,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&sE(this._data,this),t._stacked&&Uu(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(lt(e)){const s=this._cachedMeta;this._data=wU(e,s)}else if(n!==e){if(n){sE(n,this);const s=this._cachedMeta;Uu(s),s._parsed=[]}e&&Object.isExtensible(e)&&i6(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=e._stacked;e._stacked=py(e.vScale,e),e.stack!==n.stack&&(s=!0,Uu(e),e.stack=n.stack),this._resyncElements(t),(s||o!==e._stacked)&&(CE(this,e._parsed),e._stacked=py(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&e===s.length?!0:n._sorted,u=t>0&&n._parsed[t-1],h,m,p;if(this._parsing===!1)n._parsed=s,n._sorted=!0,p=s;else{mn(s[t])?p=this.parseArrayData(n,s,t,e):lt(s[t])?p=this.parseObjectData(n,s,t,e):p=this.parsePrimitiveData(n,s,t,e);const v=()=>m[a]===null||u&&m[a]<u[a];for(h=0;h<e;++h)n._parsed[h+t]=m=p[h],l&&(v()&&(l=!1),u=m);n._sorted=l}r&&CE(this,p)}parsePrimitiveData(t,e,n,s){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,u=o.getLabels(),h=o===r,m=new Array(s);let p,v,C;for(p=0,v=s;p<v;++p)C=p+n,m[p]={[a]:h||o.parse(u[C],C),[l]:r.parse(e[C],C)};return m}parseArrayData(t,e,n,s){const{xScale:o,yScale:r}=t,a=new Array(s);let l,u,h,m;for(l=0,u=s;l<u;++l)h=l+n,m=e[h],a[l]={x:o.parse(m[0],h),y:r.parse(m[1],h)};return a}parseObjectData(t,e,n,s){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let h,m,p,v;for(h=0,m=s;h<m;++h)p=h+n,v=e[p],u[h]={x:o.parse(Va(v,a),p),y:r.parse(Va(v,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const s=this.chart,o=this._cachedMeta,r=e[t.axis],a={keys:uM(s,!0),values:e._stacks[t.axis]._visualValues};return _E(a,r,o.index,{mode:n})}updateRangeFromParsed(t,e,n,s){const o=n[e.axis];let r=o===null?NaN:o;const a=s&&n._stacks[e.axis];s&&a&&(s.values=a,r=_E(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&t===n.iScale,r=s.length,a=this._getOtherScale(t),l=xU(e,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:m}=_U(a);let p,v;function C(){v=s[p];const x=v[a.axis];return!ts(v[t.axis])||h>x||m<x}for(p=0;p<r&&!(!C()&&(this.updateRangeFromParsed(u,t,v,l),o));++p);if(o){for(p=r-1;p>=0;--p)if(!C()){this.updateRangeFromParsed(u,t,v,l);break}}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=e.length;s<o;++s)r=e[s][t.axis],ts(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,s=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=bU(tt(this.options.clip,pU(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,s=n.data||[],o=e.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(t,o,a,l),h=a;h<a+l;++h){const m=s[h];m.hidden||(m.active&&u?r.push(m):m.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=TU(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=CU(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const s=e==="active",o=this._cachedDataOpts,r=t+"-"+e,a=o[r],l=this.enableOptionSharing&&Wd(n);if(a)return TE(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),m=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),v=Object.keys(on.elements[t]),C=()=>this.getContext(n,s,e),x=u.resolveNamedOptions(p,v,C,m);return x.$shared&&(x.$shared=l,o[r]=Object.freeze(TE(x,l))),x}_resolveAnimations(t,e,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,m=h.datasetAnimationScopeKeys(this._type,e),p=h.getOptionScopes(this.getDataset(),m);l=h.createResolver(p,this.getContext(t,n,e))}const u=new cM(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||wy(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(e,o)||o!==s;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:r}}updateElement(t,e,n,s){wy(s)?Object.assign(t,n):this._resolveAnimations(e,s).update(t,n)}updateSharedOptions(t,e,n){t&&!wy(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,s){t.active=s;const o=this.getStyle(e,s);this._resolveAnimations(e,n,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=n.length,o=e.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,e,n=!0){const s=this._cachedMeta,o=s.data,r=t+e;let a;const l=u=>{for(u.length+=e,a=u.length-1;a>=r;a--)u[a]=u[a-e]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,s){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,e);n._stacked&&Uu(n,s)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,s]=t;this[e](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}w(Sa,"defaults",{}),w(Sa,"datasetElementType",null),w(Sa,"dataElementType",null);function kU(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let s=0,o=e.length;s<o;s++)n=n.concat(e[s].controller.getAllParsedValues(i));i._cache.$bar=ZP(n.sort((s,o)=>s-o))}return i._cache.$bar}function EU(i){const t=i.iScale,e=kU(t,i.type);let n=t._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(Wd(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=e.length;s<o;++s)r=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),l();return n}function SU(i,t,e,n){const s=e.barThickness;let o,r;return bt(s)?(o=t.min*e.categoryPercentage,r=e.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[i]-o/2}}function AU(i,t,e,n){const s=t.pixels,o=s[i];let r=i>0?s[i-1]:null,a=i<s.length-1?s[i+1]:null;const l=e.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const u=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:e.barPercentage,start:u}}function RU(i,t,e,n){const s=e.parse(i[0],n),o=e.parse(i[1],n),r=Math.min(s,o),a=Math.max(s,o);let l=r,u=a;Math.abs(r)>Math.abs(a)&&(l=a,u=r),t[e.axis]=u,t._custom={barStart:l,barEnd:u,start:s,end:o,min:r,max:a}}function dM(i,t,e,n){return mn(i)?RU(i,t,e,n):t[e.axis]=e.parse(i,n),t}function xE(i,t,e,n){const s=i.iScale,o=i.vScale,r=s.getLabels(),a=s===o,l=[];let u,h,m,p;for(u=e,h=e+n;u<h;++u)p=t[u],m={},m[s.axis]=a||s.parse(r[u],u),l.push(dM(p,m,o,u));return l}function yy(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function IU(i,t,e){return i!==0?Hs(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function PU(i){let t,e,n,s,o;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(s="end",o="start"):(s="start",o="end"),{start:e,end:n,reverse:t,top:s,bottom:o}}function MU(i,t,e,n){let s=t.borderSkipped;const o={};if(!s){i.borderSkipped=o;return}if(s===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:u,bottom:h}=PU(i);s==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?s=u:(e._bottom||0)===n?s=h:(o[kE(h,r,a,l)]=!0,s=u)),o[kE(s,r,a,l)]=!0,i.borderSkipped=o}function kE(i,t,e,n){return n?(i=VU(i,t,e),i=EE(i,e,t)):i=EE(i,t,e),i}function VU(i,t,e){return i===t?e:i===e?t:i}function EE(i,t,e){return i==="start"?t:i==="end"?e:i}function NU(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class Bm extends Sa{parsePrimitiveData(t,e,n,s){return xE(t,e,n,s)}parseArrayData(t,e,n,s){return xE(t,e,n,s)}parseObjectData(t,e,n,s){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?a:l,h=r.axis==="x"?a:l,m=[];let p,v,C,x;for(p=n,v=n+s;p<v;++p)x=e[p],C={},C[o.axis]=o.parse(Va(x,u),p),m.push(dM(Va(x,h),C,r,p));return m}updateRangeFromParsed(t,e,n,s){super.updateRangeFromParsed(t,e,n,s);const o=n._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:s}=e,o=this.getParsed(t),r=o._custom,a=yy(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:m,includeOptions:p}=this._getSharedOptions(e,s);for(let v=e;v<e+n;v++){const C=this.getParsed(v),x=o||bt(C[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),k=this._calculateBarIndexPixels(v,h),S=(C._stacks||{})[a.axis],I={horizontal:u,base:x.base,enableBorderRadius:!S||yy(C._custom)||r===S._top||r===S._bottom,x:u?x.head:k.center,y:u?k.center:x.head,height:u?k.size:Math.abs(x.size),width:u?Math.abs(x.size):k.size};p&&(I.options=m||this.resolveDataElementOptions(v,t[v].active?"active":s));const P=I.options||t[v].options;MU(I,P,S,r),NU(I,P,h.ratio),this.updateElement(t[v],v,I,s)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[n.axis],u=h=>{const m=h._parsed.find(v=>v[n.axis]===l),p=m&&m[h.vScale.axis];if(bt(p)||isNaN(p))return!0};for(const h of s)if(!(e!==void 0&&u(h))&&((o===!1||r.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&r.push(h.stack),h.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const s=this._getStacks(t,n),o=e!==void 0?s.indexOf(e):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,s=[];let o,r;for(o=0,r=e.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||EU(e),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),u=l._custom,h=yy(u);let m=l[e.axis],p=0,v=n?this.applyStack(e,l,n):m,C,x;v!==m&&(p=v-m,v=m),h&&(m=u.barStart,v=u.barEnd-u.barStart,m!==0&&Hs(m)!==Hs(u.barEnd)&&(p=0),p+=m);const k=!bt(o)&&!h?o:p;let S=e.getPixelForValue(k);if(this.chart.getDataVisibility(t)?C=e.getPixelForValue(p+v):C=S,x=C-S,Math.abs(x)<r){x=IU(x,e,a)*r,m===a&&(S-=x/2);const I=e.getPixelForDecimal(0),P=e.getPixelForDecimal(1),L=Math.min(I,P),O=Math.max(I,P);S=Math.max(Math.min(S,O),L),C=S+x,n&&!h&&(l._stacks[e.axis]._visualValues[s]=e.getValueForPixel(C)-e.getValueForPixel(S))}if(S===e.getPixelForValue(a)){const I=Hs(x)*e.getLineWidthForValue(a)/2;S+=I,x-=I}return{size:x,base:S,head:C,center:C+x/2}}_calculateBarIndexPixels(t,e){const n=e.scale,s=this.options,o=s.skipNull,r=tt(s.maxBarThickness,1/0);let a,l;if(e.grouped){const u=o?this._getStackCount(t):e.stackCount,h=s.barThickness==="flex"?AU(t,e,s,u):SU(t,e,s,u),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=h.start+h.chunk*m+h.chunk/2,l=Math.min(r,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[e.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}w(Bm,"id","bar"),w(Bm,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),w(Bm,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function OU(i,t,e){let n=1,s=1,o=0,r=0;if(t<Qt){const a=i,l=a+t,u=Math.cos(a),h=Math.sin(a),m=Math.cos(l),p=Math.sin(l),v=(P,L,O)=>Gd(P,a,l,!0)?1:Math.max(L,L*e,O,O*e),C=(P,L,O)=>Gd(P,a,l,!0)?-1:Math.min(L,L*e,O,O*e),x=v(0,u,m),k=v(gn,h,p),S=C(en,u,m),I=C(en+gn,h,p);n=(x-S)/2,s=(k-I)/2,o=-(x+S)/2,r=-(k+I)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class sd extends Sa{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if(lt(n[t])){const{key:l="value"}=this._parsing;o=u=>+Va(n[u],l)}let r,a;for(r=t,a=t+e;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return ko(this.options.rotation-90)}_getCircumference(){return ko(this.options.circumference)}_getRotationExtents(){let t=Qt,e=-Qt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(U7(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:m}=this._getRotationExtents(),{ratioX:p,ratioY:v,offsetX:C,offsetY:x}=OU(m,h,l),k=(n.width-r)/p,S=(n.height-r)/v,I=Math.max(Math.min(k,S)/2,0),P=qP(this.options.radius,I),L=Math.max(P*l,0),O=(P-L)/this._getVisibleDatasetWeightTotal();this.offsetX=C*P,this.offsetY=x*P,s.total=this.calculateTotal(),this.outerRadius=P-O*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-O*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Qt)}updateElements(t,e,n,s){const o=s==="reset",r=this.chart,a=r.chartArea,u=r.options.animation,h=(a.left+a.right)/2,m=(a.top+a.bottom)/2,p=o&&u.animateScale,v=p?0:this.innerRadius,C=p?0:this.outerRadius,{sharedOptions:x,includeOptions:k}=this._getSharedOptions(e,s);let S=this._getRotation(),I;for(I=0;I<e;++I)S+=this._circumference(I,o);for(I=e;I<e+n;++I){const P=this._circumference(I,o),L=t[I],O={x:h+this.offsetX,y:m+this.offsetY,startAngle:S,endAngle:S+P,circumference:P,outerRadius:C,innerRadius:v};k&&(O.options=x||this.resolveDataElementOptions(I,L.active?"active":s)),S+=P,this.updateElement(L,I,O,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,s;for(s=0;s<e.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Qt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=o0(e._parsed[t],n.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const n=this.chart;let s,o,r,a,l;if(!t){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,s=t.length;n<s;++n){const o=this.resolveDataElementOptions(n);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(tt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}w(sd,"id","doughnut"),w(sd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),w(sd,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),w(sd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return e.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class Fm extends Sa{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:a,count:l}=r6(e,s,r);this._drawStart=a,this._drawCount=l,a6(e)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:u},t),this.updateElements(s,a,l,t)}updateElements(t,e,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:m}=this._getSharedOptions(e,s),p=r.axis,v=a.axis,{spanGaps:C,segment:x}=this.options,k=qd(C)?C:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||o||s==="none",I=e+n,P=t.length;let L=e>0&&this.getParsed(e-1);for(let O=0;O<P;++O){const J=t[O],F=S?J:{};if(O<e||O>=I){F.skip=!0;continue}const j=this.getParsed(O),U=bt(j[v]),X=F[p]=r.getPixelForValue(j[p],O),le=F[v]=o||U?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,j,l):j[v],O);F.skip=isNaN(X)||isNaN(le)||U,F.stop=O>0&&Math.abs(j[p]-L[p])>k,x&&(F.parsed=j,F.raw=u.data[O]),m&&(F.options=h||this.resolveDataElementOptions(O,J.active?"active":s)),S||this.updateElement(J,O,F,s),L=j}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}w(Fm,"id","line"),w(Fm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),w(Fm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class M_ extends sd{}w(M_,"id","pie"),w(M_,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function ua(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class m0{constructor(t){w(this,"options");this.options=t||{}}static override(t){Object.assign(m0.prototype,t)}init(){}formats(){return ua()}parse(){return ua()}format(){return ua()}add(){return ua()}diff(){return ua()}startOf(){return ua()}endOf(){return ua()}}var DU={_date:m0};function LU(i,t,e,n){const{controller:s,data:o,_sorted:r}=i,a=s._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const u=a._reversePixels?t6:Ta;if(n){if(s._sharedOptions){const h=o[0],m=typeof h.getRange=="function"&&h.getRange(t);if(m){const p=u(o,t,e-m),v=u(o,t,e+m);return{lo:p.lo,hi:v.hi}}}}else{const h=u(o,t,e);if(l){const{vScale:m}=s._cachedMeta,{_parsed:p}=i,v=p.slice(0,h.lo+1).reverse().findIndex(x=>!bt(x[m.axis]));h.lo-=Math.max(0,v);const C=p.slice(h.hi).findIndex(x=>!bt(x[m.axis]));h.hi+=Math.max(0,C)}return h}}return{lo:0,hi:o.length-1}}function yp(i,t,e,n,s){const o=i.getSortedVisibleDatasetMetas(),r=e[t];for(let a=0,l=o.length;a<l;++a){const{index:u,data:h}=o[a],{lo:m,hi:p}=LU(o[a],t,r,s);for(let v=m;v<=p;++v){const C=h[v];C.skip||n(C,u,v)}}}function BU(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,s){const o=t?Math.abs(n.x-s.x):0,r=e?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function _y(i,t,e,n,s){const o=[];return!s&&!i.isPointInArea(t)||yp(i,e,t,function(a,l,u){!s&&!$d(a,i.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:u})},!0),o}function FU(i,t,e,n){let s=[];function o(r,a,l){const{startAngle:u,endAngle:h}=r.getProps(["startAngle","endAngle"],n),{angle:m}=jP(r,{x:t.x,y:t.y});Gd(m,u,h)&&s.push({element:r,datasetIndex:a,index:l})}return yp(i,e,t,o),s}function UU(i,t,e,n,s,o){let r=[];const a=BU(e);let l=Number.POSITIVE_INFINITY;function u(h,m,p){const v=h.inRange(t.x,t.y,s);if(n&&!v)return;const C=h.getCenterPoint(s);if(!(!!o||i.isPointInArea(C))&&!v)return;const k=a(t,C);k<l?(r=[{element:h,datasetIndex:m,index:p}],l=k):k===l&&r.push({element:h,datasetIndex:m,index:p})}return yp(i,e,t,u),r}function vy(i,t,e,n,s,o){return!o&&!i.isPointInArea(t)?[]:e==="r"&&!n?FU(i,t,e,s):UU(i,t,e,n,s,o)}function SE(i,t,e,n,s){const o=[],r=e==="x"?"inXRange":"inYRange";let a=!1;return yp(i,e,t,(l,u,h)=>{l[r]&&l[r](t[e],s)&&(o.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:o}var zU={modes:{index(i,t,e,n){const s=ba(t,i),o=e.axis||"x",r=e.includeInvisible||!1,a=e.intersect?_y(i,s,o,n,r):vy(i,s,o,!1,n,r),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,m=u.data[h];m&&!m.skip&&l.push({element:m,datasetIndex:u.index,index:h})}),l):[]},dataset(i,t,e,n){const s=ba(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;let a=e.intersect?_y(i,s,o,n,r):vy(i,s,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,u=i.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(i,t,e,n){const s=ba(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;return _y(i,s,o,n,r)},nearest(i,t,e,n){const s=ba(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;return vy(i,s,o,e.intersect,n,r)},x(i,t,e,n){const s=ba(t,i);return SE(i,s,"x",e.intersect,n)},y(i,t,e,n){const s=ba(t,i);return SE(i,s,"y",e.intersect,n)}}};const hM=["left","top","right","bottom"];function zu(i,t){return i.filter(e=>e.pos===t)}function AE(i,t){return i.filter(e=>hM.indexOf(e.pos)===-1&&e.box.axis===t)}function Hu(i,t){return i.sort((e,n)=>{const s=t?n:e,o=t?e:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function HU(i){const t=[];let e,n,s,o,r,a;for(e=0,n=(i||[]).length;e<n;++e)s=i[e],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function WU(i){const t={};for(const e of i){const{stack:n,pos:s,stackWeight:o}=e;if(!n||!hM.includes(s))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function qU(i,t){const e=WU(i),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let o,r,a;for(o=0,r=i.length;o<r;++o){a=i[o];const{fullSize:l}=a.box,u=e[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=h?h*s:l&&t.availableHeight)}return e}function GU(i){const t=HU(i),e=Hu(t.filter(u=>u.box.fullSize),!0),n=Hu(zu(t,"left"),!0),s=Hu(zu(t,"right")),o=Hu(zu(t,"top"),!0),r=Hu(zu(t,"bottom")),a=AE(t,"x"),l=AE(t,"y");return{fullSize:e,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:zu(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function RE(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function fM(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function $U(i,t,e,n){const{pos:s,box:o}=e,r=i.maxPadding;if(!lt(s)){e.size&&(i[s]-=e.size);const m=n[e.stack]||{size:0,count:1};m.size=Math.max(m.size,e.horizontal?o.height:o.width),e.size=m.size/m.count,i[s]+=e.size}o.getPadding&&fM(r,o.getPadding());const a=Math.max(0,t.outerWidth-RE(r,i,"left","right")),l=Math.max(0,t.outerHeight-RE(r,i,"top","bottom")),u=a!==i.w,h=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:u,other:h}:{same:h,other:u}}function jU(i){const t=i.maxPadding;function e(n){const s=Math.max(t[n]-i[n],0);return i[n]+=s,s}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function KU(i,t){const e=t.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}return n(i?["left","right"]:["top","bottom"])}function od(i,t,e,n){const s=[];let o,r,a,l,u,h;for(o=0,r=i.length,u=0;o<r;++o){a=i[o],l=a.box,l.update(a.width||t.w,a.height||t.h,KU(a.horizontal,t));const{same:m,other:p}=$U(t,e,a,n);u|=m&&s.length,h=h||p,l.fullSize||s.push(a)}return u&&od(s,t,e,n)||h}function sm(i,t,e,n,s){i.top=e,i.left=t,i.right=t+n,i.bottom=e+s,i.width=n,i.height=s}function IE(i,t,e,n){const s=e.padding;let{x:o,y:r}=t;for(const a of i){const l=a.box,u=n[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const m=t.w*h,p=u.size||l.height;Wd(u.start)&&(r=u.start),l.fullSize?sm(l,s.left,r,e.outerWidth-s.right-s.left,p):sm(l,t.left+u.placed,r,m,p),u.start=r,u.placed+=m,r=l.bottom}else{const m=t.h*h,p=u.size||l.width;Wd(u.start)&&(o=u.start),l.fullSize?sm(l,o,s.top,p,e.outerHeight-s.bottom-s.top):sm(l,o,t.top+u.placed,p,m),u.start=o,u.placed+=m,o=l.right}}t.x=o,t.y=r}var Xi={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const s=ns(i.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(e-s.height,0),a=GU(i.boxes),l=a.vertical,u=a.horizontal;Ct(i.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,k)=>k.box.options&&k.box.options.display===!1?x:x+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),p=Object.assign({},s);fM(p,ns(n));const v=Object.assign({maxPadding:p,w:o,h:r,x:s.left,y:s.top},s),C=qU(l.concat(u),m);od(a.fullSize,v,m,C),od(l,v,m,C),od(u,v,m,C)&&od(l,v,m,C),jU(v),IE(a.leftAndTop,v,m,C),v.x+=v.w,v.y+=v.h,IE(a.rightAndBottom,v,m,C),i.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Ct(a.chartArea,x=>{const k=x.box;Object.assign(k,i.chartArea),k.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class mM{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,s){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):n)}}isAttached(t){return!0}updateConfig(t){}}class ZU extends mM{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Um="$chartjs",YU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},PE=i=>i===null||i==="";function JU(i,t){const e=i.style,n=i.getAttribute("height"),s=i.getAttribute("width");if(i[Um]={initial:{height:n,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",PE(s)){const o=mE(i,"width");o!==void 0&&(i.width=o)}if(PE(n))if(i.style.height==="")i.height=i.width/(t||2);else{const o=mE(i,"height");o!==void 0&&(i.height=o)}return i}const gM=Y6?{passive:!0}:!1;function XU(i,t,e){i&&i.addEventListener(t,e,gM)}function QU(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,gM)}function ez(i,t){const e=YU[i.type]||i.type,{x:n,y:s}=ba(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:s!==void 0?s:null}}function mg(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function tz(i,t,e){const n=i.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||mg(a.addedNodes,n),r=r&&!mg(a.removedNodes,n);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function nz(i,t,e){const n=i.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||mg(a.removedNodes,n),r=r&&!mg(a.addedNodes,n);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Kd=new Map;let ME=0;function pM(){const i=window.devicePixelRatio;i!==ME&&(ME=i,Kd.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function iz(i,t){Kd.size||window.addEventListener("resize",pM),Kd.set(i,t)}function sz(i){Kd.delete(i),Kd.size||window.removeEventListener("resize",pM)}function oz(i,t,e){const n=i.canvas,s=n&&f0(n);if(!s)return;const o=JP((a,l)=>{const u=s.clientWidth;e(a,l),u<s.clientWidth&&e()},window),r=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||o(u,h)});return r.observe(s),iz(i,o),r}function Cy(i,t,e){e&&e.disconnect(),t==="resize"&&sz(i)}function rz(i,t,e){const n=i.canvas,s=JP(o=>{i.ctx!==null&&e(ez(o,i))},i);return XU(n,t,s),s}class az extends mM{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(JU(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Um])return!1;const n=e[Um].initial;["height","width"].forEach(o=>{const r=n[o];bt(r)?e.removeAttribute(o):e.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{e.style[o]=s[o]}),e.width=e.width,delete e[Um],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),r={attach:tz,detach:nz,resize:oz}[e]||rz;s[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),s=n[e];if(!s)return;({attach:Cy,detach:Cy,resize:Cy}[e]||QU)(t,e,s),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,s){return Z6(t,e,n,s)}isAttached(t){const e=t&&f0(t);return!!(e&&e.isConnected)}}function lz(i){return!h0()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?ZU:az}var Mm;let Lo=(Mm=class{constructor(){w(this,"x");w(this,"y");w(this,"active",!1);w(this,"options");w(this,"$animations")}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return qd(this.x)&&qd(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const s={};return t.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},w(Mm,"defaults",{}),w(Mm,"defaultRoutes"),Mm);function cz(i,t){const e=i.options.ticks,n=uz(i),s=Math.min(e.maxTicksLimit||n,n),o=e.major.enabled?hz(t):[],r=o.length,a=o[0],l=o[r-1],u=[];if(r>s)return fz(t,u,o,r/s),u;const h=dz(o,t,s);if(r>0){let m,p;const v=r>1?Math.round((l-a)/(r-1)):null;for(om(t,u,h,bt(v)?0:a-v,a),m=0,p=r-1;m<p;m++)om(t,u,h,o[m],o[m+1]);return om(t,u,h,l,bt(v)?t.length:l+v),u}return om(t,u,h),u}function uz(i){const t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),s=i._maxLength/e;return Math.floor(Math.min(n,s))}function dz(i,t,e){const n=mz(i),s=t.length/e;if(!n)return Math.max(s,1);const o=K7(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function hz(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function fz(i,t,e,n){let s=0,o=e[0],r;for(n=Math.ceil(n),r=0;r<i.length;r++)r===o&&(t.push(i[r]),s++,o=e[s*n])}function om(i,t,e,n,s){const o=tt(n,0),r=Math.min(tt(s,i.length),i.length);let a=0,l,u,h;for(e=Math.ceil(e),s&&(l=s-n,e=l/Math.floor(l/e)),h=o;h<0;)a++,h=Math.round(o+a*e);for(u=Math.max(o,0);u<r;u++)u===h&&(t.push(i[u]),a++,h=Math.round(o+a*e))}function mz(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}const gz=i=>i==="left"?"right":i==="right"?"left":i,VE=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,NE=(i,t)=>Math.min(t||i,i);function OE(i,t){const e=[],n=i.length/t,s=i.length;let o=0;for(;o<s;o+=n)e.push(i[Math.floor(o)]);return e}function pz(i,t,e){const n=i.ticks.length,s=Math.min(t,n-1),o=i._startPixel,r=i._endPixel,a=1e-6;let l=i.getPixelForTick(s),u;if(!(e&&(n===1?u=Math.max(l-o,r-l):t===0?u=(i.getPixelForTick(1)-l)/2:u=(l-i.getPixelForTick(s-1))/2,l+=s<t?u:-u,l<o-a||l>r+a)))return l}function bz(i,t){Ct(i,e=>{const n=e.gc,s=n.length/2;let o;if(s>t){for(o=0;o<s;++o)delete e.data[n[o]];n.splice(0,s)}})}function Wu(i){return i.drawTicks?i.tickLength:0}function DE(i,t){if(!i.display)return 0;const e=Kn(i.font,t),n=ns(i.padding);return(mn(i.text)?i.text.length:1)*e.lineHeight+n.height}function wz(i,t){return Ha(i,{scale:t,type:"scale"})}function yz(i,t,e){return Ha(i,{tick:e,index:t,type:"tick"})}function _z(i,t,e){let n=i0(i);return(e&&t!=="right"||!e&&t==="right")&&(n=gz(n)),n}function vz(i,t,e,n){const{top:s,left:o,bottom:r,right:a,chart:l}=i,{chartArea:u,scales:h}=l;let m=0,p,v,C;const x=r-s,k=a-o;if(i.isHorizontal()){if(v=qn(n,o,a),lt(e)){const S=Object.keys(e)[0],I=e[S];C=h[S].getPixelForValue(I)+x-t}else e==="center"?C=(u.bottom+u.top)/2+x-t:C=VE(i,e,t);p=a-o}else{if(lt(e)){const S=Object.keys(e)[0],I=e[S];v=h[S].getPixelForValue(I)-k+t}else e==="center"?v=(u.left+u.right)/2-k+t:v=VE(i,e,t);C=qn(n,r,s),m=e==="left"?-gn:gn}return{titleX:v,titleY:C,maxWidth:p,rotation:m}}let _p=class bM extends Lo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:s}=this;return t=Vs(t,Number.POSITIVE_INFINITY),e=Vs(e,Number.NEGATIVE_INFINITY),n=Vs(n,Number.POSITIVE_INFINITY),s=Vs(s,Number.NEGATIVE_INFINITY),{min:Vs(t,n),max:Vs(e,s),minDefined:ts(t),maxDefined:ts(e)}}getMinMax(t){let{min:e,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:e,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)r=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,r.min)),o||(n=Math.max(n,r.max));return e=o&&e>n?n:e,n=s&&e>n?e:n,{min:Vs(e,Vs(n,e)),max:Vs(n,Vs(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Bt(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=S6(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?OE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=cz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Bt(this.options.afterUpdate,[this])}beforeSetDimensions(){Bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Bt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Bt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n],o.label=Bt(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){Bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=NE(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,o=e.maxRotation;let r=s,a,l,u;if(!this._isVisible()||!e.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),m=h.widest.width,p=h.highest.height,v=jn(this.chart.width-m,0,this.maxWidth);a=t.offset?this.maxWidth/n:v/(n-1),m+6>a&&(a=v/(n-(t.offset?.5:1)),l=this.maxHeight-Wu(t.grid)-e.padding-DE(t.title,this.chart.options.font),u=Math.sqrt(m*m+p*p),r=X7(Math.min(Math.asin(jn((h.highest.height+6)/a,-1,1)),Math.asin(jn(l/u,-1,1))-Math.asin(jn(p/u,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Bt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=DE(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Wu(o)+l):(t.height=this.maxHeight,t.width=Wu(o)+l),n.display&&this.ticks.length){const{first:u,last:h,widest:m,highest:p}=this._getLabelSizes(),v=n.padding*2,C=ko(this.labelRotation),x=Math.cos(C),k=Math.sin(C);if(a){const S=n.mirror?0:k*m.width+x*p.height;t.height=Math.min(this.maxHeight,t.height+S+v)}else{const S=n.mirror?0:x*m.width+k*p.height;t.width=Math.min(this.maxWidth,t.width+S+v)}this._calculatePadding(u,h,k,x)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,v=0;l?u?(p=s*t.width,v=n*e.height):(p=n*t.height,v=s*e.width):o==="start"?v=e.width:o==="end"?p=t.width:o!=="inner"&&(p=t.width/2,v=e.width/2),this.paddingLeft=Math.max((p-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((v-m+r)*this.width/(this.width-m),0)}else{let h=e.height/2,m=t.height/2;o==="start"?(h=0,m=t.height):o==="end"&&(h=e.height,m=0),this.paddingTop=h+r,this.paddingBottom=m+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Bt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)bt(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=OE(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(e/NE(e,n));let u=0,h=0,m,p,v,C,x,k,S,I,P,L,O;for(m=0;m<e;m+=l){if(C=t[m].label,x=this._resolveTickFontOptions(m),s.font=k=x.string,S=o[k]=o[k]||{data:{},gc:[]},I=x.lineHeight,P=L=0,!bt(C)&&!mn(C))P=cE(s,S.data,S.gc,P,C),L=I;else if(mn(C))for(p=0,v=C.length;p<v;++p)O=C[p],!bt(O)&&!mn(O)&&(P=cE(s,S.data,S.gc,P,O),L+=I);r.push(P),a.push(L),u=Math.max(P,u),h=Math.max(L,h)}bz(o,e);const J=r.indexOf(u),F=a.indexOf(h),j=U=>({width:r[U]||0,height:a[U]||0});return{first:j(0),last:j(e-1),widest:j(J),highest:j(F),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return e6(this._alignToPixels?ca(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=yz(this.getContext(),t,n))}return this.$context||(this.$context=wz(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ko(this.labelRotation),n=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,u=this.isHorizontal(),m=this.ticks.length+(l?1:0),p=Wu(o),v=[],C=a.setContext(this.getContext()),x=C.display?C.width:0,k=x/2,S=function(D){return ca(n,D,x)};let I,P,L,O,J,F,j,U,X,le,me,Ie;if(r==="top")I=S(this.bottom),F=this.bottom-p,U=I-k,le=S(t.top)+k,Ie=t.bottom;else if(r==="bottom")I=S(this.top),le=t.top,Ie=S(t.bottom)-k,F=I+k,U=this.top+p;else if(r==="left")I=S(this.right),J=this.right-p,j=I-k,X=S(t.left)+k,me=t.right;else if(r==="right")I=S(this.left),X=t.left,me=S(t.right)-k,J=I+k,j=this.left+p;else if(e==="x"){if(r==="center")I=S((t.top+t.bottom)/2+.5);else if(lt(r)){const D=Object.keys(r)[0],oe=r[D];I=S(this.chart.scales[D].getPixelForValue(oe))}le=t.top,Ie=t.bottom,F=I+k,U=F+p}else if(e==="y"){if(r==="center")I=S((t.left+t.right)/2);else if(lt(r)){const D=Object.keys(r)[0],oe=r[D];I=S(this.chart.scales[D].getPixelForValue(oe))}J=I-k,j=J-p,X=t.left,me=t.right}const ze=tt(s.ticks.maxTicksLimit,m),ke=Math.max(1,Math.ceil(m/ze));for(P=0;P<m;P+=ke){const D=this.getContext(P),oe=o.setContext(D),ce=a.setContext(D),Ne=oe.lineWidth,V=oe.color,se=ce.dash||[],pe=ce.dashOffset,de=oe.tickWidth,$=oe.tickColor,W=oe.tickBorderDash||[],Q=oe.tickBorderDashOffset;L=pz(this,P,l),L!==void 0&&(O=ca(n,L,Ne),u?J=j=X=me=O:F=U=le=Ie=O,v.push({tx1:J,ty1:F,tx2:j,ty2:U,x1:X,y1:le,x2:me,y2:Ie,width:Ne,color:V,borderDash:se,borderDashOffset:pe,tickWidth:de,tickColor:$,tickBorderDash:W,tickBorderDashOffset:Q}))}return this._ticksLength=m,this._borderValue=I,v}_computeLabelItems(t){const e=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:m}=o,p=Wu(n.grid),v=p+h,C=m?-h:v,x=-ko(this.labelRotation),k=[];let S,I,P,L,O,J,F,j,U,X,le,me,Ie="middle";if(s==="top")J=this.bottom-C,F=this._getXAxisLabelAlignment();else if(s==="bottom")J=this.top+C,F=this._getXAxisLabelAlignment();else if(s==="left"){const ke=this._getYAxisLabelAlignment(p);F=ke.textAlign,O=ke.x}else if(s==="right"){const ke=this._getYAxisLabelAlignment(p);F=ke.textAlign,O=ke.x}else if(e==="x"){if(s==="center")J=(t.top+t.bottom)/2+v;else if(lt(s)){const ke=Object.keys(s)[0],D=s[ke];J=this.chart.scales[ke].getPixelForValue(D)+v}F=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")O=(t.left+t.right)/2-v;else if(lt(s)){const ke=Object.keys(s)[0],D=s[ke];O=this.chart.scales[ke].getPixelForValue(D)}F=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(l==="start"?Ie="top":l==="end"&&(Ie="bottom"));const ze=this._getLabelSizes();for(S=0,I=a.length;S<I;++S){P=a[S],L=P.label;const ke=o.setContext(this.getContext(S));j=this.getPixelForTick(S)+o.labelOffset,U=this._resolveTickFontOptions(S),X=U.lineHeight,le=mn(L)?L.length:1;const D=le/2,oe=ke.color,ce=ke.textStrokeColor,Ne=ke.textStrokeWidth;let V=F;r?(O=j,F==="inner"&&(S===I-1?V=this.options.reverse?"left":"right":S===0?V=this.options.reverse?"right":"left":V="center"),s==="top"?u==="near"||x!==0?me=-le*X+X/2:u==="center"?me=-ze.highest.height/2-D*X+X:me=-ze.highest.height+X/2:u==="near"||x!==0?me=X/2:u==="center"?me=ze.highest.height/2-D*X:me=ze.highest.height-le*X,m&&(me*=-1),x!==0&&!ke.showLabelBackdrop&&(O+=X/2*Math.sin(x))):(J=j,me=(1-le)*X/2);let se;if(ke.showLabelBackdrop){const pe=ns(ke.backdropPadding),de=ze.heights[S],$=ze.widths[S];let W=me-pe.top,Q=0-pe.left;switch(Ie){case"middle":W-=de/2;break;case"bottom":W-=de;break}switch(F){case"center":Q-=$/2;break;case"right":Q-=$;break;case"inner":S===I-1?Q-=$:S>0&&(Q-=$/2);break}se={left:Q,top:W,width:$+pe.width,height:de+pe.height,color:ke.backdropColor}}k.push({label:L,font:U,textOffset:me,options:{rotation:x,color:oe,strokeColor:ce,strokeWidth:Ne,textAlign:V,textBaseline:Ie,translation:[O,J],backdrop:se}})}return k}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ko(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let u,h;return e==="left"?s?(h=this.right+o,n==="near"?u="left":n==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,n==="near"?u="right":n==="center"?(u="center",h-=l/2):(u="left",h=this.left)):e==="right"?s?(h=this.left+o,n==="near"?u="right":n==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,n==="near"?u="left":n==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:s,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,s,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,u,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(e.display)for(o=0,r=s.length;o<r;++o){const l=s[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,m,p;this.isHorizontal()?(u=ca(t,this.left,r)-r/2,h=ca(t,this.right,a)+a/2,m=p=l):(m=ca(t,this.top,r)-r/2,p=ca(t,this.bottom,a)+a/2,u=h=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(u,m),e.lineTo(h,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&r0(n,s);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,u=r.label,h=r.textOffset;jd(n,u,0,h,l,a)}s&&a0(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:s}}=this;if(!n.display)return;const o=Kn(n.font),r=ns(n.padding),a=n.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||lt(e)?(l+=r.bottom,mn(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:u,titleY:h,maxWidth:m,rotation:p}=vz(this,l,e,a);jd(t,n.text,0,0,o,{color:n.color,maxWidth:m,rotation:p,textAlign:_z(a,e,s),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=tt(t.grid&&t.grid.z,-1),s=tt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==bM.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=e.length;o<r;++o){const a=e[o];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Kn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}};class rm{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;xz(e)&&(n=this.register(e));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,Cz(t,r,n),this.override&&on.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,s=this.scope;n in e&&delete e[n],s&&n in on[s]&&(delete on[s][n],this.override&&delete Na[n])}}function Cz(i,t,e){const n=Hd(Object.create(null),[e?on.get(e):{},on.get(t),i.defaults]);on.set(t,n),i.defaultRoutes&&Tz(t,i.defaultRoutes),i.descriptors&&on.describe(t,i.descriptors)}function Tz(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),s=n.pop(),o=[i].concat(n).join("."),r=t[e].split("."),a=r.pop(),l=r.join(".");on.route(o,s,l,a)})}function xz(i){return"id"in i&&"defaults"in i}class kz{constructor(){this.controllers=new rm(Sa,"datasets",!0),this.elements=new rm(Lo,"elements"),this.plugins=new rm(Object,"plugins"),this.scales=new rm(_p,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):Ct(s,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,e,n){const s=t0(t);Bt(n["before"+s],[],n),e[t](n),Bt(n["after"+s],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var Ls=new kz;class Ez{constructor(){this._init=[]}notify(t,e,n,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,e,n);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,s){s=s||{};for(const o of t){const r=o.plugin,a=r[n],l=[e,s,o.options];if(Bt(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,s=tt(n.options&&n.options.plugins,{}),o=Sz(n);return s===!1&&!e?[]:Rz(t,o,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,n),t,"stop"),this._notify(s(n,e),t,"start")}}function Sz(i){const t={},e=[],n=Object.keys(Ls.plugins.items);for(let o=0;o<n.length;o++)e.push(Ls.getPlugin(n[o]));const s=i.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];e.indexOf(r)===-1&&(e.push(r),t[r.id]=!0)}return{plugins:e,localIds:t}}function Az(i,t){return!t&&i===!1?null:i===!0?{}:i}function Rz(i,{plugins:t,localIds:e},n,s){const o=[],r=i.getContext();for(const a of t){const l=a.id,u=Az(n[l],s);u!==null&&o.push({plugin:a,options:Iz(i.config,{plugin:a,local:e[l]},u,r)})}return o}function Iz(i,{plugin:t,local:e},n,s){const o=i.pluginScopeKeys(t),r=i.getOptionScopes(n,o);return e&&t.defaults&&r.push(t.defaults),i.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function V_(i,t){const e=on.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Pz(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Mz(i,t){return i===t?"_index_":"_value_"}function LE(i){if(i==="x"||i==="y"||i==="r")return i}function Vz(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function N_(i,...t){if(LE(i))return i;for(const e of t){const n=e.axis||Vz(e.position)||i.length>1&&LE(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function BE(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Nz(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return BE(i,"x",e[0])||BE(i,"y",e[0])}return{}}function Oz(i,t){const e=Na[i.type]||{scales:{}},n=t.scales||{},s=V_(i.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!lt(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=N_(r,a,Nz(r,i),on.scales[a.type]),u=Mz(l,s),h=e.scales||{};o[r]=bd(Object.create(null),[{axis:l},a,h[l],h[u]])}),i.data.datasets.forEach(r=>{const a=r.type||i.type,l=r.indexAxis||V_(a,t),h=(Na[a]||{}).scales||{};Object.keys(h).forEach(m=>{const p=Pz(m,l),v=r[p+"AxisID"]||p;o[v]=o[v]||Object.create(null),bd(o[v],[{axis:p},n[v],h[m]])})}),Object.keys(o).forEach(r=>{const a=o[r];bd(a,[on.scales[a.type],on.scale])}),o}function wM(i){const t=i.options||(i.options={});t.plugins=tt(t.plugins,{}),t.scales=Oz(i,t)}function yM(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Dz(i){return i=i||{},i.data=yM(i.data),wM(i),i}const FE=new Map,_M=new Set;function am(i,t){let e=FE.get(i);return e||(e=t(),FE.set(i,e),_M.add(e)),e}const qu=(i,t,e)=>{const n=Va(t,e);n!==void 0&&i.add(n)};let Lz=class{constructor(t){this._config=Dz(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=yM(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),wM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return am(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return am(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return am(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return am(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let s=n.get(t);return(!s||e)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,e,n){const{options:s,type:o}=this,r=this._cachedScopes(t,n),a=r.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(m=>qu(l,t,m))),h.forEach(m=>qu(l,s,m)),h.forEach(m=>qu(l,Na[o]||{},m)),h.forEach(m=>qu(l,on,m)),h.forEach(m=>qu(l,I_,m))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),_M.has(e)&&r.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,Na[e]||{},on.datasets[e]||{},{type:e},on,I_]}resolveNamedOptions(t,e,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=UE(this._resolverCache,t,s);let l=r;if(Fz(r,e)){o.$shared=!1,n=Rr(n)?n():n;const u=this.createResolver(t,n,a);l=yc(r,n,u)}for(const u of e)o[u]=l[u];return o}createResolver(t,e,n=[""],s){const{resolver:o}=UE(this._resolverCache,t,n);return lt(e)?yc(o,e,void 0,s):o}};function UE(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const s=e.join();let o=n.get(s);return o||(o={resolver:c0(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}const Bz=i=>lt(i)&&Object.getOwnPropertyNames(i).some(t=>Rr(i[t]));function Fz(i,t){const{isScriptable:e,isIndexable:n}=tM(i);for(const s of t){const o=e(s),r=n(s),a=(r||o)&&i[s];if(o&&(Rr(a)||Bz(a))||r&&mn(a))return!0}return!1}var Uz="4.4.9";const zz=["top","bottom","left","right","chartArea"];function zE(i,t){return i==="top"||i==="bottom"||zz.indexOf(i)===-1&&t==="x"}function HE(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function WE(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Bt(e&&e.onComplete,[i],t)}function Hz(i){const t=i.chart,e=t.options.animation;Bt(e&&e.onProgress,[i],t)}function vM(i){return h0()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const zm={},qE=i=>{const t=vM(i);return Object.values(zm).filter(e=>e.canvas===t).pop()};function Wz(i,t,e){const n=Object.keys(i);for(const s of n){const o=+s;if(o>=t){const r=i[s];delete i[s],(e>0||o>t)&&(i[o+e]=r)}}}function qz(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}var gr;let vp=(gr=class{static register(...t){Ls.add(...t),GE()}static unregister(...t){Ls.remove(...t),GE()}constructor(t,e){const n=this.config=new Lz(e),s=vM(t),o=qE(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||lz(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=F7(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ez,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=s6(m=>this.update(m),r.resizeDelay||0),this._dataChanges=[],zm[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}po.listen(this,"complete",WE),po.listen(this,"progress",Hz),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:s,_aspectRatio:o}=this;return bt(t)?e&&o?o:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ls}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return uE(this.canvas,this.ctx),this}stop(){return po.stop(this),this}resize(t,e){po.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,e,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,fE(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Bt(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ct(e,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];e&&(o=o.concat(Object.keys(e).map(r=>{const a=e[r],l=N_(r,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ct(o,r=>{const a=r.options,l=a.id,u=N_(l,a),h=tt(a.type,r.dtype);(a.position===void 0||zE(a.position,u)!==zE(r.dposition))&&(a.position=r.dposition),s[l]=!0;let m=null;if(l in n&&n[l].type===h)m=n[l];else{const p=Ls.getScale(h);m=new p({id:l,type:h,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(a,t)}),Ct(s,(r,a)=>{r||delete n[a]}),Ct(n,r=>{Xi.configure(this,r,r.options),Xi.addBox(this,r)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((s,o)=>s.index-o.index),n>e){for(let s=e;s<n;++s)this._destroyDatasetMeta(s);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(HE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,s)=>{e.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=e.length;n<s;n++){const o=e[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||V_(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Ls.getController(a),{datasetElementType:u,dataElementType:h}=on.datasets[a];Object.assign(l,{dataElementType:Ls.getElement(h),datasetElementType:u&&Ls.getElement(u)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Ct(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:m}=this.getDatasetMeta(u),p=!s&&o.indexOf(m)===-1;m.buildOrUpdateElements(p),r=Math.max(+m.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||Ct(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(HE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ct(this.scales,t=>{Xi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!eE(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of e){const r=n==="_removeElements"?-o:o;Wz(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<e;o++)if(!eE(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xi.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Ct(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Rr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(po.has(this)?this.attached&&!po.running(this)&&po.start(this):(this.draw(),WE({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let s,o;for(s=0,o=e.length;s<o;++s){const r=e[s];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},s=uU(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&r0(e,s),t.controller.draw(),s&&a0(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return $d(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,s){const o=zU.modes[e];return typeof o=="function"?o(this,t,n,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let s=n.filter(o=>o&&o._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=Ha(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const s=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);Wd(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),po.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),uE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete zm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(o,r)=>{e.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Ct(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(l,u)=>{e.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(e.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){Ct(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ct(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const s=n?"set":"remove";let o,r,a,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const u=r&&this.getDatasetMeta(r.datasetIndex).controller;u&&u[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!cg(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const s=this.options.hover,o=(l,u)=>l.filter(h=>!u.some(m=>h.datasetIndex===m.datasetIndex&&h.index===m.index)),r=o(e,t),a=n?t:o(t,e);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:s=[],options:o}=this,r=e,a=this._getActiveElements(t,s,n,r),l=G7(t),u=qz(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Bt(o.onHover,[t,a,this],this),l&&Bt(o.onClick,[t,a,this],this));const h=!cg(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=u,h}_getActiveElements(t,e,n,s){if(t.type==="mouseout")return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}},w(gr,"defaults",on),w(gr,"instances",zm),w(gr,"overrides",Na),w(gr,"registry",Ls),w(gr,"version",Uz),w(gr,"getChart",qE),gr);function GE(){return Ct(vp.instances,i=>i._plugins.invalidate())}function Gz(i,t,e){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=t;let u=s/a;i.beginPath(),i.arc(o,r,a,n-u,e+u),l>s?(u=s/l,i.arc(o,r,l,e+u,n-u,!0)):i.arc(o,r,s,e+gn,n-gn),i.closePath(),i.clip()}function $z(i){return l0(i,["outerStart","outerEnd","innerStart","innerEnd"])}function jz(i,t,e,n){const s=$z(i.options.borderRadius),o=(e-t)/2,r=Math.min(o,n*t/2),a=l=>{const u=(e-Math.min(o,l))*n/2;return jn(l,0,Math.min(o,u))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:jn(s.innerStart,0,r),innerEnd:jn(s.innerEnd,0,r)}}function Hl(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function gg(i,t,e,n,s,o){const{x:r,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=t,m=Math.max(t.outerRadius+n+e-u,0),p=h>0?h+n+e+u:0;let v=0;const C=s-l;if(n){const ke=h>0?h-n:0,D=m>0?m-n:0,oe=(ke+D)/2,ce=oe!==0?C*oe/(oe+n):C;v=(C-ce)/2}const x=Math.max(.001,C*m-e/en)/m,k=(C-x)/2,S=l+k+v,I=s-k-v,{outerStart:P,outerEnd:L,innerStart:O,innerEnd:J}=jz(t,p,m,I-S),F=m-P,j=m-L,U=S+P/F,X=I-L/j,le=p+O,me=p+J,Ie=S+O/le,ze=I-J/me;if(i.beginPath(),o){const ke=(U+X)/2;if(i.arc(r,a,m,U,ke),i.arc(r,a,m,ke,X),L>0){const Ne=Hl(j,X,r,a);i.arc(Ne.x,Ne.y,L,X,I+gn)}const D=Hl(me,I,r,a);if(i.lineTo(D.x,D.y),J>0){const Ne=Hl(me,ze,r,a);i.arc(Ne.x,Ne.y,J,I+gn,ze+Math.PI)}const oe=(I-J/p+(S+O/p))/2;if(i.arc(r,a,p,I-J/p,oe,!0),i.arc(r,a,p,oe,S+O/p,!0),O>0){const Ne=Hl(le,Ie,r,a);i.arc(Ne.x,Ne.y,O,Ie+Math.PI,S-gn)}const ce=Hl(F,S,r,a);if(i.lineTo(ce.x,ce.y),P>0){const Ne=Hl(F,U,r,a);i.arc(Ne.x,Ne.y,P,S-gn,U)}}else{i.moveTo(r,a);const ke=Math.cos(U)*m+r,D=Math.sin(U)*m+a;i.lineTo(ke,D);const oe=Math.cos(X)*m+r,ce=Math.sin(X)*m+a;i.lineTo(oe,ce)}i.closePath()}function Kz(i,t,e,n,s){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){gg(i,t,e,n,l,s);for(let u=0;u<o;++u)i.fill();isNaN(a)||(l=r+(a%Qt||Qt))}return gg(i,t,e,n,l,s),i.fill(),l}function Zz(i,t,e,n,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:h,borderDash:m,borderDashOffset:p}=l,v=l.borderAlign==="inner";if(!u)return;i.setLineDash(m||[]),i.lineDashOffset=p,v?(i.lineWidth=u*2,i.lineJoin=h||"round"):(i.lineWidth=u,i.lineJoin=h||"bevel");let C=t.endAngle;if(o){gg(i,t,e,n,C,s);for(let x=0;x<o;++x)i.stroke();isNaN(a)||(C=r+(a%Qt||Qt))}v&&Gz(i,t,C),o||(gg(i,t,e,n,C,s),i.stroke())}class rd extends Lo{constructor(e){super();w(this,"circumference");w(this,"endAngle");w(this,"fullCircles");w(this,"innerRadius");w(this,"outerRadius");w(this,"pixelMargin");w(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const o=this.getProps(["x","y"],s),{angle:r,distance:a}=jP(o,{x:e,y:n}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:m,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),v=(this.options.spacing+this.options.borderWidth)/2,C=tt(p,u-l),x=Gd(r,l,u)&&l!==u,k=C>=Qt||x,S=vr(a,h+v,m+v);return k&&S}getCenterPoint(e){const{x:n,y:s,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,m=(o+r)/2,p=(a+l+h+u)/2;return{x:n+Math.cos(m)*p,y:s+Math.sin(m)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,o=(n.offset||0)/4,r=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>Qt?Math.floor(s/Qt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const u=1-Math.sin(Math.min(en,s||0)),h=o*u;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,Kz(e,this,h,r,a),Zz(e,this,h,r,a),e.restore()}}w(rd,"id","arc"),w(rd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),w(rd,"defaultRoutes",{backgroundColor:"backgroundColor"}),w(rd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function CM(i,t,e=t){i.lineCap=tt(e.borderCapStyle,t.borderCapStyle),i.setLineDash(tt(e.borderDash,t.borderDash)),i.lineDashOffset=tt(e.borderDashOffset,t.borderDashOffset),i.lineJoin=tt(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=tt(e.borderWidth,t.borderWidth),i.strokeStyle=tt(e.borderColor,t.borderColor)}function Yz(i,t,e){i.lineTo(e.x,e.y)}function Jz(i){return i.stepped?w6:i.tension||i.cubicInterpolationMode==="monotone"?y6:Yz}function TM(i,t,e={}){const n=i.length,{start:s=0,end:o=n-1}=e,{start:r,end:a}=t,l=Math.max(s,r),u=Math.min(o,a),h=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:u<l&&!h?n+u-l:u-l}}function Xz(i,t,e,n){const{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:u}=TM(s,e,n),h=Jz(o);let{move:m=!0,reverse:p}=n||{},v,C,x;for(v=0;v<=u;++v)C=s[(a+(p?u-v:v))%r],!C.skip&&(m?(i.moveTo(C.x,C.y),m=!1):h(i,x,C,p,o.stepped),x=C);return l&&(C=s[(a+(p?u:0))%r],h(i,x,C,p,o.stepped)),!!l}function Qz(i,t,e,n){const s=t.points,{count:o,start:r,ilen:a}=TM(s,e,n),{move:l=!0,reverse:u}=n||{};let h=0,m=0,p,v,C,x,k,S;const I=L=>(r+(u?a-L:L))%o,P=()=>{x!==k&&(i.lineTo(h,k),i.lineTo(h,x),i.lineTo(h,S))};for(l&&(v=s[I(0)],i.moveTo(v.x,v.y)),p=0;p<=a;++p){if(v=s[I(p)],v.skip)continue;const L=v.x,O=v.y,J=L|0;J===C?(O<x?x=O:O>k&&(k=O),h=(m*h+L)/++m):(P(),i.lineTo(L,O),C=J,m=0,x=k=O),S=O}P()}function O_(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Qz:Xz}function e8(i){return i.stepped?J6:i.tension||i.cubicInterpolationMode==="monotone"?X6:wa}function t8(i,t,e,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,n)&&s.closePath()),CM(i,t.options),i.stroke(s)}function n8(i,t,e,n){const{segments:s,options:o}=t,r=O_(t);for(const a of s)CM(i,o,a.style),i.beginPath(),r(i,t,a,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}const i8=typeof Path2D=="function";function s8(i,t,e,n){i8&&!t.options.segment?t8(i,t,e,n):n8(i,t,e,n)}class ad extends Lo{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;W6(this._points,n,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rU(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,s=t[e],o=this.points,r=iU(this,{property:e,start:s,end:s});if(!r.length)return;const a=[],l=e8(n);let u,h;for(u=0,h=r.length;u<h;++u){const{start:m,end:p}=r[u],v=o[m],C=o[p];if(v===C){a.push(v);continue}const x=Math.abs((s-v[e])/(C[e]-v[e])),k=l(v,C,x,n.stepped);k[e]=t[e],a.push(k)}return a.length===1?a[0]:a}pathSegment(t,e,n){return O_(this)(t,this,e,n)}path(t,e,n){const s=this.segments,o=O_(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const a of s)r&=o(t,this,a,{start:e,end:e+n-1});return!!r}draw(t,e,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),s8(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}w(ad,"id","line"),w(ad,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),w(ad,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),w(ad,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function $E(i,t,e,n){const s=i.options,{[e]:o}=i.getProps([e],n);return Math.abs(t-o)<s.radius+s.hitRadius}class Hm extends Lo{constructor(e){super();w(this,"parsed");w(this,"skip");w(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,n){return $E(this,e,"x",n)}inYRange(e,n){return $E(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!$d(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,P_(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}w(Hm,"id","point"),w(Hm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),w(Hm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function xM(i,t){const{x:e,y:n,base:s,width:o,height:r}=i.getProps(["x","y","base","width","height"],t);let a,l,u,h,m;return i.horizontal?(m=r/2,a=Math.min(e,s),l=Math.max(e,s),u=n-m,h=n+m):(m=o/2,a=e-m,l=e+m,u=Math.min(n,s),h=Math.max(n,s)),{left:a,top:u,right:l,bottom:h}}function Cr(i,t,e,n){return i?0:jn(t,e,n)}function o8(i,t,e){const n=i.options.borderWidth,s=i.borderSkipped,o=eM(n);return{t:Cr(s.top,o.top,0,e),r:Cr(s.right,o.right,0,t),b:Cr(s.bottom,o.bottom,0,e),l:Cr(s.left,o.left,0,t)}}function r8(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),s=i.options.borderRadius,o=mc(s),r=Math.min(t,e),a=i.borderSkipped,l=n||lt(s);return{topLeft:Cr(!l||a.top||a.left,o.topLeft,0,r),topRight:Cr(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Cr(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Cr(!l||a.bottom||a.right,o.bottomRight,0,r)}}function a8(i){const t=xM(i),e=t.right-t.left,n=t.bottom-t.top,s=o8(i,e/2,n/2),o=r8(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Ty(i,t,e,n){const s=t===null,o=e===null,a=i&&!(s&&o)&&xM(i,n);return a&&(s||vr(t,a.left,a.right))&&(o||vr(e,a.top,a.bottom))}function l8(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function c8(i,t){i.rect(t.x,t.y,t.w,t.h)}function xy(i,t,e={}){const n=i.x!==e.x?-t:0,s=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-n,r=(i.y+i.h!==e.y+e.h?t:0)-s;return{x:i.x+n,y:i.y+s,w:i.w+o,h:i.h+r,radius:i.radius}}class Wm extends Lo{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=a8(this),a=l8(r.radius)?hg:c8;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,xy(r,e,o)),t.clip(),a(t,xy(o,-e,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,xy(o,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,n){return Ty(this,t,e,n)}inXRange(t,e){return Ty(this,t,null,e)}inYRange(t,e){return Ty(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+s)/2:e,y:o?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}w(Wm,"id","bar"),w(Wm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),w(Wm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const jE=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},u8=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class KE extends Lo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Bt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=Kn(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=jE(n,o);let u,h;e.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(r,o,a,l)+10):(h=this.maxHeight,u=this._fitCols(r,s,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+a;let m=t;o.textAlign="left",o.textBaseline="middle";let p=-1,v=-h;return this.legendItems.forEach((C,x)=>{const k=n+e/2+o.measureText(C.text).width;(x===0||u[u.length-1]+k+2*a>r)&&(m+=h,u[u.length-(x>0?0:1)]=0,v+=h,p++),l[x]={left:0,top:v,row:p,width:k,height:s},u[u.length-1]+=k+a}),m}_fitCols(t,e,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=r-t;let m=a,p=0,v=0,C=0,x=0;return this.legendItems.forEach((k,S)=>{const{itemWidth:I,itemHeight:P}=d8(n,e,o,k,s);S>0&&v+P+2*a>h&&(m+=p+a,u.push({width:p,height:v}),C+=p+a,x++,p=v=0),l[S]={left:C,top:v,col:x,width:I,height:P},p=Math.max(p,I),v+=P+a}),m+=p,u.push({width:p,height:v}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:s},rtl:o}}=this,r=gc(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=qn(n,this.left+s,this.right-this.lineWidths[a]);for(const u of e)a!==u.row&&(a=u.row,l=qn(n,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+t+s,u.left=r.leftForLtr(r.x(l),u.width),l+=u.width+s}else{let a=0,l=qn(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const u of e)u.col!==a&&(a=u.col,l=qn(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=r.leftForLtr(r.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;r0(t,this),this._draw(),a0(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:s}=this,{align:o,labels:r}=t,a=on.color,l=gc(t.rtl,this.left,this.width),u=Kn(r.font),{padding:h}=r,m=u.size,p=m/2;let v;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:C,boxHeight:x,itemHeight:k}=jE(r,m),S=function(J,F,j){if(isNaN(C)||C<=0||isNaN(x)||x<0)return;s.save();const U=tt(j.lineWidth,1);if(s.fillStyle=tt(j.fillStyle,a),s.lineCap=tt(j.lineCap,"butt"),s.lineDashOffset=tt(j.lineDashOffset,0),s.lineJoin=tt(j.lineJoin,"miter"),s.lineWidth=U,s.strokeStyle=tt(j.strokeStyle,a),s.setLineDash(tt(j.lineDash,[])),r.usePointStyle){const X={radius:x*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:U},le=l.xPlus(J,C/2),me=F+p;QP(s,X,le,me,r.pointStyleWidth&&C)}else{const X=F+Math.max((m-x)/2,0),le=l.leftForLtr(J,C),me=mc(j.borderRadius);s.beginPath(),Object.values(me).some(Ie=>Ie!==0)?hg(s,{x:le,y:X,w:C,h:x,radius:me}):s.rect(le,X,C,x),s.fill(),U!==0&&s.stroke()}s.restore()},I=function(J,F,j){jd(s,j.text,J,F+k/2,u,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},P=this.isHorizontal(),L=this._computeTitleHeight();P?v={x:qn(o,this.left+h,this.right-n[0]),y:this.top+h+L,line:0}:v={x:this.left+h,y:qn(o,this.top+L+h,this.bottom-e[0].height),line:0},rM(this.ctx,t.textDirection);const O=k+h;this.legendItems.forEach((J,F)=>{s.strokeStyle=J.fontColor,s.fillStyle=J.fontColor;const j=s.measureText(J.text).width,U=l.textAlign(J.textAlign||(J.textAlign=r.textAlign)),X=C+p+j;let le=v.x,me=v.y;l.setWidth(this.width),P?F>0&&le+X+h>this.right&&(me=v.y+=O,v.line++,le=v.x=qn(o,this.left+h,this.right-n[v.line])):F>0&&me+O>this.bottom&&(le=v.x=le+e[v.line].width+h,v.line++,me=v.y=qn(o,this.top+L+h,this.bottom-e[v.line].height));const Ie=l.x(le);if(S(Ie,me,J),le=o6(U,le+C+p,P?le+X:this.right,t.rtl),I(l.x(le),me,J),P)v.x+=X+h;else if(typeof J.text!="string"){const ze=u.lineHeight;v.y+=kM(J,ze)+h}else v.y+=O}),aM(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Kn(e.font),s=ns(e.padding);if(!e.display)return;const o=gc(t.rtl,this.left,this.width),r=this.ctx,a=e.position,l=n.size/2,u=s.top+l;let h,m=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+u,m=qn(t.align,m,this.right-p);else{const C=this.columnSizes.reduce((x,k)=>Math.max(x,k.height),0);h=u+qn(t.align,this.top,this.bottom-C-t.labels.padding-this._computeTitleHeight())}const v=qn(a,m,m+p);r.textAlign=o.textAlign(i0(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,jd(r,e.text,v,h,n)}_computeTitleHeight(){const t=this.options.title,e=Kn(t.font),n=ns(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,s,o;if(vr(t,this.left,this.right)&&vr(e,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],vr(t,s.left,s.left+s.width)&&vr(e,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!m8(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=u8(s,n);s&&!o&&Bt(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&Bt(e.onHover,[t,n,this],this)}else n&&Bt(e.onClick,[t,n,this],this)}}function d8(i,t,e,n,s){const o=h8(n,i,t,e),r=f8(s,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function h8(i,t,e,n){let s=i.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+e.size/2+n.measureText(s).width}function f8(i,t,e){let n=i;return typeof t.text!="string"&&(n=kM(t,e)),n}function kM(i,t){const e=i.text?i.text.length:0;return t*e}function m8(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var g8={id:"legend",_element:KE,start(i,t,e){const n=i.legend=new KE({ctx:i.ctx,options:e,chart:i});Xi.configure(i,n,e),Xi.addBox(i,n)},stop(i){Xi.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;Xi.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,s=e.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(e?0:void 0),h=ns(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:r&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class EM extends Lo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=mn(n.text)?n.text.length:1;this._padding=ns(n.padding);const o=s*Kn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:s,right:o,options:r}=this,a=r.align;let l=0,u,h,m;return this.isHorizontal()?(h=qn(a,n,o),m=e+t,u=o-n):(r.position==="left"?(h=n+t,m=qn(a,s,e),l=en*-.5):(h=o-t,m=qn(a,e,s),l=en*.5),u=s-e),{titleX:h,titleY:m,maxWidth:u,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Kn(e.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(o);jd(t,e.text,0,0,n,{color:e.color,maxWidth:l,rotation:u,textAlign:i0(e.align),textBaseline:"middle",translation:[r,a]})}}function p8(i,t){const e=new EM({ctx:i.ctx,options:t,chart:i});Xi.configure(i,e,t),Xi.addBox(i,e),i.titleBlock=e}var b8={id:"title",_element:EM,start(i,t,e){p8(i,e)},stop(i){const t=i.titleBlock;Xi.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;Xi.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ld={average(i){if(!i.length)return!1;let t,e,n=new Set,s=0,o=0;for(t=0,e=i.length;t<e;++t){const a=i[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),s+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/o}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=i.length;o<r;++o){const l=i[o].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=R_(t,u);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,n=l.y}return{x:e,y:n}}};function Ds(i,t){return t&&(mn(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function bo(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function w8(i,t){const{element:e,datasetIndex:n,index:s}=t,o=i.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:i,label:r,parsed:o.getParsed(s),raw:i.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:e}}function ZE(i,t){const e=i.chart.ctx,{body:n,footer:s,title:o}=i,{boxWidth:r,boxHeight:a}=t,l=Kn(t.bodyFont),u=Kn(t.titleFont),h=Kn(t.footerFont),m=o.length,p=s.length,v=n.length,C=ns(t.padding);let x=C.height,k=0,S=n.reduce((L,O)=>L+O.before.length+O.lines.length+O.after.length,0);if(S+=i.beforeBody.length+i.afterBody.length,m&&(x+=m*u.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),S){const L=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=v*L+(S-v)*l.lineHeight+(S-1)*t.bodySpacing}p&&(x+=t.footerMarginTop+p*h.lineHeight+(p-1)*t.footerSpacing);let I=0;const P=function(L){k=Math.max(k,e.measureText(L).width+I)};return e.save(),e.font=u.string,Ct(i.title,P),e.font=l.string,Ct(i.beforeBody.concat(i.afterBody),P),I=t.displayColors?r+2+t.boxPadding:0,Ct(n,L=>{Ct(L.before,P),Ct(L.lines,P),Ct(L.after,P)}),I=0,e.font=h.string,Ct(i.footer,P),e.restore(),k+=C.width,{width:k,height:x}}function y8(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function _8(i,t,e,n){const{x:s,width:o}=n,r=e.caretSize+e.caretPadding;if(i==="left"&&s+o+r>t.width||i==="right"&&s-o-r<0)return!0}function v8(i,t,e,n){const{x:s,width:o}=e,{width:r,chartArea:{left:a,right:l}}=i;let u="center";return n==="center"?u=s<=(a+l)/2?"left":"right":s<=o/2?u="left":s>=r-o/2&&(u="right"),_8(u,i,t,e)&&(u="center"),u}function YE(i,t,e){const n=e.yAlign||t.yAlign||y8(i,e);return{xAlign:e.xAlign||t.xAlign||v8(i,t,e,n),yAlign:n}}function C8(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function T8(i,t,e){let{y:n,height:s}=i;return t==="top"?n+=e:t==="bottom"?n-=s+e:n-=s/2,n}function JE(i,t,e,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=i,{xAlign:a,yAlign:l}=e,u=s+o,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:v}=mc(r);let C=C8(t,a);const x=T8(t,l,u);return l==="center"?a==="left"?C+=u:a==="right"&&(C-=u):a==="left"?C-=Math.max(h,p)+s:a==="right"&&(C+=Math.max(m,v)+s),{x:jn(C,0,n.width-t.width),y:jn(x,0,n.height-t.height)}}function lm(i,t,e){const n=ns(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function XE(i){return Ds([],bo(i))}function x8(i,t,e){return Ha(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function QE(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const SM={beforeTitle:fo,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:fo,beforeBody:fo,beforeLabel:fo,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return bt(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:fo,afterBody:fo,beforeFooter:fo,footer:fo,afterFooter:fo};function hi(i,t,e,n){const s=i[t].call(e,n);return typeof s>"u"?SM[t].call(e,n):s}class D_ extends Lo{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&e.options.animation&&n.animations,o=new cM(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=x8(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,s=hi(n,"beforeTitle",this,t),o=hi(n,"title",this,t),r=hi(n,"afterTitle",this,t);let a=[];return a=Ds(a,bo(s)),a=Ds(a,bo(o)),a=Ds(a,bo(r)),a}getBeforeBody(t,e){return XE(hi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,s=[];return Ct(t,o=>{const r={before:[],lines:[],after:[]},a=QE(n,o);Ds(r.before,bo(hi(a,"beforeLabel",this,o))),Ds(r.lines,hi(a,"label",this,o)),Ds(r.after,bo(hi(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,e){return XE(hi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,s=hi(n,"beforeFooter",this,t),o=hi(n,"footer",this,t),r=hi(n,"afterFooter",this,t);let a=[];return a=Ds(a,bo(s)),a=Ds(a,bo(o)),a=Ds(a,bo(r)),a}_createItems(t){const e=this._active,n=this.chart.data,s=[],o=[],r=[];let a=[],l,u;for(l=0,u=e.length;l<u;++l)a.push(w8(this.chart,e[l]));return t.filter&&(a=a.filter((h,m,p)=>t.filter(h,m,p,n))),t.itemSort&&(a=a.sort((h,m)=>t.itemSort(h,m,n))),Ct(a,h=>{const m=QE(t.callbacks,h);s.push(hi(m,"labelColor",this,h)),o.push(hi(m,"labelPointStyle",this,h)),r.push(hi(m,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,e){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=ld[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=ZE(this,n),u=Object.assign({},a,l),h=YE(this.chart,n,u),m=JE(n,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:m.x,y:m.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,s){const o=this.getCaretPosition(t,n,s);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:m}=mc(a),{x:p,y:v}=t,{width:C,height:x}=e;let k,S,I,P,L,O;return o==="center"?(L=v+x/2,s==="left"?(k=p,S=k-r,P=L+r,O=L-r):(k=p+C,S=k+r,P=L-r,O=L+r),I=k):(s==="left"?S=p+Math.max(l,h)+r:s==="right"?S=p+C-Math.max(u,m)-r:S=this.caretX,o==="top"?(P=v,L=P-r,k=S-r,I=S+r):(P=v+x,L=P+r,k=S+r,I=S-r),O=P),{x1:k,x2:S,x3:I,y1:P,y2:L,y3:O}}drawTitle(t,e,n){const s=this.title,o=s.length;let r,a,l;if(o){const u=gc(n.rtl,this.x,this.width);for(t.x=lm(this,n.titleAlign,n),e.textAlign=u.textAlign(n.titleAlign),e.textBaseline="middle",r=Kn(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,l=0;l<o;++l)e.fillText(s[l],u.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,s,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=o,h=Kn(o.bodyFont),m=lm(this,"left",o),p=s.x(m),v=l<h.lineHeight?(h.lineHeight-l)/2:0,C=e.y+v;if(o.usePointStyle){const x={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=s.leftForLtr(p,u)+u/2,S=C+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,P_(t,x,k,S),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,P_(t,x,k,S)}else{t.lineWidth=lt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const x=s.leftForLtr(p,u),k=s.leftForLtr(s.xPlus(p,1),u-2),S=mc(r.borderRadius);Object.values(S).some(I=>I!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,hg(t,{x,y:C,w:u,h:l,radius:S}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),hg(t,{x:k,y:C+1,w:u-2,h:l-2,radius:S}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(x,C,u,l),t.strokeRect(x,C,u,l),t.fillStyle=r.backgroundColor,t.fillRect(k,C+1,u-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=n,m=Kn(n.bodyFont);let p=m.lineHeight,v=0;const C=gc(n.rtl,this.x,this.width),x=function(j){e.fillText(j,C.x(t.x+v),t.y+p/2),t.y+=p+o},k=C.textAlign(r);let S,I,P,L,O,J,F;for(e.textAlign=r,e.textBaseline="middle",e.font=m.string,t.x=lm(this,k,n),e.fillStyle=n.bodyColor,Ct(this.beforeBody,x),v=a&&k!=="right"?r==="center"?u/2+h:u+2+h:0,L=0,J=s.length;L<J;++L){for(S=s[L],I=this.labelTextColors[L],e.fillStyle=I,Ct(S.before,x),P=S.lines,a&&P.length&&(this._drawColorBox(e,t,L,C,n),p=Math.max(m.lineHeight,l)),O=0,F=P.length;O<F;++O)x(P[O]),p=m.lineHeight;Ct(S.after,x)}v=0,p=m.lineHeight,Ct(this.afterBody,x),t.y-=o}drawFooter(t,e,n){const s=this.footer,o=s.length;let r,a;if(o){const l=gc(n.rtl,this.x,this.width);for(t.x=lm(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=l.textAlign(n.footerAlign),e.textBaseline="middle",r=Kn(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,a=0;a<o;++a)e.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:u,height:h}=n,{topLeft:m,topRight:p,bottomLeft:v,bottomRight:C}=mc(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+m,l),r==="top"&&this.drawCaret(t,e,n,s),e.lineTo(a+u-p,l),e.quadraticCurveTo(a+u,l,a+u,l+p),r==="center"&&o==="right"&&this.drawCaret(t,e,n,s),e.lineTo(a+u,l+h-C),e.quadraticCurveTo(a+u,l+h,a+u-C,l+h),r==="bottom"&&this.drawCaret(t,e,n,s),e.lineTo(a+v,l+h),e.quadraticCurveTo(a,l+h,a,l+h-v),r==="center"&&o==="left"&&this.drawCaret(t,e,n,s),e.lineTo(a,l+m),e.quadraticCurveTo(a,l,a+m,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=ld[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=ZE(this,t),l=Object.assign({},r,this._size),u=YE(e,t,l),h=JE(t,l,u,e);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=ns(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,s,e),rM(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),aM(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,s=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),o=!cg(n,s),r=this._positionChanged(s,e);(o||r)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,n),a=this._positionChanged(r,t),l=e||!cg(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,n,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:s,options:o}=this,r=ld[o.position].call(this,t,e);return r!==!1&&(n!==r.x||s!==r.y)}}w(D_,"positioners",ld);var k8={id:"tooltip",_element:D_,positioners:ld,afterInit(i,t,e){e&&(i.tooltip=new D_({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:SM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const E8=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function S8(i,t,e,n){const s=i.indexOf(t);if(s===-1)return E8(i,t,e,n);const o=i.lastIndexOf(t);return s!==o?e:s}const A8=(i,t)=>i===null?null:jn(Math.round(i),0,t);function eS(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class L_ extends _p{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:s,label:o}of e)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(bt(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:S8(n,t,tt(e,t),this._addedLabels),A8(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=e;r++)s.push({value:r});return s}getLabelForValue(t){return eS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}w(L_,"id","category"),w(L_,"defaults",{ticks:{callback:eS}});function R8(i,t){const e=[],{bounds:s,step:o,min:r,max:a,precision:l,count:u,maxTicks:h,maxDigits:m,includeBounds:p}=i,v=o||1,C=h-1,{min:x,max:k}=t,S=!bt(r),I=!bt(a),P=!bt(u),L=(k-x)/(m+1);let O=nE((k-x)/C/v)*v,J,F,j,U;if(O<1e-14&&!S&&!I)return[{value:x},{value:k}];U=Math.ceil(k/O)-Math.floor(x/O),U>C&&(O=nE(U*O/C/v)*v),bt(l)||(J=Math.pow(10,l),O=Math.ceil(O*J)/J),s==="ticks"?(F=Math.floor(x/O)*O,j=Math.ceil(k/O)*O):(F=x,j=k),S&&I&&o&&Y7((a-r)/o,O/1e3)?(U=Math.round(Math.min((a-r)/O,h)),O=(a-r)/U,F=r,j=a):P?(F=S?r:F,j=I?a:j,U=u-1,O=(j-F)/U):(U=(j-F)/O,wd(U,Math.round(U),O/1e3)?U=Math.round(U):U=Math.ceil(U));const X=Math.max(iE(O),iE(F));J=Math.pow(10,bt(l)?X:l),F=Math.round(F*J)/J,j=Math.round(j*J)/J;let le=0;for(S&&(p&&F!==r?(e.push({value:r}),F<r&&le++,wd(Math.round((F+le*O)*J)/J,r,tS(r,L,i))&&le++):F<r&&le++);le<U;++le){const me=Math.round((F+le*O)*J)/J;if(I&&me>a)break;e.push({value:me})}return I&&p&&j!==a?e.length&&wd(e[e.length-1].value,a,tS(a,L,i))?e[e.length-1].value=a:e.push({value:a}):(!I||j===a)&&e.push({value:j}),e}function tS(i,t,{horizontal:e,minRotation:n}){const s=ko(n),o=(e?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+i).length;return Math.min(t/o,r)}class I8 extends _p{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return bt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=e?s:l,a=l=>o=n?o:l;if(t){const l=Hs(s),u=Hs(o);l<0&&u<0?a(0):l>0&&u>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,r=R8(s,o);return t.bounds==="ticks"&&J7(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-e)/Math.max(t.length-1,1)/2;e-=s,n+=s}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return o0(t,this.chart.options.locale,this.options.ticks.format)}}class B_ extends I8{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ts(t)?t:0,this.max=ts(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=ko(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}w(B_,"id","linear"),w(B_,"defaults",{ticks:{callback:XP.formatters.numeric}});const Cp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wi=Object.keys(Cp);function nS(i,t){return i-t}function iS(i,t){if(bt(t))return null;const e=i._adapter,{parser:n,round:s,isoWeekday:o}=i._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),ts(r)||(r=typeof n=="string"?e.parse(r,n):e.parse(r)),r===null?null:(s&&(r=s==="week"&&(qd(o)||o===!0)?e.startOf(r,"isoWeek",o):e.startOf(r,s)),+r)}function sS(i,t,e,n){const s=wi.length;for(let o=wi.indexOf(i);o<s-1;++o){const r=Cp[wi[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((e-t)/(a*r.size))<=n)return wi[o]}return wi[s-1]}function P8(i,t,e,n,s){for(let o=wi.length-1;o>=wi.indexOf(e);o--){const r=wi[o];if(Cp[r].common&&i._adapter.diff(s,n,r)>=t-1)return r}return wi[e?wi.indexOf(e):0]}function M8(i){for(let t=wi.indexOf(i)+1,e=wi.length;t<e;++t)if(Cp[wi[t]].common)return wi[t]}function oS(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:n,hi:s}=n0(e,t),o=e[n]>=t?e[n]:e[s];i[o]=!0}}function V8(i,t,e,n){const s=i._adapter,o=+s.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=e[a],l>=0&&(t[l].major=!0);return t}function rS(i,t,e){const n=[],s={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,n.push({value:a,major:!1});return o===0||!e?n:V8(i,n,s,e)}class pg extends _p{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),s=this._adapter=new DU._date(t.adapters.date);s.init(e),bd(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:iS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(u){!r&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ts(s)&&!isNaN(s)?s:+e.startOf(Date.now(),n),o=ts(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=n6(s,o,r);return this._unit=e.unit||(n.autoSkip?sS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):P8(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:M8(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),rS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;e=jn(e,0,r),n=jn(n,0,r),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||sS(o.minUnit,e,n,this._getLabelCapacity(e)),a=tt(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,u=qd(l)||l===!0,h={};let m=e,p,v;if(u&&(m=+t.startOf(m,"isoWeek",l)),m=+t.startOf(m,u?"day":r),t.diff(n,e,r)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+r);const C=s.ticks.source==="data"&&this.getDataTimestamps();for(p=m,v=0;p<n;p=+t.add(p,a,r),v++)oS(h,p,C);return(p===n||s.bounds==="ticks"||v===1)&&oS(h,p,C),Object.keys(h).sort(nS).map(x=>+x)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,o=this._unit,r=e||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,s){const o=this.options,r=o.ticks.callback;if(r)return Bt(r,[t,e,n],this);const a=o.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],m=u&&a[u],p=n[e],v=u&&m&&p&&p.major;return this._adapter.format(t,s||(v?m:h))}generateTickLabels(t){let e,n,s;for(e=0,n=t.length;e<n;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,s=ko(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,s=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,rS(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,n=s.length;e<n;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const s=this.getLabels();for(e=0,n=s.length;e<n;++e)t.push(iS(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ZP(t.sort(nS))}}w(pg,"id","time"),w(pg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function cm(i,t,e){let n=0,s=i.length-1,o,r,a,l;e?(t>=i[n].pos&&t<=i[s].pos&&({lo:n,hi:s}=Ta(i,"pos",t)),{pos:o,time:a}=i[n],{pos:r,time:l}=i[s]):(t>=i[n].time&&t<=i[s].time&&({lo:n,hi:s}=Ta(i,"time",t)),{time:o,pos:a}=i[n],{time:r,pos:l}=i[s]);const u=r-o;return u?a+(l-a)*(t-o)/u:a}class aS extends pg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=cm(e,this.min),this._tableRange=cm(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,s=[],o=[];let r,a,l,u,h;for(r=0,a=t.length;r<a;++r)u=t[r],u>=e&&u<=n&&s.push(u);if(s.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)h=s[r+1],l=s[r-1],u=s[r],Math.round((h+l)/2)!==u&&o.push({time:u,pos:r/(a-1)});return o}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(cm(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return cm(this._table,n*this._tableRange+this._minPos,!0)}}w(aS,"id","timeseries"),w(aS,"defaults",pg.defaults);const AM="label";function lS(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function N8(i,t){const e=i.options;e&&t&&Object.assign(e,t)}function RM(i,t){i.labels=t}function IM(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:AM;const n=[];i.datasets=t.map(s=>{const o=i.datasets.find(r=>r[e]===s[e]);return!o||!s.data||n.includes(o)?{...s}:(n.push(o),Object.assign(o,s),o)})}function O8(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:AM;const e={labels:[],datasets:[]};return RM(e,i.labels),IM(e,i.datasets,t),e}function D8(i,t){const{height:e=150,width:n=300,redraw:s=!1,datasetIdKey:o,type:r,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:m,...p}=i,v=H.useRef(null),C=H.useRef(null),x=()=>{v.current&&(C.current=new vp(v.current,{type:r,data:O8(a,o),options:l&&{...l},plugins:u}),lS(t,C.current))},k=()=>{lS(t,null),C.current&&(C.current.destroy(),C.current=null)};return H.useEffect(()=>{!s&&C.current&&l&&N8(C.current,l)},[s,l]),H.useEffect(()=>{!s&&C.current&&RM(C.current.config.data,a.labels)},[s,a.labels]),H.useEffect(()=>{!s&&C.current&&a.datasets&&IM(C.current.config.data,a.datasets,o)},[s,a.datasets]),H.useEffect(()=>{C.current&&(s?(k(),setTimeout(x)):C.current.update(m))},[s,l,a.labels,a.datasets,m]),H.useEffect(()=>{C.current&&(k(),setTimeout(x))},[r]),H.useEffect(()=>(x(),()=>k()),[]),So.createElement("canvas",{ref:v,role:"img",height:e,width:n,...p},h)}const L8=H.forwardRef(D8);function g0(i,t){return vp.register(t),H.forwardRef((e,n)=>So.createElement(L8,{...e,ref:n,type:i}))}const B8=g0("line",Fm),F8=g0("bar",Bm),U8=g0("pie",M_);vp.register(L_,B_,Wm,b8,k8,g8,rd,Hm,ad);function z8(){const i={maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"top",display:!1},title:{display:!1,text:"Chart.js Bar Chart"}}};H.useEffect(()=>{(async()=>{var h=Fd,m=`?serviceKey=${Ud}`;m+="&pageNo=1",m+="&numOfRows=10000";const v=(await Nt.get(h+m)).data,k=new X2JS().xml_str2json(v).ServiceResult.MsgBody.items;console.log(k);const S={};k.forEach(D=>{S[D.classification]?S[D.classification]+=1:S[D.classification]=1}),console.log(S);const I=Object.keys(S),P=Object.values(S);console.log(I),console.log(P);const L=I.map(D=>h7(D));console.log(L);const O={};k.forEach(D=>{O[D.gu]?O[D.gu]+=1:O[D.gu]=1}),console.log(O);const J=Object.keys(O),F=Object.values(O);console.log(J),console.log(F);const j=J.map(D=>f7(D));console.log(j);const U={};k.forEach(D=>{U[D.regDtTm.substring(0,4)]?U[D.regDtTm.substring(0,4)]+=1:U[D.regDtTm.substring(0,4)]=1}),console.log(U);const X=Object.keys(U),le=Object.values(U);console.log(X),console.log(le);const me=X.map(D=>D);console.log(me),e({labels:L,datasets:[{label:"동물 수",data:P,backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:2}]}),s({labels:["동구","중구","서구","유성구","대덕구"],datasets:[{label:"유기동물 수",data:F,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]}),r({labels:me,datasets:[{label:"매년 유기동물 수",data:le,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]}),l(!1)})()},[]);const[t,e]=H.useState(),[n,s]=H.useState(),[o,r]=H.useState(),[a,l]=H.useState(!0);return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/Current"}),A.jsxs("div",{className:"w-4/5 px-6 relative",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"유기동물 현황"}),A.jsxs("div",{className:"flex max-sm:block mb-4 mt-8",children:[A.jsx("div",{className:"w-full h-80 max-sm:m-auto",children:t&&A.jsx(F8,{options:i,data:t})}),A.jsx("div",{className:"w-full h-80 max-sm:m-auto",children:n&&A.jsx(U8,{data:n})}),A.jsx("div",{className:"grow"})]}),A.jsx("div",{className:"w-full h-80 m-auto mb-8",children:o&&A.jsx(B8,{options:i,data:o})}),a&&A.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#FFFFFF88] flex justify-center pt-40",children:A.jsx("div",{className:"size-40 border-6 border-blue-500 border-t-gray-200 rounded-full animate-spin"})})]})]})}function H8(){UP("유기동물 보호정보"),document.title="유기동물 보호정보";const i=cp(),[t,e]=H.useState([]),[n,s]=H.useState([1,2,3,4,5,6,7,8,9,10]),[o,r]=H.useState(1),[a,l]=H.useState(),[u,h]=H.useState(""),[m,p]=H.useState(""),[v,C]=H.useState(""),[x,k]=H.useState(""),[S,I]=H.useState("memo"),[P,L]=H.useState(""),[O,J]=H.useState(0),F=["전체","입양가능","개","고양이","기타동물"],[j,U]=H.useState({});H.useEffect(()=>{(async()=>{var oe=Fd,ce=`?serviceKey=${Ud}`;ce+=`&pageNo=${o}`,ce+="&numOfRows=9",ce+=`&searchCondition=${u}`,ce+=`&searchCondition2=${v}`,ce+=`&searchCondition3=${m}`,ce+=`&gubun=${x}`,ce+=`&${S}=${P}`,console.log(oe+ce);const V=(await Nt.get(oe+ce)).data,pe=new X2JS().xml_str2json(V),de=pe.ServiceResult.MsgBody.items;console.log(de),console.log(Array.isArray(de)),Array.isArray(de)?e(de):e(de?[de]:[]);const $=pe.ServiceResult.msgHeader.totalPage;l($)})()},[o,j]);const X=()=>{U({}),r(1)},le=D=>{J(D),h(""),C(""),p(""),k(""),I("memo"),L(""),D==1?p(2):D==2?h(1):D==3?h(2):D==4&&h(3),U({}),r(1)},me=()=>{r(1),s([1,2,3,4,5,6,7,8,9,10])},Ie=()=>{r(a);const D=Math.floor((a-1)/10)*10+1,oe=a,ce=Array.from({length:oe-D+1},(Ne,V)=>D+V);s(ce)},ze=()=>{const D=Math.floor((o-1)/10)*10+11;if(D>a)return;r(D);const oe=[];for(let ce=D;ce<=D+9&&ce<=a;ce++)oe.push(ce);s(oe)},ke=()=>{if(o<=10)return;const D=Math.floor((o-1)/10)*10;r(D);const oe=[];for(let ce=D-9;ce<=D;ce++)oe.push(ce);s(oe)};return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/Information"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"유기동물 보호정보"}),A.jsx("ul",{className:"w-4/5 max-sm:w-full grid grid-cols-5 m-auto mt-10 border border-gray-500",children:F.map((D,oe)=>A.jsx("li",{onClick:()=>le(oe),className:`font-bold cursor-pointer border-r border-r-gray500 text-center py-3 ${O==oe?"bg-green-500 text-white":"text-gray-700"} `,children:D},oe))}),A.jsxs("div",{className:"bg-gray-100 py-6 mt-4 rounded-b-lg",children:[A.jsxs("div",{className:"flex justify-center gap-6 flex-wrap",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold ml-4",children:"종류"}),A.jsxs("select",{value:u,onChange:D=>h(D.target.value),className:"ml-4 bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"개"}),A.jsx("option",{value:"2",children:"고양이"}),A.jsx("option",{value:"3",children:"기타동물"})]})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold ml-4",children:"상태"}),A.jsxs("select",{value:m,onChange:D=>p(D.target.value),className:"ml-4 bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"공고중"}),A.jsx("option",{value:"2",children:"입양가능"}),A.jsx("option",{value:"3",children:"입양예정"})]})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold ml-4",children:"지역역"}),A.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"ml-4 bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"동구"}),A.jsx("option",{value:"2",children:"중구"}),A.jsx("option",{value:"3",children:"서구"}),A.jsx("option",{value:"4",children:"유성구"}),A.jsx("option",{value:"5",children:"대덕구"})]})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold ml-4",children:"성별"}),A.jsxs("select",{value:x,onChange:D=>k(D.target.value),className:"ml-4 bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"암컷"}),A.jsx("option",{value:"2",children:"수컷"})]})]})]}),A.jsxs("div",{className:"mt-4 flex justify-center",children:[A.jsxs("select",{value:S,onChange:D=>I(D.target.value),className:"ml-4 bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"memo",children:"--전체--"}),A.jsx("option",{value:"species",children:"품종"}),A.jsx("option",{value:"regId",children:"동물등록번호"})]}),A.jsx("input",{value:P,onChange:D=>L(D.target.value),className:"mx-2 bg-white p-2 border border-gray-300",type:"text"}),A.jsx("button",{onClick:X,className:"bg-black text-white px-4",children:"검색"})]})]}),A.jsx("div",{className:"grid grid-cols-3 gap-6 mt-6 mb-6 max-sm:grid-cols-2",children:t.map(D=>A.jsxs("div",{onClick:()=>i("/AnimalDetail?regId="+D.regId),className:"aspect-9/12 group cursor-pointer shadow rounded-xl overflow-hidden",children:[A.jsx("div",{className:"h-3/5 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full duration-300 group-hover:scale-125",src:D.filePath?`https://www.daejeon.go.kr/${D.filePath}`:S_,alt:""})}),A.jsxs("div",{className:`${Kk(D.adoptionStatusCd)} h-2/5 pt-2 relative flex flex-col items-center justify-evenly`,children:[A.jsx("p",{className:"font-bold",children:D.species}),A.jsx("p",{className:"text-sm",children:Ca(D.gender)}),A.jsx("span",{className:`${Kk(D.adoptionStatusCd)} text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-1 rounded-2xl`,children:E_(D.adoptionStatusCd)})]})]},D.regId))}),t.length===0?A.jsx("div",{className:"text-center py-10",children:"검색 결과가 없습니다"}):null,A.jsxs("ul",{className:"flex mb-6 justify-center gap-1 select-none",children:[A.jsx("li",{onClick:me,className:"size-9 bg-gray-100 justify-center items-center flex border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"})})}),A.jsx("li",{onClick:ke,className:"size-9 bg-gray-100 justify-center items-center flex border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),n.map(D=>A.jsx("li",{onClick:()=>r(D),className:`size-9 justify-center items-center flex ${o===D?"bg-slate-700 text-white":"border border-gray-300 cursor-pointer"}`,children:D},D)),A.jsx("li",{onClick:ze,className:"size-9 bg-gray-100 justify-center items-center flex border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})}),A.jsx("li",{onClick:Ie,className:"size-9 bg-gray-100 justify-center items-center flex border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"})})})]})]})]})}function W8(){return alert("없는 페이지 입니다")}function q8(){return H.useEffect(()=>{const i=document.getElementById("map"),t={center:new kakao.maps.LatLng(33.450701,126.570667),level:3},e=new kakao.maps.Map(i,t);navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(m){const p=m.coords.latitude,v=m.coords.longitude,C=new kakao.maps.LatLng(p,v);e.setCenter(C)});const n=new kakao.maps.MapTypeControl;e.addControl(n,kakao.maps.ControlPosition.TOPRIGHT);const s=new kakao.maps.ZoomControl;e.addControl(s,kakao.maps.ControlPosition.RIGHT);const o="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png",r=new kakao.maps.Size(24,35),a=new kakao.maps.MarkerImage(o,r);let l=new kakao.maps.MarkerClusterer({map:e,averageCenter:!0,minLevel:4});const u=[];(async()=>{try{const p=(await Nt.get("https://cujeong.github.io/MyShop/shop_data.json")).data;for(let v=0;v<p.length;v++){const C=p[v].Latitude,x=p[v].Longitude,k=new kakao.maps.Marker({map:e,position:new kakao.maps.LatLng(C,x),title:p[v].name,image:a});u.push(k);let S=`<div style="padding:5px;">${p[v].name}</div>`,I=new kakao.maps.InfoWindow({content:S});kakao.maps.event.addListener(k,"mouseover",function(){I.open(e,k)}),kakao.maps.event.addListener(k,"mouseout",function(){I.close()})}l.addMarkers(u)}catch(m){console.error("데이터를 불러오는 중 오류 발생:",m)}})()},[]),A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/Restaurant"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full my-4",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"애완동물 출입식당"}),A.jsx("div",{className:"mt-4 mb-4 w-4/5 aspect-video m-auto",children:A.jsx("div",{id:"map",style:{width:"100%",aspectRatio:"3/2"}})})]})]})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function G8(){const i={resolve:null,promise:null};return i.promise=new Promise(t=>{i.resolve=t}),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $8(i){let t=null;return(...e)=>(t||(t={current:i(...e)}),t.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Hn=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function j8(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+Hn[i>>0&255]+Hn[i>>8&255]+Hn[i>>16&255]+Hn[i>>24&255]+Hn[t>>0&255]+Hn[t>>8&255]+Hn[t>>16&255]+Hn[t>>24&255]+Hn[e>>0&255]+Hn[e>>8&255]+Hn[e>>16&255]+Hn[e>>24&255]+Hn[n>>0&255]+Hn[n>>8&255]+Hn[n>>16&255]+Hn[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function K8(i,t){const e=i.extraPlugins||[];return{...i,extraPlugins:[...e,...t.filter(n=>!e.includes(n))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function PM(i){return!!i&&/^\d+\.\d+\.\d+/.test(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function MM(i){return i?["nightly","alpha","internal","nightly-","staging"].some(t=>i.includes(t)):!1}function Z8(i){return PM(i)||MM(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Y8(i){if(!PM(i))throw new Error(`Invalid semantic version: ${i||"<blank>"}.`);const[t,e,n]=i.split(".");return{major:Number.parseInt(t,10),minor:Number.parseInt(e,10),patch:Number.parseInt(n,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function J8(i){if(MM(i))return 3;const{major:t}=Y8(i);switch(!0){case t>=44:return 3;case t>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function X8(){const{CKEDITOR_VERSION:i,CKEDITOR:t}=window;return Z8(i)?{source:t?"cdn":"npm",version:i}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Q8(){const i=X8();return i?J8(i.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function VM(i,t){switch(t||(t=Q8()||void 0),t){case 1:case 2:return i===void 0;case 3:return i==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function e9(i,t){return function(n){VM(n.config.get("licenseKey"))||n.on("collectUsageData",(s,{setUsageData:o})=>{o(`integration.${i}`,t)})}}var t9=Object.defineProperty,n9=(i,t,e)=>t in i?t9(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,gi=(i,t,e)=>n9(i,typeof t!="symbol"?t+"":t,e);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const NM=class OM{constructor(t,e){gi(this,"_lifecycle"),gi(this,"_element"),gi(this,"_releaseLock",null),gi(this,"_value",null),gi(this,"_afterMountCallbacks",[]),gi(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),gi(this,"release",$8(()=>{const{_releaseLock:n,_state:s,_element:o,_lifecycle:r}=this;s.mountingInProgress?s.mountingInProgress.then(()=>r.unmount({element:o,mountResult:this.value})).catch(a=>{console.error("Semaphore unmounting error:",a)}).then(n.resolve).then(()=>{this._value=null}):(s.destroyedBeforeInitialization=!0,n.resolve())})),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach(e=>e(t)),this._afterMountCallbacks=[]}runAfterMount(t){const{_value:e,_afterMountCallbacks:n}=this;e?t(e):n.push(t)}_lock(){const{_semaphores:t}=OM,{_state:e,_element:n,_lifecycle:s}=this,o=t.get(n)||Promise.resolve(null),r=G8();this._releaseLock=r;const a=o.then(()=>e.destroyedBeforeInitialization?Promise.resolve(void 0):(e.mountingInProgress=s.mount().then(l=>(l&&this.unsafeSetValue(l),l)),e.mountingInProgress)).then(async l=>{l&&s.afterMount&&await s.afterMount({element:n,mountResult:l})}).then(()=>r.promise).catch(l=>{console.error("Semaphore mounting error:",l)}).then(()=>{t.get(n)===a&&t.delete(n)});t.set(n,a)}};gi(NM,"_semaphores",new Map);let i9=NM;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const s9="$__CKEditorReactContextMetadata";function o9(i,t){return{...t,[s9]:i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const r9=So.createContext(null),a9=i=>!!i&&typeof i=="object"&&"status"in i&&["initializing","initialized","error"].includes(i.status),DM=i=>t=>a9(t)&&t.status===i,cS=DM("initializing"),l9=i=>DM("initialized")(i)&&i.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const c9=e9("react",{version:"9.5.0",frameworkVersion:So.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function u9(i){return VM(i.licenseKey)?i:K8(i,[c9])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ky="Lock from React integration (@ckeditor/ckeditor5-react)";class LM extends So.Component{constructor(t){super(t),gi(this,"domContainer",So.createRef()),gi(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[e]=t.split(".").map(Number);e>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){const{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){const{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){const{props:e,editorSemaphore:n}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog?!0:(n&&(n.runAfterMount(({instance:s})=>{this._shouldUpdateEditorData(e,t,s)&&s.data.set(t.data)}),"disabled"in t&&n.runAfterMount(({instance:s})=>{t.disabled?s.enableReadOnlyMode(ky):s.disableReadOnlyMode(ky)})),!1)}componentDidMount(){cS(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){cS(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new i9(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:t})=>{const{onReady:e}=this.props;e&&this.domContainer.current!==null&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{const{onAfterDestroy:n}=this.props;try{await this._destroyEditor(e),t.innerHTML=""}finally{n&&n(e.instance)}}})}render(){return So.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const t=l9(this.context)?new d9(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),e={current:0};return t.setCreator(async(n,s)=>{var o;const{editorSemaphore:r}=this,{onAfterDestroy:a}=this.props;e.current>0&&a&&((o=r==null?void 0:r.value)!=null&&o.instance)&&a(r.value.instance);const l=await this._createEditor(n,s);return r&&e.current>0&&(r.unsafeSetValue({instance:l,watchdog:t}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t.editor)})),e.current++,l}),t.on("error",(n,{error:s,causesRestart:o})=>{(this.props.onError||console.error)(s,{phase:"runtime",willEditorRestart:o})}),await t.create(this.domContainer.current,this._getConfig()).catch(n=>{(this.props.onError||console.error)(n,{phase:"initialization",willEditorRestart:!1})}),{watchdog:t,instance:t.editor}}_createEditor(t,e){const{contextItemMetadata:n}=this.props;return n&&(e=o9(n,e)),this.props.editor.create(t,u9(e)).then(s=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&s.enableReadOnlyMode(ky)}const o=s.model.document,r=s.editing.view.document;return o.on("change:data",a=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(a,s)}),r.on("focus",a=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(a,s)}),r.on("blur",a=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(a,s)}),s})}async _destroyEditor(t){const{watchdog:e,instance:n}=t;return new Promise((s,o)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(e)return await e.destroy(),s();if(n)return await n.destroy(),s();s()}catch(r){console.error(r),o(r)}})})}_shouldUpdateEditorData(t,e,n){return!(t.data===e.data||n.data.get()===e.data)}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}gi(LM,"contextType",r9);class d9{constructor(t){gi(this,"_contextWatchdog"),gi(this,"_id"),gi(this,"_creator"),this._contextWatchdog=t,this._id=j8()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(n,{itemId:s,error:o})=>{s===this._id&&e(null,{error:o,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function BM(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}const h9=H.memo(H.forwardRef(({id:i,semaphore:t,rootName:e},n)=>{const s=H.useRef(null);return H.useEffect(()=>{let o,r;return t.runAfterMount(({instance:a})=>{if(!s.current)return;r=a;const{ui:l,model:u}=r,h=u.document.getRoot(e);h&&r.ui.getEditableElement(e)&&r.detachEditable(h),o=l.view.createEditable(e,s.current),l.addEditable(o),a.editing.view.forceRender()}),()=>{if(r&&r.state!=="destroyed"&&s.current){const a=r.model.document.getRoot(e);/* istanbul ignore else -- @preserve */a&&r.detachEditable(a)}}},[t.revision]),So.createElement("div",{key:t.revision,id:i,ref:BM(n,s)})}));h9.displayName="EditorEditable";const f9=H.forwardRef(({editor:i},t)=>{const e=H.useRef(null);return H.useEffect(()=>{const n=e.current;if(!i||!n)return;const s=i.ui.view.toolbar.element;return n.appendChild(s),()=>{n.contains(s)&&n.removeChild(s)}},[i&&i.id]),So.createElement("div",{ref:BM(e,t)})});f9.displayName="EditorToolbarWrapper";function m9(i,t){const e={};for(let n=0;n<i.length;n++){const s=i[n],o=t(s);Object.hasOwn(e,o)||(e[o]=[]),e[o].push(s)}return e}function Ql(i){return i}function bg(){}function p0(i){return i==null||typeof i!="object"&&typeof i!="function"}function b0(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function w0(i){if(p0(i))return i;if(Array.isArray(i)||b0(i)||i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer)return i.slice(0);const t=Object.getPrototypeOf(i),e=t.constructor;if(i instanceof Date||i instanceof Map||i instanceof Set)return new e(i);if(i instanceof RegExp){const n=new e(i);return n.lastIndex=i.lastIndex,n}if(i instanceof DataView)return new e(i.buffer.slice(0));if(i instanceof Error){const n=new e(i.message);return n.stack=i.stack,n.name=i.name,n.cause=i.cause,n}if(typeof File<"u"&&i instanceof File)return new e([i],i.name,{type:i.type,lastModified:i.lastModified});if(typeof i=="object"){const n=Object.create(t);return Object.assign(n,i)}return i}function uS(i){if(!i||typeof i!="object")return!1;const t=Object.getPrototypeOf(i);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(i)==="[object Object]":!1}function F_(i){return typeof i=="object"&&i!==null}function wg(i){return Object.getOwnPropertySymbols(i).filter(t=>Object.prototype.propertyIsEnumerable.call(i,t))}function yg(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const FM="[object RegExp]",y0="[object String]",_0="[object Number]",v0="[object Boolean]",_g="[object Arguments]",UM="[object Symbol]",zM="[object Date]",HM="[object Map]",WM="[object Set]",qM="[object Array]",g9="[object Function]",GM="[object ArrayBuffer]",qm="[object Object]",p9="[object Error]",$M="[object DataView]",jM="[object Uint8Array]",KM="[object Uint8ClampedArray]",ZM="[object Uint16Array]",YM="[object Uint32Array]",b9="[object BigUint64Array]",JM="[object Int8Array]",XM="[object Int16Array]",QM="[object Int32Array]",w9="[object BigInt64Array]",e5="[object Float32Array]",t5="[object Float64Array]";function y9(i,t){return ac(i,void 0,i,new Map,t)}function ac(i,t,e,n=new Map,s=void 0){const o=s==null?void 0:s(i,t,e,n);if(o!=null)return o;if(p0(i))return i;if(n.has(i))return n.get(i);if(Array.isArray(i)){const r=new Array(i.length);n.set(i,r);for(let a=0;a<i.length;a++)r[a]=ac(i[a],a,e,n,s);return Object.hasOwn(i,"index")&&(r.index=i.index),Object.hasOwn(i,"input")&&(r.input=i.input),r}if(i instanceof Date)return new Date(i.getTime());if(i instanceof RegExp){const r=new RegExp(i.source,i.flags);return r.lastIndex=i.lastIndex,r}if(i instanceof Map){const r=new Map;n.set(i,r);for(const[a,l]of i)r.set(a,ac(l,a,e,n,s));return r}if(i instanceof Set){const r=new Set;n.set(i,r);for(const a of i)r.add(ac(a,void 0,e,n,s));return r}if(typeof Buffer<"u"&&Buffer.isBuffer(i))return i.subarray();if(b0(i)){const r=new(Object.getPrototypeOf(i)).constructor(i.length);n.set(i,r);for(let a=0;a<i.length;a++)r[a]=ac(i[a],a,e,n,s);return r}if(i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer)return i.slice(0);if(i instanceof DataView){const r=new DataView(i.buffer.slice(0),i.byteOffset,i.byteLength);return n.set(i,r),ya(r,i,e,n,s),r}if(typeof File<"u"&&i instanceof File){const r=new File([i],i.name,{type:i.type});return n.set(i,r),ya(r,i,e,n,s),r}if(i instanceof Blob){const r=new Blob([i],{type:i.type});return n.set(i,r),ya(r,i,e,n,s),r}if(i instanceof Error){const r=new i.constructor;return n.set(i,r),r.message=i.message,r.name=i.name,r.stack=i.stack,r.cause=i.cause,ya(r,i,e,n,s),r}if(typeof i=="object"&&_9(i)){const r=Object.create(Object.getPrototypeOf(i));return n.set(i,r),ya(r,i,e,n,s),r}return i}function ya(i,t,e=i,n,s){const o=[...Object.keys(t),...wg(t)];for(let r=0;r<o.length;r++){const a=o[r],l=Object.getOwnPropertyDescriptor(i,a);(l==null||l.writable)&&(i[a]=ac(t[a],a,e,n,s))}}function _9(i){switch(yg(i)){case _g:case qM:case GM:case $M:case v0:case zM:case e5:case t5:case JM:case XM:case QM:case HM:case _0:case qm:case FM:case WM:case y0:case UM:case jM:case KM:case ZM:case YM:return!0;default:return!1}}function n5(i,t){return i===t||Number.isNaN(i)&&Number.isNaN(t)}function i5(i,t,e){return cd(i,t,void 0,void 0,void 0,void 0,e)}function cd(i,t,e,n,s,o,r){const a=r(i,t,e,n,s,o);if(a!==void 0)return a;if(typeof i==typeof t)switch(typeof i){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return i===t;case"number":return i===t||Object.is(i,t);case"function":return i===t;case"object":return vd(i,t,o,r)}return vd(i,t,o,r)}function vd(i,t,e,n){if(Object.is(i,t))return!0;let s=yg(i),o=yg(t);if(s===_g&&(s=qm),o===_g&&(o=qm),s!==o)return!1;switch(s){case y0:return i.toString()===t.toString();case _0:{const l=i.valueOf(),u=t.valueOf();return n5(l,u)}case v0:case zM:case UM:return Object.is(i.valueOf(),t.valueOf());case FM:return i.source===t.source&&i.flags===t.flags;case g9:return i===t}e=e??new Map;const r=e.get(i),a=e.get(t);if(r!=null&&a!=null)return r===t;e.set(i,t),e.set(t,i);try{switch(s){case HM:{if(i.size!==t.size)return!1;for(const[l,u]of i.entries())if(!t.has(l)||!cd(u,t.get(l),l,i,t,e,n))return!1;return!0}case WM:{if(i.size!==t.size)return!1;const l=Array.from(i.values()),u=Array.from(t.values());for(let h=0;h<l.length;h++){const m=l[h],p=u.findIndex(v=>cd(m,v,void 0,i,t,e,n));if(p===-1)return!1;u.splice(p,1)}return!0}case qM:case jM:case KM:case ZM:case YM:case b9:case JM:case XM:case QM:case w9:case e5:case t5:{if(typeof Buffer<"u"&&Buffer.isBuffer(i)!==Buffer.isBuffer(t)||i.length!==t.length)return!1;for(let l=0;l<i.length;l++)if(!cd(i[l],t[l],l,i,t,e,n))return!1;return!0}case GM:return i.byteLength!==t.byteLength?!1:vd(new Uint8Array(i),new Uint8Array(t),e,n);case $M:return i.byteLength!==t.byteLength||i.byteOffset!==t.byteOffset?!1:vd(new Uint8Array(i),new Uint8Array(t),e,n);case p9:return i.name===t.name&&i.message===t.message;case qm:{if(!(vd(i.constructor,t.constructor,e,n)||uS(i)&&uS(t)))return!1;const u=[...Object.keys(i),...wg(i)],h=[...Object.keys(t),...wg(t)];if(u.length!==h.length)return!1;for(let m=0;m<u.length;m++){const p=u[m],v=i[p];if(!Object.hasOwn(t,p))return!1;const C=t[p];if(!cd(v,C,p,i,t,e,n))return!1}return!0}default:return!1}}finally{e.delete(i),e.delete(t)}}function vg(i,t){return i5(i,t,bg)}function Cg(i){return typeof i=="function"}function v9(i){return Number.isSafeInteger(i)&&i>=0}function C9(i){return i!=null&&typeof i!="function"&&v9(i.length)}function s5(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}function o5(i){return Object.is(i,-0)?"-0":i.toString()}function C0(i){const t=[],e=i.length;if(e===0)return t;let n=0,s="",o="",r=!1;for(i.charCodeAt(0)===46&&(t.push(""),n++);n<e;){const a=i[n];o?a==="\\"&&n+1<e?(n++,s+=i[n]):a===o?o="":s+=a:r?a==='"'||a==="'"?o=a:a==="]"?(r=!1,t.push(s),s=""):s+=a:a==="["?(r=!0,s&&(t.push(s),s="")):a==="."?s&&(t.push(s),s=""):s+=a,n++}return s&&t.push(s),t}function Ir(i,t,e){if(i==null)return e;switch(typeof t){case"string":{const n=i[t];return n===void 0?s5(t)?Ir(i,C0(t),e):e:n}case"number":case"symbol":{typeof t=="number"&&(t=o5(t));const n=i[t];return n===void 0?e:n}default:{if(Array.isArray(t))return T9(i,t,e);Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t);const n=i[t];return n===void 0?e:n}}}function T9(i,t,e){if(t.length===0)return e;let n=i;for(let s=0;s<t.length;s++){if(n==null)return e;n=n[t[s]]}return n===void 0?e:n}function x9(i){return function(t){return Ir(t,i)}}function is(i){return i!==null&&(typeof i=="object"||typeof i=="function")}function Tp(i,t){return y9(i,(e,n,s,o)=>{const r=t==null?void 0:t(e,n,s,o);if(r!=null)return r;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case _0:case y0:case v0:{const a=new i.constructor(i==null?void 0:i.valueOf());return ya(a,i),a}case _g:{const a={};return ya(a,i),a.length=i.length,a[Symbol.iterator]=i[Symbol.iterator],a}default:return}})}function Di(i){return Tp(i)}const k9=/^(?:0|[1-9]\d*)$/;function E9(i,t=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<t;case"symbol":return!1;case"string":return k9.test(i)}}function dS(i){return i!==null&&typeof i=="object"&&yg(i)==="[object Arguments]"}function S9(i){return typeof i=="symbol"||i instanceof Symbol}function A9(i){return S9(i)?NaN:Number(i)}function R9(i){return i?(i=A9(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}function I9(i){const t=R9(i),e=t%1;return e?t-e:t}function hS(i){return typeof i=="string"||i instanceof String}function r5(i,t,e){const n=Array.isArray(t)?t:typeof t=="string"?C0(t):[t];let s=i;for(let r=0;r<n.length-1;r++){const a=n[r],l=n[r+1];s[a]==null&&(s[a]=E9(l)?[]:{}),s=s[a]}const o=n[n.length-1];return s[o]=e,i}function P9(i,t,{signal:e,edges:n}={}){let s,o=null;const r=n!=null&&n.includes("leading"),a=n==null||n.includes("trailing"),l=()=>{o!==null&&(i.apply(s,o),s=void 0,o=null)},u=()=>{a&&l(),v()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,u()},t)},p=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{p(),s=void 0,o=null},C=()=>{p(),l()},x=function(...k){if(e!=null&&e.aborted)return;s=this,o=k;const S=h==null;m(),r&&S&&l()};return x.schedule=m,x.cancel=v,x.flush=C,e==null||e.addEventListener("abort",v,{once:!0}),x}function ss(i,t=0,e={}){typeof e!="object"&&(e={});const{signal:n,leading:s=!1,trailing:o=!0,maxWait:r}=e,a=Array(2);s&&(a[0]="leading"),o&&(a[1]="trailing");let l,u=null;const h=P9(function(...v){l=i.apply(this,v),u=null},t,{signal:n,edges:a}),m=function(...v){if(r!=null){if(u===null)u=Date.now();else if(Date.now()-u>=r)return l=i.apply(this,v),u=Date.now(),h.cancel(),h.schedule(),l}return h.apply(this,v),l},p=()=>(h.flush(),l);return m.cancel=h.cancel,m.flush=p,m}function vc(i,t=0,e={}){typeof e!="object"&&(e={});const{leading:n=!0,trailing:s=!0,signal:o}=e;return ss(i,t,{leading:n,trailing:s,signal:o,maxWait:t})}function T0(i){if(i==null)return"";if(Array.isArray(i))return i.map(T0).join(",");const t=String(i);return t==="0"&&Object.is(Number(i),-0)?"-0":t}function M9(i){return typeof Buffer<"u"&&Buffer.isBuffer(i)}function V9(i){const t=i==null?void 0:i.constructor,e=typeof t=="function"?t.prototype:Object.prototype;return i===e}function a5(i){return b0(i)}function N9(i,t){if(i=I9(i),i<1||!Number.isSafeInteger(i))return[];const e=new Array(i);for(let n=0;n<i;n++)e[n]=typeof t=="function"?t(n):n;return e}function O9(i){if(i==null)return[];switch(typeof i){case"object":case"function":return C9(i)?L9(i):V9(i)?D9(i):Tg(i);default:return Tg(Object(i))}}function Tg(i){const t=[];for(const e in i)t.push(e);return t}function D9(i){return Tg(i).filter(e=>e!=="constructor")}function L9(i){const t=N9(i.length,n=>`${n}`),e=new Set(t);return M9(i)&&(e.add("offset"),e.add("parent")),a5(i)&&(e.add("buffer"),e.add("byteLength"),e.add("byteOffset")),[...t,...Tg(i).filter(n=>!e.has(n))]}function l5(i,...t){for(let e=0;e<t.length;e++)B9(i,t[e]);return i}function B9(i,t){const e=O9(t);for(let n=0;n<e.length;n++){const s=e[n];n5(i[s],t[s])||(i[s]=t[s])}}function fS(i,t){const e={},n=Object.keys(i);for(let s=0;s<n.length;s++){const o=n[s],r=i[o];e[o]=t(r,o,i)}return e}function F9(i,t){switch(t=t??Ql,typeof t){case"string":case"symbol":case"number":case"object":return fS(i,x9(t));case"function":return fS(i,t)}}function zs(i){var e;if(typeof i!="object"||i==null)return!1;if(Object.getPrototypeOf(i)===null)return!0;if(Object.prototype.toString.call(i)!=="[object Object]"){const n=i[Symbol.toStringTag];return n==null||!((e=Object.getOwnPropertyDescriptor(i,Symbol.toStringTag))!=null&&e.writable)?!1:i.toString()===`[object ${n}]`}let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t}function U9(i,...t){const e=t.slice(0,-1),n=t[t.length-1];let s=i;for(let o=0;o<e.length;o++){const r=e[o];s=Gm(s,r,n,new Map)}return s}function Gm(i,t,e,n){if(p0(i)&&(i=Object(i)),t==null||typeof t!="object")return i;if(n.has(t))return w0(n.get(t));if(n.set(t,i),Array.isArray(t)){t=t.slice();for(let o=0;o<t.length;o++)t[o]=t[o]??void 0}const s=[...Object.keys(t),...wg(t)];for(let o=0;o<s.length;o++){const r=s[o];let a=t[r],l=i[r];if(dS(a)&&(a={...a}),dS(l)&&(l={...l}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Di(a)),Array.isArray(a))if(typeof l=="object"&&l!=null){const h=[],m=Reflect.ownKeys(l);for(let p=0;p<m.length;p++){const v=m[p];h[v]=l[v]}l=h}else l=[];const u=e(l,a,r,i,t,n);u!=null?i[r]=u:Array.isArray(a)||F_(l)&&F_(a)?i[r]=Gm(l,a,e,n):l==null&&zs(a)?i[r]=Gm({},a,e,n):l==null&&a5(a)?i[r]=Di(a):(l===void 0||a!==void 0)&&(i[r]=a)}return i}function x0(i,...t){return U9(i,...t,bg)}function z9(i,t){if(i==null)return!0;switch(typeof t){case"symbol":case"number":case"object":{if(Array.isArray(t))return mS(i,t);if(typeof t=="number"?t=o5(t):typeof t=="object"&&(Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t)),(i==null?void 0:i[t])===void 0)return!0;try{return delete i[t],!0}catch{return!1}}case"string":{if((i==null?void 0:i[t])===void 0&&s5(t))return mS(i,C0(t));try{return delete i[t],!0}catch{return!1}}}}function mS(i,t){const e=Ir(i,t.slice(0,-1),i),n=t[t.length-1];if((e==null?void 0:e[n])===void 0)return!0;try{return delete e[n],!0}catch{return!1}}function Pr(i){return F_(i)&&i.nodeType===1&&!zs(i)}function gS(i,t){if(!Number.isInteger(i)||i<0)throw new Error("n must be a non-negative integer.");let e=0;return(...n)=>{if(++e>=i)return t(...n)}}function U_(i,t,e=bg){return typeof e!="function"&&(e=bg),i5(i,t,(...n)=>{const s=e(...n);if(s!==void 0)return!!s;if(i instanceof Map&&t instanceof Map||i instanceof Set&&t instanceof Set)return U_(Array.from(i),Array.from(t),gS(2,e))})}function H9(i){return i.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function k0(i){return H9(T0(i))}function W9(i){return i.substring(0,1).toUpperCase()+i.substring(1)}function q9(i){return W9(T0(i))}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let z_;try{z_={window,document}}catch{/* istanbul ignore next -- @preserve */z_={window:{},document:{}}}var he=z_;function G9(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const da=G9(),Se={isMac:c5(da),isWindows:$9(da),isGecko:j9(da),isSafari:K9(da),isiOS:Z9(da),isAndroid:Y9(da),isBlink:J9(da),get isMediaForcedColors(){return Q9()},features:{isRegExpUnicodePropertySupported:X9()}};function c5(i){return i.indexOf("macintosh")>-1}function $9(i){return i.indexOf("windows")>-1}function j9(i){return!!i.match(/gecko\/\d+/)}function K9(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function Z9(i){return!!i.match(/iphone|ipad/i)||c5(i)&&navigator.maxTouchPoints>0}function Y9(i){return i.indexOf("android")>-1}function J9(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function X9(){let i=!1;try{i="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return i}function Q9(){return he.window.matchMedia?he.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function u5(i,t,e,n){e=e||function(l,u){return l===u};const s=Array.isArray(i)?i:Array.prototype.slice.call(i),o=Array.isArray(t)?t:Array.prototype.slice.call(t),r=eH(s,o,e);return n?nH(r,o.length):tH(o,r)}function eH(i,t,e){const n=pS(i,t,e);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=bS(i,n),o=bS(t,n),r=pS(s,o,e),a=i.length-r,l=t.length-r;return{firstIndex:n,lastIndexOld:a,lastIndexNew:l}}function pS(i,t,e){for(let n=0;n<Math.max(i.length,t.length);n++)if(i[n]===void 0||t[n]===void 0||!e(i[n],t[n]))return n;return-1}function bS(i,t){return i.slice(t).reverse()}function tH(i,t){const e=[],{firstIndex:n,lastIndexOld:s,lastIndexNew:o}=t;return o-n>0&&e.push({index:n,type:"insert",values:i.slice(n,o)}),s-n>0&&e.push({index:n+(o-n),type:"delete",howMany:s-n}),e}function nH(i,t){const{firstIndex:e,lastIndexOld:n,lastIndexNew:s}=i;if(e===-1)return Array(t).fill("equal");let o=[];return e>0&&(o=o.concat(Array(e).fill("equal"))),s-e>0&&(o=o.concat(Array(s-e).fill("insert"))),n-e>0&&(o=o.concat(Array(n-e).fill("delete"))),s<t&&(o=o.concat(Array(t-s).fill("equal"))),o}function pc(i,t,e){e=e||function(x,k){return x===k};const n=i.length,s=t.length;if(n>200||s>200||n+s>300)return pc.fastDiff(i,t,e,!0);let o,r;if(s<n){const x=i;i=t,t=x,o="delete",r="insert"}else o="insert",r="delete";const a=i.length,l=t.length,u=l-a,h={},m={};function p(x){const k=(m[x-1]!==void 0?m[x-1]:-1)+1,S=m[x+1]!==void 0?m[x+1]:-1,I=k>S?-1:1;h[x+I]&&(h[x]=h[x+I].slice(0)),h[x]||(h[x]=[]),h[x].push(k>S?o:r);let P=Math.max(k,S),L=P-x;for(;L<a&&P<l&&e(i[L],t[P]);)L++,P++,h[x].push("equal");return P}let v=0,C;do{for(C=-v;C<u;C++)m[C]=p(C);for(C=u+v;C>u;C--)m[C]=p(C);m[u]=p(u),v++}while(m[u]!==l);return h[u].slice(1)}pc.fastDiff=u5;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wS(){return function i(){i.called=!0}}class Mo{constructor(t,e){w(this,"source");w(this,"name");w(this,"path");w(this,"stop");w(this,"off");w(this,"return");this.source=t,this.name=e,this.path=[],this.stop=wS(),this.off=wS()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Wn=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function si(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+Wn[i>>0&255]+Wn[i>>8&255]+Wn[i>>16&255]+Wn[i>>24&255]+Wn[t>>0&255]+Wn[t>>8&255]+Wn[t>>16&255]+Wn[t>>24&255]+Wn[e>>0&255]+Wn[e>>8&255]+Wn[e>>16&255]+Wn[e>>24&255]+Wn[n>>0&255]+Wn[n>>8&255]+Wn[n>>16&255]+Wn[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Aa={get(i="normal"){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function d5(i,t){const e=Aa.get(t.priority);let n=0,s=i.length;for(;n<s;){const o=n+s>>1;Aa.get(i[o].priority)<e?s=o:n=o+1}i.splice(n,0,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const iH="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class N extends Error{constructor(e,n,s){super(oH(e,s));w(this,"context");w(this,"data");this.name="CKEditorError",this.context=n,this.data=s}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,n){if(e.is&&e.is("CKEditorError"))throw e;const s=new N(e.message,n);throw s.stack=e.stack,s}}function Ze(i,t){console.warn(...f5(i,t))}function sH(i,t){console.error(...f5(i,t))}function h5(i){return`
Read more: ${iH}#error-${i}`}function oH(i,t){const e=new WeakSet,s=t?` ${JSON.stringify(t,(r,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",o=h5(i);return i+s+o}function f5(i,t){const e=h5(i);return t?[i,t,e]:[i,e]}const m5="45.1.0",rH=new Date(2025,4,14);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new N("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=m5;const ec=Symbol("listeningTo"),H_=Symbol("emitterId"),mo=Symbol("delegations"),g5=Tt(Object);function Tt(i){if(!i)return g5;class t extends i{on(n,s,o){this.listenTo(this,n,s,o)}once(n,s,o){let r=!1;const a=(l,...u)=>{r||(r=!0,l.off(),s.call(this,l,...u))};this.listenTo(this,n,a,o)}off(n,s){this.stopListening(this,n,s)}listenTo(n,s,o,r={}){let a,l;this[ec]||(this[ec]={});const u=this[ec];Ey(n)||p5(n);const h=Ey(n);(a=u[h])||(a=u[h]={emitter:n,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(o),dH(this,n,s,o,r)}stopListening(n,s,o){const r=this[ec];let a=n&&Ey(n);const l=r&&a?r[a]:void 0,u=l&&s?l.callbacks[s]:void 0;if(!(!r||n&&!l||s&&!u))if(o)Sy(this,n,s,o),u.indexOf(o)!==-1&&(u.length===1?delete l.callbacks[s]:Sy(this,n,s,o));else if(u){for(;o=u.pop();)Sy(this,n,s,o);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(n,s);delete r[a]}else{for(a in r)this.stopListening(r[a].emitter);delete this[ec]}}fire(n,...s){try{const o=n instanceof Mo?n:new Mo(this,n),r=o.name;let a=uH(this,r);if(o.path.push(this),a){a=a.slice();for(let u=0;u<a.length;u++){const h=a[u].callback;if(h.call(this,o,...s),o.off.called&&(delete o.off.called,this._removeEventListener(r,h)),o.stop.called)break}}const l=this[mo];if(l){const u=l.get(r),h=l.get("*");u&&yS(u,o,s),h&&yS(h,o,s)}return o.return}catch(o){/* istanbul ignore next -- @preserve */N.rethrowUnexpectedError(o,this)}}delegate(...n){return{to:(s,o)=>{this[mo]||(this[mo]=new Map),n.forEach(r=>{const a=this[mo].get(r);a?a.set(s,o):this[mo].set(r,new Map([[s,o]]))})}}}stopDelegating(n,s){if(this[mo])if(!n)this[mo].clear();else if(!s)this[mo].delete(n);else{const o=this[mo].get(n);o&&o.delete(s)}}_addEventListener(n,s,o){cH(this,n);const r=W_(this,n),a=Aa.get(o.priority),l={callback:s,priority:a};for(const u of r)d5(u,l)}_removeEventListener(n,s){const o=W_(this,n);for(const r of o)for(let a=0;a<r.length;a++)r[a].callback==s&&(r.splice(a,1),a--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Tt[i]=g5.prototype[i]});function aH(i,t){const e=i[ec];return e&&e[t]?e[t].emitter:null}function p5(i,t){i[H_]||(i[H_]=t||si())}function Ey(i){return i[H_]}function b5(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function lH(){return{callbacks:[],childEvents:[]}}function cH(i,t){const e=b5(i);if(e[t])return;let n=t,s=null;const o=[];for(;n!==""&&!e[n];)e[n]=lH(),o.push(e[n]),s&&e[n].childEvents.push(s),s=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const r of o)r.callbacks=e[n].callbacks.slice();e[n].childEvents.push(s)}}function W_(i,t){const e=b5(i)[t];if(!e)return[];let n=[e.callbacks];for(let s=0;s<e.childEvents.length;s++){const o=W_(i,e.childEvents[s]);n=n.concat(o)}return n}function uH(i,t){if(!i._events)return null;let e=t;do{const n=i._events[e];if(n&&n.callbacks&&n.callbacks.length)return n.callbacks;const s=e.lastIndexOf(":");e=s>-1?e.substring(0,s):""}while(e);return null}function yS(i,t,e){for(let[n,s]of i){s?typeof s=="function"&&(s=s(t.name)):s=t.name;const o=new Mo(t.source,s);o.path=[...t.path],n.fire(o,...e)}}function dH(i,t,e,n,s){t._addEventListener?t._addEventListener(e,n,s):i._addEventListener.call(t,e,n,s)}function Sy(i,t,e,n){t._removeEventListener?t._removeEventListener(e,n):i._removeEventListener.call(t,e,n)}const Cd=Symbol("observableProperties"),Zd=Symbol("boundObservables"),Td=Symbol("boundProperties"),ha=Symbol("decoratedMethods"),_S=Symbol("decoratedOriginal"),w5=wt(Tt());function wt(i){var e,n,s,o,r;if(!i)return w5;class t extends(r=i,o=Cd,s=ha,n=Td,e=Zd,r){constructor(){super(...arguments);w(this,o);w(this,s);w(this,n);w(this,e)}set(u,h){if(is(u)){Object.keys(u).forEach(p=>{this.set(p,u[p])},this);return}Ay(this);const m=this[Cd];if(u in this&&!m.has(u))throw new N("observable-set-cannot-override",this);Object.defineProperty(this,u,{enumerable:!0,configurable:!0,get(){return m.get(u)},set(p){const v=m.get(u);let C=this.fire(`set:${u}`,u,p,v);C===void 0&&(C=p),(v!==C||!m.has(u))&&(m.set(u,C),this.fire(`change:${u}`,u,C,v))}}),this[u]=h}bind(...u){if(!u.length||!vS(u))throw new N("observable-bind-wrong-properties",this);if(new Set(u).size!==u.length)throw new N("observable-bind-duplicate-properties",this);Ay(this);const h=this[Td];u.forEach(p=>{if(h.has(p))throw new N("observable-bind-rebind",this)});const m=new Map;return u.forEach(p=>{const v={property:p,to:[]};h.set(p,v),m.set(p,v)}),{to:hH,toMany:fH,_observable:this,_bindProperties:u,_to:[],_bindings:m}}unbind(...u){if(!this[Cd])return;const h=this[Td],m=this[Zd];if(u.length){if(!vS(u))throw new N("observable-unbind-wrong-properties",this);u.forEach(p=>{const v=h.get(p);v&&(v.to.forEach(([C,x])=>{const k=m.get(C),S=k[x];S.delete(v),S.size||delete k[x],Object.keys(k).length||(m.delete(C),this.stopListening(C,"change"))}),h.delete(p))})}else m.forEach((p,v)=>{this.stopListening(v,"change")}),m.clear(),h.clear()}decorate(u){Ay(this);const h=this[u];if(!h)throw new N("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:u});this.on(u,(m,p)=>{m.return=h.apply(this,p)}),this[u]=function(...m){return this.fire(u,m)},this[u][_S]=h,this[ha]||(this[ha]=[]),this[ha].push(u)}stopListening(u,h,m){if(!u&&this[ha]){for(const p of this[ha])this[p]=this[p][_S];delete this[ha]}super.stopListening(u,h,m)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{wt[i]=w5.prototype[i]});function Ay(i){i[Cd]||(Object.defineProperty(i,Cd,{value:new Map}),Object.defineProperty(i,Zd,{value:new Map}),Object.defineProperty(i,Td,{value:new Map}))}function hH(...i){const t=gH(...i),e=Array.from(this._bindings.keys()),n=e.length;if(!t.callback&&t.to.length>1)throw new N("observable-bind-to-no-callback",this);if(n>1&&t.callback)throw new N("observable-bind-to-extra-callback",this);t.to.forEach(s=>{if(s.properties.length&&s.properties.length!==n)throw new N("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),wH(this._observable,this._to),bH(this),this._bindProperties.forEach(s=>{y5(this._observable,s)})}function fH(i,t,e){if(this._bindings.size>1)throw new N("observable-bind-to-many-not-one-binding",this);this.to(...mH(i,t),e)}function mH(i,t){const e=i.map(n=>[n,t]);return Array.prototype.concat.apply([],e)}function vS(i){return i.every(t=>typeof t=="string")}function gH(...i){if(!i.length)throw new N("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof i[i.length-1]=="function"&&(t.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")e.properties.push(n);else if(typeof n=="object")e={observable:n,properties:[]},t.to.push(e);else throw new N("observable-bind-to-parse-error",null)}),t}function pH(i,t,e,n){const s=i[Zd],o=s.get(e),r=o||{};r[n]||(r[n]=new Set),r[n].add(t),o||s.set(e,r)}function bH(i){let t;i._bindings.forEach((e,n)=>{i._to.forEach(s=>{t=s.properties[e.callback?0:i._bindProperties.indexOf(n)],e.to.push([s.observable,t]),pH(i._observable,e,s.observable,t)})})}function y5(i,t){const n=i[Td].get(t);let s;n.callback?s=n.callback.apply(i,n.to.map(o=>o[0][o[1]])):(s=n.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(i,t)?i[t]=s:i.set(t,s)}function wH(i,t){t.forEach(e=>{const n=i[Zd];let s;n.get(e.observable)||i.listenTo(e.observable,"change",(o,r)=>{s=n.get(e.observable)[r],s&&s.forEach(a=>{y5(i,a.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class yH{constructor(){w(this,"_replacedElements");this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function q_(i){let t=0;for(const e of i)t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Gn(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)if(i[n]!=t[n])return n;return i.length==t.length?"same":i.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Li(i){return!!(i&&i[Symbol.iterator])}function ps(i,t,e={},n=[]){const s=e&&e.xmlns,o=s?i.createElementNS(s,t):i.createElement(t);for(const r in e)o.setAttribute(r,e[r]);(hS(n)||!Li(n))&&(n=[n]);for(let r of n)hS(r)&&(r=i.createTextNode(r)),o.appendChild(r);return o}class _5{constructor(t,e){w(this,"_config");this._config=Object.create(null),e&&this.define(CS(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,s=!1){if(zs(e)){this._setObjectToTarget(t,e,s);return}const o=e.split(".");e=o.pop();for(const r of o)zs(t[r])||(t[r]=Object.create(null)),t=t[r];if(zs(n)){zs(t[e])||(t[e]=Object.create(null)),t=t[e],this._setObjectToTarget(t,n,s);return}s&&typeof t[e]<"u"||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const s of n){if(!zs(t[s])){t=null;break}t=t[s]}return t?CS(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(s=>{this._setToTarget(t,s,e[s],n)})}}function CS(i){return Tp(i,_H)}function _H(i){return Pr(i)||typeof i=="function"?i:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Mr(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xg(i){const t=Object.prototype.toString.apply(i);return t=="[object Window]"||t=="[object global]"}const v5=Yn(Tt());function Yn(i){if(!i)return v5;class t extends i{listenTo(n,s,o,r={}){if(Mr(n)||xg(n)||n instanceof he.window.EventTarget){const a={capture:!!r.useCapture,passive:!!r.usePassive},l=this._getProxyEmitter(n,a)||new vH(n,a);this.listenTo(l,s,o,r)}else super.listenTo(n,s,o,r)}stopListening(n,s,o){if(Mr(n)||xg(n)||n instanceof he.window.EventTarget){const r=this._getAllProxyEmitters(n);for(const a of r)this.stopListening(a,s,o)}else super.stopListening(n,s,o)}_getProxyEmitter(n,s){return aH(this,C5(n,s))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(n,s)).filter(s=>!!s)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Yn[i]=v5.prototype[i]});class vH extends Tt(){constructor(e,n){super();w(this,"_domNode");w(this,"_options");w(this,"_domListeners");p5(this,C5(e,n)),this._domNode=e,this._options=n}attach(e){if(this._domListeners&&this._domListeners[e])return;const n=this._createDomListener(e);this._domNode.addEventListener(e,n,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=n}detach(e){let n;this._domListeners[e]&&(!(n=this._events[e])||!n.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,n,s){this.attach(e),Tt().prototype._addEventListener.call(this,e,n,s)}_removeEventListener(e,n){Tt().prototype._removeEventListener.call(this,e,n),this.detach(e)}_createDomListener(e){const n=s=>{this.fire(e,s)};return n.removeListener=()=>{this._domNode.removeEventListener(e,n,this._options),delete this._domListeners[e]},n}}function CH(i){return i["data-ck-expando"]||(i["data-ck-expando"]=si())}function C5(i,t){let e=CH(i);for(const n of Object.keys(t).sort())t[n]&&(e+="-"+n);return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function TH(i){const t=[];let e=i;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xH(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function T5(i){const t=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function x5(i){if(!i.target)return null;const t=i.target.ownerDocument,e=i.clientX,n=i.clientY;let s=null;return t.caretRangeFromPoint&&t.caretRangeFromPoint(e,n)?s=t.caretRangeFromPoint(e,n):i.rangeParent&&(s=t.createRange(),s.setStart(i.rangeParent,i.rangeOffset),s.collapse(!0)),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Gt(i){return Object.prototype.toString.call(i)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xp(i){return Object.prototype.toString.apply(i)=="[object Range]"}function k5(i){return!i||!i.parentNode||i.offsetParent===he.document.body?null:i.offsetParent}const E5=["top","right","bottom","left","width","height"];class Pe{constructor(t){w(this,"top");w(this,"right");w(this,"bottom");w(this,"left");w(this,"width");w(this,"height");w(this,"_source");const e=xp(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),G_(t)||e)if(e){const n=Pe.getDomRangeRects(t);um(this,Pe.getBoundingRect(n))}else um(this,t.getBoundingClientRect());else if(xg(t)){const{innerWidth:n,innerHeight:s}=t;um(this,{top:0,right:n,bottom:s,left:0,width:n,height:s})}else um(this,t)}clone(){return new Pe(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const n=new Pe(e);return n._source=this._source,n}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(TS(t))return e;let n=t,s=t.parentNode||t.commonAncestorContainer,o;for(;s&&!TS(s);){const r=kH(s)==="visible";n instanceof HTMLElement&&xS(n)==="absolute"&&(o=n);const a=xS(s);if(r||o&&(a==="relative"&&r||a!=="relative")){n=s,s=s.parentNode;continue}const l=new Pe(s),u=e.getIntersection(l);if(u)u.getArea()<e.getArea()&&(e=u);else return null;n=s,s=s.parentNode}return e}isEqual(t){for(const e of E5)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=he.window,n=this.clone().moveBy(t,e);if(G_(n._source)){const s=k5(n._source);s&&EH(n,s)}return n}excludeScrollbarsAndBorders(){const t=this._source;let e,n,s;if(xg(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,s=t.getComputedStyle(t.document.documentElement).direction;else{const o=T5(t);e=t.offsetWidth-t.clientWidth-o.left-o.right,n=t.offsetHeight-t.clientHeight-o.top-o.bottom,s=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,s==="ltr"?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const s of n)e.push(new Pe(s));else{let s=t.startContainer;Gt(s)&&(s=s.parentNode);const o=new Pe(s.getBoundingClientRect());o.right=o.left,o.width=0,e.push(o)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const s of t)n++,e.left=Math.min(e.left,s.left),e.top=Math.min(e.top,s.top),e.right=Math.max(e.right,s.right),e.bottom=Math.max(e.bottom,s.bottom);return n==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Pe(e))}}function um(i,t){for(const e of E5)i[e]=t[e]}function TS(i){return G_(i)?i===i.ownerDocument.body:!1}function G_(i){return i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.getBoundingClientRect=="function"}function xS(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).position:"static"}function kH(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).overflow:"visible"}function EH(i,t){const e=new Pe(t),n=T5(t);let s=0,o=0;s-=e.left,o-=e.top,s+=t.scrollLeft,o+=t.scrollTop,s-=n.left,o-=n.top,i.moveBy(s,o)}var Vt;let E0=(Vt=class{constructor(t,e){w(this,"_element");w(this,"_callback");Vt._observerInstance||Vt._createObserver(),this._element=t,this._callback=e,Vt._addElementCallback(t,e),Vt._observerInstance.observe(t)}get element(){return this._element}destroy(){Vt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){Vt._elementCallbacks||(Vt._elementCallbacks=new Map);let n=Vt._elementCallbacks.get(t);n||(n=new Set,Vt._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=Vt._getElementCallbacks(t);n&&(n.delete(e),n.size||(Vt._elementCallbacks.delete(t),Vt._observerInstance.unobserve(t))),Vt._elementCallbacks&&!Vt._elementCallbacks.size&&(Vt._observerInstance=null,Vt._elementCallbacks=null)}static _getElementCallbacks(t){return Vt._elementCallbacks?Vt._elementCallbacks.get(t):null}static _createObserver(){Vt._observerInstance=new he.window.ResizeObserver(t=>{for(const e of t){const n=Vt._getElementCallbacks(e.target);if(n)for(const s of n)s(e)}})}},w(Vt,"_observerInstance",null),w(Vt,"_elementCallbacks",null),Vt);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function kS(i,t){i instanceof HTMLTextAreaElement&&(i.value=t),i.innerHTML=t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Nc(i){return t=>t+i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ud(i){let t=0;for(;i.previousSibling;)i=i.previousSibling,t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function S5(i,t,e){i.insertBefore(e,i.childNodes[t]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xd(i){return i&&i.nodeType===Node.COMMENT_NODE}function SH(i){try{he.document.createAttribute(i)}catch{return!1}return!0}function Vo(i){return i?Gt(i)?Vo(i.parentElement):i.getClientRects?!!i.getClientRects().length:!1:!1}function S0({element:i,target:t,positions:e,limiter:n,fitInViewport:s,viewportOffsetConfig:o}){Cg(t)&&(t=t()),Cg(n)&&(n=n());const r=k5(i),a=AH(o),l=new Pe(i),u=ES(t,a);let h;if(!u||!a.getIntersection(u))return null;const m={targetRect:u,elementRect:l,positionedElementAncestor:r,viewportRect:a};if(!n&&!s)h=new A5(e[0],m);else{if(n){const p=ES(n,a);p&&(m.limiterRect=p)}h=RH(e,m)}return h}function ES(i,t){const e=new Pe(i).getVisible();return e?e.getIntersection(t):null}function AH(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const t=new Pe(he.window);return t.top+=i.top,t.height-=i.top,t.bottom-=i.bottom,t.height-=i.bottom,t}function RH(i,t){const{elementRect:e}=t,n=e.getArea(),s=i.map(a=>new A5(a,t)).filter(a=>!!a.name);let o=0,r=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:u}=a;if(l===n)return a;const h=u**2+l**2;h>o&&(o=h,r=a)}return r}class A5{constructor(t,e){w(this,"name");w(this,"config");w(this,"_positioningFunctionCoordinates");w(this,"_options");w(this,"_cachedRect");w(this,"_cachedAbsoluteRect");const n=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!n)return;const{left:s,top:o,name:r,config:a}=n;this.name=r,this.config=a,this._positioningFunctionCoordinates={left:s,top:o},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function SS(i){const t=i.parentNode;t&&t.removeChild(i)}function $m(){const i=he.window.visualViewport;if(!i||!(Se.isiOS||Se.isSafari))return{left:0,top:0};const t=Math.max(Math.round(i.offsetLeft),0),e=Math.max(Math.round(i.offsetTop),0);return{left:t,top:e}}function IH({target:i,viewportOffset:t=0,ancestorOffset:e=0,alignToTop:n,forceScroll:s}){const o=A0(i);let r=o,a=null;for(t=VH(t);r;){let l;r==o?l=AS(i):l=AS(a),MH({parent:l,getRect:()=>Ry(i,r),alignToTop:n,ancestorOffset:e,forceScroll:s});let u=Ry(i,r);const h=Ry(l,r);if(u.height>h.height){const m=u.getIntersection(h);m&&(u=m)}if(PH({window:r,rect:u,viewportOffset:t,alignToTop:n,forceScroll:s}),r.parent!=r){if(a=r.frameElement,r=r.parent,!a)return}else r=null}}function PH({window:i,rect:t,alignToTop:e,forceScroll:n,viewportOffset:s}){const o=t.clone().moveBy(0,s.bottom),r=t.clone().moveBy(0,-s.top),a=new Pe(i).excludeScrollbarsAndBorders(),l=[r,o],u=e&&n,h=l.every(x=>a.contains(x));let{scrollX:m,scrollY:p}=i;const v=m,C=p;u?p-=a.top-t.top+s.top:h||(I5(r,a)?p-=a.top-t.top+s.top:R5(o,a)&&(e?p+=t.top-a.top-s.top:p+=t.bottom-a.bottom+s.bottom)),h||(P5(t,a)?m-=a.left-t.left+s.left:M5(t,a)&&(m+=t.right-a.right+s.right)),(m!=v||p!==C)&&i.scrollTo(m,p)}function MH({parent:i,getRect:t,alignToTop:e,forceScroll:n,ancestorOffset:s=0,limiterElement:o}){const r=A0(i),a=e&&n;let l,u,h;const m=o||r.document.body;for(;i!=m;)u=t(),l=new Pe(i).excludeScrollbarsAndBorders(),h=l.contains(u),a?i.scrollTop-=l.top-u.top+s:h||(I5(u,l)?i.scrollTop-=l.top-u.top+s:R5(u,l)&&(e?i.scrollTop+=u.top-l.top-s:i.scrollTop+=u.bottom-l.bottom+s)),h||(P5(u,l)?i.scrollLeft-=l.left-u.left+s:M5(u,l)&&(i.scrollLeft+=u.right-l.right+s)),i=i.parentNode}function R5(i,t){return i.bottom>t.bottom}function I5(i,t){return i.top<t.top}function P5(i,t){return i.left<t.left}function M5(i,t){return i.right>t.right}function A0(i){return xp(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function AS(i){if(xp(i)){let t=i.commonAncestorContainer;return Gt(t)&&(t=t.parentNode),t}else return i.parentNode}function Ry(i,t){const e=A0(i),n=new Pe(i);if(e===t)return n;{let s=e;for(;s!=t;){const o=s.frameElement,r=new Pe(o).excludeScrollbarsAndBorders();n.moveBy(r.left,r.top),s=s.parent}}return n}function VH(i){return typeof i=="number"?{top:i,bottom:i,left:i,right:i}:i}const NH={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},OH={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},RS={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},Ue=UH(),DH=Object.fromEntries(Object.entries(Ue).map(([i,t])=>{let e;return t in RS?e=RS[t]:e=i.charAt(0).toUpperCase()+i.slice(1),[t,e]}));function Cc(i){let t;if(typeof i=="string"){if(t=Ue[i.toLowerCase()],!t)throw new N("keyboard-unknown-key",null,{key:i})}else t=i.keyCode+(i.altKey?Ue.alt:0)+(i.ctrlKey?Ue.ctrl:0)+(i.shiftKey?Ue.shift:0)+(i.metaKey?Ue.cmd:0);return t}function R0(i){return typeof i=="string"&&(i=zH(i)),i.map(t=>typeof t=="string"?BH(t):t).reduce((t,e)=>e+t,0)}function kg(i,t){let e=R0(i);const n=Se.isMac||Se.isiOS;return Object.entries(n?NH:OH).reduce((r,[a,l])=>((e&Ue[a])!=0&&(e&=~Ue[a],r+=l),r),"")+(e?DH[e]:"")}function LH(i){return i==Ue.arrowright||i==Ue.arrowleft||i==Ue.arrowup||i==Ue.arrowdown}function I0(i,t){const e=t==="ltr";switch(i){case Ue.arrowleft:return e?"left":"right";case Ue.arrowright:return e?"right":"left";case Ue.arrowup:return"up";case Ue.arrowdown:return"down"}}function BH(i){if(i.endsWith("!"))return Cc(i.slice(0,-1));const t=Cc(i);return(Se.isMac||Se.isiOS)&&t==Ue.ctrl?Ue.cmd:t}function FH(i,t){const e=I0(i,t);return e==="down"||e==="right"}function UH(){const i={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);i[e.toLowerCase()]=t}for(let t=48;t<=57;t++)i[t-48]=t;for(let t=112;t<=123;t++)i["f"+(t-111)]=t;return Object.assign(i,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),i}function zH(i){return i.split("+").map(t=>t.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HH=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function IS(i){return HH.includes(i)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bn(i){return Array.isArray(i)?i:[i]}/* istanbul ignore else -- @preserve */he.window.CKEDITOR_TRANSLATIONS||(he.window.CKEDITOR_TRANSLATIONS={});function WH(i,t,e=1,n){if(typeof e!="number")throw new N("translation-service-quantity-not-a-number",null,{quantity:e});const s=n||he.window.CKEDITOR_TRANSLATIONS,o=$H(s);o===1&&(i=Object.keys(s)[0]);const r=t.id||t.string;if(o===0||!GH(i,r,s))return e!==1?t.plural:t.string;const a=s[i].dictionary,l=s[i].getPluralForm||(m=>m===1?0:1),u=a[r];if(typeof u=="string")return u;const h=Number(l(e));return u[h]}function qH(i){return Array.isArray(i)?i.reduce((t,e)=>x0(t,e)):i}function GH(i,t,e){return!!e[i]&&!!e[i].dictionary[t]}function $H(i){return Object.keys(i).length}class jH{constructor({uiLanguage:t="en",contentLanguage:e,translations:n}={}){w(this,"uiLanguage");w(this,"uiLanguageDirection");w(this,"contentLanguage");w(this,"contentLanguageDirection");w(this,"t");w(this,"translations");this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=IS(this.uiLanguage),this.contentLanguageDirection=IS(this.contentLanguage),this.translations=qH(n),this.t=(s,o)=>this._t(s,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){e=bn(e),typeof t=="string"&&(t={string:t});const s=!!t.plural?e[0]:1,o=WH(this.uiLanguage,t,s,this.translations);return KH(o,e)}}function KH(i,t){return i.replace(/%(\d+)/g,(e,n)=>n<t.length?t[n]:e)}class En extends Tt(){constructor(e={},n={}){super();w(this,"_items");w(this,"_itemMap");w(this,"_idProperty");w(this,"_bindToCollection");w(this,"_bindToExternalToInternalMap");w(this,"_bindToInternalToExternalMap");w(this,"_skippedIndexesFromExternal");const s=Li(e);if(s||(n=e),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const o of e)this._items.push(o),this._itemMap.set(this._getItemIdBeforeAdding(o),o)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,n){return this.addMany([e],n)}addMany(e,n){if(n===void 0)n=this._items.length;else if(n>this._items.length||n<0)throw new N("collection-add-item-invalid-index",this);let s=0;for(const o of e){const r=this._getItemIdBeforeAdding(o),a=n+s;this._items.splice(a,0,o),this._itemMap.set(r,o),this.fire("add",o,a),s++}return this.fire("change",{added:e,removed:[],index:n}),this}get(e){let n;if(typeof e=="string")n=this._itemMap.get(e);else if(typeof e=="number")n=this._items[e];else throw new N("collection-get-invalid-arg",this);return n||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const n=this._idProperty,s=e[n];return s&&this._itemMap.has(s)}}getIndex(e){let n;return typeof e=="string"?n=this._itemMap.get(e):n=e,n?this._items.indexOf(n):-1}remove(e){const[n,s]=this._remove(e);return this.fire("change",{added:[],removed:[n],index:s}),n}map(e,n){return this._items.map(e,n)}forEach(e,n){this._items.forEach(e,n)}find(e,n){return this._items.find(e,n)}filter(e,n){return this._items.filter(e,n)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new N("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:n=>{this._setUpBindToBinding(s=>new n(s))},using:n=>{typeof n=="function"?this._setUpBindToBinding(n):this._setUpBindToBinding(s=>s[n])}}}_setUpBindToBinding(e){const n=this._bindToCollection,s=(o,r,a)=>{const l=n._bindToCollection==this,u=n._bindToInternalToExternalMap.get(r);if(l&&u)this._bindToExternalToInternalMap.set(r,u),this._bindToInternalToExternalMap.set(u,r);else{const h=e(r);if(!h){this._skippedIndexesFromExternal.push(a);return}let m=a;for(const p of this._skippedIndexesFromExternal)a>p&&m--;for(const p of n._skippedIndexesFromExternal)m>=p&&m++;this._bindToExternalToInternalMap.set(r,h),this._bindToInternalToExternalMap.set(h,r),this.add(h,m);for(let p=0;p<n._skippedIndexesFromExternal.length;p++)m<=n._skippedIndexesFromExternal[p]&&n._skippedIndexesFromExternal[p]++}};for(const o of n)s(null,o,n.getIndex(o));this.listenTo(n,"add",s),this.listenTo(n,"remove",(o,r,a)=>{const l=this._bindToExternalToInternalMap.get(r);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((u,h)=>(a<h&&u.push(h-1),a>h&&u.push(h),u),[])})}_getItemIdBeforeAdding(e){const n=this._idProperty;let s;if(n in e){if(s=e[n],typeof s!="string")throw new N("collection-add-invalid-id",this);if(this.get(s))throw new N("collection-add-item-already-exists",this)}else e[n]=s=si();return s}_remove(e){let n,s,o,r=!1;const a=this._idProperty;if(typeof e=="string"?(s=e,o=this._itemMap.get(s),r=!o,o&&(n=this._items.indexOf(o))):typeof e=="number"?(n=e,o=this._items[n],r=!o,o&&(s=o[a])):(o=e,s=o[a],n=this._items.indexOf(o),r=n==-1||!this._itemMap.get(s)),r)throw new N("collection-remove-404",this);this._items.splice(n,1),this._itemMap.delete(s);const l=this._bindToInternalToExternalMap.get(o);return this._bindToInternalToExternalMap.delete(o),this._bindToExternalToInternalMap.delete(l),this.fire("remove",o,n),[o,n]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ln(i){const t=i.next();return t.done?null:t.value}class yt extends Yn(wt()){constructor(){super();w(this,"_elements",new Set);w(this,"_externalViews",new Set);w(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(MS(e))this._addElement(e);else if(PS(e))this._addView(e);else{if(!e.element)throw new N("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){MS(e)?this._removeElement(e):PS(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new N("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const n=this.externalViews.find(s=>ZH(e,s));n?this._focus(n.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(s=>s.contains(document.activeElement))||this.externalViews.find(s=>s.focusTracker.isFocused&&!s.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function PS(i){return"focusTracker"in i&&i.focusTracker instanceof yt}function MS(i){return Pr(i)}function ZH(i,t){return VS(i,t)?!0:!!t.focusTracker.externalViews.find(e=>VS(i,e))}function VS(i,t){return!!t.element&&t.element.contains(document.activeElement)&&i.contains(t.element)}class Ot{constructor(){w(this,"_listener");this._listener=new(Yn())}listenTo(t){this._listener.listenTo(t,"keydown",(e,n)=>{this._listener.fire("_keydown:"+Cc(n),n)})}set(t,e,n={}){const s=R0(t),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(r,a)=>{n.filter&&!n.filter(a)||(e(a,()=>{a.preventDefault(),a.stopPropagation(),r.stop()}),r.return=!0)},{priority:o})}press(t){return!!this._listener.fire("_keydown:"+Cc(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function YH(i){const t=new Map;for(const e in i)t.set(e,i[e]);return t}function Cs(i){return Li(i)?new Map(i):YH(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function NS(i,t,e){const n=i.length,s=t.length;for(let o=n-1;o>=e;o--)i[o+s]=i[o];for(let o=0;o<s;o++)i[e+o]=t[o]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function P0(i,t){let e;function n(...s){n.cancel(),e=setTimeout(()=>i(...s),t)}return n.cancel=()=>{clearTimeout(e)},n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function M0(i){try{if(!i.startsWith("ey"))return null;const t=atob(i.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(t)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function JH(){const i=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;i[t]=e}return i}function XH(i){const t=Array.isArray(i)?i:[i],e=JH();let n=-1;const s=t.map(o=>Array.isArray(o)?o.join(""):String(o)).join("");for(let o=0;o<s.length;o++){const r=s.charCodeAt(o);n=n>>>8^e[(n^r)&255]}return n=(n^-1)>>>0,n.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function QH(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function eW(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function tW(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function V0(i,t){return eW(i.charAt(t-1))&&tW(i.charAt(t))}function N0(i,t){return QH(i.charAt(t))}const nW=iW();function V5(i,t){const e=String(i).matchAll(nW);return Array.from(e).some(n=>n.index<t&&t<n.index+n[0].length)}function iW(){const i=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],t=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+i.map(s=>s.source).join("|")+")",n=`${t}|${e}(?:‍${e})*`;return new RegExp(n,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Gu=new WeakMap;let OS=!1;function O0({view:i,element:t,text:e,isDirectHost:n=!0,keepOnFocus:s=!1}){const o=i.document;Gu.has(o)||(Gu.set(o,new Map),o.registerPostFixer(a=>Iy(Gu.get(o),a)),o.on("change:isComposing",()=>{i.change(a=>Iy(Gu.get(o),a))},{priority:"high"})),t.is("editableElement")&&t.on("change:placeholder",(a,l,u)=>r(u)),t.placeholder?r(t.placeholder):e&&r(e),e&&cW();function r(a){const l={text:a,isDirectHost:n,keepOnFocus:s,hostElement:n?t:null};Gu.get(o).set(t,l),i.change(u=>Iy([[t,l]],u))}}function sW(i,t){return t.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",t),!0)}function oW(i,t){return t.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",t),!0):!1}function rW(i,t){if(!i.isAttached()||aW(i))return!1;const e=i.document,s=e.selection.anchor;return e.isComposing&&s&&s.parent===i?!1:t||!e.isFocused?!0:!!s&&s.parent!==i}function aW(i){for(const t of i.getChildren())if(!t.is("uiElement"))return!0;return!1}function Iy(i,t){const e=[];let n=!1;for(const[s,o]of i)o.isDirectHost&&(e.push(s),DS(t,s,o)&&(n=!0));for(const[s,o]of i){if(o.isDirectHost)continue;const r=lW(s);r&&(e.includes(r)||(o.hostElement=r,DS(t,s,o)&&(n=!0)))}return n}function DS(i,t,e){const{text:n,isDirectHost:s,hostElement:o}=e;let r=!1;return o.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,o),r=!0),(s||t.childCount==1)&&rW(o,e.keepOnFocus)?sW(i,o)&&(r=!0):oW(i,o)&&(r=!0),r}function lW(i){if(i.childCount){const t=i.getChild(0);if(t.is("element")&&!t.is("uiElement")&&!t.is("attributeElement"))return t}return null}function cW(){OS||Ze("enableplaceholder-deprecated-text-option"),OS=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Wa=class{is(){throw new Error("is() method is abstract")}},qa=class extends Tt(Wa){constructor(e){super();w(this,"document");w(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new N("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.index),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),o=e.getAncestors(n);let r=0;for(;s[r]==o[r]&&s[r];)r++;return r===0?null:s[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),o=Gn(n,s);switch(o){case"prefix":return!0;case"extension":return!1;default:return n[o]<s[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s),this.parent&&this.parent._fireChange(e,n,s)}toJSON(){const e=w0(this);return delete e.parent,e}};qa.prototype.is=function(i){return i==="node"||i==="view:node"};let On=class $_ extends qa{constructor(e,n){super(e);w(this,"_textData");this._textData=n}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof $_?this===e||this.data===e.data:!1}_clone(){return new $_(this.document,this.data)}};On.prototype.is=function(i){return i==="$text"||i==="view:$text"||i==="text"||i==="view:text"||i==="node"||i==="view:node"};let Co=class extends Wa{constructor(e,n,s){super();w(this,"textNode");w(this,"data");w(this,"offsetInText");if(this.textNode=e,n<0||n>e.data.length)throw new N("view-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.data.length)throw new N("view-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const n=[];let s=e.includeSelf?this.textNode:this.parent;for(;s!==null;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}};Co.prototype.is=function(i){return i==="$textProxy"||i==="view:$textProxy"||i==="textProxy"||i==="view:textProxy"};class Eg{constructor(){w(this,"_consumables",new Map)}add(t,e){let n;if(t.is("$text")||t.is("documentFragment")){this._consumables.set(t,!0);return}this._consumables.has(t)?n=this._consumables.get(t):(n=new uW(t),this._consumables.set(t,n)),n.add(e?dd(e):t._getConsumables())}test(t,e){const n=this._consumables.get(t);return n===void 0?null:t.is("$text")||t.is("documentFragment")?n:n.test(dd(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return this.test(t,e)?(this._consumables.set(t,!1),!0):!1;const n=this._consumables.get(t);return n===void 0?!1:n.consume(dd(e))}revert(t,e){const n=this._consumables.get(t);n!==void 0&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(dd(e)))}static createFrom(t,e){if(e||(e=new Eg),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const n of t.getChildren())Eg.createFrom(n,e)}return e}}class uW{constructor(t){w(this,"element");w(this,"_canConsumeName",null);w(this,"_attributes",new Map);this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes)if(n){let s=this._attributes.get(e);(!s||typeof s=="boolean")&&(s=new Map,this._attributes.set(e,s)),s.set(n,!0)}else{if(e=="style"||e=="class")throw new N("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===void 0)return null;if(s===!1)return!1;if(s!==!0){if(n){const o=s.get(n);if(o===void 0)return null;if(!o)return!1}else for(const o of s.values())if(!o)return!1}}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(typeof s=="boolean")for(const[o]of this.element._getConsumables(e,n).attributes)this._attributes.set(o,!1);else if(n)for(const[,o]of this.element._getConsumables(e,n).attributes)s.set(o,!1);else for(const o of s.keys())s.set(o,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===!1){this._attributes.set(e,!0);continue}if(!(s===void 0||s===!0))if(n)s.get(n)===!1&&s.set(n,!0);else for(const o of s.keys())s.set(o,!0)}}}function dd(i){const t=[];return"attributes"in i&&i.attributes&&Py(t,i.attributes),"classes"in i&&i.classes&&Py(t,i.classes,"class"),"styles"in i&&i.styles&&Py(t,i.styles,"style"),{name:i.name||!1,attributes:t}}function Py(i,t,e){if(typeof t=="string"){i.push(e?[e,t]:[t]);return}for(const n of t)Array.isArray(n)?i.push(n):i.push(e?[e,n]:[n])}class Ts{constructor(...t){w(this,"_patterns",[]);this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const n of this._patterns){const s=this._isElementMatching(e,n);if(s)return{element:e,pattern:n,match:s}}return null}matchAll(...t){const e=[];for(const n of t)for(const s of this._patterns){const o=this._isElementMatching(n,s);o&&e.push({element:n,pattern:s,match:o})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}_isElementMatching(t,e){if(typeof e=="function"){const o=e(t);return!o||typeof o!="object"?o:dd(o)}const n={};if(e.name&&(n.name=dW(e.name,t.name),!n.name))return null;const s=[];return e.attributes&&!hW(e.attributes,t,s)||e.classes&&!fW(e.classes,t,s)||e.styles&&!mW(e.styles,t,s)?null:(s.length&&(n.attributes=s),n)}}function Sg(i,t){return i===!0||i===t||i instanceof RegExp&&!!String(t).match(i)}function dW(i,t){return i instanceof RegExp?!!t.match(i):i===t}function D0(i,t){if(Array.isArray(i))return i.map(n=>typeof n!="object"||n instanceof RegExp?t?[t,n,!0]:[n,!0]:((n.key===void 0||n.value===void 0)&&Ze("matcher-pattern-missing-key-or-value",n),t?[t,n.key,n.value]:[n.key,n.value]));if(typeof i!="object"||i instanceof RegExp)return[t?[t,i,!0]:[i,!0]];const e=[];for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.push(t?[t,n,i[n]]:[n,i[n]]);return e}function hW(i,t,e){let n;return typeof i=="object"&&!(i instanceof RegExp)&&!Array.isArray(i)?(i.style!==void 0&&Ze("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&Ze("matcher-pattern-deprecated-attributes-class-key",i)):n=["class","style"],t._collectAttributesMatch(D0(i),e,n)}function fW(i,t,e){return t._collectAttributesMatch(D0(i,"class"),e)}function mW(i,t,e){return t._collectAttributesMatch(D0(i,"style"),e)}class kd{constructor(t){w(this,"_styles");w(this,"_cachedStyleNames",null);w(this,"_cachedExpandedStyleNames",null);w(this,"_styleProcessor");this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=pW(t);for(const[n,s]of e)this._styleProcessor.toNormalizedForm(n,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);return Array.isArray(n)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,is(t))for(const[n,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(n,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){for(const e of bn(t)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const n=j_(e);z9(this._styles,n),delete this._styles[e],this._cleanEmptyObjectsOnPath(n)}}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!is(this._styles[t]))return this._styles[t];const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);if(Array.isArray(n))return n[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||(this._cachedExpandedStyleNames=this._styleProcessor.getStyleNames(this._styles)),this._cachedExpandedStyleNames):(this._cachedStyleNames||(this._cachedStyleNames=this.getStylesEntries().map(([e])=>e)),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const n=[];for(const s of this.getStyleNames(!0))if(Sg(t,s)){if(e===!0){n.push(s);continue}const o=this.getAsString(s);Sg(e,o)&&n.push(s)}return n.length?n:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const n of this._styleProcessor.getRelatedStyles(t))e.push(n)}else for(const n of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(n))e.push(s);e.push(n)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const s=e.splice(0,e.length-1).join("."),o=Ir(this._styles,s);if(!o)return;!Object.keys(o).length&&this.remove(s)}}class gW{constructor(){w(this,"_normalizers");w(this,"_extractors");w(this,"_reducers");w(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(is(e)){My(n,j_(t),e);return}if(this._normalizers.has(t)){const s=this._normalizers.get(t),{path:o,value:r}=s(e);My(n,o,r)}else My(n,t,e)}getNormalized(t,e){if(!t)return x0({},e);if(e[t]!==void 0)return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if(typeof n=="string")return Ir(e,n);const s=n(t,e);if(s)return s}return Ir(e,j_(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);return n===void 0?[]:this._reducers.has(t)?this._reducers.get(t)(n):[[t,n]]}getStyleNames(t){const e=new Set;for(const n of this._consumables.keys()){const s=this.getNormalized(n,t);s&&(typeof s!="object"||Object.keys(s).length)&&e.add(n)}for(const n of Object.keys(t))e.add(n);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function pW(i){let t=null,e=0,n=0,s=null;const o=new Map;if(i==="")return o;i.charAt(i.length-1)!=";"&&(i=i+";");for(let r=0;r<i.length;r++){const a=i.charAt(r);if(t===null)switch(a){case":":s||(s=i.substr(e,r-e),n=r+1);break;case'"':case"'":t=a;break;case";":{const l=i.substr(n,r-n);s&&o.set(s.trim(),l.trim()),s=null,e=r+1;break}}else a===t&&(t=null)}return o}function j_(i){return i.replace("-",".")}function My(i,t,e){let n=e;is(e)&&(n=x0({},Ir(i,t),e)),r5(i,t,n)}class Vy{constructor(){w(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of bn(t))e&&this._set.add(e)}remove(t){for(const e of bn(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(t===!0){for(const n of this._set.keys())e.push(n);return e}if(typeof t=="string"){for(const n of t.split(/\s+/))if(this._set.has(n))e.push(n);else return;return e}for(const n of this._set.keys())n.match(t)&&e.push(n);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}let No=class N5 extends qa{constructor(e,n,s,o){super(e);w(this,"name");w(this,"_unsafeAttributesToRender",[]);w(this,"_attrs");w(this,"_children");w(this,"_customProperties",new Map);this.name=n,this._attrs=this._parseAttributes(s),this._children=[],o&&this._insertChild(0,o)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,n]of this._attrs.entries())yield[e,String(n)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,n){return this._attrs.has(e)?n!==void 0?Wl(this.name,e)||$u(this.name,e)?this._attrs.get(e).has(n):this._attrs.get(e)===n:!0:!1}isSimilar(e){if(!(e instanceof N5))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[n,s]of this._attrs){const o=e._attrs.get(n);if(o===void 0)return!1;if(typeof s=="string"||typeof o=="string"){if(o!==s)return!1}else if(!s.isSimilar(o))return!1}return!0}hasClass(...e){for(const n of e)if(!this._classes||!this._classes.has(n))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],n=e[Symbol.iterator]();return Object.assign(e,{next:n.next.bind(n)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const n of e)if(!this._styles||!this._styles.has(n))return!1;return!0}findAncestor(...e){const n=new Ts(...e);let s=this.parent;for(;s&&!s.is("documentFragment");){if(n.match(s))return s;s=s.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",n=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([o])=>o!="style"&&o!="class").map(o=>`${o[0]}="${o[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(n?` style="${n}"`:"")+(s==""?"":` ${s}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const n=[];if(e)for(const o of this.getChildren())n.push(o._clone(e));const s=new this.constructor(this.document,this.name,this._attrs,n);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const o=bW(this.document,n);for(const r of o)r.parent!==null&&r._remove(),r.parent=this,r.document=this.document,this._children.splice(e,0,r),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_setAttribute(e,n,s=!0){if(this._fireChange("attributes",this),Wl(this.name,e)||$u(this.name,e)){let o=this._attrs.get(e);o||(o=Wl(this.name,e)?new kd(this.document.stylesProcessor):new Vy,this._attrs.set(e,o)),s?o.setTo(String(n)):Wl(this.name,e)?Array.isArray(n)?o.set(n[0],n[1]):o.set(n):o.set(typeof n=="string"?n.split(/\s+/):n)}else this._attrs.set(e,String(n))}_removeAttribute(e,n){if(this._fireChange("attributes",this),n!==void 0&&(Wl(this.name,e)||$u(this.name,e))){const s=this._attrs.get(e);return s?($u(this.name,e)&&typeof n=="string"&&(n=n.split(/\s+/)),s.remove(n),s.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,n){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,n],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,n,s){for(const[o,r,a]of e){let l=!1,u=!1;for(const[h,m]of this._attrs)if(!(s&&s.includes(h)||!Sg(o,h)))if(l=!0,typeof m=="string"){if(Sg(r,m))n.push([h]),u=!0;else if(!(o instanceof RegExp))return!1}else{const p=m._getTokensMatch(r,a||!0);if(p){u=!0;for(const v of p)n.push([h,v])}else if(!(o instanceof RegExp))return!1}if(!l||!u)return!1}return!0}_getConsumables(e,n){const s=[];if(e){const o=this._attrs.get(e);if(o!==void 0)if(typeof o=="string")s.push([e]);else for(const r of o._getConsumables(n))s.push([e,r])}else for(const[o,r]of this._attrs)if(typeof r=="string")s.push([o]);else for(const a of r._getConsumables())s.push([o,a]);return{name:!e,attributes:s}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const o=this._attrs.get(n);if(o!==void 0){if(typeof o=="string"||typeof s=="string"){if(o!==s)return!1}else if(!o._canMergeFrom(s))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const o=this._attrs.get(n);o===void 0||typeof o=="string"||typeof s=="string"?this._setAttribute(n,s):o._mergeFrom(s)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const o=this._attrs.get(n);if(o===void 0)return!1;if(typeof o=="string"||typeof s=="string"){if(o!==s)return!1}else if(!o._isMatching(s))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const o=this._attrs.get(n);typeof o=="string"||typeof s=="string"?this._attrs.delete(n):(o.remove(s.keys()),o.isEmpty&&this._attrs.delete(n))}}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const n=Cs(e);for(const[s,o]of n)if(o===null)n.delete(s);else if(Wl(this.name,s)){const r=o instanceof kd?o._clone():new kd(this.document.stylesProcessor).setTo(String(o));n.set(s,r)}else if($u(this.name,s)){const r=o instanceof Vy?o._clone():new Vy().setTo(String(o));n.set(s,r)}else typeof o!="string"&&n.set(s,String(o));return n}};No.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="view:element"):i==="element"||i==="view:element"||i==="node"||i==="view:node"};function bW(i,t){if(typeof t=="string")return[new On(i,t)];Li(t)||(t=[t]);const e=[];for(const n of t)typeof n=="string"?e.push(new On(i,n)):n instanceof Co?e.push(new On(i,n.data)):e.push(n);return e}function $u(i,t){return t=="class"||i=="a"&&t=="rel"}function Wl(i,t){return t=="style"}class Yd extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=wW}}Yd.prototype.is=function(i,t){return t?t===this.name&&(i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function wW(){const i=[...this.getChildren()],t=i[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of i)if(!e.is("uiElement"))return null;return this.childCount}class kp extends wt(Yd){constructor(t,e,n,s){super(t,e,n,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",o=>o&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}kp.prototype.is=function(i,t){return t?t===this.name&&(i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};const LS=Symbol("rootName");class O5 extends kp{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(LS)}set rootName(t){this._setCustomProperty(LS,t)}set _name(t){this.name=t}}O5.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};let xa=class{constructor(t={}){w(this,"direction");w(this,"boundaries");w(this,"singleCharacters");w(this,"shallow");w(this,"ignoreElementEnd");w(this,"_position");w(this,"_boundaryStartParent");w(this,"_boundaryEndParent");if(!t.boundaries&&!t.startPosition)throw new N("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new N("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=ge._createAt(t.startPosition):this._position=ge._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n;do n=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=n)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(n&&n.is("view:$text")){if(t.isAtEnd)return this._position=ge._createAfter(n),this._next();s=n.data[t.offset]}else s=n.getChild(t.offset);if(typeof s=="string"){let o;this.singleCharacters?o=1:o=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const r=new Co(n,t.offset,o);return t.offset+=o,this._position=t,this._formatReturnValue("text",r,e,t,o)}if(s&&s.is("view:element")){if(!this.shallow)t=new ge(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new ge(s,0),this._position=t,this._next();let o=s.data.length,r;return s==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new Co(s,0,o),t=ge._createAfter(r)):(r=new Co(s,0,s.data.length),t.offset++),this._position=t,this._formatReturnValue("text",r,e,t,o)}return t=ge._createAfter(n),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(n.is("view:$text")){if(t.isAtStart)return this._position=ge._createBefore(n),this._previous();s=n.data[t.offset-1]}else s=n.getChild(t.offset-1);if(typeof s=="string"){let o;if(this.singleCharacters)o=1;else{const a=n===this._boundaryStartParent?this.boundaries.start.offset:0;o=t.offset-a}t.offset-=o;const r=new Co(n,t.offset,o);return this._position=t,this._formatReturnValue("text",r,e,t,o)}if(s&&s.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",s,e,t,1)):(t=new ge(s,s.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,e,t));if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new ge(s,s.data.length),this._position=t,this._previous();let o=s.data.length,r;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;r=new Co(s,a,s.data.length-a),o=r.data.length,t=ge._createBefore(r)}else r=new Co(s,0,s.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",r,e,t,o)}return t=ge._createBefore(n),this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,s,o){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=ge._createAfter(e.textNode),this._position=s):n=ge._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=ge._createBefore(e.textNode),this._position=s):n=ge._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:s,length:o}}}},ge=class wo extends Wa{constructor(e,n){super();w(this,"parent");w(this,"offset");this.parent=e,this.offset=n}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof kp);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const n=wo._createAt(this),s=n.offset+e;return n.offset=s<0?0:s,n}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new xa(n);return s.skip(e),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let o=0;for(;n[o]==s[o]&&n[o];)o++;return o===0?null:n[o-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const n=this.parent.is("node")?this.parent.getPath():[],s=e.parent.is("node")?e.parent.getPath():[];n.push(this.offset),s.push(e.offset);const o=Gn(n,s);switch(o){case"prefix":return"before";case"extension":return"after";default:return n[o]<s[o]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new xa(e)}clone(){return new wo(this.parent,this.offset)}static _createAt(e,n){if(e instanceof wo)return new this(e.parent,e.offset);{const s=e;if(n=="end")n=s.is("$text")?s.data.length:s.childCount;else{if(n=="before")return this._createBefore(s);if(n=="after")return this._createAfter(s);if(n!==0&&!n)throw new N("view-createpositionat-offset-required",s)}return new wo(s,n)}}static _createAfter(e){if(e.is("$textProxy"))return new wo(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new N("view-position-after-root",e,{root:e});return new wo(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new wo(e.textNode,e.offsetInText);if(!e.parent)throw new N("view-position-before-root",e,{root:e});return new wo(e.parent,e.index)}};ge.prototype.is=function(i){return i==="position"||i==="view:position"};let Ke=class br extends Wa{constructor(e,n=null){super();w(this,"start");w(this,"end");this.start=e.clone(),this.end=n?n.clone():e.clone()}*[Symbol.iterator](){yield*new xa({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(dm,{direction:"backward"}),n=this.end.getLastMatchingPosition(dm);return e.parent.is("$text")&&e.isAtStart&&(e=ge._createBefore(e.parent)),n.parent.is("$text")&&n.isAtEnd&&(n=ge._createAfter(n.parent)),new br(e,n)}getTrimmed(){let e=this.start.getLastMatchingPosition(dm);if(e.isAfter(this.end)||e.isEqual(this.end))return new br(e,e);let n=this.end.getLastMatchingPosition(dm,{direction:"backward"});const s=e.nodeAfter,o=n.nodeBefore;return s&&s.is("$text")&&(e=new ge(s,0)),o&&o.is("$text")&&(n=new ge(o,o.data.length)),new br(e,n)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&o}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new br(this.start,e.start)),this.containsPosition(e.end)&&n.push(new br(e.end,this.end))):n.push(this.clone()),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new br(n,s)}return null}getWalker(e={}){return e.boundaries=this,new xa(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,n=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(n=this.end.parent.previousSibling),e&&e.is("element")&&e===n?e:null}clone(){return new br(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new xa(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new xa(e);yield n.position;for(const s of n)yield s.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,n,s,o){return new this(new ge(e,n),new ge(s,o))}static _createFromPositionAndShift(e,n){const s=e,o=e.getShiftedBy(n);return n>0?new this(s,o):new this(o,s)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const n=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(ge._createBefore(e),n)}};Ke.prototype.is=function(i){return i==="range"||i==="view:range"};function dm(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}let Ro=class D5 extends Tt(Wa){constructor(...e){super();w(this,"_ranges");w(this,"_lastRangeBackward");w(this,"_isFake");w(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?e.clone():null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const o of e._ranges)if(n.isEqual(o)){s=!0;break}if(!s)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const n=q_(this.getRanges()),s=q_(e.getRanges());if(n!=s)return!1;if(n==0)return!0;for(let o of this.getRanges()){o=o.getTrimmed();let r=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),o.start.isEqual(a.start)&&o.end.isEqual(a.end)){r=!0;break}if(!r)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[n,s,o]=e;if(typeof s=="object"&&(o=s,s=void 0),n===null)this._setRanges([]),this._setFakeOptions(o);else if(n instanceof D5||n instanceof L0)this._setRanges(n.getRanges(),n.isBackward),this._setFakeOptions({fake:n.isFake,label:n.fakeSelectionLabel});else if(n instanceof Ke)this._setRanges([n],o&&o.backward),this._setFakeOptions(o);else if(n instanceof ge)this._setRanges([new Ke(n)]),this._setFakeOptions(o);else if(n instanceof qa){const r=!!o&&!!o.backward;let a;if(s===void 0)throw new N("view-selection-setto-required-second-parameter",this);s=="in"?a=Ke._createIn(n):s=="on"?a=Ke._createOn(n):a=new Ke(ge._createAt(n,s)),this._setRanges([a],r),this._setFakeOptions(o)}else if(Li(n))this._setRanges(n,o&&o.backward),this._setFakeOptions(o);else throw new N("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,n){if(this.anchor===null)throw new N("view-selection-setfocus-no-ranges",this);const s=ge._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.pop(),s.compareWith(o)=="before"?this._addRange(new Ke(s,o),!0):this._addRange(new Ke(o,s)),this.fire("change")}_setRanges(e,n=!1){e=Array.from(e),this._ranges=[];for(const s of e)this._addRange(s);this._lastRangeBackward=!!n}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,n=!1){if(!(e instanceof Ke))throw new N("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!n}_pushRange(e){for(const n of this._ranges)if(e.isIntersecting(n))throw new N("view-selection-range-intersects",this,{addedRange:e,intersectingRange:n});this._ranges.push(new Ke(e.start,e.end))}};Ro.prototype.is=function(i){return i==="selection"||i==="view:selection"};let L0=class extends Tt(Wa){constructor(...e){super();w(this,"_selection");this._selection=new Ro,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,n){this._selection.setFocus(e,n)}};L0.prototype.is=function(i){return i==="selection"||i=="documentSelection"||i=="view:selection"||i=="view:documentSelection"};class Ga extends Mo{constructor(e,n,s){super(e,n);w(this,"startRange");w(this,"_eventPhase");w(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Ny=Symbol("bubbling contexts");function K_(i){class t extends i{fire(n,...s){try{const o=n instanceof Mo?n:new Mo(this,n),r=Oy(this);if(!r.size)return;if(ju(o,"capturing",this),ql(r,"$capture",o,...s))return o.return;const a=o.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,u=l?!!L5(r,l):!1;let h=l||yW(a);if(ju(o,"atTarget",h),!u){if(ql(r,"$text",o,...s))return o.return;ju(o,"bubbling",h)}for(;h;){if(h.is("rootElement")){if(ql(r,"$root",o,...s))return o.return}else if(h.is("element")&&ql(r,h.name,o,...s))return o.return;if(ql(r,h,o,...s))return o.return;h=h.parent,ju(o,"bubbling",h)}return ju(o,"bubbling",this),ql(r,"$document",o,...s),o.return}catch(o){/* istanbul ignore next -- @preserve */N.rethrowUnexpectedError(o,this)}}_addEventListener(n,s,o){const r=bn(o.context||"$document"),a=Oy(this);for(const l of r){let u=a.get(l);u||(u=new(Tt()),a.set(l,u)),this.listenTo(u,n,s,o)}}_removeEventListener(n,s){const o=Oy(this);for(const r of o.values())this.stopListening(r,n,s)}}return t}{const i=K_(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{K_[t]=i.prototype[t]})}function ju(i,t,e){i instanceof Ga&&(i._eventPhase=t,i._currentTarget=e)}function ql(i,t,e,...n){const s=typeof t=="string"?i.get(t):L5(i,t);return s?(s.fire(e,...n),e.stop.called):!1}function L5(i,t){for(const[e,n]of i)if(typeof e=="function"&&e(t))return n;return null}function Oy(i){return i[Ny]||(i[Ny]=new Map),i[Ny]}function yW(i){if(!i)return null;const t=i.start.parent,e=i.end.parent,n=t.getPath(),s=e.getPath();return n.length>s.length?t:e}let Ep=class extends K_(wt()){constructor(e){super();w(this,"selection");w(this,"roots");w(this,"stylesProcessor");w(this,"_postFixers",new Set);this.selection=new L0,this.roots=new En({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(n=s(e),n)break;while(n)}};const BS=10;class Ra extends No{constructor(e,n,s,o){super(e,n,s,o);w(this,"_priority",BS);w(this,"_id",null);w(this,"_clonesGroup",null);this.getFillerOffset=_W}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new N("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const n=super._clone(e);return n._priority=this._priority,n._id=this._id,n}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}w(Ra,"DEFAULT_PRIORITY",BS);Ra.prototype.is=function(i,t){return t?t===this.name&&(i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"):i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function _W(){if(Dy(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(Dy(i)>1)return null;i=i.parent}return!i||Dy(i)>1?null:this.childCount}function Dy(i){return Array.from(i.getChildren()).filter(t=>!t.is("uiElement")).length}class B0 extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=vW}_insertChild(t,e){if(e&&(e instanceof qa||Array.from(e).length>0))throw new N("view-emptyelement-cannot-add",[this,e]);return 0}}B0.prototype.is=function(i,t){return t?t===this.name&&(i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"):i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function vW(){return null}class Sp extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=TW}_insertChild(t,e){if(e&&(e instanceof qa||Array.from(e).length>0))throw new N("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}}Sp.prototype.is=function(i,t){return t?t===this.name&&(i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"):i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function CW(i){i.document.on("arrowKey",(t,e)=>xW(t,e,i.domConverter),{priority:"low"})}function TW(){return null}function xW(i,t,e){if(t.keyCode==Ue.arrowright){const n=t.domTarget.ownerDocument.defaultView.getSelection(),s=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(s||t.shiftKey){const o=n.focusNode,r=n.focusOffset,a=e.domPositionToView(o,r);if(a===null)return;let l=!1;const u=a.getLastMatchingPosition(h=>(h.item.is("uiElement")&&(l=!0),!!(h.item.is("uiElement")||h.item.is("attributeElement"))));if(l){const h=e.viewPositionToDom(u);s?n.collapse(h.parent,h.offset):n.extend(h.parent,h.offset)}}}}class F0 extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=kW}_insertChild(t,e){if(e&&(e instanceof qa||Array.from(e).length>0))throw new N("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}F0.prototype.is=function(i,t){return t?t===this.name&&(i==="rawElement"||i==="view:rawElement"||i==="element"||i==="view:element"):i==="rawElement"||i==="view:rawElement"||i===this.name||i==="view:"+this.name||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function kW(){return null}let Ia=class extends Tt(Wa){constructor(e,n){super();w(this,"document");w(this,"_children",[]);w(this,"_customProperties",new Map);this.document=e,n&&this._insertChild(0,n)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const o=EW(this.document,n);for(const r of o)r.parent!==null&&r._remove(),r.parent=this,this._children.splice(e,0,r),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s)}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Ia.prototype.is=function(i){return i==="documentFragment"||i==="view:documentFragment"};function EW(i,t){return typeof t=="string"?[new On(i,t)]:(Li(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new On(i,e):e instanceof Co?new On(i,e.data):e))}class B5{constructor(t){w(this,"document");w(this,"_cloneGroups",new Map);w(this,"_slotFactory",null);this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new Ia(this.document,t)}createText(t){return new On(this.document,t)}createAttributeElement(t,e,n={}){const s=new Ra(this.document,t,e);return typeof n.priority=="number"&&(s._priority=n.priority),n.id&&(s._id=n.id),n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createContainerElement(t,e,n={},s={}){let o=null;zs(n)?s=n:o=n;const r=new Yd(this.document,t,e,o);return s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}createEditableElement(t,e,n={}){const s=new kp(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createEmptyElement(t,e,n={}){const s=new B0(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createUIElement(t,e,n){const s=new Sp(this.document,t,e);return n&&(s.render=n),s}createRawElement(t,e,n,s={}){const o=new F0(this.document,t,e);return n&&(o.render=n),s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}setAttribute(t,e,n,s){s!==void 0?s._setAttribute(t,e,n):n._setAttribute(t,e)}removeAttribute(t,e,n){n!==void 0?n._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){zs(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof ge?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new N("view-writer-break-non-container-element",this.document);if(!e.parent)throw new N("view-writer-break-root",this.document);if(t.isAtStart)return ge._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(ge._createAfter(e),n);const s=new Ke(t,ge._createAt(e,"end")),o=new ge(n,0);this.move(s,o)}return ge._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&n.childCount===0){const r=n.parent,a=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new ge(r,a))}const s=n.getChild(e-1),o=n.getChild(e);if(!s||!o)return t;if(s.is("$text")&&o.is("$text"))return US(s,o);if(s.is("attributeElement")&&o.is("attributeElement")&&s.isSimilar(o)){const r=s.childCount;return s._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new ge(s,r))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!e||!n||!e.is("containerElement")||!n.is("containerElement"))throw new N("view-writer-merge-containers-invalid-position",this.document);const s=e.getChild(e.childCount-1),o=s instanceof On?ge._createAt(s,"end"):ge._createAt(e,"end");return this.move(Ke._createIn(n),ge._createAt(e,"end")),this.remove(Ke._createOn(n)),o}insert(t,e){e=Li(e)?[...e]:[e],F5(e,this.document);const n=e.reduce((r,a)=>{const l=r[r.length-1],u=!a.is("uiElement");return!l||l.breakAttributes!=u?r.push({breakAttributes:u,nodes:[a]}):l.nodes.push(a),r},[]);let s=null,o=t;for(const{nodes:r,breakAttributes:a}of n){const l=this._insertNodes(o,r,a);s||(s=l.start),o=l.end}return s?new Ke(s,o):new Ke(t)}remove(t){const e=t instanceof Ke?t:Ke._createOn(t);if(Ku(e,this.document),e.isCollapsed)return new Ia(this.document);const{start:n,end:s}=this._breakAttributesRange(e,!0),o=n.parent,r=s.offset-n.offset,a=o._removeChildren(n.offset,r);for(const u of a)this._removeFromClonedElementsGroup(u);const l=this.mergeAttributes(n);return e.start=l,e.end=l.clone(),new Ia(this.document,a)}clear(t,e){Ku(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of n){const o=s.item;let r;if(o.is("element")&&e.isSimilar(o))r=Ke._createOn(o);else if(!s.nextPosition.isAfter(t.start)&&o.is("$textProxy")){const a=o.getAncestors().find(l=>l.is("element")&&e.isSimilar(l));a&&(r=Ke._createIn(a))}r&&(r.end.isAfter(t.end)&&(r.end=t.end),r.start.isBefore(t.start)&&(r.start=t.start),this.remove(r))}}move(t,e){let n;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const s=e.parent,o=s.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=s.childCount-o}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof Ra))throw new N("view-writer-wrap-invalid-attribute",this.document);if(Ku(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!SW(n.parent)&&(n=n.getLastMatchingPosition(o=>o.item.is("uiElement"))),n=this._wrapPosition(n,e);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new Ke(n)}else return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof Ra))throw new N("view-writer-unwrap-invalid-attribute",this.document);if(Ku(t,this.document),t.isCollapsed)return t;const{start:n,end:s}=this._breakAttributesRange(t,!0),o=n.parent,r=this._unwrapChildren(o,n.offset,s.offset,e),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Ke(a,l)}rename(t,e){const n=new Yd(this.document,t,e.getAttributes());return this.insert(ge._createAfter(e),n),this.move(Ke._createIn(e),ge._createAt(n,0)),this.remove(Ke._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return ge._createAt(t,e)}createPositionAfter(t){return ge._createAfter(t)}createPositionBefore(t){return ge._createBefore(t)}createRange(t,e){return new Ke(t,e)}createRangeOn(t){return Ke._createOn(t)}createRangeIn(t){return Ke._createIn(t)}createSelection(...t){return new Ro(...t)}createSlot(t="children"){if(!this._slotFactory)throw new N("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let s;if(n?s=Z_(t):s=t.parent.is("$text")?t.parent.parent:t.parent,!s)throw new N("view-writer-invalid-position-container",this.document);let o;n?o=this._breakAttributes(t,!0):o=t.parent.is("$text")?Ly(t):t;const r=s._insertChild(o.offset,e);for(const h of e)this._addToClonedElementsGroup(h);const a=o.getShiftedBy(r),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;const u=this.mergeAttributes(a);return new Ke(l,u)}_wrapChildren(t,e,n,s){let o=e;const r=[];for(;o<n;){const l=t.getChild(o),u=l.is("$text"),h=l.is("attributeElement");if(h&&l._canMergeAttributesFrom(s))l._mergeAttributesFrom(s),r.push(new ge(t,o));else if(u||!h||AW(s,l)){const m=s._clone();l._remove(),m._appendChild(l),t._insertChild(o,m),this._addToClonedElementsGroup(m),r.push(new ge(t,o))}else this._wrapChildren(l,0,l.childCount,s);o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==e)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return Ke._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,s){let o=e;const r=[];for(;o<n;){const l=t.getChild(o);if(!l.is("attributeElement")){o++;continue}if(l.isSimilar(s)){const u=l.getChildren(),h=l.childCount;l._remove(),t._insertChild(o,u),this._removeFromClonedElementsGroup(l),r.push(new ge(t,o),new ge(t,o+h)),o+=h,n+=h-1;continue}if(l._canSubtractAttributesOf(s)){l._subtractAttributesOf(s),r.push(new ge(t,o),new ge(t,o+1)),o++;continue}this._unwrapChildren(l,0,l.childCount,s),o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==e||l.offset==n)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return Ke._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:s}=this._breakAttributesRange(t,!0),o=n.parent,r=this._wrapChildren(o,n.offset,s.offset,e),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Ke(a,l)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return FS(t.clone());t.parent.is("$text")&&(t=Ly(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const s=new Ke(t,t.getShiftedBy(1));this.wrap(s,e);const o=new ge(n.parent,n.index);n._remove();const r=o.nodeBefore,a=o.nodeAfter;return r&&r.is("view:$text")&&a&&a.is("view:$text")?US(r,a):FS(o)}_breakAttributesRange(t,e=!1){const n=t.start,s=t.end;if(Ku(t,this.document),t.isCollapsed){const l=this._breakAttributes(t.start,e);return new Ke(l,l)}const o=this._breakAttributes(s,e),r=o.parent.childCount,a=this._breakAttributes(n,e);return o.offset+=o.parent.childCount-r,new Ke(a,o)}_breakAttributes(t,e=!1){const n=t.offset,s=t.parent;if(t.parent.is("emptyElement"))throw new N("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new N("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new N("view-writer-cannot-break-raw-element",this.document);if(!e&&s.is("$text")&&Y_(s.parent)||Y_(s))return t.clone();if(s.is("$text"))return this._breakAttributes(Ly(t),e);const o=s.childCount;if(n==o){const r=new ge(s.parent,s.index+1);return this._breakAttributes(r,e)}else if(n===0){const r=new ge(s.parent,s.index);return this._breakAttributes(r,e)}else{const r=s.index+1,a=s._clone();s.parent._insertChild(r,a),this._addToClonedElementsGroup(a);const l=s.childCount-n,u=s._removeChildren(n,l);a._appendChild(u);const h=new ge(s.parent,r);return this._breakAttributes(h,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const s of t.getChildren())this._addToClonedElementsGroup(s);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const s of t.getChildren())this._removeFromClonedElementsGroup(s);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function SW(i){return Array.from(i.getChildren()).some(t=>!t.is("uiElement"))}function Z_(i){let t=i.parent;for(;!Y_(t);){if(!t)return;t=t.parent}return t}function AW(i,t){return i.priority<t.priority?!0:i.priority>t.priority?!1:i.getIdentity()<t.getIdentity()}function FS(i){const t=i.nodeBefore;if(t&&t.is("$text"))return new ge(t,t.data.length);const e=i.nodeAfter;return e&&e.is("$text")?new ge(e,0):i}function Ly(i){if(i.offset==i.parent.data.length)return new ge(i.parent.parent,i.parent.index+1);if(i.offset===0)return new ge(i.parent.parent,i.parent.index);const t=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new On(i.root.document,t)),new ge(i.parent.parent,i.parent.index+1)}function US(i,t){const e=i.data.length;return i._data+=t.data,t._remove(),new ge(i,e)}const RW=[On,Ra,Yd,B0,F0,Sp];function F5(i,t){for(const e of i){if(!RW.some(n=>e instanceof n))throw new N("view-writer-insert-invalid-node-type",t);e.is("$text")||F5(e.getChildren(),t)}}function Y_(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function Ku(i,t){const e=Z_(i.start),n=Z_(i.end);if(!e||!n||e!==n)throw new N("view-writer-invalid-range-container",t)}const U5=i=>i.createTextNode(" "),z5=i=>{const t=i.createElement("span");return t.dataset.ckeFiller="true",t.innerText=" ",t},H5=i=>{const t=i.createElement("br");return t.dataset.ckeFiller="true",t},Ni=7,Jd="⁠".repeat(Ni);function bi(i){return typeof i=="string"?i.substr(0,Ni)===Jd:Gt(i)&&i.data.substr(0,Ni)===Jd}function lc(i){return i.data.length==Ni&&bi(i)}function zS(i){const t=typeof i=="string"?i:i.data;return bi(i)?t.slice(Ni):t}function IW(i){i.document.on("arrowKey",PW,{priority:"low"})}function PW(i,t){if(t.keyCode==Ue.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(e.rangeCount==1&&e.getRangeAt(0).collapsed){const n=e.getRangeAt(0).startContainer,s=e.getRangeAt(0).startOffset;bi(n)&&s<=Ni&&e.collapse(n,0)}}}class MW extends wt(){constructor(e,n){super();w(this,"domDocuments",new Set);w(this,"domConverter");w(this,"markedAttributes",new Set);w(this,"markedChildren",new Set);w(this,"markedTexts",new Set);w(this,"selection");w(this,"_inlineFiller",null);w(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=n,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Se.isBlink&&!Se.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,n){if(e==="text")this.domConverter.mapViewToDom(n.parent)&&this.markedTexts.add(n);else{if(!this.domConverter.mapViewToDom(n))return;if(e==="attributes")this.markedAttributes.add(n);else if(e==="children")this.markedChildren.add(n);else throw new N("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Se.isAndroid)return;let e=null;const n=Se.isBlink&&!Se.isAndroid?!this.isSelecting:!0;for(const s of this.markedChildren)this._updateChildrenMappings(s);n?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=ge._createBefore(e.parent)));for(const s of this.markedAttributes)this._updateAttrs(s);for(const s of this.markedChildren)this._updateChildren(s,{inlineFillerPosition:e});for(const s of this.markedTexts)!this.markedChildren.has(s.parent)&&this.domConverter.mapViewToDom(s.parent)&&this._updateText(s,{inlineFillerPosition:e});if(n)if(e){const s=this.domConverter.viewPositionToDom(e),o=s.parent.ownerDocument;bi(s.parent)?this._inlineFiller=s.parent:this._inlineFiller=HS(o,s.parent,s.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const n=this.domConverter.mapViewToDom(e);if(!n)return;const s=Array.from(n.childNodes),o=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),r=this._diffNodeLists(s,o),a=this._findUpdateActions(r,s,o,NW);if(a.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const u of a)if(u==="update"){const h=l.equal+l.insert,m=l.equal+l.delete,p=e.getChild(h);p&&!p.is("uiElement")&&!p.is("rawElement")&&this._updateElementMappings(p,s[m]),SS(o[h]),l.equal++}else l[u]++}}_updateElementMappings(e,n){this.domConverter.unbindDomElement(n),this.domConverter.bindElements(n,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?ge._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=this.domConverter.viewPositionToDom(e);return!!(n&&Gt(n.parent)&&bi(n.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!bi(e))throw new N("view-renderer-filler-was-lost",this);lc(e)?e.remove():e.data=e.data.substr(Ni),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=e.parent,s=e.offset;if(!this.domConverter.mapViewToDom(n.root)||!n.is("element")||!VW(n))return!1;const o=e.nodeBefore,r=e.nodeAfter;return!(o instanceof On||r instanceof On||s===n.getFillerOffset()&&(!o||!o.is("element","br"))||Se.isAndroid&&(o||r))}_updateText(e,n){const s=this.domConverter.findCorrespondingDomText(e);let r=this.domConverter.viewToDom(e).data;const a=n.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(r=Jd+r),this._updateTextNode(s,r)}_updateAttrs(e){const n=this.domConverter.mapViewToDom(e);if(n){for(const s of Array.from(n.attributes)){const o=s.name;e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(n,o)}for(const s of e.getAttributeKeys())this.domConverter.setDomElementAttribute(n,s,e.getAttribute(s),e)}}_updateChildren(e,n){const s=this.domConverter.mapViewToDom(e);if(!s)return;if(Se.isAndroid){let p=null;for(const v of Array.from(s.childNodes)){if(p&&Gt(p)&&Gt(v)){s.normalize();break}p=v}}const o=n.inlineFillerPosition,r=s.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));o&&o.parent===e&&HS(s.ownerDocument,a,o.offset);const l=this._diffNodeLists(r,a),u=this._findUpdateActions(l,r,a,OW);let h=0;const m=new Set;for(const p of u)p==="delete"?(m.add(r[h]),SS(r[h])):(p==="equal"||p==="update")&&h++;h=0;for(const p of u)p==="insert"?(S5(s,h,a[h]),h++):p==="update"?(this._updateTextNode(r[h],a[h].data),h++):p==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[h])),h++);for(const p of m)p.parentNode||this.domConverter.unbindDomElement(p)}_diffNodeLists(e,n){return e=BW(e,this._fakeSelectionContainer),pc(e,n,DW.bind(null,this.domConverter))}_findUpdateActions(e,n,s,o){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let r=[],a=[],l=[];const u={equal:0,insert:0,delete:0};for(const h of e)h==="insert"?l.push(s[u.equal+u.insert]):h==="delete"?a.push(n[u.equal+u.delete]):(r=r.concat(pc(a,l,o).map(m=>m==="equal"?"update":m)),r.push("equal"),a=[],l=[]),u[h]++;return r.concat(pc(a,l,o).map(h=>h==="equal"?"update":h))}_updateTextNode(e,n){const s=e.data;s!=n&&(Se.isAndroid&&this.isComposing&&s.replace(/\u00A0/g," ")==n.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,n))}_updateTextNodeInternal(e,n){const s=u5(e.data,n);for(const o of s)o.type==="insert"?e.insertData(o.index,o.values.join("")):e.deleteData(o.index,o.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const n of e.getChildren())this._markDescendantTextToSync(n)}}_updateSelection(){if(Se.isBlink&&!Se.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Se.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const n=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=FW(n));const s=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(s,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!s.parentElement||s.parentElement!=e)&&e.appendChild(s),s.textContent=this.selection.fakeSelectionLabel||" ";const o=n.getSelection(),r=n.createRange();o.removeAllRanges(),r.selectNodeContents(s),o.addRange(r)}_updateDomSelection(e){const n=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(n))return;const s=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);n.setBaseAndExtent(s.parent,s.offset,o.parent,o.offset),Se.isGecko&&LW(o,n)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const n=e&&this.domConverter.domSelectionToView(e);return!(n&&this.selection.isEqual(n)||!this.selection.isCollapsed&&this.selection.isSimilar(n))}_fakeSelectionNeedsUpdate(e){const n=this._fakeSelectionContainer,s=e.ownerDocument.getSelection();return!n||n.parentElement!==e||s.anchorNode!==n&&!n.contains(s.anchorNode)?!0:n.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const n=e.getSelection();if(n.rangeCount){const s=e.activeElement,o=this.domConverter.mapDomToView(s);s&&o&&n.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function VW(i){if(i.getAttribute("contenteditable")=="false")return!1;const t=i.findAncestor(e=>e.hasAttribute("contenteditable"));return!t||t.getAttribute("contenteditable")=="true"}function HS(i,t,e){const n=t instanceof Array?t:t.childNodes,s=n[e];if(Gt(s))return s.data=Jd+s.data,s;{const o=i.createTextNode(Jd);return Array.isArray(t)?n.splice(e,0,o):S5(t,e,o),o}}function NW(i,t){return Mr(i)&&Mr(t)&&!Gt(i)&&!Gt(t)&&!xd(i)&&!xd(t)&&i.tagName.toLowerCase()===t.tagName.toLowerCase()}function OW(i,t){return Mr(i)&&Mr(t)&&Gt(i)&&Gt(t)}function DW(i,t,e){return t===e?!0:Gt(t)&&Gt(e)?t.data===e.data:!!(i.isBlockFiller(t)&&i.isBlockFiller(e))}function LW(i,t){let e=i.parent,n=i.offset;if(Gt(e)&&lc(e)&&(n=ud(e)+1,e=e.parentNode),e.nodeType!=Node.ELEMENT_NODE||n!=e.childNodes.length-1)return;const s=e.childNodes[n];s&&s.tagName=="BR"&&t.addRange(t.getRangeAt(0))}function BW(i,t){const e=Array.from(i);return e.length==0||!t||e[e.length-1]==t&&e.pop(),e}function FW(i){const t=i.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t}const UW=H5(he.document),zW=U5(he.document),HW=z5(he.document),hm="data-ck-unsafe-attribute-",WS="data-ck-unsafe-element";class Ap{constructor(t,{blockFillerMode:e,renderingMode:n="editing"}={}){w(this,"document");w(this,"renderingMode");w(this,"blockFillerMode");w(this,"preElements");w(this,"blockElements");w(this,"inlineObjectElements");w(this,"unsafeElements");w(this,"_domDocument");w(this,"_domToViewMapping",new WeakMap);w(this,"_viewToDomMapping",new WeakMap);w(this,"_fakeSelectionMapping",new WeakMap);w(this,"_rawContentElementMatcher",new Ts);w(this,"_inlineObjectElementMatcher",new Ts);w(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=t,this.renderingMode=n,this.blockFillerMode=e||(n==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?he.document:he.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Ro(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const n of t.children)this.unbindDomElement(n)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return this.renderingMode==="data"?!0:(t=t.toLowerCase(),t.startsWith("on")||t==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(t==="src"||t==="srcset")||n==="source"&&t==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if(this.renderingMode==="data"){t.innerHTML=e;return}const n=new DOMParser().parseFromString(e,"text/html"),s=n.createDocumentFragment(),o=n.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);const r=n.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=r.nextNode();)a.push(l);for(const u of a){for(const m of u.getAttributeNames())this.setDomElementAttribute(u,m,u.getAttribute(m));const h=u.tagName.toLowerCase();this._shouldRenameElement(h)&&(jS(h),u.replaceWith(this._createReplacementDomElement(h,u)))}for(;t.firstChild;)t.firstChild.remove();t.append(s)}viewToDom(t,e={}){if(t.is("$text")){const n=this._processDataFromViewText(t);return this._domDocument.createTextNode(n)}else{const n=t;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let s;if(n.is("documentFragment"))s=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(s,n);else{if(n.is("uiElement"))return n.name==="$comment"?s=this._domDocument.createComment(n.getCustomProperty("$rawContent")):s=n.render(this._domDocument,this),e.bind&&this.bindElements(s,n),s;this._shouldRenameElement(n.name)?(jS(n.name),s=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?s=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):s=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(s,this),e.bind&&this.bindElements(s,n);for(const o of n.getAttributeKeys())this.setDomElementAttribute(s,o,n.getAttribute(o),n)}if(e.withChildren!==!1)for(const o of this.viewChildrenToDom(n,e))s instanceof HTMLTemplateElement?s.content.appendChild(o):s.appendChild(o);return s}}setDomElementAttribute(t,e,n,s){const o=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(e);if(o||Ze("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),!SH(e)){Ze("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:n});return}t.hasAttribute(e)&&!o?t.removeAttribute(e):t.hasAttribute(hm+e)&&o&&t.removeAttribute(hm+e),t.setAttribute(o?e:hm+e,n)}removeDomElementAttribute(t,e){e!=WS&&(t.removeAttribute(e),t.removeAttribute(hm+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let s=0;for(const o of t.getChildren()){n===s&&(yield this._getBlockFiller());const r=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!Ln(o.getAttributes());if(r&&this.renderingMode=="data")if(o.is("rawElement")){const a=this._domDocument.createElement(o.name);o.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(o,e);else r&&Ze("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,e);s++}n===s&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),s=this._domDocument.createRange();return s.setStart(e.parent,e.offset),s.setEnd(n.parent,n.offset),s}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let s=t.offset;return bi(n)&&(s+=Ni),{parent:n,offset:s}}else{let n,s,o;if(t.offset===0){if(n=this.mapViewToDom(e),!n)return null;o=n.childNodes[0]}else{const a=t.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;n=s.parentNode,o=s.nextSibling}if(Gt(o)&&bi(o))return{parent:o,offset:Ni};const r=s?ud(s)+1:0;return{parent:n,offset:r}}}domToView(t,e={}){const n=[],s=this._domToView(t,e,n),o=s.next().value;return!o||(s.next(),this._processDomInlineNodes(null,n,e),this.blockFillerMode=="br"&&GS(o))||o.is("$text")&&o.data.length==0?null:o}*domChildrenToView(t,e={},n=[]){let s=[];t instanceof HTMLTemplateElement?s=[...t.content.childNodes]:s=[...t.childNodes];for(let o=0;o<s.length;o++){const r=s[o],a=this._domToView(r,e,n),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(t,n,e),this.blockFillerMode=="br"&&GS(l)||(yield l),a.next())}this._processDomInlineNodes(t,n,e)}domSelectionToView(t){if(jW(t))return new Ro([]);if(t.rangeCount===1){let s=t.getRangeAt(0).startContainer;Gt(s)&&(s=s.parentNode);const o=this.fakeSelectionToView(s);if(o)return o}const e=this.isDomSelectionBackward(t),n=[];for(let s=0;s<t.rangeCount;s++){const o=t.getRangeAt(s),r=this.domRangeToView(o);r&&n.push(r)}return new Ro(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new Ke(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,ud(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return ge._createBefore(n);if(Gt(t)){if(lc(t))return this.domPositionToView(t.parentNode,ud(t));const s=this.findCorrespondingViewText(t);let o=e;return s?(bi(t)&&(o-=Ni,o=o<0?0:o),new ge(s,o)):null}else{if(e===0){const s=this.mapDomToView(t);if(s)return new ge(s,0)}else{const s=t.childNodes[e-1];if(Gt(s)&&lc(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,ud(s));const o=Gt(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(o&&o.parent)return new ge(o.parent,o.index+1)}return null}}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(lc(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const s=this.mapDomToView(n);if(s){const o=s.nextSibling;return o instanceof On?o:null}}else{const s=this.mapDomToView(t.parentNode);if(s){const o=s.getChild(0);return o instanceof On?o:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(!e||e.ownerDocument.activeElement===e)return;const{scrollX:n,scrollY:s}=he.window,o=[];qS(e,r=>{const{scrollLeft:a,scrollTop:l}=r;o.push([a,l])}),e.focus(),qS(e,r=>{const[a,l]=o.shift();r.scrollLeft=a,r.scrollTop=l}),he.window.scrollTo(n,s)}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(e);n&&n.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return this.blockFillerMode=="br"?t.isEqualNode(UW):$S(t,this.blockElements)?!0:t.isEqualNode(HW)||qW(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=TH(t);for(e.pop();e.length;){const n=e.pop(),s=this._domToViewMapping.get(n);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return U5(this._domDocument);case"markedNbsp":return z5(this._domDocument);case"br":return H5(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(Gt(t)&&bi(t)&&e<Ni||this.isElement(t)&&bi(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(t,e,n){if(this.blockFillerMode!="br"&&$S(t,this.blockElements))return null;const s=this.getHostViewElement(t);if(s)return s;if(xd(t)&&e.skipComments)return null;if(Gt(t)){if(lc(t))return null;{const o=t.data;if(o==="")return null;const r=new On(this.document,o);return n.push(r),r}}else{let o=this.mapDomToView(t);if(o)return this._isInlineObjectElement(o)&&n.push(o),o;if(this.isDocumentFragment(t))o=new Ia(this.document),e.bind&&this.bindDocumentFragments(t,o);else{o=this._createViewElement(t,e),e.bind&&this.bindElements(t,o);const a=t.attributes;if(a)for(let l=a.length,u=0;u<l;u++)o._setAttribute(a[u].name,a[u].value);if(this._isViewElementWithRawContent(o,e))return o._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(o)||n.push(o),o;if(xd(t))return o._setCustomProperty("$rawContent",t.data),o}yield o;const r=[];if(e.withChildren!==!1)for(const a of this.domChildrenToView(t,e,r))o._appendChild(a);if(this._isInlineObjectElement(o))n.push(o),this._processDomInlineNodes(null,r,e);else for(const a of r)n.push(a)}}_processDomInlineNodes(t,e,n){if(!e.length||t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let s=!1;for(let o=0;o<e.length;o++){const r=e[o];if(!r.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(r))a=zS(r.data);else{a=r.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const u=o>0?e[o-1]:null,h=o+1<e.length?e[o+1]:null,m=!u||u.is("element")&&u.name=="br"||s,p=h?!1:!bi(r.data);n.withChildren!==!1&&(m&&(a=a.replace(/^ /,"")),p&&(a=a.replace(/ $/,""))),a=zS(a),this.blockFillerMode!="br"&&r.parent&&($W(r.parent,a)?(a="",r.parent.parent&&(r.parent.parent._setCustomProperty("$hasBlockFiller",!0),r.parent._remove())):GW(r.parent,a,this.blockElements)&&(a="",r.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const v=h&&h.is("element")&&h.name!="br",C=h&&h.is("$text")&&h.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!h||v||C)&&(a=a.replace(/\u00A0$/," ")),(m||u&&u.is("element")&&u.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&r.parent?(r._remove(),e.splice(o,1),o--):(r._data=a,s=l)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(e.charAt(0)==" "){const n=this._getTouchingInlineViewNode(t,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const n=this._getTouchingInlineViewNode(t,!0),s=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!n||s)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_isPreFormatted(t){if(WW(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(!(!e.is("element")||!e.hasStyle("white-space")||e.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const n=new xa({startPosition:e?ge._createAfter(t):ge._createBefore(t),direction:e?"forward":"backward"});for(const{item:s}of n){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return t.is("element")?t.name=="br"||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t):!1}_createViewElement(t,e){if(xd(t))return new Sp(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new No(this.document,n)}_isViewElementWithRawContent(t,e){return e.withChildren!==!1&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(WS,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const s of e.getAttributeNames())n.setAttribute(s,e.getAttribute(s))}return n}}function WW(i,t){return i.getAncestors().some(e=>e.is("element")&&t.includes(e.name))}function qS(i,t){let e=i;for(;e;)t(e),e=e.parentElement}function qW(i,t){return i.isEqualNode(zW)&&W5(i,t)&&i.parentNode.childNodes.length===1}function W5(i,t){const e=i.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function GW(i,t,e){return t==" "&&i&&i.is("element")&&i.childCount==1&&e.includes(i.name)}function $W(i,t){return t==" "&&i&&i.is("element","span")&&i.childCount==1&&i.hasAttribute("data-cke-filler")}function GS(i){return i.is("element","br")&&i.hasAttribute("data-cke-filler")}function $S(i,t){return i.tagName==="BR"&&W5(i,t)&&i.parentNode.childNodes.length===1}function jS(i){i==="script"&&Ze("domconverter-unsafe-script-element-detected"),i==="style"&&Ze("domconverter-unsafe-style-element-detected")}function jW(i){if(!Se.isGecko||!i.rangeCount)return!1;const t=i.getRangeAt(0).startContainer;try{Object.prototype.toString.call(t)}catch{return!0}return!1}class Ks extends Yn(){constructor(e){super();w(this,"view");w(this,"document");w(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class Oa{constructor(t,e,n){w(this,"view");w(this,"document");w(this,"domEvent");w(this,"domTarget");this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,l5(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Bo extends Ks{constructor(){super(...arguments);w(this,"useCapture",!1);w(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(s=>{this.listenTo(e,s,(o,r)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(r.target)&&this.onDomEvent(r)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,n,s){this.isEnabled&&this.document.fire(e,new Oa(this.view,n,s))}}class KW extends Bo{constructor(){super(...arguments);w(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const n={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Cc(this)}};this.fire(e.type,e,n)}}class ZW extends Ks{constructor(e){super(e);w(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=ss(n=>{this.document.fire("selectionChangeDone",n)},200)}observe(){const e=this.document;e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&s.preventDefault()},{context:"$capture"}),e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(s.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const n=this.document.selection,s=new Ro(n.getRanges(),{backward:n.isBackward,fake:!1});(e==Ue.arrowleft||e==Ue.arrowup)&&s.setTo(s.getFirstPosition()),(e==Ue.arrowright||e==Ue.arrowdown)&&s.setTo(s.getLastPosition());const o={oldSelection:n,newSelection:s,domSelection:null};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}let q5=class extends Ks{constructor(e){super(e);w(this,"domConverter");w(this,"_config");w(this,"_domElements");w(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const n=this.domConverter,s=new Set,o=new Set;for(const a of e){const l=n.mapDomToView(a.target);l&&(l.is("uiElement")||l.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&o.add(l))}for(const a of e){const l=n.mapDomToView(a.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&a.type==="characterData"){const u=n.findCorrespondingViewText(a.target);u&&!o.has(u.parent)?s.add(u):!u&&bi(a.target)&&o.add(n.mapDomToView(a.target.parentNode))}}const r=[];for(const a of s)r.push({type:"text",node:a});for(const a of o){const l=n.mapViewToDom(a),u=Array.from(a.getChildren()),h=Array.from(n.domChildrenToView(l,{withChildren:!1}));U_(u,h,YW)||r.push({type:"children",node:a})}r.length&&this.document.fire("mutations",{mutations:r})}_isBogusBrMutation(e){let n=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(n=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),n&&n.is("element","br")}};function YW(i,t){if(!Array.isArray(i))return i===t?!0:i.is("$text")&&t.is("$text")?i.data===t.data:!1}class Ag extends Bo{constructor(e){super(e);w(this,"_renderTimeoutId",null);w(this,"_isFocusChanging",!1);w(this,"domEventType",["focus","blur"]);this.useCapture=!0;const n=this.document;n.on("focus",()=>this._handleFocus()),n.on("blur",(s,o)=>this._handleBlur(o)),n.on("beforeinput",()=>{n.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const n=this.document.selection.editableElement;(n===null||n===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class JW extends Ks{constructor(e){super(e);w(this,"mutationObserver");w(this,"focusObserver");w(this,"selection");w(this,"domConverter");w(this,"_documents",new WeakSet);w(this,"_fireSelectionChangeDoneDebounced");w(this,"_clearInfiniteLoopInterval");w(this,"_documentIsSelectingInactivityTimeoutDebounced");w(this,"_loopbackCounter",0);w(this,"_pendingSelectionChange",new Set);this.mutationObserver=e.getObserver(q5),this.focusObserver=e.getObserver(Ag),this.selection=this.document.selection,this.domConverter=e.domConverter,this._fireSelectionChangeDoneDebounced=ss(n=>{this.document.fire("selectionChangeDone",n)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=ss(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(n,s,o)=>{if(o&&this._pendingSelectionChange.size){for(const r of Array.from(this._pendingSelectionChange))this._handleSelectionChange(r);this._pendingSelectionChange.clear()}})}observe(e){const n=e.ownerDocument,s=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},o=()=>{this.document.isSelecting&&(this._handleSelectionChange(n),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",s,{priority:"highest"}),this.listenTo(e,"keydown",o,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",o,{priority:"highest",useCapture:!0}),!this._documents.has(n)&&(this.listenTo(n,"mouseup",o,{priority:"highest",useCapture:!0}),this.listenTo(n,"selectionchange",()=>{this.document.isComposing&&!Se.isAndroid||(this._handleSelectionChange(n),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(n)},{priority:"lowest"}),this._documents.add(n))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const n=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(n);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.view.document.isFocused){this._pendingSelectionChange.add(e);return}if(this._pendingSelectionChange.delete(e),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(n))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const o={oldSelection:this.selection,newSelection:s,domSelection:n};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class XW extends Bo{constructor(e){super(e);w(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const n=this.document;n.on("compositionstart",()=>{n.isComposing=!0}),n.on("compositionend",()=>{n.isComposing=!1})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class G5{constructor(t,e={}){w(this,"_files");w(this,"_native");this._files=e.cacheFiles?KS(t):null,this._native=t}get files(){return this._files||(this._files=KS(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,n){this._native.setDragImage(t,e,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function KS(i){const t=Array.from(i.files||[]),e=Array.from(i.items||[]);return t.length?t:e.filter(n=>n.kind==="file").map(n=>n.getAsFile())}class QW extends Bo{constructor(){super(...arguments);w(this,"domEventType","beforeinput")}onDomEvent(e){const n=e.getTargetRanges(),s=this.view,o=s.document;let r=null,a=null,l=[];if(e.dataTransfer&&(r=new G5(e.dataTransfer)),e.data!==null?a=e.data:r&&(a=r.getData("text/plain")),o.selection.isFake)l=Array.from(o.selection.getRanges()),e.preventDefault();else if(n.length)l=n.map(u=>{let h=s.domConverter.domPositionToView(u.startContainer,u.startOffset);const m=s.domConverter.domPositionToView(u.endContainer,u.endOffset);if(h&&bi(u.startContainer)&&u.startOffset<Ni){e.preventDefault();let p=Ni-u.startOffset;h=h.getLastMatchingPosition(v=>!!(v.item.is("attributeElement")||v.item.is("uiElement")||v.item.is("$textProxy")&&p--),{direction:"backward",singleCharacters:!0})}if(h)return s.createRange(h,m);if(m)return s.createRange(m)}).filter(u=>!!u);else if(Se.isAndroid){const u=e.target.ownerDocument.defaultView.getSelection();l=Array.from(s.domConverter.domSelectionToView(u).getRanges())}if(Se.isAndroid&&e.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[s.createRange(l[0].end)]});return}if(["insertText","insertReplacementText"].includes(e.inputType)&&a&&a.includes(`
`)){const u=a.split(/\n{1,2}/g);let h=l;for(let m=0;m<u.length;m++){const p=u[m];p!=""&&(this.fire(e.type,e,{data:p,dataTransfer:r,targetRanges:h,inputType:e.inputType,isComposing:e.isComposing}),h=[o.selection.getFirstRange()]),m+1<u.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:h}),h=[o.selection.getFirstRange()])}return}this.fire(e.type,e,{data:a,dataTransfer:r,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}}class eq extends Ks{constructor(t){super(t),this.document.on("keydown",(e,n)=>{if(this.isEnabled&&LH(n.keyCode)){const s=new Ga(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,n),s.stop.called&&e.stop()}})}observe(){}stopObserving(){}}class tq extends Ks{constructor(t){super(t);const e=this.document;e.on("keydown",(n,s)=>{if(!this.isEnabled||s.keyCode!=Ue.tab||s.ctrlKey)return;const o=new Ga(e,"tab",e.selection.getFirstRange());e.fire(o,s),o.stop.called&&n.stop()})}observe(){}stopObserving(){}}let nq=class extends wt(){constructor(e){super();w(this,"document");w(this,"domConverter");w(this,"domRoots",new Map);w(this,"_renderer");w(this,"_initialDomRootAttributes",new WeakMap);w(this,"_observers",new Map);w(this,"_writer");w(this,"_ongoingChange",!1);w(this,"_postFixersInProgress",!1);w(this,"_renderingDisabled",!1);w(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Ep(e),this.domConverter=new Ap(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new MW(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new B5(this.document),this.addObserver(q5),this.addObserver(Ag),this.addObserver(JW),this.addObserver(KW),this.addObserver(ZW),this.addObserver(XW),this.addObserver(eq),this.addObserver(QW),this.addObserver(tq),IW(this),CW(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Se.isiOS&&this.listenTo(this.document,"blur",(n,s)=>{this.domConverter.mapDomToView(s.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(n,{mutations:s})=>{s.forEach(o=>this._renderer.markToSync(o.type,o.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,n="main"){const s=this.document.getRoot(n);s._name=e.tagName.toLowerCase();const o={};for(const{name:a,value:l}of Array.from(e.attributes))o[a]=l,a==="class"?this._writer.addClass(l.split(" "),s):s.hasAttribute(a)||this._writer.setAttribute(a,l,s);this._initialDomRootAttributes.set(e,o);const r=()=>{this._writer.setAttribute("contenteditable",(!s.isReadOnly).toString(),s),s.isReadOnly?this._writer.addClass("ck-read-only",s):this._writer.removeClass("ck-read-only",s)};r(),this.domRoots.set(n,e),this.domConverter.bindElements(e,s),this._renderer.markToSync("children",s),this._renderer.markToSync("attributes",s),this._renderer.domDocuments.add(e.ownerDocument),s.on("change:children",(a,l)=>this._renderer.markToSync("children",l)),s.on("change:attributes",(a,l)=>this._renderer.markToSync("attributes",l)),s.on("change:text",(a,l)=>this._renderer.markToSync("text",l)),s.on("change:isReadOnly",()=>this.change(r)),s.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,n)}detachDomRoot(e){const n=this.domRoots.get(e);Array.from(n.attributes).forEach(({name:o})=>n.removeAttribute(o));const s=this._initialDomRootAttributes.get(n);for(const o in s)n.setAttribute(o,s[o]);this.domRoots.delete(e),this.domConverter.unbindDomElement(n);for(const o of this._observers.values())o.stopObserving(n)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let n=this._observers.get(e);if(n)return n;n=new e(this),this._observers.set(e,n);for(const[s,o]of this.domRoots)n.observe(o,s);return n.enable(),n}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:n,viewportOffset:s=20,ancestorOffset:o=20}={}){const r=this.document.selection.getFirstRange();if(!r)return;const a=Di({alignToTop:e,forceScroll:n,viewportOffset:s,ancestorOffset:o});typeof s=="number"&&(s={top:s,bottom:s,left:s,right:s});const l={target:this.domConverter.viewRangeToDom(r),viewportOffset:s,ancestorOffset:o,alignToTop:e,forceScroll:n};this.fire("scrollToTheSelection",l,a),IH(l)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new N("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const n=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),n}catch(n){/* istanbul ignore next -- @preserve */N.rethrowUnexpectedError(n,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Ag).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,n){return ge._createAt(e,n)}createPositionAfter(e){return ge._createAfter(e)}createPositionBefore(e){return ge._createBefore(e)}createRange(e,n){return new Ke(e,n)}createRangeOn(e){return Ke._createOn(e)}createRangeIn(e){return Ke._createIn(e)}createSelection(...e){return new Ro(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ur{is(){throw new Error("is() method is abstract")}}class bs extends Ur{constructor(e,n,s){super();w(this,"textNode");w(this,"data");w(this,"offsetInText");if(this.textNode=e,n<0||n>e.offsetSize)throw new N("model-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.offsetSize)throw new N("model-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}bs.prototype.is=function(i){return i==="$textProxy"||i==="model:$textProxy"||i==="textProxy"||i==="model:textProxy"};class Eo{constructor(t){w(this,"direction");w(this,"boundaries");w(this,"singleCharacters");w(this,"shallow");w(this,"ignoreElementEnd");w(this,"_position");w(this,"_boundaryStartParent");w(this,"_boundaryEndParent");w(this,"_visitedParent");if(!t||!t.boundaries&&!t.startPosition)throw new N("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new N("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=ae._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n,s,o;do s=this.position,o=this._visitedParent,{done:e,value:n}=this.next();while(!e&&t(n));e||(this._position=s,this._visitedParent=o)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Ed(e,n),o=s||$5(e,n,s);if(o&&o.is("model:element")){if(!this.shallow)e.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,fa("elementStart",o,t,e,1)}if(o&&o.is("model:$text")){let r;if(this.singleCharacters)r=1;else{let u=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<u&&(u=this.boundaries.end.offset),r=u-e.offset}const a=e.offset-o.startOffset,l=new bs(o,a,r);return e.offset+=r,this._position=e,fa("text",l,t,e,r)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():fa("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=e.parent,o=Ed(e,s),r=o||j5(e,s,o);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,fa("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():fa("elementEnd",r,t,e));if(r&&r.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let h=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),a=e.offset-h}const l=e.offset-r.startOffset,u=new bs(r,l-a,a);return e.offset-=a,this._position=e,fa("text",u,t,e,a)}return e.path.pop(),this._position=e,this._visitedParent=n.parent,fa("elementStart",n,t,e,1)}}function fa(i,t,e,n,s){return{done:!1,value:{type:i,item:t,previousPosition:e,nextPosition:n,length:s}}}class ae extends Ur{constructor(e,n,s="toNone"){super();w(this,"root");w(this,"path");w(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new N("model-position-root-invalid",e);if(!Array.isArray(n)||n.length===0)throw new N("model-position-path-incorrect-format",e,{path:n});e.is("rootElement")?n=n.slice():(n=[...e.getPath(),...n],e=e.root),this.root=e,this.path=n,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)throw new N("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new N("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ed(this,this.parent)}get nodeAfter(){const e=this.parent;return $5(this,e,Ed(this,e))}get nodeBefore(){const e=this.parent;return j5(this,e,Ed(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const n=Gn(this.path,e.path);switch(n){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[n]<e.path[n]?"before":"after"}}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new Eo(n);return s.skip(e),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const n=this.parent;return n.is("element")?n.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const n=Gn(this.path,e.path),s=typeof n=="string"?Math.min(this.path.length,e.path.length):n;return this.path.slice(0,s)}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let o=0;for(;n[o]==s[o]&&n[o];)o++;return o===0?null:n[o-1]}getShiftedBy(e){const n=this.clone(),s=n.offset+e;return n.offset=s<0?0:s,n}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const n=Math.min(this.path.length,e.path.length);for(let s=0;s<n;s++){const o=this.path[s]-e.path[s];if(o<-1||o>1)return!1;if(o===1)return ZS(e,this,s);if(o===-1)return ZS(this,e,s)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?J_(this.path,n):J_(e.path,n)}hasSameParentAs(e){if(this.root!==e.root)return!1;const n=this.getParentPath(),s=e.getParentPath();return Gn(n,s)=="same"}getTransformedByOperation(e){let n;switch(e.type){case"insert":n=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(e);break;case"split":n=this._getTransformedBySplitOperation(e);break;case"merge":n=this._getTransformedByMergeOperation(e);break;default:n=ae._createAt(this);break}return n}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const n=e.movedRange;return n.containsPosition(this)||n.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const n=e.movedRange,s=n.containsPosition(this)||n.start.isEqual(this);let o;return s?(o=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(o=o._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?o=ae._createAt(e.deletionPosition):o=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),o}_getTransformedByDeletion(e,n){const s=ae._createAt(this);if(this.root!=e.root)return s;if(Gn(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+n>this.offset)return null;s.offset-=n}}else if(Gn(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;if(e.offset<=this.path[o]){if(e.offset+n>this.path[o])return null;s.path[o]-=n}}return s}_getTransformedByInsertion(e,n){const s=ae._createAt(this);if(this.root!=e.root)return s;if(Gn(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=n);else if(Gn(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;e.offset<=this.path[o]&&(s.path[o]+=n)}return s}_getTransformedByMove(e,n,s){if(n=n._getTransformedByDeletion(e,s),e.isEqual(n))return ae._createAt(this);const o=this._getTransformedByDeletion(e,s);return o===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,n):o._getTransformedByInsertion(n,s)}_getCombined(e,n){const s=e.path.length-1,o=ae._createAt(n);return o.stickiness=this.stickiness,o.offset=o.offset+this.path[s]-e.offset,o.path=[...o.path,...this.path.slice(s+1)],o}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,n,s="toNone"){if(e.is("model:position"))return new ae(e.root,e.path,e.stickiness);{const o=e;if(n=="end")n=o.maxOffset;else{if(n=="before")return this._createBefore(o,s);if(n=="after")return this._createAfter(o,s);if(n!==0&&!n)throw new N("model-createpositionat-offset-required",[this,e])}if(!o.is("element")&&!o.is("documentFragment"))throw new N("model-position-parent-incorrect",[this,e]);const r=o.getPath();return r.push(n),new this(o.root,r,s)}}static _createAfter(e,n){if(!e.parent)throw new N("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,n)}static _createBefore(e,n){if(!e.parent)throw new N("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,n)}static fromJSON(e,n){if(e.root==="$graveyard"){const s=new ae(n.graveyard,e.path);return s.stickiness=e.stickiness,s}if(!n.getRoot(e.root))throw new N("model-position-fromjson-no-root",n,{rootName:e.root});return new ae(n.getRoot(e.root),e.path,e.stickiness)}}ae.prototype.is=function(i){return i==="position"||i==="model:position"};function Ed(i,t){const e=t.getChildAtOffset(i.offset);return e&&e.is("$text")&&e.startOffset<i.offset?e:null}function $5(i,t,e){return e!==null?null:t.getChildAtOffset(i.offset)}function j5(i,t,e){return e!==null?null:t.getChild(t.offsetToIndex(i.offset)-1)}function ZS(i,t,e){return!(e+1===i.path.length||!J_(t.path,e+1)||!iq(i,e+1))}function J_(i,t){for(;t<i.length;){if(i[t]!==0)return!1;t++}return!0}function iq(i,t){let e=i.parent,n=i.path.length-1,s=0;for(;n>=t;){if(i.path[n]+s!==e.maxOffset)return!1;s=1,n--,e=e.parent}return!0}class Z extends Ur{constructor(e,n){super();w(this,"start");w(this,"end");this.start=ae._createAt(e),this.end=n?ae._createAt(n):ae._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Eo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),n=this.end.getParentPath();return Gn(e,n)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&o}containsItem(e){const n=ae._createBefore(e);return this.containsPosition(n)||this.start.isEqual(n)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new Z(this.start,e.start)),this.containsPosition(e.end)&&n.push(new Z(e.end,this.end))):n.push(new Z(this.start,this.end)),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new Z(n,s)}return null}getJoined(e,n=!1){let s=this.isIntersecting(e);if(s||(this.start.isBefore(e.start)?s=n?this.end.isTouching(e.start):this.end.isEqual(e.start):s=n?e.end.isTouching(this.start):e.end.isEqual(this.start)),!s)return null;let o=this.start,r=this.end;return e.start.isBefore(o)&&(o=e.start),e.end.isAfter(r)&&(r=e.end),new Z(o,r)}getMinimalFlatRanges(){const e=[],n=this.start.getCommonPath(this.end).length,s=ae._createAt(this.start);let o=s.parent;for(;s.path.length>n+1;){const r=o.maxOffset-s.offset;r!==0&&e.push(new Z(s,s.getShiftedBy(r))),s.path=s.path.slice(0,-1),s.offset++,o=o.parent}for(;s.path.length<=this.end.path.length;){const r=this.end.path[s.path.length-1],a=r-s.offset;a!==0&&e.push(new Z(s,s.getShiftedBy(a))),s.offset=r,s.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Eo(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new Eo(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new Eo(e);yield n.position;for(const s of n)yield s.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Z(this.start,this.end)]}getTransformedByOperations(e){const n=[new Z(this.start,this.end)];for(const s of e)for(let o=0;o<n.length;o++){const r=n[o].getTransformedByOperation(s);n.splice(o,1,...r),o+=r.length-1}for(let s=0;s<n.length;s++){const o=n[s];for(let r=s+1;r<n.length;r++){const a=n[r];(o.containsRange(a)||a.containsRange(o)||o.isEqual(a))&&n.splice(r,1)}}return n}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,n=this.end.nodeBefore;return e&&e.is("element")&&e===n?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,n=!1){return this._getTransformedByInsertion(e.position,e.howMany,n)}_getTransformedByMoveOperation(e,n=!1){const s=e.sourcePosition,o=e.howMany,r=e.targetPosition;return this._getTransformedByMove(s,r,o,n)}_getTransformedBySplitOperation(e){const n=this.start._getTransformedBySplitOperation(e);let s=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(s=this.end.getShiftedBy(1)),n.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Z(n,s)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Z(this.start);let n=this.start._getTransformedByMergeOperation(e),s=this.end._getTransformedByMergeOperation(e);return n.root!=s.root&&(s=this.end.getShiftedBy(-1)),n.isAfter(s)?(e.sourcePosition.isBefore(e.targetPosition)?(n=ae._createAt(s),n.offset=0):(e.deletionPosition.isEqual(n)||(s=e.deletionPosition),n=e.targetPosition),new Z(n,s)):new Z(n,s)}_getTransformedByInsertion(e,n,s=!1){if(s&&this.containsPosition(e))return[new Z(this.start,e),new Z(e.getShiftedBy(n),this.end._getTransformedByInsertion(e,n))];{const o=new Z(this.start,this.end);return o.start=o.start._getTransformedByInsertion(e,n),o.end=o.end._getTransformedByInsertion(e,n),[o]}}_getTransformedByMove(e,n,s,o=!1){if(this.isCollapsed){const p=this.start._getTransformedByMove(e,n,s);return[new Z(p)]}const r=Z._createFromPositionAndShift(e,s),a=n._getTransformedByDeletion(e,s);if(this.containsPosition(n)&&!o&&(r.containsPosition(this.start)||r.containsPosition(this.end))){const p=this.start._getTransformedByMove(e,n,s),v=this.end._getTransformedByMove(e,n,s);return[new Z(p,v)]}let l;const u=this.getDifference(r);let h=null;const m=this.getIntersection(r);if(u.length==1?h=new Z(u[0].start._getTransformedByDeletion(e,s),u[0].end._getTransformedByDeletion(e,s)):u.length==2&&(h=new Z(this.start,this.end._getTransformedByDeletion(e,s))),h?l=h._getTransformedByInsertion(a,s,m!==null||o):l=[],m){const p=new Z(m.start._getCombined(r.start,a),m.end._getCombined(r.start,a));l.length==2?l.splice(1,0,p):l.push(p)}return l}_getTransformedByDeletion(e,n){let s=this.start._getTransformedByDeletion(e,n),o=this.end._getTransformedByDeletion(e,n);return s==null&&o==null?null:(s==null&&(s=e),o==null&&(o=e),new Z(s,o))}static _createFromPositionAndShift(e,n){const s=e,o=e.getShiftedBy(n);return n>0?new this(s,o):new this(o,s)}static _createIn(e){return new this(ae._createAt(e,0),ae._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(ae._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new N("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const n=e[0];e.sort((r,a)=>r.start.isAfter(a.start)?1:-1);const s=e.indexOf(n),o=new this(n.start,n.end);for(let r=s-1;r>=0&&e[r].end.isEqual(o.start);r--)o.start=ae._createAt(e[r].start);for(let r=s+1;r<e.length&&e[r].start.isEqual(o.end);r++)o.end=ae._createAt(e[r].end);return o}static fromJSON(e,n){return new this(ae.fromJSON(e.start,n),ae.fromJSON(e.end,n))}}Z.prototype.is=function(i){return i==="range"||i==="model:range"};class K5 extends Tt(){constructor(){super();w(this,"_modelToViewMapping",new WeakMap);w(this,"_viewToModelMapping",new WeakMap);w(this,"_viewToModelLengthCallbacks",new Map);w(this,"_markerNameToElements",new Map);w(this,"_elementToMarkerNames",new Map);w(this,"_deferredBindingRemovals",new Map);w(this,"_unboundMarkerNames",new Set);w(this,"_cache",new sq);this.on("modelToViewPosition",(e,n)=>{if(n.viewPosition)return;const s=this._modelToViewMapping.get(n.modelPosition.parent);if(!s)throw new N("mapping-model-position-view-parent-not-found",this,{modelPosition:n.modelPosition});n.viewPosition=this.findPositionIn(s,n.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,n)=>{if(n.modelPosition)return;const s=this.findMappedViewAncestor(n.viewPosition),o=this._viewToModelMapping.get(s),r=this._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,s);n.modelPosition=ae._createAt(o,r)},{priority:"low"})}bindElements(e,n){this._modelToViewMapping.set(e,n),this._viewToModelMapping.set(n,e)}unbindViewElement(e,n={}){const s=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const o of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(o);n.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(s)==e&&this._modelToViewMapping.delete(s))}unbindModelElement(e){const n=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(n)==e&&this._viewToModelMapping.delete(n)&&this._cache.stopTracking(n)}bindElementToMarker(e,n){const s=this._markerNameToElements.get(n)||new Set;s.add(e);const o=this._elementToMarkerNames.get(e)||new Set;o.add(n),this._markerNameToElements.set(n,s),this._elementToMarkerNames.set(e,o)}unbindElementFromMarkerName(e,n){const s=this._markerNameToElements.get(n);s&&(s.delete(e),s.size==0&&this._markerNameToElements.delete(n));const o=this._elementToMarkerNames.get(e);o&&(o.delete(n),o.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,n]of this._deferredBindingRemovals)e.root==n&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new Z(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Ke(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const n={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",n),n.modelPosition}toViewPosition(e,n={}){const s={modelPosition:e,mapper:this,isPhantom:n.isPhantom};return this.fire("modelToViewPosition",s),s.viewPosition}markerNameToElements(e){const n=this._markerNameToElements.get(e);if(!n)return null;const s=new Set;for(const o of n)if(o.is("attributeElement"))for(const r of o.getElementsWithSameId())s.add(r);else s.add(o);return s}registerViewToModelLength(e,n){this._viewToModelLengthCallbacks.set(e,n)}findMappedViewAncestor(e){let n=e.parent;for(;!this._viewToModelMapping.has(n);)n=n.parent;return n}_toModelOffset(e,n,s){if(s!=e){const r=this._toModelOffset(e.parent,e.index,s),a=this._toModelOffset(e,n,e);return r+a}if(e.is("$text"))return n;let o=0;for(let r=0;r<n;r++)o+=this.getModelLength(e.getChild(r));return o}getModelLength(e){const n=[e];let s=0;for(;n.length>0;){const o=n.pop(),r=o.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(o.name);if(r)s+=r(o);else if(this._viewToModelMapping.has(o))s+=1;else if(o.is("$text"))s+=o.data.length;else{if(o.is("uiElement"))continue;for(const a of o.getChildren())n.push(a)}}return s}findPositionIn(e,n){if(n===0)return this._moveViewPositionToTextNode(new ge(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const o=this._cache.getClosest(e,n);return this._findPositionStartingFrom(o.viewPosition,o.modelOffset,n,e,!0)}else return this._findPositionStartingFrom(new ge(e,0),0,n,e,!1)}_findPositionStartingFrom(e,n,s,o,r){let a=e.parent,l=e.offset;if(a.is("$text"))return new ge(a,s-n);let u,h=n,m=0;for(;h<s;){if(u=a.getChild(l),!u){if(a==o)throw new N("mapping-model-offset-not-found",this,{modelOffset:s,viewContainer:o});l=a.parent.getChildIndex(a)+1,a=a.parent;continue}m=this.getModelLength(u),h+=m,l++,r&&this._cache.save(a,l,o,h)}return h==s?this._moveViewPositionToTextNode(new ge(a,l)):this._findPositionStartingFrom(new ge(u,0),h-m,s,o,r)}_moveViewPositionToTextNode(e){const n=e.nodeBefore,s=e.nodeAfter;return n&&n.is("view:$text")?new ge(n,n.data.length):s&&s.is("view:$text")?new ge(s,0):e}}class sq extends Tt(){constructor(){super(...arguments);w(this,"_cachedMapping",new WeakMap);w(this,"_nodeToCacheListIndex",new WeakMap);w(this,"_invalidateOnChildrenChangeCallback",(e,n,s)=>{this._clearCacheInsideParent(n,s.index)});w(this,"_invalidateOnTextChangeCallback",(e,n)=>{this._clearCacheStartingBefore(n)})}save(e,n,s,o){const r=this._cachedMapping.get(s),a=r.cacheMap.get(o);if(a){const m=e.getChild(n-1),p=a.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(a.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(m,p);return}const u={viewPosition:new ge(e,n),modelOffset:o};r.maxModelOffset=o>r.maxModelOffset?o:r.maxModelOffset,r.cacheMap.set(o,u);let h=r.cacheList.length-1;for(;h>=0&&r.cacheList[h].modelOffset>o;)h--;if(r.cacheList.splice(h+1,0,u),n>0){const m=e.getChild(n-1);this._nodeToCacheListIndex.set(m,h+1)}}getClosest(e,n){const s=this._cachedMapping.get(e);let o;if(s)if(n>s.maxModelOffset)o=s.cacheList[s.cacheList.length-1];else{const a=s.cacheMap.get(n);a?o=a:o=this._findInCacheList(s.cacheList,n)}else o=this.startTracking(e);const r=this._hoistViewPosition(o.viewPosition);return{modelOffset:o.modelOffset,viewPosition:r}}_hoistViewPosition(e){for(;e.parent.parent&&!this._cachedMapping.has(e.parent)&&e.isAtEnd;){const n=e.parent.parent,s=n.getChildIndex(e.parent)+1;e=new ge(n,s)}return e}startTracking(e){const s={viewPosition:new ge(e,0),modelOffset:0},o={maxModelOffset:0,cacheList:[s],cacheMap:new Map([[0,s]])};return this._cachedMapping.set(e,o),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),s}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,n){if(n==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheStartingBefore(e);else{const s=e.getChild(n-1);this._clearCacheStartingBefore(s)}}_clearCacheAll(e){const n=this._cachedMapping.get(e);n.maxModelOffset>0&&(n.maxModelOffset=0,n.cacheList.length=1,n.cacheMap.clear(),n.cacheMap.set(0,n.cacheList[0]))}_clearCacheStartingBefore(e){const n=this._nodeToCacheListIndex.get(e);if(n===void 0){const o=e.parent;this._cachedMapping.has(o)||this._clearCacheStartingBefore(o);return}let s=e.parent;for(;!this._cachedMapping.has(s);)s=s.parent;this._clearCacheFromIndex(s,n)}_clearCacheFromIndex(e,n){n===0&&(n=1);const s=this._cachedMapping.get(e),o=s.cacheList[n-1];if(!o)return;s.maxModelOffset=o.modelOffset;const r=s.cacheList.splice(n);for(const a of r){s.cacheMap.delete(a.modelOffset);const l=a.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(l)}}_findInCacheList(e,n){let s=0,o=e.length-1,r=o-s>>1,a=e[r];for(;s<o;)a.modelOffset<n?s=r+1:o=r-1,r=s+(o-s>>1),a=e[r];return a.modelOffset<=n?a:e[r-1]}}class oq{constructor(){w(this,"_consumable",new Map);w(this,"_textProxyRegistry",new Map)}add(t,e){e=fm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=fm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t)),this.test(t,e)?(this._consumable.get(t).set(e,!1),!0):!1}test(t,e){e=fm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(n===void 0)return null;const s=n.get(e);return s===void 0?null:s}revert(t,e){e=fm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return n===!1?(this._consumable.get(t).set(e,!0),!0):n===!0?!1:null}verifyAllConsumed(t){const e=[];for(const[n,s]of this._consumable)for(const[o,r]of s){const a=o.split(":")[0];r&&t==a&&e.push({event:o,item:n.name||n.description})}if(e.length)throw new N("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const s=n.get(t.endOffset);s&&(e=s.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,s=t.parent,o=Symbol("$textProxy:"+t.data);let r,a;return r=this._textProxyRegistry.get(e),r||(r=new Map,this._textProxyRegistry.set(e,r)),a=r.get(n),a||(a=new Map,r.set(n,a)),a.set(s,o),o}}function fm(i){const t=i.split(":");return t[0]=="insert"?t[0]:t[0]=="addMarker"||t[0]=="removeMarker"?i:t.length>1?t[0]+":"+t[1]:t[0]}class Z5 extends Tt(){constructor(e){super();w(this,"_conversionApi");w(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,n,s){const o=this._createConversionApi(s,e.getRefreshedItems());for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,o);const r=this._reduceChanges(e.getChanges());for(const a of r)a.type==="insert"?this._convertInsert(Z._createFromPositionAndShift(a.position,a.length),o):a.type==="reinsert"?this._convertReinsert(Z._createFromPositionAndShift(a.position,a.length),o):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,o):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,o);o.mapper.flushDeferredBindings();for(const a of o.mapper.flushUnboundMarkerNames()){const l=n.get(a).getRange();this._convertMarkerRemove(a,l,o),this._convertMarkerAdd(a,l,o)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,o);o.consumable.verifyAllConsumed("insert")}convert(e,n,s,o={}){const r=this._createConversionApi(s,void 0,o);this._convertInsert(e,r);for(const[a,l]of n)this._convertMarkerAdd(a,l,r);r.consumable.verifyAllConsumed("insert")}convertSelection(e,n,s){const o=this._createConversionApi(s);this.fire("cleanSelection",{selection:e},o);const r=e.getFirstPosition().root;if(!o.mapper.toViewElement(r))return;const a=Array.from(n.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(o.consumable,e,a),this.fire("selection",{selection:e},o),!!e.isCollapsed){for(const l of a)if(o.consumable.test(e,"addMarker:"+l.name)){const u=l.getRange();if(!rq(e.getFirstPosition(),l,o.mapper))continue;const h={item:e,markerName:l.name,markerRange:u};this.fire(`addMarker:${l.name}`,h,o)}for(const l of e.getAttributeKeys())if(o.consumable.test(e,"attribute:"+l)){const u={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,u,o)}}}_convertInsert(e,n,s={}){s.doNotAddConsumables||this._addConsumablesForInsert(n.consumable,e);for(const o of e.getWalker({shallow:!0}))this._testAndFire("insert",YS(o),n)}_convertRemove(e,n,s,o){this.fire(`remove:${s}`,{position:e,length:n},o)}_convertAttribute(e,n,s,o,r){this._addConsumablesForRange(r.consumable,e,`attribute:${n}`);for(const a of e){const l={item:a.item,range:Z._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:n,attributeOldValue:s,attributeNewValue:o};this._testAndFire(`attribute:${n}`,l,r)}}_convertReinsert(e,n){const s=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(n.consumable,s);for(const o of s.map(YS))this._testAndFire("insert",{...o,reconversion:!0},n)}_convertMarkerAdd(e,n,s){if(n.root.rootName=="$graveyard")return;const o=`addMarker:${e}`;if(s.consumable.add(n,o),this.fire(o,{markerName:e,markerRange:n},s),!!s.consumable.consume(n,o)){this._addConsumablesForRange(s.consumable,n,o);for(const r of n.getItems()){if(!s.consumable.test(r,o))continue;const a={item:r,range:Z._createOn(r),markerName:e,markerRange:n};this.fire(o,a,s)}}}_convertMarkerRemove(e,n,s){n.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:n},s)}_reduceChanges(e){const n={changes:e};return this.fire("reduceChanges",n),n.changes}_addConsumablesForInsert(e,n){for(const s of n){const o=s.item;if(e.test(o,"insert")===null){e.add(o,"insert");for(const r of o.getAttributeKeys())e.add(o,"attribute:"+r)}}return e}_addConsumablesForRange(e,n,s){for(const o of n.getItems())e.add(o,s);return e}_addConsumablesForSelection(e,n,s){e.add(n,"selection");for(const o of s)e.add(n,"addMarker:"+o.name);for(const o of n.getAttributeKeys())e.add(n,"attribute:"+o);return e}_testAndFire(e,n,s){const o=aq(e,n),r=n.item.is("$textProxy")?s.consumable._getSymbolForTextProxy(n.item):n.item,a=this._firedEventsMap.get(s),l=a.get(r);if(!l)a.set(r,new Set([o]));else if(!l.has(o))l.add(o);else return;this.fire(o,n,s)}_testAndFireAddAttributes(e,n){const s={item:e,range:Z._createOn(e)};for(const o of s.item.getAttributeKeys())s.attributeKey=o,s.attributeOldValue=null,s.attributeNewValue=s.item.getAttribute(o),this._testAndFire(`attribute:${o}`,s,n)}_createConversionApi(e,n=new Set,s={}){const o={...this._conversionApi,consumable:new oq,writer:e,options:s,convertItem:r=>this._convertInsert(Z._createOn(r),o),convertChildren:r=>this._convertInsert(Z._createIn(r),o,{doNotAddConsumables:!0}),convertAttributes:r=>this._testAndFireAddAttributes(r,o),canReuseView:r=>!n.has(o.mapper.toModelElement(r))};return this._firedEventsMap.set(o,new Map),o}}function rq(i,t,e){const n=t.getRange(),s=Array.from(i.getAncestors());return s.shift(),s.reverse(),!s.some(r=>{if(n.containsItem(r))return!!e.toViewElement(r).getCustomProperty("addHighlight")})}function aq(i,t){const e=t.item.is("element")?t.item.name:"$text";return`${i}:${e}`}function YS(i){return{item:i.item,range:Z._createFromPositionAndShift(i.previousPosition,i.length)}}let $a=class extends Ur{constructor(e){super();w(this,"parent",null);w(this,"_attrs");w(this,"_index",null);w(this,"_startOffset",null);this._attrs=Cs(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.startOffset),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),o=e.getAncestors(n);let r=0;for(;s[r]==o[r]&&s[r];)r++;return r===0?null:s[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),o=Gn(n,s);switch(o){case"prefix":return!0;case"extension":return!1;default:return n[o]<s[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((n,s)=>(n[s[0]]=s[1],n),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,n){this._attrs.set(e,n)}_setAttributesTo(e){this._attrs=Cs(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};$a.prototype.is=function(i){return i==="node"||i==="model:node"};class Vi extends Tt(Ur){constructor(...e){super();w(this,"_lastRangeBackward",!1);w(this,"_attrs",new Map);w(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const o of e._ranges)if(n.isEqual(o)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new Z(e.start,e.end)}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?new Z(e.start,e.end):null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?new Z(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[n,s,o]=e;if(typeof s=="object"&&(o=s,s=void 0),n===null)this._setRanges([]);else if(n instanceof Vi)this._setRanges(n.getRanges(),n.isBackward);else if(n&&typeof n.getRanges=="function")this._setRanges(n.getRanges(),n.isBackward);else if(n instanceof Z)this._setRanges([n],!!o&&!!o.backward);else if(n instanceof ae)this._setRanges([new Z(n)]);else if(n instanceof $a){const r=!!o&&!!o.backward;let a;if(s=="in")a=Z._createIn(n);else if(s=="on")a=Z._createOn(n);else if(s!==void 0)a=new Z(ae._createAt(n,s));else throw new N("model-selection-setto-required-second-parameter",[this,n]);this._setRanges([a],r)}else if(Li(n))this._setRanges(n,o&&!!o.backward);else throw new N("model-selection-setto-not-selectable",[this,n])}_setRanges(e,n=!1){const s=Array.from(e),o=s.some(r=>{if(!(r instanceof Z))throw new N("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(r))});s.length===this._ranges.length&&!o||(this._replaceAllRanges(s),this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0}))}setFocus(e,n){if(this.anchor===null)throw new N("model-selection-setfocus-no-ranges",[this,e]);const s=ae._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(o)=="before"?(this._pushRange(new Z(s,o)),this._lastRangeBackward=!0):(this._pushRange(new Z(o,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,n){this.getAttribute(e)!==n&&(this._attrs.set(e,n),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const n of this.getRanges()){const s=JS(n.start,e);cq(s,n)&&(yield s);const o=n.getWalker();for(const a of o){const l=a.item;a.type=="elementEnd"&&lq(l,e,n)?yield l:a.type=="elementStart"&&l.is("model:element")&&l.root.document.model.schema.isBlock(l)&&o.jumpTo(ae._createAt(l,"end"))}const r=JS(n.end,e);uq(r,n)&&(yield r)}}containsEntireContent(e=this.anchor.root){const n=ae._createAt(e,0),s=ae._createAt(e,"end");return n.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new Z(e.start,e.end))}_checkRange(e){for(let n=0;n<this._ranges.length;n++)if(e.isIntersecting(this._ranges[n]))throw new N("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[n]})}_replaceAllRanges(e){this._removeAllRanges();for(const n of e)this._pushRange(n)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Vi.prototype.is=function(i){return i==="selection"||i==="model:selection"};function Y5(i,t){return t.has(i)?!1:(t.add(i),i.root.document.model.schema.isBlock(i)&&!!i.parent)}function lq(i,t,e){return Y5(i,t)&&U0(i,e)}function JS(i,t){const n=i.parent.root.document.model.schema,s=i.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const r=s.find(a=>o?!1:(o=n.isLimit(a),!o&&Y5(a,t)));return s.forEach(a=>t.add(a)),r}function U0(i,t){const e=dq(i);return e?!t.containsRange(Z._createOn(e),!0):!0}function cq(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.start.isTouching(ae._createAt(i,i.maxOffset))?!1:U0(i,t):!1}function uq(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.end.isTouching(ae._createAt(i,0))?!1:U0(i,t):!1}function dq(i){const t=i.root.document.model.schema;let e=i.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}class ei extends Tt(Z){constructor(t,e){super(t,e),hq.call(this)}detach(){this.stopListening()}toRange(){return new Z(this.start,this.end)}static fromRange(t){return new ei(t.start,t.end)}}ei.prototype.is=function(i){return i==="liveRange"||i==="model:liveRange"||i=="range"||i==="model:range"};function hq(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&fq.call(this,e)},{priority:"low"})}function fq(i){const t=this.getTransformedByOperation(i),e=Z._createFromRanges(t),n=!e.isEqual(this),s=mq(this,i);let o=null;if(n){e.root.rootName=="$graveyard"&&(i.type=="remove"?o=i.sourcePosition:o=i.deletionPosition);const r=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",r,{deletionPosition:o})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function mq(i,t){switch(t.type){case"insert":return i.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(t.sourcePosition)||i.start.isEqual(t.sourcePosition)||i.containsPosition(t.targetPosition);case"split":return i.containsPosition(t.splitPosition)||i.containsPosition(t.insertionPosition)}return!1}class Lt extends $a{constructor(e,n){super(n);w(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Lt(this.data,this.getAttributes())}static fromJSON(e){return new Lt(e.data,e.attributes)}}Lt.prototype.is=function(i){return i==="$text"||i==="model:$text"||i==="text"||i==="model:text"||i==="node"||i==="model:node"};const Xd="selection:";class xs extends Tt(Ur){constructor(e){super();w(this,"_selection");this._selection=new gq(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,n){this._selection.setFocus(e,n)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,n){this._selection.setAttribute(e,n)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Xd+e}static _isStoreAttributeKey(e){return e.startsWith(Xd)}}xs.prototype.is=function(i){return i==="selection"||i=="model:selection"||i=="documentSelection"||i=="model:documentSelection"};class gq extends Vi{constructor(e){super();w(this,"markers",new En({idProperty:"name"}));w(this,"_model");w(this,"_document");w(this,"_attributePriority",new Map);w(this,"_selectionRestorePosition",null);w(this,"_hasChangedRange",!1);w(this,"_overriddenGravityRegister",new Set);w(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(n,s)=>{const o=s[0];!o.isDocumentOperation||o.type=="marker"||o.type=="rename"||o.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(n,s,o,r)=>{this._updateMarker(s,r)}),this.listenTo(this._document,"change",(n,s)=>{pq(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,n){super.setFocus(e,n),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,n){if(this._setAttribute(e,n)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}overrideGravity(){const e=si();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new N("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const n=this._prepareRange(e);n&&this._ranges.push(n)}_validateSelectionRanges(e){for(const n of e)if(!this._document._validateSelectionRange(n))throw new N("document-selection-wrong-position",this,{range:n})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const n=ei.fromRange(e);return n.on("change:range",(s,o,r)=>{if(this._hasChangedRange=!0,n.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;const a=this._ranges.indexOf(n);this._ranges.splice(a,1),n.detach()}}),n}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let n=!1;for(const o of this._model.markers){const r=o.name.split(":",1)[0];if(!this._observedMarkers.has(r))continue;const a=o.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(o)}const s=Array.from(this.markers);for(const o of e)this.markers.has(o)||(this.markers.add(o),n=!0);for(const o of Array.from(this.markers))e.includes(o)||(this.markers.remove(o),n=!0);n&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(e,n){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let o=!1;const r=Array.from(this.markers),a=this.markers.has(e);if(!n)a&&(this.markers.remove(e),o=!0);else{let l=!1;for(const u of this.getRanges())if(n.containsRange(u,!u.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),o=!0):!l&&a&&(this.markers.remove(e),o=!0)}o&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateAttributes(e){const n=Cs(this._getSurroundingAttributes()),s=Cs(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[r,a]of this._attributePriority)a=="low"&&(this._attrs.delete(r),this._attributePriority.delete(r));this._setAttributesTo(n);const o=[];for(const[r,a]of this.getAttributes())(!s.has(r)||s.get(r)!==a)&&o.push(r);for(const[r]of s)this.hasAttribute(r)||o.push(r);o.length>0&&this.fire("change:attribute",{attributeKeys:o,directChange:!1})}_setAttribute(e,n,s=!0){const o=s?"normal":"low";return o=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===n?!1:(this._attrs.set(e,n),this._attributePriority.set(e,o),!0)}_removeAttribute(e,n=!0){const s=n?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,s),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const n=new Set;for(const[s,o]of this.getAttributes())e.get(s)!==o&&this._removeAttribute(s,!1);for(const[s,o]of e)this._setAttribute(s,o,!1)&&n.add(s);return n}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const n of e.getAttributeKeys())n.startsWith(Xd)&&(yield[n.substr(Xd.length),e.getAttribute(n)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),n=this._model.schema;if(e.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const o=e.textNode?e.textNode:e.nodeBefore,r=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(s=Zu(o,n)),s||(s=Zu(r,n)),!this.isGravityOverridden&&!s){let a=o;for(;a&&!s;)a=a.previousSibling,s=Zu(a,n)}if(!s){let a=r;for(;a&&!s;)a=a.nextSibling,s=Zu(a,n)}s||(s=this.getStoredAttributes())}else{const o=this.getFirstRange();for(const r of o){if(r.item.is("element")&&n.isObject(r.item)){s=Zu(r.item,n);break}if(r.type=="text"){s=r.item.getAttributes();break}}}return s}_fixGraveyardSelection(e){const n=this._model.schema.getNearestSelectionRange(e);n&&this._pushRange(n)}}function Zu(i,t){if(!i)return null;if(i instanceof bs||i instanceof Lt)return i.getAttributes();if(!t.isInline(i))return null;if(!t.isObject(i))return[];const e=[];for(const[n,s]of i.getAttributes())t.checkAttribute("$text",n)&&t.getAttributeProperties(n).copyFromObject!==!1&&e.push([n,s]);return e}function pq(i,t){const e=i.document.differ;for(const n of e.getChanges()){if(n.type!="insert")continue;const s=n.position.parent;n.length===s.maxOffset&&i.enqueueChange(t,r=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(Xd));for(const l of a)r.removeAttribute(l,s)})}}class Sd{constructor(t){w(this,"_nodes",[]);w(this,"_offsetToNode",[]);t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new N("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new N("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const n=[];for(const o of e){if(!(o instanceof $a))throw new N("model-nodelist-insertnodes-not-node",this);n.push(o)}let s=this.indexToOffset(t);NS(this._nodes,n,t),NS(this._offsetToNode,bq(n),s);for(let o=t;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=s,s+=this._nodes[o].offsetSize}_removeNodes(t,e=1){if(e==0)return[];let n=this.indexToOffset(t);const s=this._nodes.splice(t,e),o=s[s.length-1],r=o.startOffset+o.offsetSize-n;this._offsetToNode.splice(n,r);for(const a of s)a._index=null,a._startOffset=null;for(let a=t;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=n,n+=this._nodes[a].offsetSize;return s}_removeNodesArray(t){if(t.length==0)return;for(const n of t)n._index=null,n._startOffset=null;this._nodes=this._nodes.filter(n=>n.index!==null),this._offsetToNode=this._offsetToNode.filter(n=>n.index!==null);let e=0;for(let n=0;n<this._nodes.length;n++)this._nodes[n]._index=n,this._nodes[n]._startOffset=e,e+=this._nodes[n].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function bq(i){const t=[];let e=0;for(const n of i)for(let s=0;s<n.offsetSize;s++)t[e++]=n;return t}class Rt extends $a{constructor(e,n,s){super(n);w(this,"name");w(this,"_children",new Sd);this.name=e,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}findAncestor(e,n={}){let s=n.includeSelf?this:this.parent;for(;s;){if(s.name===e)return s;s=s.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const n of this._children)e.children.push(n.toJSON())}return e}_clone(e=!1){const n=e?yq(this._children):void 0;return new Rt(this.name,this.getAttributes(),n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=wq(n);for(const o of s)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const o of s)o.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}static fromJSON(e){let n;if(e.children){n=[];for(const s of e.children)s.name?n.push(Rt.fromJSON(s)):n.push(Lt.fromJSON(s))}return new Rt(e.name,e.attributes,n)}}Rt.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="model:element"):i==="element"||i==="model:element"||i==="node"||i==="model:node"};function wq(i){if(typeof i=="string")return[new Lt(i)];Li(i)||(i=[i]);const t=[];for(const e of i)typeof e=="string"?t.push(new Lt(e)):e instanceof bs?t.push(new Lt(e.data,e.getAttributes())):t.push(e);return t}function yq(i){const t=[];for(const e of i)t.push(e._clone(!0));return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class J5{constructor(t){w(this,"_dispatchers");this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class _q extends J5{elementToElement(t){return this.add(Bq(t))}elementToStructure(t){return this.add(Fq(t))}attributeToElement(t){return this.add(Uq(t))}attributeToAttribute(t){return this.add(zq(t))}markerToElement(t){return this.add(Hq(t))}markerToHighlight(t){return this.add(qq(t))}markerToData(t){return this.add(Wq(t))}}function X5(){return(i,t,e)=>{if(!e.consumable.consume(t.item,i.name))return;const n=e.writer,s=e.mapper.toViewPosition(t.range.start),o=n.createText(t.item.data);n.insert(s,o)}}function Q5(){return(i,t,e)=>{e.convertAttributes(t.item),!t.reconversion&&t.item.is("element")&&!t.item.isEmpty&&e.convertChildren(t.item)}}function vq(){return(i,t,e)=>{const n=e.mapper.toViewPosition(t.position),s=t.position.getShiftedBy(t.length),o=e.mapper.toViewPosition(s,{isPhantom:!0}),r=e.writer.createRange(n,o),a=e.writer.remove(r.getTrimmed());for(const l of e.writer.createRangeIn(a).getItems())e.mapper.unbindViewElement(l,{defer:!0})}}function eV(i,t){const e=i.createAttributeElement("span",t.attributes);return t.classes&&e._addClass(t.classes),typeof t.priority=="number"&&(e._priority=t.priority),e._id=t.id,e}function Cq(){return(i,t,e)=>{const n=t.selection;if(n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=[];for(const o of n.getRanges())s.push(e.mapper.toViewRange(o));e.writer.setSelection(s,{backward:n.isBackward})}}function Tq(){return(i,t,e)=>{const n=t.selection;if(!n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=e.writer,o=n.getFirstPosition(),r=e.mapper.toViewPosition(o),a=s.breakAttributes(r);s.setSelection(a)}}function xq(){return(i,t,e)=>{const n=e.writer,s=n.document.selection;for(const o of s.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&e.writer.mergeAttributes(o.start);n.setSelection(null)}}function kq(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),o=i(e.attributeNewValue,n,e);if(!s&&!o)return;n.consumable.consume(e.item,t.name);const r=n.writer,a=r.document.selection;if(e.item instanceof Vi||e.item instanceof xs)r.wrap(a.getFirstRange(),o);else{let l=n.mapper.toViewRange(e.range);e.attributeOldValue!==null&&s&&(l=r.unwrap(l,s)),e.attributeNewValue!==null&&o&&r.wrap(l,o)}}}function Eq(i,t=Jq){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const o=i(n.item,s,n);if(!o)return;t(n.item,s.consumable);const r=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,o),s.writer.insert(r,o),s.convertAttributes(n.item),oV(o,n.item.getChildren(),s,{reconversion:n.reconversion})}}function Sq(i,t){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const o=new Map;s.writer._registerSlotFactory(jq(n.item,o,s));const r=i(n.item,s,n);if(s.writer._clearSlotFactory(),!r)return;Kq(n.item,o,s),t(n.item,s.consumable);const a=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,r),s.writer.insert(a,r),s.convertAttributes(n.item),Zq(r,o,s,{reconversion:n.reconversion})}}function Aq(i){return(t,e,n)=>{e.isOpening=!0;const s=i(e,n);e.isOpening=!1;const o=i(e,n);if(!s||!o)return;const r=e.markerRange;if(r.isCollapsed&&!n.consumable.consume(r,t.name))return;for(const u of r)if(!n.consumable.consume(u.item,t.name))return;const a=n.mapper,l=n.writer;l.insert(a.toViewPosition(r.start),s),n.mapper.bindElementToMarker(s,e.markerName),r.isCollapsed||(l.insert(a.toViewPosition(r.end),o),n.mapper.bindElementToMarker(o,e.markerName)),t.stop()}}function Rq(){return(i,t,e)=>{const n=e.mapper.markerNameToElements(t.markerName);if(n){for(const s of n)e.mapper.unbindElementFromMarkerName(s,t.markerName),e.writer.clear(e.writer.createRangeOn(s),s);e.writer.clearClonedElementsGroup(t.markerName),i.stop()}}}function Iq(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const o=e.markerRange;n.consumable.consume(o,t.name)&&(XS(o,!1,n,e,s),XS(o,!0,n,e,s),t.stop())}}function XS(i,t,e,n,s){const o=t?i.start:i.end,r=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(r||a){let u,h;t&&r||!t&&!a?(u=r,h=!0):(u=a,h=!1);const m=e.mapper.toViewElement(u);if(m){Pq(m,t,h,e,n,s);return}}const l=e.mapper.toViewPosition(o);Mq(l,t,e,n,s)}function Pq(i,t,e,n,s,o){const r=`data-${o.group}-${t?"start":"end"}-${e?"before":"after"}`,a=i.hasAttribute(r)?i.getAttribute(r).split(","):[];a.unshift(o.name),n.writer.setAttribute(r,a.join(","),i),n.mapper.bindElementToMarker(i,s.markerName)}function Mq(i,t,e,n,s){const o=`${s.group}-${t?"start":"end"}`,r=s.name?{name:s.name}:null,a=e.writer.createUIElement(o,r);e.writer.insert(i,a),e.mapper.bindElementToMarker(a,n.markerName)}function Vq(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const o=n.mapper.markerNameToElements(e.markerName);if(!o)return;for(const a of o)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("containerElement")?(r(`data-${s.group}-start-before`,a),r(`data-${s.group}-start-after`,a),r(`data-${s.group}-end-before`,a),r(`data-${s.group}-end-after`,a)):n.writer.clear(n.writer.createRangeOn(a),a);n.writer.clearClonedElementsGroup(e.markerName),t.stop();function r(a,l){if(l.hasAttribute(a)){const u=new Set(l.getAttribute(a).split(","));u.delete(s.name),u.size==0?n.writer.removeAttribute(a,l):n.writer.setAttribute(a,Array.from(u).join(","),l)}}}}function Nq(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),o=i(e.attributeNewValue,n,e);if(!s&&!o)return;n.consumable.consume(e.item,t.name);const r=n.mapper.toViewElement(e.item),a=n.writer;if(!r)throw new N("conversion-attribute-to-attribute-on-text",n.dispatcher,e);if(e.attributeOldValue!==null&&s){let l=s.value;s.key=="style"&&(typeof s.value=="string"?l=new kd(a.document.stylesProcessor).setTo(s.value).getStylesEntries().map(([u])=>u):l=Object.keys(s.value)),a.removeAttribute(s.key,l,r)}if(e.attributeNewValue!==null&&o){let l=o.value;o.key=="style"&&typeof o.value=="string"&&(l=Object.fromEntries(new kd(a.document.stylesProcessor).setTo(o.value).getStylesEntries())),a.setAttribute(o.key,l,!1,r)}}}function Oq(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof Vi||e.item instanceof xs)&&!e.item.is("$textProxy"))return;const s=z0(i,e,n);if(!s||!n.consumable.consume(e.item,t.name))return;const o=n.writer,r=eV(o,s),a=o.document.selection;if(e.item instanceof Vi||e.item instanceof xs)o.wrap(a.getFirstRange(),r);else{const l=n.mapper.toViewRange(e.range),u=o.wrap(l,r);for(const h of u.getItems())if(h.is("attributeElement")&&h.isSimilar(r)){n.mapper.bindElementToMarker(h,e.markerName);break}}}}function Dq(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof Rt))return;const s=z0(i,e,n);if(!s||!n.consumable.test(e.item,t.name))return;const o=n.mapper.toViewElement(e.item);if(o&&o.getCustomProperty("addHighlight")){n.consumable.consume(e.item,t.name);for(const a of Z._createIn(e.item))n.consumable.consume(a.item,t.name);o.getCustomProperty("addHighlight")(o,s,n.writer),n.mapper.bindElementToMarker(o,e.markerName)}}}function Lq(i){return(t,e,n)=>{if(e.markerRange.isCollapsed)return;const s=z0(i,e,n);if(!s)return;const o=eV(n.writer,s),r=n.mapper.markerNameToElements(e.markerName);if(r){for(const a of r)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,s.id,n.writer);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function Bq(i){const t=tV(i.model),e=Qd(i.view,"container");return t.attributes.length&&(t.children=!0),n=>{n.on(`insert:${t.name}`,Eq(e,sV(t)),{priority:i.converterPriority||"normal"}),(t.children||t.attributes.length)&&n.on("reduceChanges",iV(t),{priority:"low"})}}function Fq(i){const t=tV(i.model),e=Qd(i.view,"container");return t.children=!0,n=>{if(n._conversionApi.schema.checkChild(t.name,"$text"))throw new N("conversion-element-to-structure-disallowed-text",n,{elementName:t.name});n.on(`insert:${t.name}`,Sq(e,sV(t)),{priority:i.converterPriority||"normal"}),n.on("reduceChanges",iV(t),{priority:"low"})}}function Uq(i){i=Di(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=Qd(i.view[s],"attribute");else i.view=Qd(i.view,"attribute");const n=nV(i);return s=>{s.on(e,kq(n),{priority:i.converterPriority||"normal"})}}function zq(i){i=Di(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=QS(i.view[s]);else i.view=QS(i.view);const n=nV(i);return s=>{s.on(e,Nq(n),{priority:i.converterPriority||"normal"})}}function Hq(i){const t=Qd(i.view,"ui");return e=>{e.on(`addMarker:${i.model}`,Aq(t),{priority:i.converterPriority||"normal"}),e.on(`removeMarker:${i.model}`,Rq(),{priority:i.converterPriority||"normal"})}}function Wq(i){i=Di(i);const t=i.model;let e=i.view;return e||(e=n=>({group:t,name:n.substr(i.model.length+1)})),n=>{n.on(`addMarker:${t}`,Iq(e),{priority:i.converterPriority||"normal"}),n.on(`removeMarker:${t}`,Vq(e),{priority:i.converterPriority||"normal"})}}function qq(i){return t=>{t.on(`addMarker:${i.model}`,Oq(i.view),{priority:i.converterPriority||"normal"}),t.on(`addMarker:${i.model}`,Dq(i.view),{priority:i.converterPriority||"normal"}),t.on(`removeMarker:${i.model}`,Lq(i.view),{priority:i.converterPriority||"normal"})}}function tV(i){return typeof i=="string"&&(i={name:i}),{name:i.name,attributes:i.attributes?bn(i.attributes):[],children:!!i.children}}function Qd(i,t){return typeof i=="function"?i:(e,n)=>Gq(i,n,t)}function Gq(i,t,e){typeof i=="string"&&(i={name:i});let n;const s=t.writer,o=Object.assign({},i.attributes);if(e=="container")n=s.createContainerElement(i.name,o);else if(e=="attribute"){const r={priority:i.priority||Ra.DEFAULT_PRIORITY};n=s.createAttributeElement(i.name,o,r)}else n=s.createUIElement(i.name,o);if(i.styles){const r=Object.keys(i.styles);for(const a of r)s.setStyle(a,i.styles[a],n)}if(i.classes){const r=i.classes;if(typeof r=="string")s.addClass(r,n);else for(const a of r)s.addClass(a,n)}return n}function nV(i){return i.model.values?(t,e,n)=>{const s=i.view[t];return s?s(t,e,n):null}:i.view}function QS(i){return typeof i=="string"?t=>({key:i,value:t}):typeof i=="object"?i.value?()=>i:t=>({key:i.key,value:t}):i}function z0(i,t,e){const n=typeof i=="function"?i(t,e):i;return n?(n.priority||(n.priority=10),n.id||(n.id=t.markerName),n):null}function $q(i){return(t,e)=>{if(!t.is("element",i.name))return!1;if(e.type=="attribute"){if(i.attributes.includes(e.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(i.children)return!0}return!1}}function iV(i){const t=$q(i);return(e,n)=>{const s=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const o of n.changes){const r=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!r||!t(r,o)){s.push(o);continue}if(!n.reconvertedElements.has(r)){n.reconvertedElements.add(r);const a=ae._createBefore(r);let l=s.length;for(let u=s.length-1;u>=0;u--){const h=s[u],p=(h.type=="attribute"?h.range.start:h.position).compareWith(a);if(p=="before"||h.type=="remove"&&p=="same")break;l=u}s.splice(l,0,{type:"remove",name:r.name,position:a,length:1},{type:"reinsert",name:r.name,position:a,length:1})}}n.changes=s}}function sV(i){return(t,e,n={})=>{const s=["insert"];for(const o of i.attributes)t.hasAttribute(o)&&s.push(`attribute:${o}`);return s.every(o=>e.test(t,o))?(n.preflight||s.forEach(o=>e.consume(t,o)),!0):!1}}function jq(i,t,e){return(n,s)=>{const o=n.createContainerElement("$slot");let r=null;if(s==="children")r=Array.from(i.getChildren());else if(typeof s=="function")r=Array.from(i.getChildren()).filter(a=>s(a));else throw new N("conversion-slot-mode-unknown",e.dispatcher,{modeOrFilter:s});return t.set(o,r),o}}function Kq(i,t,e){const n=Array.from(t.values()).flat(),s=new Set(n);if(s.size!=n.length)throw new N("conversion-slot-filter-overlap",e.dispatcher,{element:i});if(s.size!=i.childCount)throw new N("conversion-slot-filter-incomplete",e.dispatcher,{element:i})}function Zq(i,t,e,n){e.mapper.on("modelToViewPosition",r,{priority:"highest"});let s=null,o=null;for([s,o]of t)oV(i,o,e,n),e.writer.move(e.writer.createRangeIn(s),e.writer.createPositionBefore(s)),e.writer.remove(s);e.mapper.off("modelToViewPosition",r);function r(a,l){const u=l.modelPosition.nodeAfter,h=o.indexOf(u);h<0||(l.viewPosition=l.mapper.findPositionIn(s,h))}}function oV(i,t,e,n){for(const s of t)Yq(i.root,s,e,n)||e.convertItem(s)}function Yq(i,t,e,n){const{writer:s,mapper:o}=e;if(!n.reconversion)return!1;const r=o.toViewElement(t);return!r||r.root==i||!e.canReuseView(r)?!1:(s.move(s.createRangeOn(r),o.toViewPosition(ae._createBefore(t))),!0)}function Jq(i,t,{preflight:e}={}){return e?t.test(i,"insert"):t.consume(i,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rV(i){const{schema:t,document:e}=i.model;for(const n of e.getRoots())if(n.isEmpty&&!t.checkChild(n,"$text")&&t.checkChild(n,"paragraph"))return i.insertElement("paragraph",n),!0;return!1}function aV(i,t,e){const n=e.createContext(i);return!(!e.checkChild(n,"paragraph")||!e.checkChild(n.push("paragraph"),t))}function lV(i,t){const e=t.createElement("paragraph");return t.insert(e,i),t.createPositionAt(e,0)}class Xq extends J5{elementToElement(t){return this.add(cV(t))}elementToAttribute(t){return this.add(tG(t))}attributeToAttribute(t){return this.add(nG(t))}elementToMarker(t){return this.add(iG(t))}dataToMarker(t){return this.add(sG(t))}}function eA(){return(i,t,e)=>{if(!t.modelRange&&e.consumable.consume(t.viewItem,{name:!0})){const{modelRange:n,modelCursor:s}=e.convertChildren(t.viewItem,t.modelCursor);t.modelRange=n,t.modelCursor=s}}}function Qq(){return(i,t,{schema:e,consumable:n,writer:s})=>{let o=t.modelCursor;if(!n.test(t.viewItem))return;if(!e.checkChild(o,"$text")){if(!aV(o,"$text",e)||t.viewItem.data.trim().length==0)return;o=lV(o,s)}n.consume(t.viewItem);const r=s.createText(t.viewItem.data);s.insert(r,o),t.modelRange=s.createRange(o,o.getShiftedBy(r.offsetSize)),t.modelCursor=t.modelRange.end}}function eG(i,t){return(e,n)=>{const s=n.newSelection,o=[];for(const a of s.getRanges())o.push(t.toModelRange(a));const r=i.createSelection(o,{backward:s.isBackward});r.isEqual(i.document.selection)||i.change(a=>{a.setSelection(r)})}}function cV(i){i=Di(i);const t=X_(i),e=H0(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"normal"})}}function tG(i){i=Di(i),uV(i);const t=dV(i,!1),e=H0(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"low"})}}function nG(i){i=Di(i);let t=null;(typeof i.view=="string"||i.view.key)&&(t=aG(i)),uV(i,t);const e=dV(i,!0);return n=>{n.on("element",e,{priority:i.converterPriority||"low"})}}function iG(i){const t=uG(i.model);return cV({...i,model:t})}function sG(i){i=Di(i),i.model||(i.model=s=>s?i.view+":"+s:i.view);const t={view:i.view,model:i.model},e=X_(tA(t,"start")),n=X_(tA(t,"end"));return s=>{s.on(`element:${i.view}-start`,e,{priority:i.converterPriority||"normal"}),s.on(`element:${i.view}-end`,n,{priority:i.converterPriority||"normal"});const o=Aa.low,r=Aa.highest,a=Aa.get(i.converterPriority)/r;s.on("element",oG(t),{priority:o+a})}}function oG(i){return(t,e,n)=>{const s=`data-${i.view}`;if(!n.consumable.test(e.viewItem,{attributes:s+"-end-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-end-before"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-before"}))return;e.modelRange||Object.assign(e,n.convertChildren(e.viewItem,e.modelCursor)),n.consumable.consume(e.viewItem,{attributes:s+"-end-after"})&&o(e.modelRange.end,e.viewItem.getAttribute(s+"-end-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-after"})&&o(e.modelRange.end,e.viewItem.getAttribute(s+"-start-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-end-before"})&&o(e.modelRange.start,e.viewItem.getAttribute(s+"-end-before").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-before"})&&o(e.modelRange.start,e.viewItem.getAttribute(s+"-start-before").split(","));function o(r,a){for(const l of a){const u=i.model(l,n),h=n.writer.createElement("$marker",{"data-name":u});n.writer.insert(h,r),e.modelCursor.isEqual(r)?e.modelCursor=e.modelCursor.getShiftedBy(1):e.modelCursor=e.modelCursor._getTransformedByInsertion(r,1),e.modelRange=e.modelRange._getTransformedByInsertion(r,1)[0]}}}}function H0(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function X_(i){const t=new Ts(i.view);return(e,n,s)=>{const o=t.match(n.viewItem);if(!o)return;const r=o.match;if(r.name=!0,!s.consumable.test(n.viewItem,r))return;const a=rG(i.model,n.viewItem,s);a&&s.safeInsert(a,n.modelCursor)&&(s.consumable.consume(n.viewItem,r),s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n))}}function rG(i,t,e){return i instanceof Function?i(t,e):e.writer.createElement(i)}function aG(i){typeof i.view=="string"&&(i.view={key:i.view});const t=i.view.key,e=typeof i.view.value>"u"?/[\s\S]*/:i.view.value;let n;return t=="class"||t=="style"?n={[t=="class"?"classes":"styles"]:e}:n={attributes:{[t]:e}},i.view.name&&(n.name=i.view.name),i.view=n,t}function uV(i,t=null){const e=t===null?!0:o=>o.getAttribute(t),n=typeof i.model!="object"?i.model:i.model.key,s=typeof i.model!="object"||typeof i.model.value>"u"?e:i.model.value;i.model={key:n,value:s}}function dV(i,t){const e=new Ts(i.view);return(n,s,o)=>{if(!s.modelRange&&t)return;const r=e.match(s.viewItem);if(!r||(lG(i.view,s.viewItem)?r.match.name=!0:delete r.match.name,!o.consumable.test(s.viewItem,r.match)))return;const a=i.model.key,l=typeof i.model.value=="function"?i.model.value(s.viewItem,o,s):i.model.value;if(l===null)return;s.modelRange||Object.assign(s,o.convertChildren(s.viewItem,s.modelCursor)),cG(s.modelRange,{key:a,value:l},t,o)&&(o.consumable.test(s.viewItem,{name:!0})&&(r.match.name=!0),o.consumable.consume(s.viewItem,r.match))}}function lG(i,t){const e=typeof i=="function"?i(t):i;return typeof e=="object"&&!H0(e)?!1:!e.classes&&!e.attributes&&!e.styles}function cG(i,t,e,n){let s=!1;for(const o of Array.from(i.getItems({shallow:e})))n.schema.checkAttribute(o,t.key)&&(s=!0,!o.hasAttribute(t.key)&&n.writer.setAttribute(t.key,t.value,o));return s}function uG(i){return(t,e)=>{const n=typeof i=="string"?i:i(t,e);return e.writer.createElement("$marker",{"data-name":n})}}function tA(i,t){const e=(n,s)=>{const o=n.getAttribute("name"),r=i.model(o,s);return s.writer.createElement("$marker",{"data-name":r})};return{view:`${i.view}-${t}`,model:e}}function dG(i){i.document.registerPostFixer(t=>hG(t,i))}function hG(i,t){const e=t.document.selection,n=t.schema,s=[];let o=!1;for(const r of e.getRanges()){const a=hV(r,n);a&&!a.isEqual(r)?(s.push(a),o=!0):s.push(r)}return o&&i.setSelection(pG(s),{backward:e.isBackward}),!1}function hV(i,t){return i.isCollapsed?fG(i,t):mG(i,t)}function fG(i,t){const e=i.start,n=t.getNearestSelectionRange(e);if(!n){const o=e.getAncestors().reverse().find(r=>t.isObject(r));return o?Z._createOn(o):null}if(!n.isCollapsed)return n;const s=n.start;return e.isEqual(s)?null:new Z(s)}function mG(i,t){const{start:e,end:n}=i,s=t.checkChild(e,"$text"),o=t.checkChild(n,"$text"),r=t.getLimitElement(e),a=t.getLimitElement(n);if(r===a){if(s&&o)return null;if(gG(e,n,t)){const m=e.nodeAfter&&t.isSelectable(e.nodeAfter)?null:t.getNearestSelectionRange(e,"forward"),v=n.nodeBefore&&t.isSelectable(n.nodeBefore)?null:t.getNearestSelectionRange(n,"backward"),C=m?m.start:e,x=v?v.end:n;return new Z(C,x)}}const l=r&&!r.is("rootElement"),u=a&&!a.is("rootElement");if(l||u){const h=e.nodeAfter&&n.nodeBefore&&e.nodeAfter.parent===n.nodeBefore.parent,m=l&&(!h||!iA(e.nodeAfter,t)),p=u&&(!h||!iA(n.nodeBefore,t));let v=e,C=n;return m&&(v=ae._createBefore(nA(r,t))),p&&(C=ae._createAfter(nA(a,t))),new Z(v,C)}return null}function nA(i,t){let e=i,n=e;for(;t.isLimit(n)&&n.parent;)e=n,n=n.parent;return e}function gG(i,t,e){const n=i.nodeAfter&&!e.isLimit(i.nodeAfter)||e.checkChild(i,"$text"),s=t.nodeBefore&&!e.isLimit(t.nodeBefore)||e.checkChild(t,"$text");return n||s}function pG(i){const t=[...i],e=new Set;let n=1;for(;n<t.length;){const o=t[n],r=t.slice(0,n);for(const[a,l]of r.entries())if(!e.has(a)){if(o.isEqual(l))e.add(a);else if(o.isIntersecting(l)){e.add(a),e.add(n);const u=o.getJoined(l);t.push(u)}}n++}return t.filter((o,r)=>!e.has(r))}function iA(i,t){return i&&t.isSelectable(i)}class bG extends wt(){constructor(e,n){super();w(this,"model");w(this,"view");w(this,"mapper");w(this,"downcastDispatcher");this.model=e,this.view=new nq(n),this.mapper=new K5,this.downcastDispatcher=new Z5({mapper:this.mapper,schema:e.schema});const s=this.model.document,o=s.selection,r=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(s.differ,r,a),this.downcastDispatcher.convertSelection(o,r,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",eG(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",wG(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",X5(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Q5(),{priority:"lowest"}),this.downcastDispatcher.on("remove",vq(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",xq()),this.downcastDispatcher.on("selection",Cq(),{priority:"low"}),this.downcastDispatcher.on("selection",Tq(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const l=new O5(this.view.document,a.name);return l.rootName=a.rootName,this.mapper.bindElements(a,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const n=typeof e=="string"?e:e.name,s=this.model.markers.get(n);if(!s)throw new N("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:n});this.model.change(()=>{this.model.markers._refresh(s)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function wG(i,t,e){return(n,s)=>{if(!(e.document.isComposing&&!Se.isAndroid))for(let o=0;o<s.targetRanges.length;o++){const r=s.targetRanges[o],a=i.toModelRange(r),l=hV(a,t);!l||l.isEqual(a)||(s.targetRanges[o]=i.toViewRange(l))}}}class yG extends wt(){constructor(){super();w(this,"_sourceDefinitions",{});w(this,"_attributeProperties",Object.create(null));w(this,"_customChildChecks",new Map);w(this,"_customAttributeChecks",new Map);w(this,"_genericCheckSymbol",Symbol("$generic"));w(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,n)=>{n[0]=new kr(n[0])},{priority:"highest"}),this.on("checkChild",(e,n)=>{n[0]=new kr(n[0]),n[1]=this.getDefinition(n[1])},{priority:"highest"})}register(e,n){if(this._sourceDefinitions[e])throw new N("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},n)],this._clearCache()}extend(e,n){if(!this._sourceDefinitions[e])throw new N("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},n)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let n;return typeof e=="string"?n=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?n="$text":n=e.name,this.getDefinitions()[n]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const n=this.getDefinition(e);return!!(n&&n.isBlock)}isLimit(e){const n=this.getDefinition(e);return n?!!(n.isLimit||n.isObject):!1}isObject(e){const n=this.getDefinition(e);return n?!!(n.isObject||n.isLimit&&n.isSelectable&&n.isContent):!1}isInline(e){const n=this.getDefinition(e);return!!(n&&n.isInline)}isSelectable(e){const n=this.getDefinition(e);return n?!!(n.isSelectable||n.isObject):!1}isContent(e){const n=this.getDefinition(e);return n?!!(n.isContent||n.isObject):!1}checkChild(e,n){return n?this._checkContextMatch(e,n):!1}checkAttribute(e,n){const s=this.getDefinition(e.last);if(!s)return!1;const o=this._evaluateAttributeChecks(e,n);return o!==void 0?o:s.allowAttributes.includes(n)}checkMerge(e,n){if(e instanceof ae){const s=e.nodeBefore,o=e.nodeAfter;if(!(s instanceof Rt))throw new N("schema-check-merge-no-element-before",this);if(!(o instanceof Rt))throw new N("schema-check-merge-no-element-after",this);return this.checkMerge(s,o)}if(this.isLimit(e)||this.isLimit(n))return!1;for(const s of n.getChildren())if(!this.checkChild(e,s))return!1;return!0}addChildCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,o=this._customChildChecks.get(s)||[];o.push(e),this._customChildChecks.set(s,o)}addAttributeCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,o=this._customAttributeChecks.get(s)||[];o.push(e),this._customAttributeChecks.set(s,o)}setAttributeProperties(e,n){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),n)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let n;for(e instanceof ae?n=e.parent:n=(e instanceof Z?[e]:Array.from(e.getRanges())).reduce((o,r)=>{const a=r.getCommonAncestor();return o?o.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(n)&&n.parent;)n=n.parent;return n}checkAttributeInSelection(e,n){if(e.isCollapsed){const o=[...e.getFirstPosition().getAncestors(),new Lt("",e.getAttributes())];return this.checkAttribute(o,n)}else{const s=e.getRanges();for(const o of s)for(const r of o)if(this.checkAttribute(r.item,n))return!0}return!1}*getValidRanges(e,n){e=OG(e);for(const s of e)yield*this._getValidRangesForRange(s,n)}getNearestSelectionRange(e,n="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new Z(e);let s,o;const r=e.getAncestors().reverse().find(a=>this.isLimit(a))||e.root;(n=="both"||n=="backward")&&(s=new Eo({boundaries:Z._createIn(r),startPosition:e,direction:"backward"})),(n=="both"||n=="forward")&&(o=new Eo({boundaries:Z._createIn(r),startPosition:e}));for(const a of NG(s,o)){const l=a.walker==s?"elementEnd":"elementStart",u=a.value;if(u.type==l&&this.isObject(u.item))return Z._createOn(u.item);if(this.checkChild(u.nextPosition,"$text"))return new Z(u.nextPosition)}return null}findAllowedParent(e,n){let s=e.parent;for(;s;){if(this.checkChild(s,n))return s;if(this.isLimit(s))return null;s=s.parent}return null}setAllowedAttributes(e,n,s){const o=s.model;for(const[r,a]of Object.entries(n))o.schema.checkAttribute(e,r)&&s.setAttribute(r,a,e)}removeDisallowedAttributes(e,n){for(const s of e)if(s.is("$text"))sA(this,s,n);else{const r=Z._createIn(s).getPositions();for(const a of r){const l=a.nodeBefore||a.parent;sA(this,l,n)}}}getAttributesWithProperty(e,n,s){const o={};for(const[r,a]of e.getAttributes()){const l=this.getAttributeProperties(r);l[n]!==void 0&&(s===void 0||s===l[n])&&(o[r]=a)}return o}createContext(e){return new kr(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},n=this._sourceDefinitions,s=Object.keys(n);for(const r of s)e[r]=_G(n[r],r);const o=Object.values(e);for(const r of o)vG(e,r),CG(e,r),TG(e,r),xG(e,r);for(const r of o)kG(e,r);for(const r of o)EG(e,r);for(const r of o)SG(e,r);for(const r of o)RG(e,r);for(const r of o)IG(e,r);this._compiledDefinitions=AG(e)}_checkContextMatch(e,n){const s=e.last;let o=this._evaluateChildChecks(e,n);if(o=o!==void 0?o:n.allowIn.includes(s.name),!o)return!1;const r=this.getDefinition(s),a=e.trimLast();return r?a.length==0?!0:this._checkContextMatch(a,r):!1}_evaluateChildChecks(e,n){const s=this._customChildChecks.get(this._genericCheckSymbol)||[],o=this._customChildChecks.get(n.name)||[];for(const r of[...s,...o]){const a=r(e,n);if(a!==void 0)return a}}_evaluateAttributeChecks(e,n){const s=this._customAttributeChecks.get(this._genericCheckSymbol)||[],o=this._customAttributeChecks.get(n)||[];for(const r of[...s,...o]){const a=r(e,n);if(a!==void 0)return a}}*_getValidRangesForRange(e,n){let s=e.start,o=e.start;for(const r of e.getItems({shallow:!0}))r.is("element")&&(yield*this._getValidRangesForRange(Z._createIn(r),n)),this.checkAttribute(r,n)||(s.isEqual(o)||(yield new Z(s,o)),s=ae._createAfter(r)),o=ae._createAfter(r);s.isEqual(o)||(yield new Z(s,o))}findOptimalInsertionRange(e,n){const s=e.getSelectedElement();if(s&&this.isObject(s)&&!this.isInline(s))return n=="before"||n=="after"?new Z(ae._createAt(s,n)):Z._createOn(s);const o=Ln(e.getSelectedBlocks());if(!o)return new Z(e.focus);if(o.isEmpty)return new Z(ae._createAt(o,0));const r=ae._createAfter(o);return e.focus.isTouching(r)?new Z(r):new Z(ae._createBefore(o))}}class kr{constructor(t){w(this,"_items");if(t instanceof kr)return t;let e;typeof t=="string"?e=[t]:Array.isArray(t)?e=t:e=t.getAncestors({includeSelf:!0}),this._items=e.map(VG)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new kr([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new kr([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function _G(i,t){const e={name:t,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return PG(i,e),Ns(i,e,"allowIn"),Ns(i,e,"allowChildren"),Ns(i,e,"disallowIn"),Ns(i,e,"disallowChildren"),Ns(i,e,"allowContentOf"),Ns(i,e,"allowWhere"),Ns(i,e,"allowAttributes"),Ns(i,e,"disallowAttributes"),Ns(i,e,"allowAttributesOf"),Ns(i,e,"inheritTypesFrom"),MG(i,e),e}function vG(i,t){for(const e of t.allowIn){const n=i[e];n?n.allowChildren.add(t.name):t.allowIn.delete(e)}}function CG(i,t){for(const e of t.allowChildren){const n=i[e];n?n.allowIn.add(t.name):t.allowChildren.delete(e)}}function TG(i,t){for(const e of t.disallowIn){const n=i[e];n?n.disallowChildren.add(t.name):t.disallowIn.delete(e)}}function xG(i,t){for(const e of t.disallowChildren){const n=i[e];n?n.disallowIn.add(t.name):t.disallowChildren.delete(e)}}function kG(i,t){for(const e of t.disallowChildren)t.allowChildren.delete(e);for(const e of t.disallowIn)t.allowIn.delete(e);for(const e of t.disallowAttributes)t.allowAttributes.delete(e)}function EG(i,t){for(const e of t.allowContentOf){const n=i[e];n&&(n.disallowChildren.forEach(s=>{t.allowChildren.has(s)||(t.disallowChildren.add(s),i[s].disallowIn.add(t.name))}),n.allowChildren.forEach(s=>{t.disallowChildren.has(s)||(t.allowChildren.add(s),i[s].allowIn.add(t.name))}))}}function SG(i,t){for(const e of t.allowWhere){const n=i[e];n&&(n.disallowIn.forEach(s=>{t.allowIn.has(s)||(t.disallowIn.add(s),i[s].disallowChildren.add(t.name))}),n.allowIn.forEach(s=>{t.disallowIn.has(s)||(t.allowIn.add(s),i[s].allowChildren.add(t.name))}))}}function AG(i){const t={};for(const e of Object.values(i))t[e.name]={name:e.name,isBlock:!!e.isBlock,isContent:!!e.isContent,isInline:!!e.isInline,isLimit:!!e.isLimit,isObject:!!e.isObject,isSelectable:!!e.isSelectable,allowIn:Array.from(e.allowIn).filter(n=>!!i[n]),allowChildren:Array.from(e.allowChildren).filter(n=>!!i[n]),allowAttributes:Array.from(e.allowAttributes)};return t}function RG(i,t){for(const e of t.allowAttributesOf){const n=i[e];if(!n)return;n.allowAttributes.forEach(s=>{t.disallowAttributes.has(s)||t.allowAttributes.add(s)})}}function IG(i,t){for(const e of t.inheritTypesFrom){const n=i[e];if(n){const s=Object.keys(n).filter(o=>o.startsWith("is"));for(const o of s)o in t||(t[o]=n[o])}}}function PG(i,t){for(const e of i){const n=Object.keys(e).filter(s=>s.startsWith("is"));for(const s of n)t[s]=!!e[s]}}function Ns(i,t,e){for(const n of i){let s=n[e];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(o=>t[e].add(o))}}function MG(i,t){for(const e of i){const n=e.inheritAllFrom;n&&(t.allowContentOf.add(n),t.allowWhere.add(n),t.allowAttributesOf.add(n),t.inheritTypesFrom.add(n))}}function VG(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(t){return i.getAttribute(t)}}}function*NG(i,t){let e=!1;for(;!e;){if(e=!0,i){const n=i.next();n.done||(e=!1,yield{walker:i,value:n.value})}if(t){const n=t.next();n.done||(e=!1,yield{walker:t,value:n.value})}}}function*OG(i){for(const t of i)yield*t.getMinimalFlatRanges()}function sA(i,t,e){for(const n of t.getAttributeKeys())i.checkAttribute(t,n)||e.removeAttribute(n,t)}class DG extends Tt(){constructor(e){super();w(this,"conversionApi");w(this,"_splitParts",new Map);w(this,"_cursorParents",new Map);w(this,"_modelCursor",null);w(this,"_emptyElementsToKeep",new Set);this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(n,s)=>this._convertItem(n,s),convertChildren:(n,s)=>this._convertChildren(n,s),safeInsert:(n,s)=>this._safeInsert(n,s),updateConversionResult:(n,s)=>this._updateConversionResult(n,s),splitToAllowedParent:(n,s)=>this._splitToAllowedParent(n,s),getSplitParts:n=>this._getSplitParts(n),keepEmptyElement:n=>this._keepEmptyElement(n)}}convert(e,n,s=["$root"]){this.fire("viewCleanup",e),this._modelCursor=BG(s,n),this.conversionApi.writer=n,this.conversionApi.consumable=Eg.createFrom(e),this.conversionApi.store={};const{modelRange:o}=this._convertItem(e,this._modelCursor),r=n.createDocumentFragment();if(o){this._removeEmptyElements();const a=this._modelCursor.parent,l=a._removeChildren(0,a.childCount);r._insertChild(0,l),r.markers=LG(r,n)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,r}_convertItem(e,n){const s={viewItem:e,modelCursor:n,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,s,this.conversionApi):e.is("$text")?this.fire("text",s,this.conversionApi):this.fire("documentFragment",s,this.conversionApi),s.modelRange&&!(s.modelRange instanceof Z))throw new N("view-conversion-dispatcher-incorrect-result",this);return{modelRange:s.modelRange,modelCursor:s.modelCursor}}_convertChildren(e,n){let s=n.is("position")?n:ae._createAt(n,0);const o=new Z(s);for(const r of Array.from(e.getChildren())){const a=this._convertItem(r,s);a.modelRange instanceof Z&&(o.end=a.modelRange.end,s=a.modelCursor)}return{modelRange:o,modelCursor:s}}_safeInsert(e,n){const s=this._splitToAllowedParent(e,n);return s?(this.conversionApi.writer.insert(e,s.position),!0):!1}_updateConversionResult(e,n){const s=this._getSplitParts(e),o=this.conversionApi.writer;n.modelRange||(n.modelRange=o.createRange(o.createPositionBefore(e),o.createPositionAfter(s[s.length-1])));const r=this._cursorParents.get(e);r?n.modelCursor=o.createPositionAt(r,0):n.modelCursor=n.modelRange.end}_splitToAllowedParent(e,n){const{schema:s,writer:o}=this.conversionApi;let r=s.findAllowedParent(n,e);if(r){if(r===n.parent)return{position:n};this._modelCursor.parent.getAncestors().includes(r)&&(r=null)}if(!r)return aV(n,e,s)?{position:lV(n,o)}:null;const a=this.conversionApi.writer.split(n,r),l=[];for(const h of a.range.getWalker())if(h.type=="elementEnd")l.push(h.item);else{const m=l.pop(),p=h.item;this._registerSplitPair(m,p)}const u=a.range.end.parent;return this._cursorParents.set(e,u),{position:a.position,cursorParent:u}}_registerSplitPair(e,n){this._splitParts.has(e)||this._splitParts.set(e,[e]);const s=this._splitParts.get(e);this._splitParts.set(n,s),s.push(n)}_getSplitParts(e){let n;return this._splitParts.has(e)?n=this._splitParts.get(e):n=[e],n}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const n of this._splitParts.keys())if(n.isEmpty&&!this._emptyElementsToKeep.has(n)){const s=e.get(n.parent)||[];s.push(n),this._splitParts.delete(n),e.set(n.parent,s)}for(const[n,s]of e)n._removeChildrenArray(s);e.size&&this._removeEmptyElements()}}function LG(i,t){const e=new Set,n=new Map,s=Z._createIn(i).getItems();for(const o of s)o.is("element","$marker")&&e.add(o);for(const o of e){const r=o.getAttribute("data-name"),a=t.createPositionBefore(o);n.has(r)?n.get(r).end=a.clone():n.set(r,new Z(a.clone())),t.remove(o)}return n}function BG(i,t){let e;for(const n of new kr(i)){const s={};for(const r of n.getAttributeKeys())s[r]=n.getAttribute(r);const o=t.createElement(n.name,s);e&&t.insert(o,e),e=ae._createAt(o,0)}return e}class FG{getHtml(t){const n=he.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(t),n.innerHTML}}class UG{constructor(t){w(this,"domParser");w(this,"domConverter");w(this,"htmlWriter");w(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new Ap(t,{renderingMode:"data"}),this.htmlWriter=new FG}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode=t=="marked"?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),s=e.body.childNodes;for(;s.length>0;)n.appendChild(s[0]);return n}}class zG extends Tt(){constructor(e,n){super();w(this,"model");w(this,"mapper");w(this,"downcastDispatcher");w(this,"upcastDispatcher");w(this,"viewDocument");w(this,"stylesProcessor");w(this,"htmlProcessor");w(this,"processor");w(this,"_viewWriter");this.model=e,this.mapper=new K5,this.downcastDispatcher=new Z5({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",X5(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Q5(),{priority:"lowest"}),this.upcastDispatcher=new DG({schema:e.schema}),this.viewDocument=new Ep(n),this.stylesProcessor=n,this.htmlProcessor=new UG(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new B5(this.viewDocument),this.upcastDispatcher.on("text",Qq(),{priority:"lowest"}),this.upcastDispatcher.on("element",eA(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",eA(),{priority:"lowest"}),wt().prototype.decorate.call(this,"init"),wt().prototype.decorate.call(this,"set"),wt().prototype.decorate.call(this,"get"),wt().prototype.decorate.call(this,"toView"),wt().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},rV)},{priority:"lowest"})}get(e={}){const{rootName:n="main",trim:s="empty"}=e;if(!this._checkIfRootsExists([n]))throw new N("datacontroller-get-non-existent-root",this);const o=this.model.document.getRoot(n);return o.isAttached()||Ze("datacontroller-get-detached-root",this),s==="empty"&&!this.model.hasContent(o,{ignoreWhitespaces:!0})?"":this.stringify(o,e)}stringify(e,n={}){const s=this.toView(e,n);return this.processor.toData(s)}toView(e,n={}){const s=this.viewDocument,o=this._viewWriter;this.mapper.clearBindings();const r=Z._createIn(e),a=new Ia(s);this.mapper.bindElements(e,a);const l=e.is("documentFragment")?e.markers:HG(e);return this.downcastDispatcher.convert(r,l,o,n),a}init(e){if(this.model.document.version)throw new N("datacontroller-init-document-not-empty",this);let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new N("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},s=>{for(const o of Object.keys(n)){const r=this.model.document.getRoot(o);s.insert(this.parse(n[o],r),r,0)}}),Promise.resolve()}set(e,n={}){let s={};if(typeof e=="string"?s.main=e:s=e,!this._checkIfRootsExists(Object.keys(s)))throw new N("datacontroller-set-non-existent-root",this);this.model.enqueueChange(n.batchType||{},o=>{o.setSelection(null),o.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const r of Object.keys(s)){const a=this.model.document.getRoot(r);o.remove(o.createRangeIn(a)),o.insert(this.parse(s[r],a),a,0)}})}parse(e,n="$root"){const s=this.processor.toView(e);return this.toModel(s,n)}toModel(e,n="$root"){return this.model.change(s=>this.upcastDispatcher.convert(e,s,n))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const n of e)if(!this.model.document.getRoot(n))return!1;return!0}}function HG(i){const t=[],e=i.root.document;if(!e)return new Map;const n=Z._createIn(i);for(const s of e.model.markers){const o=s.getRange(),r=o.isCollapsed,a=o.start.isEqual(n.start)||o.end.isEqual(n.end);if(r&&a)t.push([s.name,o]);else{const l=n.getIntersection(o);l&&t.push([s.name,l])}}return t.sort(([s,o],[r,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return r.localeCompare(s)}}}),new Map(t)}class WG{constructor(t,e){w(this,"_helpers",new Map);w(this,"_downcast");w(this,"_upcast");this._downcast=bn(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=bn(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new N("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new N("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of By(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of By(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of By(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new N("conversion-group-exists",this);const s=n?new _q(e):new Xq(e);this._helpers.set(t,s)}}function*By(i){if(i.model.values)for(const t of i.model.values){const e={key:i.model.key,value:t},n=i.view[t],s=i.upcastAlso?i.upcastAlso[t]:void 0;yield*oA(e,n,s)}else yield*oA(i.model,i.view,i.upcastAlso)}function*oA(i,t,e){if(yield{model:i,view:t},e)for(const n of bn(e))yield{model:i,view:n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Bi{constructor(t){w(this,"baseVersion");w(this,"isDocumentOperation");w(this,"batch");this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function W0(i,t){const e=mV(t),n=e.reduce((r,a)=>r+a.offsetSize,0),s=i.parent;nh(i);const o=i.index;return s._insertChild(o,e),th(s,o+e.length),th(s,o),new Z(i,i.getShiftedBy(n))}function fV(i){if(!i.isFlat)throw new N("operation-utils-remove-range-not-flat",this);const t=i.start.parent;nh(i.start),nh(i.end);const e=t._removeChildren(i.start.index,i.end.index-i.start.index);return th(t,i.start.index),e}function eh(i,t){if(!i.isFlat)throw new N("operation-utils-move-range-not-flat",this);const e=fV(i);return t=t._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),W0(t,e)}function qG(i,t,e){nh(i.start),nh(i.end);for(const n of i.getItems({shallow:!0})){const s=n.is("$textProxy")?n.textNode:n;e!==null?s._setAttribute(t,e):s._removeAttribute(t),th(s.parent,s.index)}th(i.end.parent,i.end.index)}function mV(i){const t=[];function e(n){if(typeof n=="string")t.push(new Lt(n));else if(n instanceof bs)t.push(new Lt(n.data,n.getAttributes()));else if(n instanceof $a)t.push(n);else if(Li(n))for(const s of n)e(s)}e(i);for(let n=1;n<t.length;n++){const s=t[n],o=t[n-1];s instanceof Lt&&o instanceof Lt&&gV(s,o)&&(t.splice(n-1,2,new Lt(o.data+s.data,o.getAttributes())),n--)}return t}function th(i,t){const e=i.getChild(t-1),n=i.getChild(t);if(e&&n&&e.is("$text")&&n.is("$text")&&gV(e,n)){const s=new Lt(e.data+n.data,e.getAttributes());i._removeChildren(t-1,2),i._insertChild(t-1,s)}}function nh(i){const t=i.textNode,e=i.parent;if(t){const n=i.offset-t.startOffset,s=t.index;e._removeChildren(s,1);const o=new Lt(t.data.substr(0,n),t.getAttributes()),r=new Lt(t.data.substr(n),t.getAttributes());e._insertChild(s,[o,r])}}function gV(i,t){const e=i.getAttributes(),n=t.getAttributes();for(const s of e){if(s[1]!==t.getAttribute(s[0]))return!1;n.next()}return n.next().done}class ht extends Bi{constructor(e,n,s,o){super(o);w(this,"sourcePosition");w(this,"howMany");w(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Z._createFromPositionAndShift(this.sourcePosition,this.howMany),Z._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new ht(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new ht(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent,s=this.sourcePosition.offset,o=this.targetPosition.offset;if(s+this.howMany>e.maxOffset)throw new N("move-operation-nodes-do-not-exist",this);if(e===n&&s<o&&o<s+this.howMany)throw new N("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Gn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const r=this.sourcePosition.path.length-1;if(this.targetPosition.path[r]>=s&&this.targetPosition.path[r]<s+this.howMany)throw new N("move-operation-node-into-itself",this)}}_execute(){eh(Z._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,n){const s=ae.fromJSON(e.sourcePosition,n),o=ae.fromJSON(e.targetPosition,n);return new this(s,e.howMany,o,e.baseVersion)}}class kn extends Bi{constructor(e,n,s){super(s);w(this,"position");w(this,"nodes");w(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Sd(mV(n)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new Sd([...this.nodes].map(s=>s._clone(!0))),n=new kn(this.position,e,this.baseVersion);return n.shouldReceiveAttributes=this.shouldReceiveAttributes,n}getReversed(){const e=this.position.root.document.graveyard,n=new ae(e,[0]);return new ht(this.position,this.nodes.maxOffset,n,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new N("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new Sd([...e].map(n=>n._clone(!0))),W0(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,n){const s=[];for(const r of e.nodes)r.name?s.push(Rt.fromJSON(r)):s.push(Lt.fromJSON(r));const o=new kn(ae.fromJSON(e.position,n),s,e.baseVersion);return o.shouldReceiveAttributes=e.shouldReceiveAttributes,o}}class It extends Bi{constructor(e,n,s,o,r){super(r);w(this,"splitPosition");w(this,"howMany");w(this,"insertionPosition");w(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=n,this.insertionPosition=s,this.graveyardPosition=o?o.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new ae(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Z(this.splitPosition,e)}get affectedSelectable(){const e=[Z._createFromPositionAndShift(this.splitPosition,0),Z._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(Z._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new It(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,n=new ae(e,[0]);return new Xt(this.moveTargetPosition,this.howMany,this.splitPosition,n,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,n=this.splitPosition.offset;if(!e||e.maxOffset<n)throw new N("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new N("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new N("split-operation-graveyard-position-invalid",this)}else throw new N("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)eh(Z._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const s=e._clone();W0(this.insertionPosition,s)}const n=new Z(ae._createAt(e,this.splitPosition.offset),ae._createAt(e,e.maxOffset));eh(n,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const n=e.path.slice(0,-1);return n[n.length-1]++,new ae(e.root,n,"toPrevious")}static fromJSON(e,n){const s=ae.fromJSON(e.splitPosition,n),o=ae.fromJSON(e.insertionPosition,n),r=e.graveyardPosition?ae.fromJSON(e.graveyardPosition,n):null;return new this(s,e.howMany,o,r,e.baseVersion)}}class Xt extends Bi{constructor(e,n,s,o,r){super(r);w(this,"sourcePosition");w(this,"howMany");w(this,"targetPosition");w(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=o.clone()}get type(){return"merge"}get deletionPosition(){return new ae(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Z(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[Z._createOn(e),Z._createFromPositionAndShift(this.targetPosition,0),Z._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Xt(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),n=this.sourcePosition.path.slice(0,-1),s=new ae(this.sourcePosition.root,n)._getTransformedByMergeOperation(this);return new It(e,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent;if(e.parent)if(n.parent){if(this.howMany!=e.maxOffset)throw new N("merge-operation-how-many-invalid",this)}else throw new N("merge-operation-target-position-invalid",this);else throw new N("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,n=Z._createIn(e);eh(n,this.targetPosition),eh(Z._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,n){const s=ae.fromJSON(e.sourcePosition,n),o=ae.fromJSON(e.targetPosition,n),r=ae.fromJSON(e.graveyardPosition,n);return new this(s,e.howMany,o,r,e.baseVersion)}}class ni extends Bi{constructor(e,n,s,o,r,a){super(a);w(this,"name");w(this,"oldRange");w(this,"newRange");w(this,"affectsData");w(this,"_markers");this.name=e,this.oldRange=n?n.clone():null,this.newRange=s?s.clone():null,this.affectsData=r,this._markers=o}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new ni(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new ni(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,n){return new ni(e.name,e.oldRange?Z.fromJSON(e.oldRange,n):null,e.newRange?Z.fromJSON(e.newRange,n):null,n.model.markers,e.affectsData,e.baseVersion)}}class rn extends Bi{constructor(e,n,s,o,r){super(r);w(this,"range");w(this,"key");w(this,"oldValue");w(this,"newValue");this.range=e.clone(),this.key=n,this.oldValue=s===void 0?null:s,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new rn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new rn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new N("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!vg(e.getAttribute(this.key),this.oldValue))throw new N("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new N("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){vg(this.oldValue,this.newValue)||qG(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,n){return new rn(Z.fromJSON(e.range,n),e.key,e.oldValue,e.newValue,e.baseVersion)}}class pn extends Bi{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new pn(this.baseVersion)}getReversed(){return new pn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Ci extends Bi{constructor(e,n,s,o){super(o);w(this,"position");w(this,"oldName");w(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=n,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ci(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ci(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Rt){if(e.name!==this.oldName)throw new N("rename-operation-wrong-name",this)}else throw new N("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,n){return new Ci(ae.fromJSON(e.position,n),e.oldName,e.newName,e.baseVersion)}}class Io extends Bi{constructor(e,n,s,o,r){super(r);w(this,"root");w(this,"key");w(this,"oldValue");w(this,"newValue");this.root=e,this.key=n,this.oldValue=s===void 0?null:s,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Io(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Io(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new N("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new N("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new N("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,n){if(!n.getRoot(e.root))throw new N("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Io(n.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Ws extends Bi{constructor(e,n,s,o,r){super(r);w(this,"rootName");w(this,"elementName");w(this,"isAdd");w(this,"_document");if(this.rootName=e,this.elementName=n,this.isAdd=s,this._document=o,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Ws(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Ws(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,n){return new Ws(e.rootName,e.elementName,e.isAdd,n,e.baseVersion)}}const cs={};cs[rn.className]=rn;cs[kn.className]=kn;cs[ni.className]=ni;cs[ht.className]=ht;cs[pn.className]=pn;cs[Bi.className]=Bi;cs[Ci.className]=Ci;cs[Io.className]=Io;cs[Ws.className]=Ws;cs[It.className]=It;cs[Xt.className]=Xt;class GG{static fromJSON(t,e){return cs[t.__className].fromJSON(t,e)}}const Q_=new Map;function at(i,t,e){let n=Q_.get(i);n||(n=new Map,Q_.set(i,n)),n.set(t,e)}function $G(i,t){const e=Q_.get(i);return e&&e.has(t)?e.get(t):jG}function jG(i){return[i]}function rA(i,t,e={}){const n=$G(i.constructor,t.constructor);try{return i=i.clone(),n(i,t,e)}catch(s){throw s}}function KG(i,t,e){i=i.slice(),t=t.slice();const n=new ZG(e.document,e.useRelations,e.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(t);const s=n.originalOperations;if(i.length==0||t.length==0)return{operationsA:i,operationsB:t,originalOperations:s};const o=new WeakMap;for(const l of i)o.set(l,0);const r={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:t.length};let a=0;for(;a<i.length;){const l=i[a],u=o.get(l);if(u==t.length){a++;continue}const h=t[u],m=rA(l,h,n.getContext(l,h,!0)),p=rA(h,l,n.getContext(h,l,!1));n.updateRelation(l,h),n.setOriginalOperations(m,l),n.setOriginalOperations(p,h);for(const v of m)o.set(v,u+p.length);i.splice(a,1,...m),t.splice(u,1,...p)}return lA(i),lA(t),aA(i,r.nextBaseVersionB),aA(t,r.nextBaseVersionA),{operationsA:i,operationsB:t,originalOperations:s}}class ZG{constructor(t,e,n=!1){w(this,"originalOperations");w(this,"_history");w(this,"_useRelations");w(this,"_forceWeakRemove");w(this,"_relations");this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const s of t)this.originalOperations.set(s,n||s)}updateRelation(t,e){if(t instanceof ht)e instanceof Xt?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof ht&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof It){if(e instanceof Xt)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof ht)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=n.end.offset-t.splitPosition.offset,o=t.splitPosition.offset-n.start.offset;this._setRelation(t,e,{howMany:s,offset:o})}}}else if(t instanceof Xt)e instanceof Xt?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof It?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof ht&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof ni){const n=t.newRange;if(!n)return;if(e instanceof Xt){const s=n.start.isEqual(e.targetPosition),o=n.start.isEqual(e.deletionPosition),r=n.end.isEqual(e.deletionPosition),a=n.end.isEqual(e.sourcePosition);(s||o||r||a)&&this._setRelation(t,e,{wasInLeftElement:s,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:a})}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),s=this._history.getUndoneOperation(n);if(!s)return null;const o=this.originalOperations.get(t),r=this._relations.get(o);return r&&r.get(s)||null}_setRelation(t,e,n){const s=this.originalOperations.get(t),o=this.originalOperations.get(e);let r=this._relations.get(s);r||(r=new Map,this._relations.set(s,r)),r.set(o,n)}}function aA(i,t){for(const e of i)e.baseVersion=t++}function lA(i){const t=new Map;for(let e=0;e<i.length;e++){const n=i[e];n instanceof ni&&(n.baseVersion!==-1?t.set(n.name,{op:n,ranges:n.newRange?[n.newRange]:[]}):(n.newRange&&t.get(n.name).ranges.push(n.newRange),i.splice(e,1),e--))}for(const{op:e,ranges:n}of t.values())n.length?e.newRange=Z._createFromRanges(n):e.newRange=null}at(rn,rn,(i,t,e)=>{if(i.key===t.key&&i.range.start.hasSameParentAs(t.range.start)){const n=i.range.getDifference(t.range).map(o=>new rn(o,i.key,i.oldValue,i.newValue,0)),s=i.range.getIntersection(t.range);return s&&e.aIsStrong&&n.push(new rn(s,t.key,t.newValue,i.newValue,0)),n.length==0?[new pn(0)]:n}else return[i]});at(rn,kn,(i,t)=>{if(i.range.start.hasSameParentAs(t.position)&&i.range.containsPosition(t.position)){const n=i.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(s=>new rn(s,i.key,i.oldValue,i.newValue,i.baseVersion));if(t.shouldReceiveAttributes){const s=pV(t,i.key,i.oldValue);s&&n.unshift(s)}return n}return i.range=i.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[i]});function pV(i,t,e){const s=i.nodes.getNode(0).getAttribute(t);if(s==e)return null;const o=new Z(i.position,i.position.getShiftedBy(i.howMany));return new rn(o,t,s,e,0)}at(rn,Xt,(i,t)=>{const e=[];i.range.start.hasSameParentAs(t.deletionPosition)&&(i.range.containsPosition(t.deletionPosition)||i.range.start.isEqual(t.deletionPosition))&&e.push(Z._createFromPositionAndShift(t.graveyardPosition,1));const n=i.range._getTransformedByMergeOperation(t);return n.isCollapsed||e.push(n),e.map(s=>new rn(s,i.key,i.oldValue,i.newValue,i.baseVersion))});at(rn,ht,(i,t)=>YG(i.range,t).map(n=>new rn(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function YG(i,t){const e=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);let n=null,s=[];e.containsRange(i,!0)?n=i:i.start.hasSameParentAs(e.start)?(s=i.getDifference(e),n=i.getIntersection(e)):s=[i];const o=[];for(let r of s){r=r._getTransformedByDeletion(t.sourcePosition,t.howMany);const a=t.getMovedRangeStart(),l=r.start.hasSameParentAs(a),u=r._getTransformedByInsertion(a,t.howMany,l);o.push(...u)}return n&&o.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),o}at(rn,It,(i,t)=>{if(i.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(t.splitPosition)&&i.range.containsPosition(t.splitPosition)){const e=i.clone();return e.range=new Z(t.moveTargetPosition.clone(),i.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),i.range.end=t.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,e]}return i.range=i.range._getTransformedBySplitOperation(t),[i]});at(kn,rn,(i,t)=>{const e=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(i.position)){const n=pV(i,t.key,t.newValue);n&&e.push(n)}return e});at(kn,kn,(i,t,e)=>i.position.isEqual(t.position)&&e.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(t),[i]));at(kn,ht,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));at(kn,It,(i,t)=>(i.position=i.position._getTransformedBySplitOperation(t),[i]));at(kn,Xt,(i,t)=>(i.position=i.position._getTransformedByMergeOperation(t),[i]));at(ni,kn,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(t)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(t)[0]),[i]));at(ni,ni,(i,t,e)=>{if(i.name==t.name)if(e.aIsStrong)i.oldRange=t.newRange?t.newRange.clone():null;else return[new pn(0)];return[i]});at(ni,Xt,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(t)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(t)),[i]));at(ni,ht,(i,t)=>{const e=[i];if(i.oldRange&&(i.oldRange=Z._createFromRanges(i.oldRange._getTransformedByMoveOperation(t))),i.newRange){const n=i.newRange._getTransformedByMoveOperation(t);i.newRange=n[0];for(let s=1;s<n.length;s++){const o=i.clone();o.oldRange=null,o.newRange=n[s],o.baseVersion=-1,e.push(o)}}return e});at(ni,It,(i,t,e)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(t)),i.newRange){if(e.abRelation){const n=i.newRange._getTransformedBySplitOperation(t);return i.newRange.start.isEqual(t.splitPosition)?e.abRelation.wasStartBeforeMergedElement?i.newRange.start=ae._createAt(t.insertionPosition):e.abRelation.wasInLeftElement?i.newRange.start=ae._createAt(i.newRange.start):i.newRange.start=ae._createAt(t.moveTargetPosition):i.newRange.start=n.start,i.newRange.end.isEqual(t.splitPosition)?i.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?i.newRange.end=ae._createAt(t.insertionPosition):e.abRelation.wasInRightElement?i.newRange.end=ae._createAt(t.moveTargetPosition):i.newRange.end=ae._createAt(i.newRange.end):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(t)}return[i]});at(Xt,kn,(i,t)=>(i.sourcePosition.hasSameParentAs(t.position)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(t),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t),[i]));at(Xt,Xt,(i,t,e)=>{if(i.sourcePosition.isEqual(t.sourcePosition)&&i.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const n=t.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new ae(t.graveyardPosition.root,n),i.howMany=0,[i]}else return[new pn(0)];if(i.sourcePosition.isEqual(t.sourcePosition)&&!i.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const n=i.targetPosition.root.rootName=="$graveyard",s=t.targetPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=t.targetPosition._getTransformedByMergeOperation(t),u=i.targetPosition._getTransformedByMergeOperation(t);return[new ht(l,i.howMany,u,0)]}else return[new pn(0)]}return i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(t),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),(!i.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});at(Xt,ht,(i,t,e)=>{const n=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&i.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new pn(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(i.sourcePosition)?i.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(i.sourcePosition)&&e.abRelation=="mergeSourceAffected"?i.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(i.targetPosition)?(i.targetPosition.stickiness="toNone",i.howMany-=t.howMany):t.targetPosition.isEqual(i.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(i.targetPosition.stickiness="toPrevious",i.howMany+=t.howMany):(i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition.hasSameParentAs(t.sourcePosition)&&(i.howMany-=t.howMany)),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(t),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(t),i.sourcePosition.stickiness="toPrevious",i.targetPosition.stickiness="toNext",i.graveyardPosition.isEqual(t.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)),[i])});at(Xt,It,(i,t,e)=>{if(t.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),i.deletionPosition.isEqual(t.graveyardPosition)&&(i.howMany=t.howMany)),i.targetPosition.isEqual(t.splitPosition)&&(t.graveyardPosition&&i.deletionPosition.isEqual(t.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),[i];if(i.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i];if(e.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=t.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]}return i.sourcePosition.hasSameParentAs(t.splitPosition)&&(i.howMany=t.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]});at(ht,kn,(i,t)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(t,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(t.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t)),[i]});at(ht,ht,(i,t,e)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany),s=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);let o=e.aIsStrong,r=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?r=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(r=!1);let a;if(i.targetPosition.isEqual(t.targetPosition)&&r?a=i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):a=i.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),cA(i,t)&&cA(t,i))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(s,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),cc([n],a);if(s.containsPosition(i.targetPosition)&&s.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),cc([n],a);const h=Gn(i.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),cc([n],a);i.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?o=!0:i.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(o=!1);const m=[],p=n.getDifference(s);for(const C of p){C.start=C.start._getTransformedByDeletion(t.sourcePosition,t.howMany),C.end=C.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const x=Gn(C.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",k=C._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,x);m.push(...k)}const v=n.getIntersection(s);return v!==null&&o&&(v.start=v.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),v.end=v.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),m.length===0?m.push(v):m.length==1?s.start.isBefore(n.start)||s.start.isEqual(n.start)?m.unshift(v):m.push(v):m.splice(1,0,v)),m.length===0?[new pn(i.baseVersion)]:cc(m,a)});at(ht,It,(i,t,e)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(t));const s=Z._createFromPositionAndShift(i.sourcePosition,i.howMany);if(s.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(s.start.hasSameParentAs(t.splitPosition)&&s.containsPosition(t.splitPosition)){let a=new Z(t.splitPosition,s.end);a=a._getTransformedBySplitOperation(t);const l=[new Z(s.start,t.splitPosition),a];return cc(l,n)}i.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(n=t.moveTargetPosition),i.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(n=i.targetPosition);const r=[s._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const a=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);i.howMany>1&&a&&!e.aWasUndone&&r.push(Z._createFromPositionAndShift(t.insertionPosition,1))}return cc(r,n)});at(ht,Xt,(i,t,e)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany);if(t.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(t.sourcePosition)){if(i.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const r=[];let a=t.graveyardPosition.clone(),l=t.targetPosition._getTransformedByMergeOperation(t);const u=i.targetPosition.getTransformedByOperation(t);i.howMany>1&&(r.push(new ht(i.sourcePosition,i.howMany-1,u,0)),a=a._getTransformedByMove(i.sourcePosition,u,i.howMany-1),l=l._getTransformedByMove(i.sourcePosition,u,i.howMany-1));const h=t.deletionPosition._getCombined(i.sourcePosition,u),m=new ht(a,1,h,0),p=m.getMovedRangeStart().path.slice();p.push(0);const v=new ae(m.targetPosition.root,p);l=l._getTransformedByMove(a,h,1);const C=new ht(l,t.howMany,v,0);return r.push(m),r.push(C),r}}else if(i.howMany==1)return e.bWasUndone?(i.sourcePosition=t.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]):[new pn(0)]}const o=Z._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(t);return i.sourcePosition=o.start,i.howMany=o.end.offset-o.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]});at(Ci,kn,(i,t)=>(i.position=i.position._getTransformedByInsertOperation(t),[i]));at(Ci,Xt,(i,t)=>i.position.isEqual(t.deletionPosition)?(i.position=t.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(t),[i]));at(Ci,ht,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));at(Ci,Ci,(i,t,e)=>{if(i.position.isEqual(t.position))if(e.aIsStrong)i.oldName=t.newName;else return[new pn(0)];return[i]});at(Ci,It,(i,t)=>{const e=i.position.path,n=t.splitPosition.getParentPath();if(Gn(e,n)=="same"&&!t.graveyardPosition){const s=new Ci(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,s]}return i.position=i.position._getTransformedBySplitOperation(t),[i]});at(Io,Io,(i,t,e)=>{if(i.root===t.root&&i.key===t.key){if(!e.aIsStrong||i.newValue===t.newValue)return[new pn(0)];i.oldValue=t.newValue}return[i]});at(Ws,Ws,(i,t)=>i.rootName===t.rootName&&i.isAdd===t.isAdd?[new pn(0)]:[i]);at(It,kn,(i,t)=>(i.splitPosition.hasSameParentAs(t.position)&&i.splitPosition.offset<t.position.offset&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(t),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(t),[i]));at(It,Xt,(i,t,e)=>{if(!i.graveyardPosition&&!e.bWasUndone&&i.splitPosition.hasSameParentAs(t.sourcePosition)){const n=t.graveyardPosition.path.slice();n.push(0);const s=new ae(t.graveyardPosition.root,n),o=It.getInsertionPosition(new ae(t.graveyardPosition.root,n)),r=new It(s,0,o,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=It.getInsertionPosition(i.splitPosition),i.graveyardPosition=r.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[r,i]}return i.splitPosition.hasSameParentAs(t.deletionPosition)&&!i.splitPosition.isAfter(t.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=It.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});at(It,ht,(i,t,e)=>{const n=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.graveyardPosition){const o=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!e.bWasUndone&&o){const r=i.splitPosition._getTransformedByMoveOperation(t),a=i.graveyardPosition._getTransformedByMoveOperation(t),l=a.path.slice();l.push(0);const u=new ae(a.root,l);return[new ht(r,i.howMany,u,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)}const s=i.splitPosition.isEqual(t.targetPosition);if(s&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return i.howMany+=t.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i];if(s&&e.abRelation&&e.abRelation.howMany){const{howMany:o,offset:r}=e.abRelation;return i.howMany+=o,i.splitPosition=i.splitPosition.getShiftedBy(r),[i]}if(i.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.splitPosition)){const o=t.howMany-(i.splitPosition.offset-t.sourcePosition.offset);return i.howMany-=o,i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany),i.splitPosition=t.sourcePosition.clone(),i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i]}return t.sourcePosition.isEqual(t.targetPosition)||(i.splitPosition.hasSameParentAs(t.sourcePosition)&&i.splitPosition.offset<=t.sourcePosition.offset&&(i.howMany-=t.howMany),i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(t),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(t):i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i]});at(It,It,(i,t,e)=>{if(i.splitPosition.isEqual(t.splitPosition)){if(!i.graveyardPosition&&!t.graveyardPosition)return[new pn(0)];if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition))return[new pn(0)];if(e.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t),[i]}if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition)){const n=i.splitPosition.root.rootName=="$graveyard",s=t.splitPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=[];return t.howMany&&l.push(new ht(t.moveTargetPosition,t.howMany,t.splitPosition,0)),i.howMany&&l.push(new ht(i.splitPosition,i.howMany,i.moveTargetPosition,0)),l}else return[new pn(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t)),i.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return i.howMany++,[i];if(t.splitPosition.isEqual(i.insertionPosition)&&e.baRelation=="splitBefore"){const n=t.insertionPosition.path.slice();n.push(0);const s=new ae(t.insertionPosition.root,n),o=new ht(i.insertionPosition,1,s,0);return[i,o]}return i.splitPosition.hasSameParentAs(t.splitPosition)&&i.splitPosition.offset<t.splitPosition.offset&&(i.howMany-=t.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(t),i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i]});function cA(i,t){return i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function cc(i,t){const e=[];for(let n=0;n<i.length;n++){const s=i[n],o=new ht(s.start,s.end.offset-s.start.offset,t,0);e.push(o);for(let r=n+1;r<i.length;r++)i[r]=i[r]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];t=t._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return e}class zt extends Tt(ae){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new N("model-liveposition-root-not-rootelement",t);JG.call(this)}detach(){this.stopListening()}toPosition(){return new ae(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}zt.prototype.is=function(i){return i==="livePosition"||i==="model:livePosition"||i=="position"||i==="model:position"};function JG(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&XG.call(this,e)},{priority:"low"})}function XG(i){const t=this.getTransformedByOperation(i);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}class Gl{constructor(t={}){w(this,"operations");w(this,"isUndoable");w(this,"isLocal");w(this,"isUndo");w(this,"isTyping");typeof t=="string"&&(t=t==="transparent"?{isUndoable:!1}:{},Ze("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:n=!0,isUndo:s=!1,isTyping:o=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=n,this.isUndo=s,this.isTyping=o}get type(){return Ze("batch-type-deprecated"),"default"}get baseVersion(){for(const t of this.operations)if(t.baseVersion!==null)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}const Dd=class Dd{constructor(t){w(this,"_markerCollection");w(this,"_changesInElement",new Map);w(this,"_elementsSnapshots",new Map);w(this,"_elementChildrenSnapshots",new Map);w(this,"_elementState",new Map);w(this,"_changedMarkers",new Map);w(this,"_changedRoots",new Map);w(this,"_changeCount",0);w(this,"_cachedChanges",null);w(this,"_cachedChangesWithGraveyard",null);w(this,"_refreshedItems",new Set);this._markerCollection=t}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(t){const e=t;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of e.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const n=this._isInInsertedElement(e.sourcePosition.parent),s=this._isInInsertedElement(e.targetPosition.parent);n||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),s||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const o=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const r of o.getItems({shallow:!0}))this._setElementState(r,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const n=Z._createFromPositionAndShift(e.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(n)){const o=s.getData();this.bufferMarkerChange(s.name,o,o)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const n=e.splitPosition.parent;if(!this._isInInsertedElement(n)){this._markRemove(n,e.splitPosition.offset,e.howMany);const s=Z._createFromPositionAndShift(e.splitPosition,e.howMany);for(const o of s.getItems({shallow:!0}))this._setElementState(o,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const n=e.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const s=e.graveyardPosition.parent;this._markInsert(s,e.graveyardPosition.offset,1),this._setElementState(n,"move");const o=e.targetPosition.parent;if(!this._isInInsertedElement(o)){this._markInsert(o,e.targetPosition.offset,n.maxOffset);const r=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const a of r.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const n=e.affectedSelectable;if(!n._isLoaded||n.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const n=e.root.rootName;this._bufferRootAttributeChange(n,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let s=this._changedMarkers.get(t);s?s.newMarkerData=n:(s={newMarkerData:n,oldMarkerData:e},this._changedMarkers.set(t,s)),s.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)n.oldMarkerData.range!=null&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)n.newMarkerData.range!=null&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,s=!t.range&&e.range,o=t.range&&e.range&&!t.range.isEqual(e.range);if(n||s||o)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const n of this._changesInElement.keys()){const s=this._changesInElement.get(n).sort((h,m)=>h.offset===m.offset?h.type!=m.type?h.type=="remove"?-1:1:0:h.offset<m.offset?-1:1),o=this._elementChildrenSnapshots.get(n),r=dA(n.getChildren()),a=QG(o.length,s);let l=0,u=0;for(const h of a)if(h==="i"){const m=this._getDiffActionForNode(r[l].node,"insert"),p=this._elementsSnapshots.get(r[l].node),v=this._getInsertDiff(n,l,m,r[l],p);e.push(v),l++}else if(h==="r"){const m=this._getDiffActionForNode(o[u].node,"remove"),p=this._getRemoveDiff(n,l,m,o[u]);e.push(p),u++}else if(h==="a"){const m=o[u].attributes,p=r[l].attributes;let v;if(r[l].name=="$text")v=new Z(ae._createAt(n,l),ae._createAt(n,l+1));else{const x=n.offsetToIndex(l);v=new Z(ae._createAt(n,l),ae._createAt(n.getChild(x),0))}const C=this._getAttributesDiff(v,m,p);e.push(...C),l++,u++}else l++,u++}e.sort((n,s)=>n.position.root!=s.position.root?n.position.root.rootName<s.position.root.rootName?-1:1:n.position.isEqual(s.position)?n.changeCount-s.changeCount:n.position.isBefore(s.position)?-1:1);for(let n=1,s=0;n<e.length;n++){const o=e[s],r=e[n],a=o.type=="remove"&&r.type=="remove"&&o.name=="$text"&&r.name=="$text"&&o.position.isEqual(r.position),l=o.type=="insert"&&r.type=="insert"&&o.name=="$text"&&r.name=="$text"&&o.position.parent==r.position.parent&&o.position.offset+o.length==r.position.offset,u=o.type=="attribute"&&r.type=="attribute"&&o.position.parent==r.position.parent&&o.range.isFlat&&r.range.isFlat&&o.position.offset+o.length==r.position.offset&&o.attributeKey==r.attributeKey&&o.attributeOldValue==r.attributeOldValue&&o.attributeNewValue==r.attributeNewValue;a||l||u?(o.length++,u&&(o.range.end=o.range.end.getShiftedBy(1)),e[n]=null):s=n}e=e.filter(n=>n);for(const n of e)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(e$),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=Z._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const s=n.getData();this.bufferMarkerChange(n.name,s,s)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const n=e.getData();this.bufferMarkerChange(e.name,{...n,range:null},n)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t)){this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});return}const n=this._changedRoots.get(t);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(t)):n.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,n,s){const o=this._changedRoots.get(t)||{name:t},r=o.attributes||{};if(r[e]){const a=r[e];s===a.oldValue?delete r[e]:a.newValue=s}else r[e]={oldValue:n,newValue:s};Object.entries(r).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(t)):(o.attributes=r,this._changedRoots.set(t,o))}_markInsert(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s)}_markRemove(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let s=0;s<n.length;s++)n[s].howMany<1&&(n.splice(s,1),s--)}_setElementState(t,e){if(!t.is("element"))return;const n=Dd._statesPriority.indexOf(this._elementState.get(t));Dd._statesPriority.indexOf(e)>n&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element")||!this._elementsSnapshots.has(t))return e;const n=this._elementState.get(t);return!n||n=="move"?e:n}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=dA(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const n of e)this._elementsSnapshots.set(n.node,n)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const s=t.offset+t.howMany,o=n.offset+n.howMany;if(t.type=="insert"&&(n.type=="insert"&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<o&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),n.type=="remove"&&t.offset<n.offset&&(n.offset+=t.howMany),n.type=="attribute")){if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<o){const r=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:s,howMany:r-n.howMany,count:this._changeCount++})}}if(t.type=="remove"){if(n.type=="insert"){if(s<=n.offset)n.offset-=t.howMany;else if(s<=o)if(t.offset<n.offset){const r=s-n.offset;n.offset=t.offset,n.howMany-=r,t.nodesToHandle-=r}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<o){const r=o-t.offset;n.howMany-=r,t.nodesToHandle-=r}}if(n.type=="remove"&&(s<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(s<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const r=s-n.offset;n.offset=t.offset,n.howMany-=r}else if(t.offset<o)if(s<=o){const r=n.howMany;n.howMany=t.offset-n.offset;const a=r-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:a,count:this._changeCount++})}else n.howMany-=o-t.offset}}if(t.type=="attribute"){if(n.type=="insert")if(t.offset<n.offset&&s>n.offset){if(s>o){const r={type:"attribute",offset:o,howMany:s-o,count:this._changeCount++};this._handleChange(r,e),e.push(r)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<o&&(s>o?(t.nodesToHandle=s-o,t.offset=o):t.nodesToHandle=0);if(n.type=="remove"&&t.offset<n.offset&&s>n.offset){const r={type:"attribute",offset:n.offset,howMany:s-n.offset,count:this._changeCount++};this._handleChange(r,e),e.push(r),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}n.type=="attribute"&&(t.offset>=n.offset&&s<=o?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&s>=o&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n,s,o){const r={type:"insert",position:ae._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:n};return n!="insert"&&o&&(r.before={name:o.name,attributes:new Map(o.attributes)}),r}_getRemoveDiff(t,e,n,s){return{type:"remove",action:n,position:ae._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const s=[];n=new Map(n);for(const[o,r]of e){const a=n.has(o)?n.get(o):null;a!==r&&s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:a,changeCount:this._changeCount++}),n.delete(o)}for(const[o,r]of n)s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return s}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),s=t.startOffset;if(n){for(const o of n)if(o.type=="insert"&&s>=o.offset&&s<o.offset+o.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const s=new Z(ae._createAt(t,e),ae._createAt(t,e+n));for(const o of s.getItems({shallow:!0}))o.is("element")&&(this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}};w(Dd,"_statesPriority",[void 0,"refresh","rename","move"]);let ev=Dd;function uA(i){return{node:i,name:i.is("$text")?"$text":i.name,attributes:new Map(i.getAttributes())}}function dA(i){const t=[];for(const e of i)if(e.is("$text"))for(let n=0;n<e.data.length;++n)t.push(uA(e));else t.push(uA(e));return t}function QG(i,t){const e=[];let n=0,s=0;for(const o of t){if(o.offset>n){for(let r=0;r<o.offset-n;r++)e.push("e");s+=o.offset-n}if(o.type=="insert"){for(let r=0;r<o.howMany;r++)e.push("i");n=o.offset+o.howMany}else if(o.type=="remove"){for(let r=0;r<o.howMany;r++)e.push("r");n=o.offset,s+=o.howMany}else{if(o.howMany>1500)for(let r=0;r<o.howMany;r++)e.push("a");else e.push(..."a".repeat(o.howMany).split(""));n=o.offset+o.howMany,s+=o.howMany}}if(s<i)for(let o=0;o<i-s-n;o++)e.push("e");return e}function e$(i){const t="position"in i&&i.position.root.rootName=="$graveyard",e="range"in i&&i.range.root.rootName=="$graveyard";return!t&&!e}class t${constructor(){w(this,"_operations",[]);w(this,"_undoPairs",new Map);w(this,"_undoneOperations",new Set);w(this,"_baseVersionToOperationIndex",new Map);w(this,"_version",0);w(this,"_gaps",new Map)}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new N("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];t===void 0&&(t=n.baseVersion);let s=e-1;for(const[a,l]of this._gaps)t>a&&t<l&&(t=l),s>a&&s<l&&(s=a-1);if(s<n.baseVersion||t>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(t);o===void 0&&(o=0);let r=this._baseVersionToOperationIndex.get(s);return r===void 0&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(e!==void 0)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class Rg extends Rt{constructor(e,n,s="main"){super(n);w(this,"rootName");w(this,"_document");w(this,"_isAttached",!0);w(this,"_isLoaded",!0);this._document=e,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Rg.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"):i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"||i==="node"||i==="model:node"};const hA="$graveyard";class n$ extends Tt(){constructor(e){super();w(this,"model");w(this,"history");w(this,"selection");w(this,"roots");w(this,"differ");w(this,"isReadOnly");w(this,"_postFixers");w(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new t$,this.selection=new xs(this),this.roots=new En({idProperty:"rootName"}),this.differ=new ev(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",hA),this.listenTo(e,"applyOperation",(n,s)=>{const o=s[0];o.isDocumentOperation&&this.differ.bufferOperation(o)},{priority:"high"}),this.listenTo(e,"applyOperation",(n,s)=>{const o=s[0];o.isDocumentOperation&&this.history.addOperation(o)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(n,s,o,r,a)=>{const l={...s.getData(),range:r};this.differ.bufferMarkerChange(s.name,a,l),o===null&&s.on("change",(u,h)=>{const m=s.getData();this.differ.bufferMarkerChange(s.name,{...m,range:h},m)})}),this.registerPostFixer(n=>{let s=!1;for(const o of this.roots)!o.isAttached()&&!o.isEmpty&&(n.remove(n.createRangeIn(o)),s=!0);for(const o of this.model.markers)o.getRange().root.isAttached()||(n.removeMarker(o),s=!0);return s})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(hA)}createRoot(e="$root",n="main"){if(this.roots.get(n))throw new N("model-document-createroot-name-exists",this,{name:n});const s=new Rg(this,e,n);return this.roots.add(s),s}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(n=>n.rootName)}getRoots(e=!1){return this.roots.filter(n=>n!=this.graveyard&&(e||n.isAttached())&&n._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=w0(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),n=this.model,s=n.schema,o=n.createPositionFromPath(e,[0]);return s.getNearestSelectionRange(o)||n.createRange(o)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&fA(e.start)&&fA(e.end)}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(this.selection.refresh(),n=s(e),n)break;while(n)}}function fA(i){const t=i.textNode;if(t){const e=t.data,n=i.offset-t.startOffset;return!V0(e,n)&&!N0(e,n)}return!0}class i$ extends Tt(){constructor(){super(...arguments);w(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const n=e instanceof tc?e.name:e;return this._markers.has(n)}get(e){return this._markers.get(e)||null}_set(e,n,s=!1,o=!1){const r=e instanceof tc?e.name:e;if(r.includes(","))throw new N("markercollection-incorrect-marker-name",this);const a=this._markers.get(r);if(a){const h=a.getData(),m=a.getRange();let p=!1;return m.isEqual(n)||(a._attachLiveRange(ei.fromRange(n)),p=!0),s!=a.managedUsingOperations&&(a._managedUsingOperations=s,p=!0),typeof o=="boolean"&&o!=a.affectsData&&(a._affectsData=o,p=!0),p&&this.fire(`update:${r}`,a,m,n,h),a}const l=ei.fromRange(n),u=new tc(r,l,s,o);return this._markers.set(r,u),this.fire(`update:${r}`,u,null,n,{...u.getData(),range:null}),u}_remove(e){const n=e instanceof tc?e.name:e,s=this._markers.get(n);return s?(this._markers.delete(n),this.fire(`update:${n}`,s,s.getRange(),null,s.getData()),this._destroyMarker(s),!0):!1}_refresh(e){const n=e instanceof tc?e.name:e,s=this._markers.get(n);if(!s)throw new N("markercollection-refresh-marker-not-exists",this);const o=s.getRange();this.fire(`update:${n}`,s,o,o,s.getData())}*getMarkersAtPosition(e){for(const n of this)n.getRange().containsPosition(e)&&(yield n)}*getMarkersIntersectingRange(e){for(const n of this)n.getRange().getIntersection(e)!==null&&(yield n)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const n of this._markers.values())n.name.startsWith(e+":")&&(yield n)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class tc extends Tt(Ur){constructor(e,n,s,o){super();w(this,"name");w(this,"_managedUsingOperations");w(this,"_affectsData");w(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=s,this._affectsData=o}get managedUsingOperations(){if(!this._liveRange)throw new N("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new N("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new N("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new N("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new N("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}tc.prototype.is=function(i){return i==="marker"||i==="model:marker"};class s$ extends Bi{constructor(e,n){super(null);w(this,"sourcePosition");w(this,"howMany");this.sourcePosition=e.clone(),this.howMany=n}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new N("detach-operation-on-document-node",this)}_execute(){fV(Z._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Bs extends Ur{constructor(e){super();w(this,"markers",new Map);w(this,"_children",new Sd);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const n of this._children)e.push(n.toJSON());return e}static fromJSON(e){const n=[];for(const s of e)s.name?n.push(Rt.fromJSON(s)):n.push(Lt.fromJSON(s));return new Bs(n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=o$(n);for(const o of s)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const o of s)o.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}}Bs.prototype.is=function(i){return i==="documentFragment"||i==="model:documentFragment"};function o$(i){return typeof i=="string"?[new Lt(i)]:(Li(i)||(i=[i]),Array.from(i).map(t=>typeof t=="string"?new Lt(t):t instanceof bs?new Lt(t.data,t.getAttributes()):t))}class r${constructor(t,e){w(this,"model");w(this,"batch");this.model=t,this.batch=e}createText(t,e){return new Lt(t,e)}createElement(t,e){return new Rt(t,e)}createDocumentFragment(){return new Bs}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof Lt&&t.data=="")return;const s=ae._createAt(e,n);if(t.parent)if(pA(t.root,s.root)){this.move(Z._createOn(t),s);return}else{if(t.root.document)throw new N("model-writer-insert-forbidden-move",this);this.remove(t)}const o=s.root.document?s.root.document.version:null,r=t instanceof Bs?t._removeChildren(0,t.childCount):t,a=new kn(s,r,o);if(t instanceof Lt&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),t instanceof Bs)for(const[l,u]of t.markers){const h=ae._createAt(u.root,0),p={range:new Z(u.start._getCombined(h,s),u.end._getCombined(h,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,p):this.addMarker(l,p)}}insertText(t,e,n,s){e instanceof Bs||e instanceof Rt||e instanceof ae?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,s)}insertElement(t,e,n,s){e instanceof Bs||e instanceof Rt||e instanceof ae?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,s)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof Bs||e instanceof Rt?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof Bs||e instanceof Rt?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof Z){const s=n.getMinimalFlatRanges();for(const o of s)mA(this,t,e,o)}else gA(this,t,e,n)}setAttributes(t,e){for(const[n,s]of Cs(t))this.setAttribute(n,s,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Z){const n=e.getMinimalFlatRanges();for(const s of n)mA(this,t,null,s)}else gA(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=n=>{for(const s of n.getAttributeKeys())this.removeAttribute(s,n)};if(!(t instanceof Z))e(t);else for(const n of t.getItems())e(n)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof Z))throw new N("writer-move-invalid-range",this);if(!t.isFlat)throw new N("writer-move-range-not-flat",this);const s=ae._createAt(e,n);if(s.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!pA(t.root,s.root))throw new N("writer-move-different-document",this);const o=t.root.document?t.root.document.version:null,r=new ht(t.start,t.end.offset-t.start.offset,s,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(t){this._assertWriterUsedCorrectly();const n=(t instanceof Z?t:Z._createOn(t)).getMinimalFlatRanges().reverse();for(const s of n)this._addOperationForAffectedMarkers("move",s),a$(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Rt))throw new N("writer-merge-no-element-before",this);if(!(n instanceof Rt))throw new N("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(Z._createIn(n),ae._createAt(e,"end")),this.remove(n)}_merge(t){const e=ae._createAt(t.nodeBefore,"end"),n=ae._createAt(t.nodeAfter,0),s=t.root.document.graveyard,o=new ae(s,[0]),r=t.root.document.version,a=new Xt(n,t.nodeAfter.maxOffset,e,o,r);this.batch.addOperation(a),this.model.applyOperation(a)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Rt))throw new N("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,s=new Ci(ae._createBefore(t),t.name,e,n);this.batch.addOperation(s),this.model.applyOperation(s)}split(t,e){this._assertWriterUsedCorrectly();let n=t.parent;if(!n.parent)throw new N("writer-split-element-no-parent",this);if(e||(e=n.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new N("writer-split-invalid-limit-element",this);let s,o;do{const r=n.root.document?n.root.document.version:null,a=n.maxOffset-t.offset,l=It.getInsertionPosition(t),u=new It(t,a,l,null,r);this.batch.addOperation(u),this.model.applyOperation(u),!s&&!o&&(s=n,o=t.parent.nextSibling),t=this.createPositionAfter(t.parent),n=t.parent}while(n!==e);return{position:t,range:new Z(ae._createAt(s,"end"),ae._createAt(o,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new N("writer-wrap-range-not-flat",this);const n=e instanceof Rt?e:new Rt(e);if(n.childCount>0)throw new N("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new N("writer-wrap-element-attached",this);this.insert(n,t.start);const s=new Z(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(s,ae._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),t.parent===null)throw new N("writer-unwrap-element-no-parent",this);this.move(Z._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||typeof e.usingOperation!="boolean")throw new N("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,s=e.range,o=e.affectsData===void 0?!1:e.affectsData;if(this.model.markers.has(t))throw new N("writer-addmarker-marker-exists",this);if(!s)throw new N("writer-addmarker-no-range",this);return n?(Yu(this,t,null,s,o),this.model.markers.get(t)):this.model.markers._set(t,s,n,o)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n=typeof t=="string"?t:t.name,s=this.model.markers.get(n);if(!s)throw new N("writer-updatemarker-marker-not-exists",this);if(!e){Ze("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(s);return}const o=typeof e.usingOperation=="boolean",r=typeof e.affectsData=="boolean",a=r?e.affectsData:s.affectsData;if(!o&&!e.range&&!r)throw new N("writer-updatemarker-wrong-options",this);const l=s.getRange(),u=e.range?e.range:l;if(o&&e.usingOperation!==s.managedUsingOperations){e.usingOperation?Yu(this,n,null,u,a):(Yu(this,n,l,null,a),this.model.markers._set(n,u,void 0,a));return}s.managedUsingOperations?Yu(this,n,l,u,a):this.model.markers._set(n,u,void 0,a)}removeMarker(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?t:t.name;if(!this.model.markers.has(e))throw new N("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);if(!n.managedUsingOperations){this.model.markers._remove(e);return}const s=n.getRange();Yu(this,e,s,null,n.affectsData)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(t);if(n&&n.isAttached())throw new N("writer-addroot-root-exists",this);const s=this.model.document,o=new Ws(t,e,!0,s,s.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new N("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===e&&this.removeMarker(o);for(const o of e.getAttributeKeys())this.removeAttribute(o,e);this.remove(this.createRangeIn(e));const n=this.model.document,s=new Ws(e.rootName,e.name,!1,n,n.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._setSelectionAttribute(t,e);else for(const[n,s]of Cs(t))this._setSelectionAttribute(n,s)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const s=xs._getStoreAttributeKey(t);this.setAttribute(s,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=xs._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new N("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const s=n.getRange();let o=!1;if(t==="move"){const r=e;o=r.containsPosition(s.start)||r.start.isEqual(s.start)||r.containsPosition(s.end)||r.end.isEqual(s.end)}else{const r=e,a=r.nodeBefore,l=r.nodeAfter,u=s.start.parent==a&&s.start.isAtEnd,h=s.end.parent==l&&s.end.offset==0,m=s.end.nodeAfter==l,p=s.start.nodeAfter==l;o=u||h||m||p}o&&this.updateMarker(n.name,{range:s})}}}function mA(i,t,e,n){const s=i.model,o=s.document;let r=n.start,a,l,u;for(const m of n.getWalker({shallow:!0}))u=m.item.getAttribute(t),a&&l!=u&&(l!=e&&h(),r=a),a=m.nextPosition,l=u;a instanceof ae&&a!=r&&l!=e&&h();function h(){const m=new Z(r,a),p=m.root.document?o.version:null,v=new rn(m,t,l,e,p);i.batch.addOperation(v),s.applyOperation(v)}}function gA(i,t,e,n){const s=i.model,o=s.document,r=n.getAttribute(t);let a,l;if(r!=e){if(n.root===n){const h=n.document?o.version:null;l=new Io(n,t,r,e,h)}else{a=new Z(ae._createBefore(n),i.createPositionAfter(n));const h=a.root.document?o.version:null;l=new rn(a,t,r,e,h)}i.batch.addOperation(l),s.applyOperation(l)}}function Yu(i,t,e,n,s){const o=i.model,r=o.document,a=new ni(t,e,n,o.markers,!!s,r.version);i.batch.addOperation(a),o.applyOperation(a)}function a$(i,t,e,n){let s;if(i.root.document){const o=n.document,r=new ae(o.graveyard,[0]);s=new ht(i,t,r,o.version)}else s=new s$(i,t);e.addOperation(s),n.applyOperation(s)}function pA(i,t){return i===t||i instanceof Rg&&t instanceof Rg}function l$(i,t,e={}){if(t.isCollapsed)return;const n=t.getFirstRange();if(n.root.rootName=="$graveyard")return;const s=i.schema;i.change(o=>{if(!e.doNotResetEntireContent&&b$(s,t)){p$(o,t);return}const r={};if(!e.doNotAutoparagraph){const u=t.getSelectedElement();u&&Object.assign(r,s.getAttributesWithProperty(u,"copyOnReplace",!0))}let a,l;e.doNotFixSelection?(a=zt.fromPosition(n.start,"toPrevious"),l=zt.fromPosition(n.end,"toNext")):[a,l]=c$(n),a.isTouching(l)||o.remove(o.createRange(a,l)),e.leaveUnmerged||(d$(o,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),o)),_V(o,t,a),!e.doNotAutoparagraph&&m$(s,a)&&yV(o,a,t,r),a.detach(),l.detach()})}function c$(i){const t=i.root.document.model,e=i.start;let n=i.end;if(t.hasContent(i,{ignoreMarkers:!0})){const s=u$(n);if(s&&n.isTouching(t.createPositionAt(s,0))){const o=t.createSelection(i);t.modifySelection(o,{direction:"backward"});const r=o.getLastPosition(),a=t.createRange(r,n);t.hasContent(a,{ignoreMarkers:!0})||(n=r)}}return[zt.fromPosition(e,"toPrevious"),zt.fromPosition(n,"toNext")]}function u$(i){const t=i.parent,e=t.root.document.model.schema,n=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of n){if(e.isLimit(s))return null;if(e.isBlock(s))return s}}function d$(i,t,e){const n=i.model;if(!q0(i.model.schema,t,e))return;const[s,o]=f$(t,e);!s||!o||(!n.hasContent(s,{ignoreMarkers:!0})&&n.hasContent(o,{ignoreMarkers:!0})?wV(i,t,e,s.parent):bV(i,t,e,s.parent))}function bV(i,t,e,n){const s=t.parent,o=e.parent;if(!(s==n||o==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(o),e.isEqual(t)||i.insert(o,t),i.merge(t);e.parent.isEmpty;){const r=e.parent;e=i.createPositionBefore(r),i.remove(r)}q0(i.model.schema,t,e)&&bV(i,t,e,n)}}function wV(i,t,e,n){const s=t.parent,o=e.parent;if(!(s==n||o==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(o),e.isEqual(t)||i.insert(s,e);t.parent.isEmpty;){const r=t.parent;t=i.createPositionBefore(r),i.remove(r)}e=i.createPositionBefore(o),h$(i,e),q0(i.model.schema,t,e)&&wV(i,t,e,n)}}function h$(i,t){const e=t.nodeBefore,n=t.nodeAfter;e.name!=n.name&&i.rename(e,n.name),i.clearAttributes(e),i.setAttributes(Object.fromEntries(n.getAttributes()),e),i.merge(t)}function q0(i,t,e){const n=t.parent,s=e.parent;return n==s||i.isLimit(n)||i.isLimit(s)?!1:g$(t,e,i)}function f$(i,t){const e=i.getAncestors(),n=t.getAncestors();let s=0;for(;e[s]&&e[s]==n[s];)s++;return[e[s],n[s]]}function m$(i,t){const e=i.checkChild(t,"$text"),n=i.checkChild(t,"paragraph");return!e&&n}function g$(i,t,e){const n=new Z(i,t);for(const s of n.getWalker())if(e.isLimit(s.item))return!1;return!0}function yV(i,t,e,n={}){const s=i.createElement("paragraph");i.model.schema.setAllowedAttributes(s,n,i),i.insert(s,t),_V(i,e,i.createPositionAt(s,0))}function p$(i,t){const e=i.model.schema.getLimitElement(t);i.remove(i.createRangeIn(e)),yV(i,i.createPositionAt(e,0),t)}function b$(i,t){const e=i.getLimitElement(t);if(!t.containsEntireContent(e))return!1;const n=t.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(e,"paragraph")}function _V(i,t,e){t instanceof xs?i.setSelection(e):t.setTo(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function w$(i,t){return i.change(e=>{const n=e.createDocumentFragment(),s=t.getFirstRange();if(!s||s.isCollapsed)return n;const o=s.start.root,r=s.start.getCommonPath(s.end),a=o.getNodeByPath(r);let l;s.start.parent==s.end.parent?l=s:l=e.createRange(e.createPositionAt(a,s.start.path[r.length]),e.createPositionAt(a,s.end.path[r.length]+1));const u=l.end.offset-l.start.offset;for(const h of l.getItems({shallow:!0}))h.is("$textProxy")?e.appendText(h.data,h.getAttributes(),n):e.append(e.cloneElement(h,!0),n);if(l!=s){const h=s._getTransformedByMove(l.start,e.createPositionAt(n,0),u)[0],m=e.createRange(e.createPositionAt(n,0),h.start),p=e.createRange(h.end,e.createPositionAt(n,"end"));bA(p,e),bA(m,e)}return n})}function bA(i,t){const e=[];Array.from(i.getItems({direction:"backward"})).map(n=>t.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{e.push(n.start.parent),t.remove(n)}),e.forEach(n=>{let s=n;for(;s.parent&&s.isEmpty;){const o=t.createRangeOn(s);s=s.parent,t.remove(o)}})}function y$(i,t,e){return i.change(n=>{const s=e||i.document.selection;s.isCollapsed||i.deleteContent(s,{doNotAutoparagraph:!0});const o=new _$(i,n,s.anchor),r=[];let a;if(t.is("documentFragment")){if(t.markers.size){const h=[];for(const[m,p]of t.markers){const{start:v,end:C}=p,x=v.isEqual(C);h.push({position:v,name:m,isCollapsed:x},{position:C,name:m,isCollapsed:x})}h.sort(({position:m},{position:p})=>m.isBefore(p)?1:-1);for(const{position:m,name:p,isCollapsed:v}of h){let C=null,x=null;const k=m.parent===t&&m.isAtStart,S=m.parent===t&&m.isAtEnd;!k&&!S?(C=n.createElement("$marker"),n.insert(C,m)):v&&(x=k?"start":"end"),r.push({name:p,element:C,collapsed:x})}}a=t.getChildren()}else a=[t];o.handleNodes(a);let l=o.getSelectionRange();if(t.is("documentFragment")&&r.length){const h=l?ei.fromRange(l):null,m={};for(let p=r.length-1;p>=0;p--){const{name:v,element:C,collapsed:x}=r[p],k=!m[v];if(k&&(m[v]=[]),C){const S=n.createPositionAt(C,"before");m[v].push(S),n.remove(C)}else{const S=o.getAffectedRange();if(!S){x&&m[v].push(o.position);continue}x?m[v].push(S[x]):m[v].push(k?S.start:S.end)}}for(const[p,[v,C]]of Object.entries(m))v&&C&&v.root===C.root&&v.root.document&&!n.model.markers.has(p)&&n.addMarker(p,{usingOperation:!0,affectsData:!0,range:new Z(v,C)});h&&(l=h.toRange(),h.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof xs?n.setSelection(l):s.setTo(l));const u=o.getAffectedRange()||i.createRange(s.anchor);return o.destroy(),u})}class _${constructor(t,e,n){w(this,"model");w(this,"writer");w(this,"position");w(this,"canMergeWith");w(this,"schema");w(this,"_documentFragment");w(this,"_documentFragmentPosition");w(this,"_firstNode",null);w(this,"_lastNode",null);w(this,"_lastAutoParagraph",null);w(this,"_filterAttributesOf",[]);w(this,"_affectedStart",null);w(this,"_affectedEnd",null);w(this,"_nodeToSelect",null);this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){this._lastNode=t;/* istanbul ignore if -- @preserve */if(this.position.parent!=t||!this.position.isAtEnd)throw new N("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Z._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Z(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(!this._checkAndSplitToAllowedPosition(t)){this.schema.isObject(t)||this._handleDisallowedNode(t);return}this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=zt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,t))throw new N("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=zt.fromPosition(t,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(t))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=zt.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof Rt)||!this._canMergeLeft(t))return;const e=zt._createBefore(t);e.stickiness="toNext";const n=zt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=zt._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=zt._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof Rt)||!this._canMergeRight(t))return;const e=zt._createAfter(t);e.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(e))throw new N("insertcontent-invalid-insertion-position",this);this.position=ae._createAt(e.nodeBefore,"end");const n=zt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=zt._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=zt._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof Rt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof Rt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===e&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)||this.schema.checkChild(t,"paragraph")&&this.schema.checkChild("paragraph",e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function v$(i,t,e,n={}){if(!i.schema.isObject(t))throw new N("insertobject-element-not-an-object",i,{object:t});const s=e||i.document.selection;let o=s;n.findOptimalPosition&&i.schema.isBlock(t)&&(o=i.createSelection(i.schema.findOptimalInsertionRange(s,n.findOptimalPosition)));const r=Ln(s.getSelectedBlocks()),a={};return r&&Object.assign(a,i.schema.getAttributesWithProperty(r,"copyOnReplace",!0)),i.change(l=>{o.isCollapsed||i.deleteContent(o,{doNotAutoparagraph:!0});let u=t;const h=o.anchor.parent;!i.schema.checkChild(h,t)&&i.schema.checkChild(h,"paragraph")&&i.schema.checkChild("paragraph",t)&&(u=l.createElement("paragraph"),l.insert(t,u)),i.schema.setAllowedAttributes(u,a,l);const m=i.insertContent(u,o);return m.isCollapsed||n.setSelection&&C$(l,t,n.setSelection,a),m})}function C$(i,t,e,n){const s=i.model;if(e=="on"){i.setSelection(t,"on");return}if(e!="after")throw new N("insertobject-invalid-place-parameter-value",s);let o=t.nextSibling;if(s.schema.isInline(t)){i.setSelection(t,"after");return}!(o&&s.schema.checkChild(o,"$text"))&&s.schema.checkChild(t.parent,"paragraph")&&(o=i.createElement("paragraph"),s.schema.setAllowedAttributes(o,n,i),s.insertContent(o,i.createPositionAfter(t))),o&&i.setSelection(o,0)}const T$=' ,.?!:;"-()';function x$(i,t,e={}){const n=i.schema,s=e.direction!="backward",o=e.unit?e.unit:"character",r=!!e.treatEmojiAsSingleUnit,a=t.focus,l=new Eo({boundaries:A$(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),u={walker:l,schema:n,isForward:s,unit:o,treatEmojiAsSingleUnit:r};let h;for(;h=l.next();){if(h.done)return;const m=k$(u,h.value);if(m){t instanceof xs?i.change(p=>{p.setSelectionFocus(m)}):t.setFocus(m);return}}}function k$(i,t){const{isForward:e,walker:n,unit:s,schema:o,treatEmojiAsSingleUnit:r}=i,{type:a,item:l,nextPosition:u}=t;if(a=="text")return i.unit==="word"?S$(n,e):E$(n,s,r);if(a==(e?"elementStart":"elementEnd")){if(o.isSelectable(l))return ae._createAt(l,e?"after":"before");if(o.checkChild(u,"$text"))return u}else{if(o.isLimit(l)){n.skip(()=>!0);return}if(o.checkChild(u,"$text"))return u}}function E$(i,t,e){const n=i.position.textNode;if(n){const s=n.data;let o=i.position.offset-n.startOffset;for(;V0(s,o)||t=="character"&&N0(s,o)||e&&V5(s,o);)i.next(),o=i.position.offset-n.startOffset}return i.position}function S$(i,t){let e=i.position.textNode;for(e||(e=t?i.position.nodeAfter:i.position.nodeBefore);e&&e.is("$text");){const n=i.position.offset-e.startOffset;if(I$(e,n,t))e=t?i.position.nodeAfter:i.position.nodeBefore;else{if(R$(e.data,n,t))break;i.next()}}return i.position}function A$(i,t){const e=i.root,n=ae._createAt(e,t?"end":0);return t?new Z(i,n):new Z(n,i)}function R$(i,t,e){const n=t+(e?0:-1);return T$.includes(i.charAt(n))}function I$(i,t,e){return t===(e?i.offsetSize:0)}let P$=class extends wt(){constructor(){super();w(this,"markers");w(this,"document");w(this,"schema");w(this,"_pendingChanges");w(this,"_currentWriter");this.markers=new i$,this.document=new n$(this),this.schema=new yG,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,n)=>{n[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),dG(this),this.document.registerPostFixer(rV),this.on("insertContent",(e,[n,s])=>{e.return=y$(this,n,s)}),this.on("insertObject",(e,[n,s,o])=>{e.return=v$(this,n,s,o)}),this.on("canEditAt",e=>{const n=!this.document.isReadOnly;e.return=n,n||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Gl,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(n){/* istanbul ignore next -- @preserve */N.rethrowUnexpectedError(n,this)}}enqueueChange(e,n){try{e?typeof e=="function"?(n=e,e=new Gl):e instanceof Gl||(e=new Gl(e)):e=new Gl,this._pendingChanges.push({batch:e,callback:n}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(s){/* istanbul ignore next -- @preserve */N.rethrowUnexpectedError(s,this)}}applyOperation(e){e._execute()}insertContent(e,n,s,...o){const r=Fy(n,s);return this.fire("insertContent",[e,r,s,...o])}insertObject(e,n,s,o,...r){const a=Fy(n,s);return this.fire("insertObject",[e,a,o,o,...r])}deleteContent(e,n){l$(this,e,n)}modifySelection(e,n){x$(this,e,n)}getSelectedContent(e){return w$(this,e)}hasContent(e,n={}){const s=e instanceof Z?e:Z._createIn(e);if(s.isCollapsed)return!1;const{ignoreWhitespaces:o=!1,ignoreMarkers:r=!1}=n;if(!r){for(const a of this.markers.getMarkersIntersectingRange(s))if(a.affectsData)return!0}for(const a of s.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(o){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const n=Fy(e);return this.fire("canEditAt",[n])}createPositionFromPath(e,n,s){return new ae(e,n,s)}createPositionAt(e,n){return ae._createAt(e,n)}createPositionAfter(e){return ae._createAfter(e)}createPositionBefore(e){return ae._createBefore(e)}createRange(e,n){return new Z(e,n)}createRangeIn(e){return Z._createIn(e)}createRangeOn(e){return Z._createOn(e)}createSelection(...e){return new Vi(...e)}createBatch(e){return new Gl(e)}createOperationFromJSON(e){return GG.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const n=this._pendingChanges[0].batch;this._currentWriter=new r$(this,n);const s=this._pendingChanges[0].callback(this._currentWriter);e.push(s),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Fy(i,t){if(i)return i instanceof Vi||i instanceof xs?i:i instanceof $a?t||t===0?new Vi(i,t):i.is("rootElement")?new Vi(i,"in"):new Vi(i,"on"):new Vi(i)}class M$ extends Bo{constructor(){super(...arguments);w(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class Rp extends Bo{constructor(){super(...arguments);w(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class V$ extends Bo{constructor(){super(...arguments);w(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(e){this.fire(e.type,e)}}class Fo{constructor(t){w(this,"document");this.document=t}createDocumentFragment(t){return new Ia(this.document,t)}createElement(t,e,n){return new No(this.document,t,e,n)}createText(t){return new On(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const s=n.getChildIndex(t);return this.removeChildren(s,1,n),this.insertChild(s,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new No(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){zs(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return ge._createAt(t,e)}createPositionAfter(t){return ge._createAfter(t)}createPositionBefore(t){return ge._createBefore(t)}createRange(t,e){return new Ke(t,e)}createRangeOn(t){return Ke._createOn(t)}createRangeIn(t){return Ke._createIn(t)}createSelection(...t){return new Ro(...t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const N$=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,O$=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,D$=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,L$=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,B$=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,F$=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,U$=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function vV(i){return i.startsWith("#")?N$.test(i):i.startsWith("rgb")?O$.test(i)||D$.test(i):i.startsWith("hsl")?L$.test(i)||B$.test(i):U$.has(i.toLowerCase())}const z$=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function H$(i){return z$.includes(i)}const W$=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Ip(i){return W$.test(i)}const q$=/^[+-]?[0-9]*([.][0-9]+)?%$/;function CV(i){return q$.test(i)}const G$=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function $$(i){return G$.includes(i)}const j$=["center","top","bottom","left","right"];function K$(i){return j$.includes(i)}const Z$=["fixed","scroll","local"];function Y$(i){return Z$.includes(i)}const J$=/^url\(/;function X$(i){return J$.test(i)}function Ad(i=""){if(i==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const t=G0(i),e=t[0],n=t[2]||e,s=t[1]||e,o=t[3]||s;return{top:e,bottom:n,right:s,left:o}}function Rd(i){return t=>{const{top:e,right:n,bottom:s,left:o}=t,r=[];return[e,n,o,s].every(a=>!!a)?r.push([i,Q$(t)]):(e&&r.push([i+"-top",e]),n&&r.push([i+"-right",n]),s&&r.push([i+"-bottom",s]),o&&r.push([i+"-left",o])),r}}function Q$({top:i,right:t,bottom:e,left:n}){const s=[];return n!==t?s.push(i,t,e,n):e!==i?s.push(i,t,e):t!==i?s.push(i,t):s.push(i),s.join(" ")}function TV(i){return t=>({path:i,value:Ad(t)})}function G0(i){const t=i.trim().slice(0,1500).matchAll(F$);return Array.from(t).map(e=>e[0])}function $0(i){i.setNormalizer("background",ej()),i.setNormalizer("background-color",tj()),i.setReducer("background",nj()),i.setStyleRelation("background",["background-color"])}function ej(){return i=>{const t={},e=G0(i);for(const n of e)$$(n)?(t.repeat=t.repeat||[],t.repeat.push(n)):K$(n)?(t.position=t.position||[],t.position.push(n)):Y$(n)?t.attachment=n:vV(n)?t.color=n:X$(n)&&(t.image=n);return{path:"background",value:t}}}function tj(){return i=>({path:"background.color",value:i})}function nj(){return i=>{const t=[];return t.push(["background-color",i.color]),t}}function xV(i){i.setNormalizer("border",ij()),i.setNormalizer("border-top",mm("top")),i.setNormalizer("border-right",mm("right")),i.setNormalizer("border-bottom",mm("bottom")),i.setNormalizer("border-left",mm("left")),i.setNormalizer("border-color",Uy("color")),i.setNormalizer("border-width",Uy("width")),i.setNormalizer("border-style",Uy("style")),i.setNormalizer("border-top-color",Zi("color","top")),i.setNormalizer("border-top-style",Zi("style","top")),i.setNormalizer("border-top-width",Zi("width","top")),i.setNormalizer("border-right-color",Zi("color","right")),i.setNormalizer("border-right-style",Zi("style","right")),i.setNormalizer("border-right-width",Zi("width","right")),i.setNormalizer("border-bottom-color",Zi("color","bottom")),i.setNormalizer("border-bottom-style",Zi("style","bottom")),i.setNormalizer("border-bottom-width",Zi("width","bottom")),i.setNormalizer("border-left-color",Zi("color","left")),i.setNormalizer("border-left-style",Zi("style","left")),i.setNormalizer("border-left-width",Zi("width","left")),i.setExtractor("border-top",gm("top")),i.setExtractor("border-right",gm("right")),i.setExtractor("border-bottom",gm("bottom")),i.setExtractor("border-left",gm("left")),i.setExtractor("border-top-color","border.color.top"),i.setExtractor("border-right-color","border.color.right"),i.setExtractor("border-bottom-color","border.color.bottom"),i.setExtractor("border-left-color","border.color.left"),i.setExtractor("border-top-width","border.width.top"),i.setExtractor("border-right-width","border.width.right"),i.setExtractor("border-bottom-width","border.width.bottom"),i.setExtractor("border-left-width","border.width.left"),i.setExtractor("border-top-style","border.style.top"),i.setExtractor("border-right-style","border.style.right"),i.setExtractor("border-bottom-style","border.style.bottom"),i.setExtractor("border-left-style","border.style.left"),i.setReducer("border-color",Rd("border-color")),i.setReducer("border-style",Rd("border-style")),i.setReducer("border-width",Rd("border-width")),i.setReducer("border-top",pm("top")),i.setReducer("border-right",pm("right")),i.setReducer("border-bottom",pm("bottom")),i.setReducer("border-left",pm("left")),i.setReducer("border",oj()),i.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),i.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),i.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),i.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),i.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),i.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function ij(){return i=>{const{color:t,style:e,width:n}=kV(i);return{path:"border",value:{color:Ad(t),style:Ad(e),width:Ad(n)}}}}function mm(i){return t=>{const{color:e,style:n,width:s}=kV(t),o={};return e!==void 0&&(o.color={[i]:e}),n!==void 0&&(o.style={[i]:n}),s!==void 0&&(o.width={[i]:s}),{path:"border",value:o}}}function Uy(i){return t=>({path:"border",value:sj(t,i)})}function sj(i,t){return{[t]:Ad(i)}}function Zi(i,t){return e=>({path:"border",value:{[i]:{[t]:e}}})}function gm(i){return(t,e)=>{if(e.border)return hd(e.border,i)}}function hd(i,t){const e={};return i.width&&i.width[t]&&(e.width=i.width[t]),i.style&&i.style[t]&&(e.style=i.style[t]),i.color&&i.color[t]&&(e.color=i.color[t]),e}function kV(i){const t={},e=G0(i);for(const n of e)Ip(n)||/thin|medium|thick/.test(n)?t.width=n:H$(n)?t.style=n:t.color=n;return t}function oj(){return t=>{const e=hd(t,"top"),n=hd(t,"right"),s=hd(t,"bottom"),o=hd(t,"left"),r=[e,n,s,o],a={width:i(r,"width"),style:i(r,"style"),color:i(r,"color")},l=nc(a,"all");return l.length?l:[...Object.entries(a).reduce((h,[m,p])=>(p&&(h.push([`border-${m}`,p]),r.forEach(v=>delete v[m])),h),[]),...nc(e,"top"),...nc(n,"right"),...nc(s,"bottom"),...nc(o,"left")]};function i(t,e){return t.map(n=>n[e]).reduce((n,s)=>n==s?n:null)}}function pm(i){return t=>nc(t,i)}function nc(i,t){const e=[];if(i&&i.width&&e.push("width"),i&&i.style&&e.push("style"),i&&i.color&&e.push("color"),e.length==3){const n=e.map(s=>i[s]).join(" ");return[t=="all"?["border",n]:[`border-${t}`,n]]}return t=="all"?[]:e.map(n=>[`border-${t}-${n}`,i[n]])}function rj(i){i.setNormalizer("margin",TV("margin")),i.setNormalizer("margin-top",t=>({path:"margin.top",value:t})),i.setNormalizer("margin-right",t=>({path:"margin.right",value:t})),i.setNormalizer("margin-bottom",t=>({path:"margin.bottom",value:t})),i.setNormalizer("margin-left",t=>({path:"margin.left",value:t})),i.setReducer("margin",Rd("margin")),i.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function aj(i){i.setNormalizer("padding",TV("padding")),i.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),i.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),i.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),i.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),i.setReducer("padding",Rd("padding")),i.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class EV{constructor(t){w(this,"crashes",[]);w(this,"state","initializing");w(this,"_crashNumberLimit");w(this,"_now",Date.now);w(this,"_minimumNonErrorTimePeriod");w(this,"_boundErrorHandler");w(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const n="error"in e?e.error:e.reason;n instanceof Error&&this._handleError(n,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(n=>n!==e)}_fire(t,...e){const n=this._listeners[t]||[];for(const s of n)s.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const t=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(t-e)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tv(i,t=new Set){const e=[i],n=new Set;let s=0;for(;e.length>s;){const o=e[s++];if(!(n.has(o)||!lj(o)||t.has(o)))if(n.add(o),Symbol.iterator in o)try{for(const r of o)e.push(r)}catch{}else for(const r in o)r!=="defaultValue"&&e.push(o[r])}return n}function lj(i){const t=Object.prototype.toString.call(i),e=typeof i;return!(e==="number"||e==="boolean"||e==="string"||e==="symbol"||e==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||i===void 0||i===null||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event)}function SV(i,t,e=new Set){if(i===t&&cj(i))return!0;const n=tv(i,e),s=tv(t,e);for(const o of n)if(s.has(o))return!0;return!1}function cj(i){return typeof i=="object"&&i!==null}class AV extends EV{constructor(e,n={}){super(n);w(this,"_editor",null);w(this,"_lifecyclePromise",null);w(this,"_throttledSave");w(this,"_data");w(this,"_lastDocumentVersion");w(this,"_elementOrData");w(this,"_initUsingData",!0);w(this,"_editables",{});w(this,"_config");w(this,"_excludedProps");this._throttledSave=vc(this._save.bind(this),typeof n.saveInterval=="number"?n.saveInterval:5e3),e&&(this._creator=(s,o)=>e.create(s,o)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},n=[],s=this._config.rootsAttributes||{},o={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(e[a]="",o[a]=s[a]||{}):n.push(a);const r={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:n,rootsAttributes:o,_watchdogInitialData:this._data};return delete r.initialData,r.extraPlugins.push(uj),this._initUsingData?this.create(e,r,r.context):Pr(this._elementOrData)?this.create(this._elementOrData,r,r.context):this.create(this._editables,r,r.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,n=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(n)||{},this._config.context=s,this._creator(e,this._config))).then(o=>{this._editor=o,o.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=o.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(n){console.error(n,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,n=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=e,o=s.has("CommentsRepository")&&s.get("CommentsRepository"),r=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};n.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of e.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return o&&(a.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),r&&(a.suggestions=JSON.stringify(r.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const e={};for(const n of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(n);s&&(e[n]=s)}return e}_isErrorComingFromThisItem(e){return SV(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return Tp(e,(n,s)=>{if(Pr(n)||s==="context")return n})}}class uj{constructor(t){w(this,"editor");w(this,"_data");this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},e=>{this._restoreCollaborationData(),this._restoreEditorData(e)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const n=t.createElement(e.name,e.attributes);if(e.children)for(const s of e.children)n._appendChild(this._createNode(t,s));return n}else return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([n,{content:s,attributes:o}])=>{const r=JSON.parse(s),a=JSON.parse(o),l=e.model.document.getRoot(n);for(const[u,h]of a)t.setAttribute(u,h,l);for(const u of r){const h=this._createNode(t,u);t.insert(h,l,"end")}}),Object.entries(this._data.markers).forEach(([n,s])=>{const{document:o}=e.model,{rangeJSON:{start:r,end:a},...l}=s,u=o.getRoot(r.root),h=t.createPositionFromPath(u,r.path,r.stickiness),m=t.createPositionFromPath(u,a.path,a.stickiness),p=t.createRange(h,m);t.addMarker(n,{range:p,...l})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(n=>{const s=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(n.threadId)&&o.getCommentThread(n.threadId).remove(),o.addCommentThread({channelId:s,...n})}),e.forEach(n=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(n.id)){const o=s.getSuggestion(n.id);o.attributes=n.attributes}else s.addSuggestionData(n)})}}const Id=Symbol("MainQueueId");class dj extends EV{constructor(e,n={}){super(n);w(this,"_watchdogs",new Map);w(this,"_watchdogConfig");w(this,"_context",null);w(this,"_contextProps",new Set);w(this,"_actionQueues",new hj);w(this,"_contextConfig");w(this,"_item");this._watchdogConfig=n,this._creator=s=>e.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Id,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const n=wA(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let o;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if(s.type==="editor")return o=new AV(null,this._watchdogConfig),o.setCreator(s.creator),o._setExcludedProperties(this._contextProps),s.destructor&&o.setDestructor(s.destructor),this._watchdogs.set(s.id,o),o.on("error",(r,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(u=>{const h=()=>{o.off("restart",h),this._fire("itemRestart",{itemId:s.id}),u()};o.on("restart",h)}))}),o.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(e){const n=wA(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s,()=>{const o=this._getWatchdog(s);return this._watchdogs.delete(s),o.destroy()})))}destroy(){return this._actionQueues.enqueue(Id,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Id,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=tv(this._context),Promise.all(Array.from(this._watchdogs.values()).map(n=>(n._setExcludedProperties(this._contextProps),n.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(n=>n.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const n=this._watchdogs.get(e);if(!n)throw new Error(`Item with the given id was not registered: ${e}.`);return n}_isErrorComingFromThisItem(e){for(const n of this._watchdogs.values())if(n._isErrorComingFromThisItem(e))return!1;return SV(this._context,e.context)}}class hj{constructor(){w(this,"_onEmptyCallbacks",[]);w(this,"_queues",new Map);w(this,"_activeActions",0)}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const n=t===Id;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const o=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(Id),this._queues.get(t)])).then(e),r=o.catch(()=>{});return this._queues.set(t,r),o.finally(()=>{this._activeActions--,this._queues.get(t)===r&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function wA(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class te extends wt(){constructor(e){super();w(this,"editor");w(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",yA,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",yA),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function yA(i){i.return=!1,i.stop()}class Ge extends wt(){constructor(e){super();w(this,"editor");w(this,"_isEnabledBasedOnSelection");w(this,"_affectsData");w(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",n=>{if(!this.affectsData)return;const s=e.model.document.selection,r=!(s.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(s);(e.isReadOnly||this._isEnabledBasedOnSelection&&!r)&&(n.return=!1,n.stop())},{priority:"highest"}),this.on("execute",n=>{this.isEnabled||n.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",_A,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",_A),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function _A(i){i.return=!1,i.stop()}class vA extends Ge{constructor(){super(...arguments);w(this,"_childCommandsDefinitions",[])}refresh(){}execute(...e){const n=this._getFirstEnabledCommand();return!!n&&n.execute(e)}registerChildCommand(e,n={}){d5(this._childCommandsDefinitions,{command:e,priority:n.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:n})=>n.isEnabled);return e&&e.command}}class RV extends Tt(){constructor(e,n=[],s=[]){super();w(this,"_context");w(this,"_plugins",new Map);w(this,"_availablePlugins");w(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(const o of n)o.pluginName&&this._availablePlugins.set(o.pluginName,o);this._contextPlugins=new Map;for(const[o,r]of s)this._contextPlugins.set(o,r),this._contextPlugins.set(r,o),o.pluginName&&this._availablePlugins.set(o.pluginName,o)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const n=this._plugins.get(e);if(!n){let s=e;throw typeof e=="function"&&(s=e.pluginName||e.name),new N("plugincollection-plugin-not-loaded",this._context,{plugin:s})}return n}has(e){return this._plugins.has(e)}init(e,n=[],s=[]){const o=this,r=this._context;C(e),k(e);const a=e.filter(F=>!p(F,n)),l=[...x(a)];J(l,s);const u=L(l);return O(u,"init").then(()=>O(u,"afterInit")).then(()=>u);function h(F){return typeof F=="function"}function m(F){return h(F)&&!!F.isContextPlugin}function p(F,j){return j.some(U=>U===F||v(F)===U||v(U)===F)}function v(F){return h(F)?F.pluginName||F.name:F}function C(F,j=new Set){F.forEach(U=>{h(U)&&(j.has(U)||(j.add(U),U.pluginName&&!o._availablePlugins.has(U.pluginName)&&o._availablePlugins.set(U.pluginName,U),U.requires&&C(U.requires,j)))})}function x(F,j=new Set){return F.map(U=>h(U)?U:o._availablePlugins.get(U)).reduce((U,X)=>j.has(X)?U:(j.add(X),X.requires&&(k(X.requires,X),x(X.requires,j).forEach(le=>U.add(le))),U.add(X)),new Set)}function k(F,j=null){F.map(U=>h(U)?U:o._availablePlugins.get(U)||U).forEach(U=>{S(U,j),I(U,j),P(U,j)})}function S(F,j){if(!h(F))throw j?new N("plugincollection-soft-required",r,{missingPlugin:F,requiredBy:v(j)}):new N("plugincollection-plugin-not-found",r,{plugin:F})}function I(F,j){if(m(j)&&!m(F))throw new N("plugincollection-context-required",r,{plugin:v(F),requiredBy:v(j)})}function P(F,j){if(j&&p(F,n))throw new N("plugincollection-required",r,{plugin:v(F),requiredBy:v(j)})}function L(F){return F.map(j=>{let U=o._contextPlugins.get(j);return U=U||new j(r),o._add(j,U),U})}function O(F,j){return F.reduce((U,X)=>!X[j]||o._contextPlugins.has(X)?U:U.then(X[j].bind(X)),Promise.resolve())}function J(F,j){for(const U of j){if(typeof U!="function")throw new N("plugincollection-replace-plugin-invalid-type",null,{pluginItem:U});const X=U.pluginName;if(!X)throw new N("plugincollection-replace-plugin-missing-name",null,{pluginItem:U});if(U.requires&&U.requires.length)throw new N("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:X});const le=o._availablePlugins.get(X);if(!le)throw new N("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:X});const me=F.indexOf(le);if(me===-1){if(o._contextPlugins.has(le))return;throw new N("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:X})}if(le.requires&&le.requires.length)throw new N("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:X});F.splice(me,1,U),o._availablePlugins.set(X,U)}}}destroy(){const e=[];for(const[,n]of this)typeof n.destroy=="function"&&!this._contextPlugins.has(n)&&e.push(n.destroy());return Promise.all(e)}_add(e,n){this._plugins.set(e,n);const s=e.pluginName;if(s){if(this._plugins.has(s))throw new N("plugincollection-plugin-name-conflict",null,{pluginName:s,plugin1:this._plugins.get(s).constructor,plugin2:e});this._plugins.set(s,n)}}}class Ig{constructor(t){w(this,"config");w(this,"plugins");w(this,"locale");w(this,"t");w(this,"editors");w(this,"_contextOwner",null);const{translations:e,...n}=t||{};this.config=new _5(n,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new RV(this,s);const o=this.config.get("language")||{};this.locale=new jH({uiLanguage:typeof o=="string"?o:o.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new En}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if(typeof n!="function")throw new N("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new N("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new N("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>n))})}}w(Ig,"defaultConfig"),w(Ig,"builtinPlugins");class IV extends wt(){constructor(e){super();w(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class fj{constructor(){w(this,"_commands");this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new N("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class mj extends Ot{constructor(e){super();w(this,"editor");this.editor=e}set(e,n,s={}){if(typeof n=="string"){const o=n;n=(r,a)=>{this.editor.execute(o),a()}}super.set(e,n,s)}}const zy="contentEditing",CA="common";class gj{constructor(t){w(this,"keystrokeInfos",new Map);w(this,"_editor");this._editor=t;const e=t.config.get("menuBar.isVisible"),n=t.locale.t;this.addKeystrokeInfoCategory({id:zy,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&s.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:t,label:e,description:n,groups:s}){this.keystrokeInfos.set(t,{id:t,label:e,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:CA}),s&&s.forEach(o=>{this.addKeystrokeInfoGroup({categoryId:t,...o})})}addKeystrokeInfoGroup({categoryId:t=zy,id:e,label:n,keystrokes:s}){const o=this.keystrokeInfos.get(t);if(!o)throw new N("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});o.groups.set(e,{id:e,label:n,keystrokes:s||[]})}addKeystrokeInfos({categoryId:t=zy,groupId:e=CA,keystrokes:n}){if(!this.keystrokeInfos.has(t))throw new N("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:n});const s=this.keystrokeInfos.get(t);if(!s.groups.has(e))throw new N("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:n});s.groups.get(e).keystrokes.push(...n)}}function pj(i){return{sessionId:vj(),pageSessionId:Cj(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:bj(i),plugins:wj(i.plugins),distribution:yj(),env:_j(),integration:Object.create(null),menuBar:{isVisible:!!i.config.get("menuBar.isVisible")},language:{ui:i.locale.uiLanguage,content:i.locale.contentLanguage},toolbar:{main:Hy(i.config.get("toolbar")),block:Hy(i.config.get("blockToolbar")),balloon:Hy(i.config.get("balloonToolbar"))}}}function bj(i){return Object.getPrototypeOf(i).constructor.editorName}function wj(i){return Array.from(i).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:n,isOfficialPlugin:s,isPremiumPlugin:o}=t;return{isContext:!!n,isOfficial:!!s,isPremium:!!o,name:e}})}function Hy(i){if(!i)return;const t=Array.isArray(i)?{items:i}:i,e=o(t.items||[]);return{isMultiline:e.includes("-"),shouldNotGroupWhenFull:!!t.shouldNotGroupWhenFull,items:s(e)};function s(r){return r.filter(a=>a!=="|"&&a!=="-")}function o(r){return r.flatMap(a=>typeof a=="string"?[a]:o(a.items))}}function yj(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function _j(){let i="unknown",t="unknown";return Se.isMac?i="mac":Se.isWindows?i="windows":Se.isiOS?i="ios":Se.isAndroid&&(i="android"),Se.isGecko?t="gecko":Se.isBlink?t="blink":Se.isSafari&&(t="safari"),{os:i,browser:t}}function vj(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",si()),localStorage.getItem("__ckeditor-session-id")}function Cj(){return he.window.CKEDITOR_PAGE_SESSION_ID=he.window.CKEDITOR_PAGE_SESSION_ID||si(),he.window.CKEDITOR_PAGE_SESSION_ID}var pa;let Tj=(pa=class extends wt(){constructor(e={}){super();w(this,"accessibility");w(this,"commands");w(this,"config");w(this,"conversion");w(this,"data");w(this,"editing");w(this,"locale");w(this,"model");w(this,"plugins");w(this,"keystrokes");w(this,"t");w(this,"_context");w(this,"_readOnlyLocks");if("sanitizeHtml"in e)throw new N("editor-config-sanitizehtml-not-supported");const n=this.constructor,{translations:s,...o}=n.defaultConfig||{},{translations:r=s,...a}=e,l=e.language||o.language;this._context=e.context||new Ig({language:l,translations:r}),this._context._addEditor(this,!e.context);const u=Array.from(n.builtinPlugins||[]);this.config=new _5(a,o),this.config.define("plugins",u),this.config.define(this._context._getEditorConfig()),m(this.config),this.plugins=new RV(this,u,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new fj,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new P$,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const h=new gW;this.data=new zG(this.model,h),this.editing=new bG(this.model,h),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new WG([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new mj(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new gj(this),p(this);function m(v){let C=v.get("licenseKey");if(!C&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(C=window.CKEDITOR_GLOBAL_LICENSE_KEY,v.set("licenseKey",C)),!C)throw new N("license-key-missing")}function p(v){const C=v.config.get("licenseKey"),x=window[Symbol.for("cke distribution")]||"sh";function k(X){v.enableReadOnlyMode(Symbol("invalidLicense")),v._showLicenseError(X)}function S(X){const le=X.split(".");return le.length!=3?null:le[1]}function I(X){return["exp","jti","vc"].every(me=>me in X)}function P(X){return Object.getOwnPropertyNames(X).sort().filter(Ie=>Ie!="vc"&&X[Ie]!=null).map(Ie=>X[Ie])}function L(X){const{hostname:le}=new URL(window.location.href);if(X.includes(le))return!0;const me=le.split(".");return X.filter(Ie=>Ie.includes("*")).map(Ie=>Ie.split(".")).filter(Ie=>Ie.length<=me.length).map(Ie=>Array(me.length-Ie.length).fill(Ie[0]==="*"?"*":"").concat(Ie)).some(Ie=>me.every((ze,ke)=>Ie[ke]===ze||Ie[ke]==="*"))}function O(X){const le=X[0].toUpperCase()+X.slice(1),me=X==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${le} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${me} ${X} license of CKEditor 5${X==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(C=="GPL"){x=="cloud"&&k("distributionChannel");return}const J=S(C);if(!J){k("invalid");return}const F=M0(J);if(!F){k("invalid");return}if(!I(F)){k("invalid");return}if(F.distributionChannel&&!bn(F.distributionChannel).includes(x)){k("distributionChannel");return}if(XH(P(F))!=F.vc.toLowerCase()){k("invalid");return}if(new Date(F.exp*1e3)<rH){k("expired");return}const U=F.licensedHosts;if(U&&U.length>0&&!L(U)){k("domainLimit");return}if(["evaluation","trial"].includes(F.licenseType)&&F.exp*1e3<Date.now()){k("expired");return}if(["development","evaluation","trial"].includes(F.licenseType)){const{licenseType:X}=F;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[X]||(O(X),window.CKEDITOR_WARNING_SUPPRESSIONS[X]=!0)}if(["evaluation","trial"].includes(F.licenseType)){const X=F.licenseType,le=setTimeout(()=>{k(`${X}Limit`)},6e5);v.on("destroy",()=>{clearTimeout(le)})}F.usageEndpoint&&v.once("ready",()=>{const X={requestId:si(),requestTime:Math.round(Date.now()/1e3),license:C,editor:xj(v)};v._sendUsageRequest(F.usageEndpoint,X).then(le=>{const{status:me,message:Ie}=le;Ie&&console.warn(Ie),me!="ok"&&k("usageLimit")},()=>{sH("license-key-validation-endpoint-not-reachable",{url:F.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new N("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new N("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new N("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,n=e.get("plugins"),s=e.get("removePlugins")||[],o=e.get("extraPlugins")||[],r=e.get("substitutePlugins")||[];return this.plugins.init(n.concat(o),s,r)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(n=>this.once("ready",n))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...n){try{return this.commands.execute(e,...n)}catch(s){/* istanbul ignore next -- @preserve */N.rethrowUnexpectedError(s,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}_showLicenseError(e,n){setTimeout(()=>{if(e=="invalid")throw new N("invalid-license-key");if(e=="expired")throw new N("license-key-expired");if(e=="domainLimit")throw new N("license-key-domain-limit");if(e=="featureNotAllowed")throw new N("license-key-plugin-not-allowed",null,{pluginName:n});if(e=="evaluationLimit")throw new N("license-key-evaluation-limit");if(e=="trialLimit")throw new N("license-key-trial-limit");if(e=="developmentLimit")throw new N("license-key-development-limit");if(e=="usageLimit")throw new N("license-key-usage-limit");if(e=="distributionChannel")throw new N("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,n){const s=new Headers({"Content-Type":"application/json"}),o=await fetch(new URL(e),{method:"POST",headers:s,body:JSON.stringify(n)});if(!o.ok)throw new Error(`HTTP Response: ${o.status}`);return o.json()}},w(pa,"defaultConfig"),w(pa,"builtinPlugins"),w(pa,"Context",Ig),w(pa,"EditorWatchdog",AV),w(pa,"ContextWatchdog",dj),pa);function xj(i){const t=pj(i);function e(n,s){if(Ir(t,n)!==void 0)throw new N("editor-usage-data-path-already-set",{path:n});r5(t,n,s)}return i.fire("collectUsageData",{setUsageData:e}),t}function kj(i){if(!Cg(i.updateSourceElement))throw new N("attachtoform-missing-elementapi-interface",i);const t=i.sourceElement;if(Ej(t)&&t.form){let e;const n=t.form,s=()=>i.updateSourceElement();Cg(n.submit)&&(e=n.submit,n.submit=()=>{s(),e.apply(n)}),n.addEventListener("submit",s),i.on("destroy",()=>{n.removeEventListener("submit",s),e&&(n.submit=e)})}}function Ej(i){return!!i&&i.tagName.toLowerCase()==="textarea"}function nv(i){class t extends i{constructor(){super(...arguments);w(this,"sourceElement")}updateSourceElement(s){if(!this.sourceElement)throw new N("editor-missing-sourceelement",this);const o=this.config.get("updateSourceElementOnDestroy"),r=this.sourceElement instanceof HTMLTextAreaElement;if(!o&&!r){kS(this.sourceElement,"");return}const a=typeof s=="string"?s:this.data.get();kS(this.sourceElement,a)}}return t}nv.updateSourceElement=nv(Object).prototype.updateSourceElement;class Pg extends IV{constructor(){super(...arguments);w(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new En({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new N("pendingactions-add-invalid-message",this);const n=new(wt());return n.set("message",e),this._actions.add(n),this.hasAny=!0,n}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Sj=class extends wt(){constructor(){super();w(this,"total");w(this,"_reader");w(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=n=>{this.loaded=n.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const n=this._reader;return this.total=e.size,new Promise((s,o)=>{n.onload=()=>{const r=n.result;this._data=r,s(r)},n.onerror=()=>{o("error")},n.onabort=()=>{o("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}};class Tr extends te{constructor(){super(...arguments);w(this,"loaders",new En);w(this,"_loadersMap",new Map);w(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[Pg]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,n)=>n?e/n*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Ze("filerepository-no-upload-adapter"),null;const n=new TA(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(n),this._loadersMap.set(e,n),e instanceof Promise&&n.file.then(s=>{this._loadersMap.set(s,n)}).catch(()=>{}),n.on("change:uploaded",()=>{let s=0;for(const o of this.loaders)s+=o.uploaded;this.uploaded=s}),n.on("change:uploadTotal",()=>{let s=0;for(const o of this.loaders)o.uploadTotal&&(s+=o.uploadTotal);this.uploadTotal=s}),n}destroyLoader(e){const n=e instanceof TA?e:this.getLoader(e);n._destroy(),this.loaders.remove(n),this._loadersMap.forEach((s,o)=>{s===n&&this._loadersMap.delete(o)})}_updatePendingAction(){const e=this.editor.plugins.get(Pg);if(this.loaders.length){if(!this._pendingAction){const n=this.editor.t,s=o=>`${n("Upload in progress")} ${parseInt(o)}%.`;this._pendingAction=e.add(s(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",s)}}else e.remove(this._pendingAction),this._pendingAction=null}}class TA extends wt(){constructor(e,n){super();w(this,"id");w(this,"_filePromiseWrapper");w(this,"_adapter");w(this,"_reader");this.id=si(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=n(this),this._reader=new Sj,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(s,o)=>o?s/o*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new N("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new N("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const n={};return n.promise=new Promise((s,o)=>{n.rejecter=o,n.isFulfilled=!1,e.then(r=>{n.isFulfilled=!0,s(r)}).catch(r=>{n.isFulfilled=!0,o(r)})}),n}}class Aj extends te{static get requires(){return[Tr]}static get pluginName(){return"Base64UploadAdapter"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(Tr).createUploadAdapter=t=>new Rj(t)}}let Rj=class{constructor(t){w(this,"loader");w(this,"reader");this.loader=t}upload(){return new Promise((t,e)=>{const n=this.reader=new window.FileReader;n.addEventListener("load",()=>{t({default:n.result})}),n.addEventListener("error",s=>{e(s)}),n.addEventListener("abort",()=>{e()}),this.loader.file.then(s=>{n.readAsDataURL(s)})})}abort(){this.reader.abort()}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var xA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',Ij='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',PV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',MV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',j0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Pj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',VV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',Mj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',NV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',Rh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',OV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Pp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Vj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',Nj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',Oj='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',Dj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',Mp='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',Lj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>',Bj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Fj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',Uj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',kA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',EA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',zj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',Hj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',Wj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',qj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',SA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Gj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',DV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',$j='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',jj='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',Kj='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>',LV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',Mg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',Zj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',K0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',Vg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',BV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',FV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',UV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',Yj='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',Jj='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',Xj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',Qj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',eK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',AA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',tK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',nK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',iK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',sK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',ja='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',oK=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,RA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',rK='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',aK='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',lK=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`,cK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>',uK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',dK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',hK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>',fK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',IA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',mK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',gK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',Z0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',pK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',PA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',bK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',Wy,MA;function zV(){return MA||(MA=1,Wy={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Wy}var wK=zV();const VA=ap(wK);var NA={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function OA(i){var t,e=[],n=1,s;if(typeof i=="string")if(VA[i])e=VA[i].slice(),s="rgb";else if(i==="transparent")n=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),r=o.length,a=r<=4;n=1,a?(e=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],r===4&&(n=parseInt(o[3]+o[3],16)/255)):(e=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],r===8&&(n=parseInt(o[6]+o[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var l=t[1],u=l==="rgb",o=l.replace(/a$/,"");s=o;var r=o==="cmyk"?4:o==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(p,v){if(/%$/.test(p))return v===r?parseFloat(p)/100:o==="rgb"?parseFloat(p)*255/100:parseFloat(p);if(o[v]==="h"){if(/deg$/.test(p))return parseFloat(p);if(NA[p]!==void 0)return NA[p]}return parseFloat(p)}),l===o&&e.push(1),n=u||e[r]===void 0?1:e[r],e=e.slice(0,r)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(e=i.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else isNaN(i)?Array.isArray(i)||i.length?(e=[i[0],i[1],i[2]],s="rgb",n=i.length===4?i[3]:1):i instanceof Object&&(i.r!=null||i.red!=null||i.R!=null?(s="rgb",e=[i.r||i.red||i.R||0,i.g||i.green||i.G||0,i.b||i.blue||i.B||0]):(s="hsl",e=[i.h||i.hue||i.H||0,i.s||i.saturation||i.S||0,i.l||i.lightness||i.L||i.b||i.brightness]),n=i.a||i.alpha||i.opacity||1,i.opacity!=null&&(n/=100)):(s="rgb",e=[i>>>16,(i&65280)>>>8,i&255]);return{space:s,values:e,alpha:n}}var qy,DA;function HV(){if(DA)return qy;DA=1;const i=zV(),t={};for(const s of Object.keys(i))t[i[s]]=s;const e={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};qy=e;for(const s of Object.keys(e)){if(!("channels"in e[s]))throw new Error("missing channels property: "+s);if(!("labels"in e[s]))throw new Error("missing channel labels property: "+s);if(e[s].labels.length!==e[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:o,labels:r}=e[s];delete e[s].channels,delete e[s].labels,Object.defineProperty(e[s],"channels",{value:o}),Object.defineProperty(e[s],"labels",{value:r})}e.rgb.hsl=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.min(o,r,a),u=Math.max(o,r,a),h=u-l;let m,p;u===l?m=0:o===u?m=(r-a)/h:r===u?m=2+(a-o)/h:a===u&&(m=4+(o-r)/h),m=Math.min(m*60,360),m<0&&(m+=360);const v=(l+u)/2;return u===l?p=0:v<=.5?p=h/(u+l):p=h/(2-u-l),[m,p*100,v*100]},e.rgb.hsv=function(s){let o,r,a,l,u;const h=s[0]/255,m=s[1]/255,p=s[2]/255,v=Math.max(h,m,p),C=v-Math.min(h,m,p),x=function(k){return(v-k)/6/C+1/2};return C===0?(l=0,u=0):(u=C/v,o=x(h),r=x(m),a=x(p),h===v?l=a-r:m===v?l=1/3+o-a:p===v&&(l=2/3+r-o),l<0?l+=1:l>1&&(l-=1)),[l*360,u*100,v*100]},e.rgb.hwb=function(s){const o=s[0],r=s[1];let a=s[2];const l=e.rgb.hsl(s)[0],u=1/255*Math.min(o,Math.min(r,a));return a=1-1/255*Math.max(o,Math.max(r,a)),[l,u*100,a*100]},e.rgb.cmyk=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.min(1-o,1-r,1-a),u=(1-o-l)/(1-l)||0,h=(1-r-l)/(1-l)||0,m=(1-a-l)/(1-l)||0;return[u*100,h*100,m*100,l*100]};function n(s,o){return(s[0]-o[0])**2+(s[1]-o[1])**2+(s[2]-o[2])**2}return e.rgb.keyword=function(s){const o=t[s];if(o)return o;let r=1/0,a;for(const l of Object.keys(i)){const u=i[l],h=n(s,u);h<r&&(r=h,a=l)}return a},e.keyword.rgb=function(s){return i[s]},e.rgb.xyz=function(s){let o=s[0]/255,r=s[1]/255,a=s[2]/255;o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92;const l=o*.4124+r*.3576+a*.1805,u=o*.2126+r*.7152+a*.0722,h=o*.0193+r*.1192+a*.9505;return[l*100,u*100,h*100]},e.rgb.lab=function(s){const o=e.rgb.xyz(s);let r=o[0],a=o[1],l=o[2];r/=95.047,a/=100,l/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const u=116*a-16,h=500*(r-a),m=200*(a-l);return[u,h,m]},e.hsl.rgb=function(s){const o=s[0]/360,r=s[1]/100,a=s[2]/100;let l,u,h;if(r===0)return h=a*255,[h,h,h];a<.5?l=a*(1+r):l=a+r-a*r;const m=2*a-l,p=[0,0,0];for(let v=0;v<3;v++)u=o+1/3*-(v-1),u<0&&u++,u>1&&u--,6*u<1?h=m+(l-m)*6*u:2*u<1?h=l:3*u<2?h=m+(l-m)*(2/3-u)*6:h=m,p[v]=h*255;return p},e.hsl.hsv=function(s){const o=s[0];let r=s[1]/100,a=s[2]/100,l=r;const u=Math.max(a,.01);a*=2,r*=a<=1?a:2-a,l*=u<=1?u:2-u;const h=(a+r)/2,m=a===0?2*l/(u+l):2*r/(a+r);return[o,m*100,h*100]},e.hsv.rgb=function(s){const o=s[0]/60,r=s[1]/100;let a=s[2]/100;const l=Math.floor(o)%6,u=o-Math.floor(o),h=255*a*(1-r),m=255*a*(1-r*u),p=255*a*(1-r*(1-u));switch(a*=255,l){case 0:return[a,p,h];case 1:return[m,a,h];case 2:return[h,a,p];case 3:return[h,m,a];case 4:return[p,h,a];case 5:return[a,h,m]}},e.hsv.hsl=function(s){const o=s[0],r=s[1]/100,a=s[2]/100,l=Math.max(a,.01);let u,h;h=(2-r)*a;const m=(2-r)*l;return u=r*l,u/=m<=1?m:2-m,u=u||0,h/=2,[o,u*100,h*100]},e.hwb.rgb=function(s){const o=s[0]/360;let r=s[1]/100,a=s[2]/100;const l=r+a;let u;l>1&&(r/=l,a/=l);const h=Math.floor(6*o),m=1-a;u=6*o-h,(h&1)!==0&&(u=1-u);const p=r+u*(m-r);let v,C,x;switch(h){default:case 6:case 0:v=m,C=p,x=r;break;case 1:v=p,C=m,x=r;break;case 2:v=r,C=m,x=p;break;case 3:v=r,C=p,x=m;break;case 4:v=p,C=r,x=m;break;case 5:v=m,C=r,x=p;break}return[v*255,C*255,x*255]},e.cmyk.rgb=function(s){const o=s[0]/100,r=s[1]/100,a=s[2]/100,l=s[3]/100,u=1-Math.min(1,o*(1-l)+l),h=1-Math.min(1,r*(1-l)+l),m=1-Math.min(1,a*(1-l)+l);return[u*255,h*255,m*255]},e.xyz.rgb=function(s){const o=s[0]/100,r=s[1]/100,a=s[2]/100;let l,u,h;return l=o*3.2406+r*-1.5372+a*-.4986,u=o*-.9689+r*1.8758+a*.0415,h=o*.0557+r*-.204+a*1.057,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),h=Math.min(Math.max(0,h),1),[l*255,u*255,h*255]},e.xyz.lab=function(s){let o=s[0],r=s[1],a=s[2];o/=95.047,r/=100,a/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const l=116*r-16,u=500*(o-r),h=200*(r-a);return[l,u,h]},e.lab.xyz=function(s){const o=s[0],r=s[1],a=s[2];let l,u,h;u=(o+16)/116,l=r/500+u,h=u-a/200;const m=u**3,p=l**3,v=h**3;return u=m>.008856?m:(u-16/116)/7.787,l=p>.008856?p:(l-16/116)/7.787,h=v>.008856?v:(h-16/116)/7.787,l*=95.047,u*=100,h*=108.883,[l,u,h]},e.lab.lch=function(s){const o=s[0],r=s[1],a=s[2];let l;l=Math.atan2(a,r)*360/2/Math.PI,l<0&&(l+=360);const h=Math.sqrt(r*r+a*a);return[o,h,l]},e.lch.lab=function(s){const o=s[0],r=s[1],l=s[2]/360*2*Math.PI,u=r*Math.cos(l),h=r*Math.sin(l);return[o,u,h]},e.rgb.ansi16=function(s,o=null){const[r,a,l]=s;let u=o===null?e.rgb.hsv(s)[2]:o;if(u=Math.round(u/50),u===0)return 30;let h=30+(Math.round(l/255)<<2|Math.round(a/255)<<1|Math.round(r/255));return u===2&&(h+=60),h},e.hsv.ansi16=function(s){return e.rgb.ansi16(e.hsv.rgb(s),s[2])},e.rgb.ansi256=function(s){const o=s[0],r=s[1],a=s[2];return o===r&&r===a?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(r/255*5)+Math.round(a/255*5)},e.ansi16.rgb=function(s){let o=s%10;if(o===0||o===7)return s>50&&(o+=3.5),o=o/10.5*255,[o,o,o];const r=(~~(s>50)+1)*.5,a=(o&1)*r*255,l=(o>>1&1)*r*255,u=(o>>2&1)*r*255;return[a,l,u]},e.ansi256.rgb=function(s){if(s>=232){const u=(s-232)*10+8;return[u,u,u]}s-=16;let o;const r=Math.floor(s/36)/5*255,a=Math.floor((o=s%36)/6)/5*255,l=o%6/5*255;return[r,a,l]},e.rgb.hex=function(s){const r=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r},e.hex.rgb=function(s){const o=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!o)return[0,0,0];let r=o[0];o[0].length===3&&(r=r.split("").map(m=>m+m).join(""));const a=parseInt(r,16),l=a>>16&255,u=a>>8&255,h=a&255;return[l,u,h]},e.rgb.hcg=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.max(Math.max(o,r),a),u=Math.min(Math.min(o,r),a),h=l-u;let m,p;return h<1?m=u/(1-h):m=0,h<=0?p=0:l===o?p=(r-a)/h%6:l===r?p=2+(a-o)/h:p=4+(o-r)/h,p/=6,p%=1,[p*360,h*100,m*100]},e.hsl.hcg=function(s){const o=s[1]/100,r=s[2]/100,a=r<.5?2*o*r:2*o*(1-r);let l=0;return a<1&&(l=(r-.5*a)/(1-a)),[s[0],a*100,l*100]},e.hsv.hcg=function(s){const o=s[1]/100,r=s[2]/100,a=o*r;let l=0;return a<1&&(l=(r-a)/(1-a)),[s[0],a*100,l*100]},e.hcg.rgb=function(s){const o=s[0]/360,r=s[1]/100,a=s[2]/100;if(r===0)return[a*255,a*255,a*255];const l=[0,0,0],u=o%1*6,h=u%1,m=1-h;let p=0;switch(Math.floor(u)){case 0:l[0]=1,l[1]=h,l[2]=0;break;case 1:l[0]=m,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=h;break;case 3:l[0]=0,l[1]=m,l[2]=1;break;case 4:l[0]=h,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=m}return p=(1-r)*a,[(r*l[0]+p)*255,(r*l[1]+p)*255,(r*l[2]+p)*255]},e.hcg.hsv=function(s){const o=s[1]/100,r=s[2]/100,a=o+r*(1-o);let l=0;return a>0&&(l=o/a),[s[0],l*100,a*100]},e.hcg.hsl=function(s){const o=s[1]/100,a=s[2]/100*(1-o)+.5*o;let l=0;return a>0&&a<.5?l=o/(2*a):a>=.5&&a<1&&(l=o/(2*(1-a))),[s[0],l*100,a*100]},e.hcg.hwb=function(s){const o=s[1]/100,r=s[2]/100,a=o+r*(1-o);return[s[0],(a-o)*100,(1-a)*100]},e.hwb.hcg=function(s){const o=s[1]/100,a=1-s[2]/100,l=a-o;let u=0;return l<1&&(u=(a-l)/(1-l)),[s[0],l*100,u*100]},e.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]},e.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]},e.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]},e.gray.hsl=function(s){return[0,0,s[0]]},e.gray.hsv=e.gray.hsl,e.gray.hwb=function(s){return[0,100,s[0]]},e.gray.cmyk=function(s){return[0,0,0,s[0]]},e.gray.lab=function(s){return[s[0],0,0]},e.gray.hex=function(s){const o=Math.round(s[0]/100*255)&255,a=((o<<16)+(o<<8)+o).toString(16).toUpperCase();return"000000".substring(a.length)+a},e.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]},qy}var Gy,LA;function yK(){if(LA)return Gy;LA=1;const i=HV();function t(){const o={},r=Object.keys(i);for(let a=r.length,l=0;l<a;l++)o[r[l]]={distance:-1,parent:null};return o}function e(o){const r=t(),a=[o];for(r[o].distance=0;a.length;){const l=a.pop(),u=Object.keys(i[l]);for(let h=u.length,m=0;m<h;m++){const p=u[m],v=r[p];v.distance===-1&&(v.distance=r[l].distance+1,v.parent=l,a.unshift(p))}}return r}function n(o,r){return function(a){return r(o(a))}}function s(o,r){const a=[r[o].parent,o];let l=i[r[o].parent][o],u=r[o].parent;for(;r[u].parent;)a.unshift(r[u].parent),l=n(i[r[u].parent][u],l),u=r[u].parent;return l.conversion=a,l}return Gy=function(o){const r=e(o),a={},l=Object.keys(r);for(let u=l.length,h=0;h<u;h++){const m=l[h];r[m].parent!==null&&(a[m]=s(m,r))}return a},Gy}var $y,BA;function _K(){if(BA)return $y;BA=1;const i=HV(),t=yK(),e={},n=Object.keys(i);function s(r){const a=function(...l){const u=l[0];return u==null?u:(u.length>1&&(l=u),r(l))};return"conversion"in r&&(a.conversion=r.conversion),a}function o(r){const a=function(...l){const u=l[0];if(u==null)return u;u.length>1&&(l=u);const h=r(l);if(typeof h=="object")for(let m=h.length,p=0;p<m;p++)h[p]=Math.round(h[p]);return h};return"conversion"in r&&(a.conversion=r.conversion),a}return n.forEach(r=>{e[r]={},Object.defineProperty(e[r],"channels",{value:i[r].channels}),Object.defineProperty(e[r],"labels",{value:i[r].labels});const a=t(r);Object.keys(a).forEach(u=>{const h=a[u];e[r][u]=o(h),e[r][u].raw=s(h)})}),$y=e,$y}var WV=_K();const vK=ap(WV),qV=jB({__proto__:null,default:vK},[WV]),ih=(i,t=0,e=1)=>i>e?e:i<t?t:i,Nn=(i,t=0,e=Math.pow(10,t))=>Math.round(e*i)/e,CK=i=>SK(iv(i)),iv=i=>(i[0]==="#"&&(i=i.substring(1)),i.length<6?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Nn(parseInt(i[3]+i[3],16)/255,2):1}:{r:parseInt(i.substring(0,2),16),g:parseInt(i.substring(2,4),16),b:parseInt(i.substring(4,6),16),a:i.length===8?Nn(parseInt(i.substring(6,8),16)/255,2):1}),TK=i=>EK(kK(i)),xK=({h:i,s:t,v:e,a:n})=>{const s=(200-t)*e/100;return{h:Nn(i),s:Nn(s>0&&s<200?t*e/100/(s<=100?s:200-s)*100:0),l:Nn(s/2),a:Nn(n,2)}},sv=i=>{const{h:t,s:e,l:n}=xK(i);return`hsl(${t}, ${e}%, ${n}%)`},kK=({h:i,s:t,v:e,a:n})=>{i=i/360*6,t=t/100,e=e/100;const s=Math.floor(i),o=e*(1-t),r=e*(1-(i-s)*t),a=e*(1-(1-i+s)*t),l=s%6;return{r:Nn([e,r,o,o,a,e][l]*255),g:Nn([a,e,e,r,o,o][l]*255),b:Nn([o,o,a,e,e,r][l]*255),a:Nn(n,2)}},bm=i=>{const t=i.toString(16);return t.length<2?"0"+t:t},EK=({r:i,g:t,b:e,a:n})=>{const s=n<1?bm(Nn(n*255)):"";return"#"+bm(i)+bm(t)+bm(e)+s},SK=({r:i,g:t,b:e,a:n})=>{const s=Math.max(i,t,e),o=s-Math.min(i,t,e),r=o?s===i?(t-e)/o:s===t?2+(e-i)/o:4+(i-t)/o:0;return{h:Nn(60*(r<0?r+6:r)),s:Nn(s?o/s*100:0),v:Nn(s/255*100),a:n}},GV=(i,t)=>{if(i===t)return!0;for(const e in i)if(i[e]!==t[e])return!1;return!0},AK=(i,t)=>i.toLowerCase()===t.toLowerCase()?!0:GV(iv(i),iv(t)),FA={},$V=i=>{let t=FA[i];return t||(t=document.createElement("template"),t.innerHTML=i,FA[i]=t),t},Y0=(i,t,e)=>{i.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))};let bc=!1;const ov=i=>"touches"in i,RK=i=>bc&&!ov(i)?!1:(bc||(bc=ov(i)),!0),UA=(i,t)=>{const e=ov(t)?t.touches[0]:t,n=i.el.getBoundingClientRect();Y0(i.el,"move",i.getMove({x:ih((e.pageX-(n.left+window.pageXOffset))/n.width),y:ih((e.pageY-(n.top+window.pageYOffset))/n.height)}))},IK=(i,t)=>{const e=t.keyCode;e>40||i.xy&&e<37||e<33||(t.preventDefault(),Y0(i.el,"move",i.getMove({x:e===39?.01:e===37?-.01:e===34?.05:e===33?-.05:e===35?1:e===36?-1:0,y:e===40?.01:e===38?-.01:0},!0)))};class jV{constructor(t,e,n,s){const o=$V(`<div role="slider" tabindex="0" part="${e}" ${n}><div part="${e}-pointer"></div></div>`);t.appendChild(o.content.cloneNode(!0));const r=t.querySelector(`[part=${e}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=s,this.nodes=[r.firstChild,r]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(bc?"touchmove":"mousemove",this),e(bc?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!RK(t)||!bc&&t.button!=0)return;this.el.focus(),UA(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),UA(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":IK(this,t);break}}style(t){t.forEach((e,n)=>{for(const s in e)this.nodes[n].style.setProperty(s,e[s])})}}class PK extends jV{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:sv({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Nn(t)}`)}getMove(t,e){return{h:e?ih(this.h+t.x*360,0,360):360*t.x}}}class MK extends jV{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:sv(t)},{"background-color":sv({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Nn(t.s)}%, Brightness ${Nn(t.v)}%`)}getMove(t,e){return{s:e?ih(this.hsva.s+t.x*100,0,100):t.x*100,v:e?ih(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const VK=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',NK="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",OK="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",wm=Symbol("same"),jy=Symbol("color"),zA=Symbol("hsva"),Ky=Symbol("update"),HA=Symbol("parts"),WA=Symbol("css"),qA=Symbol("sliders");class DK extends HTMLElement{static get observedAttributes(){return["color"]}get[WA](){return[VK,NK,OK]}get[qA](){return[MK,PK]}get color(){return this[jy]}set color(t){if(!this[wm](t)){const e=this.colorModel.toHsva(t);this[Ky](e),this[jy]=t}}constructor(){super();const t=$V(`<style>${this[WA].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[HA]=this[qA].map(n=>new n(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,n){const s=this.colorModel.fromAttr(n);this[wm](s)||(this.color=s)}handleEvent(t){const e=this[zA],n={...e,...t.detail};this[Ky](n);let s;!GV(n,e)&&!this[wm](s=this.colorModel.fromHsva(n))&&(this[jy]=s,Y0(this,"color-changed",{value:s}))}[wm](t){return this.color&&this.colorModel.equal(t,this.color)}[Ky](t){this[zA]=t,this[HA].forEach(e=>e.update(t))}}const LK={defaultColor:"#000",toHsva:CK,fromHsva:({h:i,s:t,v:e})=>TK({h:i,s:t,v:e,a:1}),equal:AK,fromAttr:i=>i};class BK extends DK{get colorModel(){return LK}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Sn extends En{constructor(e=[]){super(e,{idProperty:"viewUid"});w(this,"_parentElement");this.on("add",(n,s,o)=>{this._renderViewIntoCollectionParent(s,o)}),this.on("remove",(n,s)=>{s.element&&this._parentElement&&s.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const n of this)this._renderViewIntoCollectionParent(n)}delegate(...e){if(!e.length||!FK(e))throw new N("ui-viewcollection-delegate-wrong-events",this);return{to:n=>{for(const s of this)for(const o of e)s.delegate(o).to(n);this.on("add",(s,o)=>{for(const r of e)o.delegate(r).to(n)}),this.on("remove",(s,o)=>{for(const r of e)o.stopDelegating(r,n)})}}}_renderViewIntoCollectionParent(e,n){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[n])}remove(e){return super.remove(e)}}function FK(i){return i.every(t=>typeof t=="string")}const UK="http://www.w3.org/1999/xhtml";class Ti extends Tt(){constructor(e){super();w(this,"ns");w(this,"tag");w(this,"text");w(this,"attributes");w(this,"children");w(this,"eventListeners");w(this,"_isRendered");w(this,"_revertData");Object.assign(this,$A(GA(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=ZA(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new N("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(n){if(n.children)for(const s of n.children)Ng(s)?yield s:J0(s)&&(yield*e(s))}yield*e(this)}static bind(e,n){return{to(s,o){return new zK({eventNameOrFunction:s,attribute:s,observable:e,emitter:n,callback:o})},if(s,o,r){return new KV({observable:e,emitter:n,attribute:s,valueIfTrue:o,callback:r})}}}static extend(e,n){if(e._isRendered)throw new N("template-extend-render",[this,e]);XV(e,$A(GA(n)))}_renderNode(e){let n;if(e.node?n=this.tag&&this.text:n=this.tag?this.text:!this.text,n)throw new N("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let n=e.node;return n||(n=e.node=document.createElementNS(this.ns||UK,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),n}_renderText(e){let n=e.node;return n?e.revertData.text=n.textContent:n=e.node=document.createTextNode(""),jm(this.text)?this._bindToObservable({schema:this.text,updater:WK(n),data:e}):n.textContent=this.text.join(""),n}_renderAttributes(e){if(!this.attributes)return;const n=e.node,s=e.revertData;for(const o in this.attributes){const r=n.getAttribute(o),a=this.attributes[o];s&&(s.attributes[o]=r);const l=KA(a)?a[0].ns:null;if(jm(a)){const u=KA(a)?a[0].value:a;s&&YA(o)&&u.unshift(r),this._bindToObservable({schema:u,updater:qK(n,o,l),data:e})}else if(o=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],e);else{s&&r&&YA(o)&&a.unshift(r);const u=a.map(h=>h&&(h.value||h)).reduce((h,m)=>h.concat(m),[]).reduce(JV,"");Tc(u)||n.setAttributeNS(l,o,u)}}}_renderStyleAttribute(e,n){const s=n.node;for(const o in e){const r=e[o];jm(r)?this._bindToObservable({schema:[r],updater:GK(s,o),data:n}):s.style[o]=r}}_renderElementChildren(e){const n=e.node,s=e.intoFragment?document.createDocumentFragment():n,o=e.isApplying;let r=0;for(const a of this.children)if(X0(a)){if(!o){a.setParent(n);for(const l of a)s.appendChild(l.element)}}else if(Ng(a))o||(a.isRendered||a.render(),s.appendChild(a.element));else if(Mr(a))s.appendChild(a);else if(o){const l=e.revertData,u=ZA();l.children.push(u),a._renderNode({intoFragment:!1,node:s.childNodes[r++],isApplying:!0,revertData:u})}else s.appendChild(a.render());e.intoFragment&&n.appendChild(s)}_setUpListeners(e){if(this.eventListeners)for(const n in this.eventListeners){const s=this.eventListeners[n].map(o=>{const[r,a]=n.split("@");return o.activateDomEventListener(r,a,e)});e.revertData&&e.revertData.bindings.push(s)}}_bindToObservable({schema:e,updater:n,data:s}){const o=s.revertData;ZV(e,n,s);const r=e.filter(a=>!Tc(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(e,n,s));o&&o.bindings.push(r)}_revertTemplateFromNode(e,n){for(const o of n.bindings)for(const r of o)r();if(n.text){e.textContent=n.text;return}const s=e;for(const o in n.attributes){const r=n.attributes[o];r===null?s.removeAttribute(o):s.setAttribute(o,r)}for(let o=0;o<n.children.length;++o)this._revertTemplateFromNode(s.childNodes[o],n.children[o])}}class Ih{constructor(t){w(this,"attribute");w(this,"observable");w(this,"emitter");w(this,"callback");this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const s=()=>ZV(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class zK extends Ih{constructor(e){super(e);w(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,n,s){const o=(r,a)=>{(!n||a.target.matches(n))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(s.node,e,o),()=>{this.emitter.stopListening(s.node,e,o)}}}class KV extends Ih{constructor(e){super(e);w(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){const n=super.getValue(e);return Tc(n)?!1:this.valueIfTrue||!0}}function jm(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some(jm):i instanceof Ih):!1}function HK(i,t){return i.map(e=>e instanceof Ih?e.getValue(t):e)}function ZV(i,t,{node:e}){const n=HK(i,e);let s;i.length==1&&i[0]instanceof KV?s=n[0]:s=n.reduce(JV,""),Tc(s)?t.remove():t.set(s)}function WK(i){return{set(t){i.textContent=t},remove(){i.textContent=""}}}function qK(i,t,e){return{set(n){i.setAttributeNS(e,t,n)},remove(){i.removeAttributeNS(e,t)}}}function GK(i,t){return{set(e){i.style[t]=e},remove(){i.style[t]=null}}}function GA(i){return Tp(i,e=>{if(e&&(e instanceof Ih||J0(e)||Ng(e)||X0(e)))return e})}function $A(i){if(typeof i=="string"?i=KK(i):i.text&&ZK(i),i.on&&(i.eventListeners=jK(i.on),delete i.on),!i.text){i.attributes&&$K(i.attributes);const t=[];if(i.children)if(X0(i.children))t.push(i.children);else for(const e of i.children)J0(e)||Ng(e)||Mr(e)?t.push(e):t.push(new Ti(e));i.children=t}return i}function $K(i){for(const t in i)i[t].value&&(i[t].value=bn(i[t].value)),YV(i,t)}function jK(i){for(const t in i)YV(i,t);return i}function KK(i){return{text:[i]}}function ZK(i){i.text=bn(i.text)}function YV(i,t){i[t]=bn(i[t])}function JV(i,t){return Tc(t)?i:Tc(i)?t:`${i} ${t}`}function jA(i,t){for(const e in t)i[e]?i[e].push(...t[e]):i[e]=t[e]}function XV(i,t){if(t.attributes&&(i.attributes||(i.attributes={}),jA(i.attributes,t.attributes)),t.eventListeners&&(i.eventListeners||(i.eventListeners={}),jA(i.eventListeners,t.eventListeners)),t.text&&i.text.push(...t.text),t.children&&t.children.length){if(i.children.length!=t.children.length)throw new N("ui-template-extend-children-mismatch",i);let e=0;for(const n of t.children)XV(i.children[e++],n)}}function Tc(i){return!i&&i!==0}function Ng(i){return i instanceof fe}function J0(i){return i instanceof Ti}function X0(i){return i instanceof Sn}function KA(i){return is(i[0])&&i[0].ns}function ZA(){return{children:[],bindings:[],attributes:{}}}function YA(i){return i=="class"||i=="style"}class fe extends Yn(wt()){constructor(e){super();w(this,"element");w(this,"isRendered");w(this,"locale");w(this,"t");w(this,"template");w(this,"_viewCollections");w(this,"_unboundChildren");w(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new En,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(n,s)=>{s.locale=e,s.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ti.bind(this,this)}createCollection(e){const n=new Sn(e);return this._viewCollections.add(n),n}registerChild(e){Li(e)||(e=[e]);for(const n of e)this._unboundChildren.add(n)}deregisterChild(e){Li(e)||(e=[e]);for(const n of e)this._unboundChildren.remove(n)}setTemplate(e){this.template=new Ti(e)}extendTemplate(e){Ti.extend(this.template,e)}render(){if(this.isRendered)throw new N("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Uo({emitter:i,activator:t,callback:e,contextElements:n,listenerOptions:s}){i.listenTo(document,"mousedown",(o,r)=>{if(!t())return;const a=typeof r.composedPath=="function"?r.composedPath():[],l=typeof n=="function"?n():n;for(const u of l)if(u.contains(r.target)||a.includes(u))return;e()},s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function sh(i){class t extends i{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...n){super(...n),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zr({view:i}){i.listenTo(i.element,"submit",(t,e)=>{e.preventDefault(),i.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Q0({keystrokeHandler:i,focusTracker:t,gridItems:e,numberOfColumns:n,uiLanguageDirection:s}){const o=typeof n=="number"?()=>n:n;i.set("arrowright",r((u,h)=>s==="rtl"?l(u,h.length):a(u,h.length))),i.set("arrowleft",r((u,h)=>s==="rtl"?a(u,h.length):l(u,h.length))),i.set("arrowup",r((u,h)=>{let m=u-o();return m<0&&(m=u+o()*Math.floor(h.length/o()),m>h.length-1&&(m-=o())),m})),i.set("arrowdown",r((u,h)=>{let m=u+o();return m>h.length-1&&(m=u%o()),m}));function r(u){return h=>{const m=e.find(C=>C.element===t.focusedElement),p=e.getIndex(m),v=u(p,e);e.get(v).focus(),h.stopPropagation(),h.preventDefault()}}function a(u,h){return u===h-1?0:u+1}function l(u,h){return u===0?h-1:u-1}}const np=class np extends fe{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!e)throw new N("ui-iconview-invalid-svg",this);const n=e.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:s,value:o}of Array.from(e.attributes))np.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}};w(np,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let os=np;class QV extends fe{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class xe extends fe{constructor(e,n=new QV){super(e);w(this,"children");w(this,"labelView");w(this,"iconView");w(this,"keystrokeView");w(this,"_focusDelayed",null);const s=this.bindTemplate,o=si();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${o}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(n),this.iconView=new os,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const r={tag:"button",attributes:{class:["ck","ck-button",s.to("class"),s.if("isEnabled","ck-disabled",a=>!a),s.if("isVisible","ck-hidden",a=>!a),s.to("isOn",a=>a?"ck-on":"ck-off"),s.if("withText","ck-button_with-text"),s.if("withKeystroke","ck-button_with-keystroke")],role:s.to("role"),type:s.to("type",a=>a||"button"),tabindex:s.to("tabindex"),"aria-checked":s.to("_ariaChecked"),"aria-pressed":s.to("_ariaPressed"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy"),"aria-disabled":s.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":s.to("_tooltipString"),"data-cke-tooltip-position":s.to("tooltipPosition")},children:this.children,on:{click:s.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,u)=>!l||JA(u)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,u)=>!l||!JA(u)?!1:String(!!a)),Se.isSafari&&(this._focusDelayed||(this._focusDelayed=P0(()=>this.focus(),0)),r.on.mousedown=s.to(()=>{this._focusDelayed()}),r.on.mouseup=s.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(r)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(e,n,s,o)=>{s&&!o?this.children.add(this.iconView,0):!s&&o&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new fe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",n=>kg(n))}]}),e}_getTooltipString(e,n,s){return e?typeof e=="string"?e:(s&&(s=kg(s)),e instanceof Function?e(n,s):`${n}${s?` (${s})`:""}`):""}}function JA(i){switch(i){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class zo extends fe{constructor(e,n={}){super(e);w(this,"children");w(this,"iconView");const s=this.bindTemplate;this.set("label",n.label||""),this.set("class",n.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",s.to("class")]},children:this.children}),n.icon&&(this.iconView=new os,this.iconView.content=n.icon,this.children.add(this.iconView));const o=new fe(e);o.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:s.to("label")}]}),this.children.add(o)}}class cn extends Tt(){constructor(e){super();w(this,"focusables");w(this,"focusTracker");w(this,"keystrokeHandler");w(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const n in e.actions){let s=e.actions[n];typeof s=="string"&&(s=[s]);for(const o of s)e.keystrokeHandler.set(o,(r,a)=>{this[n](),a()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Zy)||null}get last(){return this.focusables.filter(Zy).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((n,s)=>{const o=n.element===this.focusTracker.focusedElement;return o&&(e=s),o}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const n=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",s=>{const o=n();this.focusNext(),o!==n()&&s.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",s=>{const o=n();this.focusPrevious(),o!==n()&&s.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,n){e&&this.focusTracker.focusedElement!==e.element&&e.focus(n)}_getDomFocusableItem(e){const n=this.focusables.length;if(!n)return null;const s=this.current;if(s===null)return this[e===1?"first":"last"];let o=this.focusables.get(s),r=(s+n+e)%n;do{const a=this.focusables.get(r);if(Zy(a)){o=a;break}r=(r+n+e)%n}while(r!==s);return o}}function Zy(i){return Oc(i)&&Vo(i.element)}function Oc(i){return"focus"in i&&typeof i.focus=="function"}function eN(i){return Oc(i)&&"focusCycler"in i&&i.focusCycler instanceof cn}function YK(i){class t extends i{constructor(...s){super(...s);w(this,"_onDragBound",this._onDrag.bind(this));w(this,"_onDragEndBound",this._onDragEnd.bind(this));w(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(he.document,"mouseup",this._onDragEndBound),this.listenTo(he.document,"touchend",this._onDragEndBound),this.listenTo(he.document,"mousemove",this._onDragBound),this.listenTo(he.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(he.document,"mouseup",this._onDragEndBound),this.stopListening(he.document,"touchend",this._onDragEndBound),this.stopListening(he.document,"mousemove",this._onDragBound),this.stopListening(he.document,"touchmove",this._onDragBound)}_onDragStart(s,o){if(!this._isHandleElementPressed(o))return;this._attachDragListeners();let r=0,a=0;o instanceof MouseEvent?(r=o.clientX,a=o.clientY):(r=o.touches[0].clientX,a=o.touches[0].clientY),this._lastDraggingCoordinates={x:r,y:a},this.isDragging=!0}_onDrag(s,o){if(!this.isDragging){this._detachDragListeners();return}let r=0,a=0;o instanceof MouseEvent?(r=o.clientX,a=o.clientY):(r=o.touches[0].clientX,a=o.touches[0].clientY),o.preventDefault(),this.fire("drag",{deltaX:Math.round(r-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:r,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(s){return this.dragHandleElement?this.dragHandleElement===s.target||s.target instanceof HTMLElement&&this.dragHandleElement.contains(s.target):!1}}return t}class JK extends fe{constructor(e){super(e);w(this,"children");w(this,"keystrokes");w(this,"focusCycler");w(this,"_focusTracker");w(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new Ot,this._focusTracker=new yt,this._focusables=new Sn,this.focusCycler=new cn({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const n of e){const s=new xe(this.locale);let o;s.on("execute",()=>n.onExecute()),n.onCreate&&n.onCreate(s);for(o in n)o!="onExecute"&&o!="onCreate"&&s.set(o,n[o]);this.children.add(s)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class XK extends fe{constructor(e){super(e);w(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const ms={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},XA=Nc("px"),ip=class ip extends YK(fe){constructor(e,{getCurrentDomRoot:n,getViewportOffset:s,keystrokeHandlerOptions:o}){super(e);w(this,"parts");w(this,"headerView");w(this,"closeButtonView");w(this,"actionsView");w(this,"contentView");w(this,"keystrokes");w(this,"focusTracker");w(this,"wasMoved",!1);w(this,"_getCurrentDomRoot");w(this,"_getViewportOffset");w(this,"_focusables");w(this,"_focusCycler");const r=this.bindTemplate,a=e.t;this.set("className",""),this.set("ariaLabel",a("Editor dialog")),this.set("isModal",!1),this.set("position",ms.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=n,this._getViewportOffset=s,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Ot,this.focusTracker=new yt,this._focusables=new Sn,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",l=>!l),r.if("_isVisible","ck-hidden",l=>!l)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.if("isModal","ck-dialog_modal"),r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",l=>XA(l)),left:r.to("_left",l=>XA(l)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,n)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),n())}),this.on("drag",(e,{deltaX:n,deltaY:s})=>{this.wasMoved=!0,this.moveBy(n,s)}),this.listenTo(he.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(he.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,n,s)=>{s&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:n,hasCloseButton:s=!0,content:o,actionButtons:r}){n&&(this.headerView=new zo(this.locale,{icon:e}),s&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=n,this.ariaLabel=n,this.parts.add(this.headerView,0)),o&&(o instanceof fe&&(o=[o]),this.contentView=new XK(this.locale),this.contentView.children.addMany(o),this.parts.add(this.contentView)),r&&(this.actionsView=new JK(this.locale),this.actionsView.setButtons(r),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,n){const s=this._getViewportRect(),o=this._getDialogRect();e+o.width>s.right&&(e=s.right-o.width),e<s.left&&(e=s.left),n<s.top&&(n=s.top),this._moveTo(e,n)}_moveTo(e,n){this._left=e,this._top=n}moveBy(e,n){this.moveTo(this._left+e,this._top+n)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let n=this.position,s;this._getCurrentDomRoot()?s=this._getVisibleDomRootRect(e):n=ms.SCREEN_CENTER;const o=ip.defaultOffset,r=this._getDialogRect();switch(n){case ms.EDITOR_TOP_SIDE:{if(s){const a=this.locale.contentLanguageDirection==="ltr"?s.right-r.width-o:s.left+o;this.moveTo(a,s.top+o)}else this._moveOffScreen();break}case ms.EDITOR_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),Math.round(s.top+s.height/2-r.height/2)):this._moveOffScreen();break}case ms.SCREEN_CENTER:{this.moveTo(Math.round((e.width-r.width)/2),Math.round((e.height-r.height)/2));break}case ms.EDITOR_TOP_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.top+o):this._moveOffScreen();break}case ms.EDITOR_BOTTOM_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.bottom-r.height-o):this._moveOffScreen();break}case ms.EDITOR_ABOVE_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.top-r.height-o):this._moveOffScreen();break}case ms.EDITOR_BELOW_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.bottom+o):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let n=new Pe(this._getCurrentDomRoot()).getVisible();if(n){if(n=e.getIntersection(n),!n)return null}else return null;return n}_getDialogRect(){return new Pe(this.element.firstElementChild)}_getViewportRect(){const e=new Pe(he.window);if(this.isModal)return e;const n={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e.left+=n.left,e.right-=n.right,e.width-=n.left+n.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const n of this.contentView.children)Oc(n)&&e.push(n);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element),eN(n)&&this._focusCycler.chain(n.focusCycler)})}_createCloseButton(){const e=new xe(this.locale),n=this.locale.t;return e.set({label:n("Close"),tooltip:!0,icon:Rh}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};w(ip,"defaultOffset",15);let oh=ip;const gs=class gs extends te{constructor(e){super(e);w(this,"view");w(this,"_onHide");const n=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:n("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),gs._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,n)=>{this._show(n)}),this.on("show",(e,n)=>{n.onShow&&n.onShow(this)},{priority:"low"}),this.on("hide",()=>{gs._visibleDialogPlugin&&gs._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(n,s)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),s())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const n=e.document.differ.getChangedRoots();for(const s of n)s.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:n,title:s,hasCloseButton:o=!0,content:r,actionButtons:a,className:l,isModal:u,position:h,onHide:m,keystrokeHandlerOptions:p}){const v=this.editor;this.view=new oh(v.locale,{getCurrentDomRoot:()=>v.editing.view.getDomRoot(v.model.document.selection.anchor.root.rootName),getViewportOffset:()=>v.ui.viewportOffset,keystrokeHandlerOptions:p});const C=this.view;C.on("close",()=>{this.hide()}),v.ui.view.body.add(C),v.keystrokes.listenTo(C.element),h||(h=u?ms.SCREEN_CENTER:ms.EDITOR_CENTER),u&&this._lockBodyScroll(),C.set({position:h,_isVisible:!0,className:l,isModal:u}),C.setupParts({icon:n,title:s,hasCloseButton:o,content:r,actionButtons:a}),this.id=e,m&&(this._onHide=m),this.isOpen=!0,gs._visibleDialogPlugin=this}hide(){gs._visibleDialogPlugin&&gs._visibleDialogPlugin.fire(`hide:${gs._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,n=this.view;n.isModal&&this._unlockBodyScroll(),n.contentView&&n.contentView.reset(),e.ui.view.body.remove(n),e.ui.focusTracker.remove(n.element),e.keystrokes.stopListening(n.element),n.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,gs._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};w(gs,"_visibleDialogPlugin");let xc=gs;class Dc extends xe{constructor(e,n=new QV){super(e,n);w(this,"_checkIconHolderView",new QK);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",s.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(o,r)=>o||r)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,n,s)=>{const{children:o,_checkIconHolderView:r}=this;s?o.add(r,0):o.remove(r)})}}class QK extends fe{constructor(){super();w(this,"children");w(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",n=>n?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,n,s)=>{const{children:o,_checkIconView:r}=this;s&&!o.has(r)?o.add(r):!s&&o.has(r)&&o.remove(r)})}_createCheckIconView(){const e=new os;return e.content=Pp,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class Jn extends Dc{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class Qi extends fe{constructor(e){super(e);w(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${si()}`;const n=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:n.to("for")},children:[{text:n.to("text")}]})}}class eZ extends fe{constructor(t,e){super(t);const n=t.t,s=new Qi;s.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[ps(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),s]})}focus(){this.element.focus()}_createCategories(t){return t.map(e=>{const n=[ps(document,"h3",{},e.label),...Array.from(e.groups.values()).map(s=>this._createGroup(s)).flat()];return e.description&&n.splice(1,0,ps(document,"p",{},e.description)),ps(document,"section",{},n)})}_createGroup(t){const e=t.keystrokes.sort((s,o)=>s.label.localeCompare(o.label)).map(s=>this._createGroupRow(s)).flat(),n=[ps(document,"dl",{},e)];return t.label&&n.unshift(ps(document,"h4",{},t.label)),n}_createGroupRow(t){const e=this.locale.t,n=ps(document,"dt"),s=ps(document,"dd"),o=nZ(t.keystroke),r=[];for(const a of o)r.push(a.map(tZ).join(""));return n.innerHTML=t.label,s.innerHTML=r.join(", ")+(t.mayRequireFn&&Se.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[n,s]}}function tZ(i){return kg(i).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}function nZ(i){return typeof i=="string"?[[i]]:typeof i[0]=="string"?[i]:i}class iZ extends te{constructor(){super(...arguments);w(this,"contentView",null)}static get requires(){return[xc]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const s=this._createButton(xe);return s.set({tooltip:!0,withText:!1,label:n("Accessibility help")}),s}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const s=this._createButton(Jn);return s.label=n("Accessibility"),s}),e.keystrokes.set("Alt+0",(s,o)=>{this._toggleDialog(),o()}),this._setupRootLabels()}_createButton(e){const n=this.editor,s=n.plugins.get("Dialog"),o=n.locale,r=new e(o);return r.set({keystroke:"Alt+0",icon:xA,isToggleable:!0}),r.on("execute",()=>this._toggleDialog()),r.bind("isOn").to(s,"id",a=>a==="accessibilityHelp"),r}_setupRootLabels(){const e=this.editor,n=e.editing.view,s=e.t;e.ui.on("ready",()=>{n.change(r=>{for(const a of n.document.roots)o(r,a)}),e.on("addRoot",(r,a)=>{const l=e.editing.view.document.getRoot(a.rootName);n.change(u=>o(u,l))},{priority:"low"})});function o(r,a){const u=[a.getAttribute("aria-label"),s("Press %0 for help.",[kg("Alt+0")])].filter(h=>h).join(". ");r.setAttribute("aria-label",u,a)}}_toggleDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.locale.t;this.contentView||(this.contentView=new eZ(e.locale,e.accessibility.keystrokeInfos)),n.id==="accessibilityHelp"?n.hide():n.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:s("Accessibility help"),icon:xA,hasCloseButton:!0,content:this.contentView})}}const Ji=class Ji extends Sn{constructor(e,n=[]){super(n);w(this,"locale");w(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Ti({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Ji._bodyWrapper||!Ji._bodyWrapper.isConnected)&&(Ji._bodyWrapper=ps(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Ji._bodyWrapper)),Ji._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Ji._bodyWrapper&&!Ji._bodyWrapper.childElementCount&&(Ji._bodyWrapper.remove(),delete Ji._bodyWrapper)}};w(Ji,"_bodyWrapper");let rv=Ji;class Vp extends xe{constructor(e){super(e);w(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new fe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class QA extends tN(xe){}class sZ extends tN(Dc){}function tN(i){class t extends i{constructor(...s){super(...s);w(this,"buttonView");w(this,"_fileInputView");this.buttonView=this,this._fileInputView=new oZ(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return t}class oZ extends fe{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{var n,s;(s=(n=this.element)==null?void 0:n.files)!=null&&s.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class rZ extends fe{constructor(e,n){super(e);w(this,"buttonView");w(this,"children");const s=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),n&&this.children.addMany(n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",s.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:s.if("isCollapsed","hidden"),"aria-labelledby":s.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new xe(this.locale),n=e.bindTemplate;return e.set({withText:!0,icon:Mp}),e.extendTemplate({attributes:{"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",s=>!s),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rh(i,t){const e=i.t,n={Black:e("Black"),"Dim grey":e("Dim grey"),Grey:e("Grey"),"Light grey":e("Light grey"),White:e("White"),Red:e("Red"),Orange:e("Orange"),Yellow:e("Yellow"),"Light green":e("Light green"),Green:e("Green"),Aquamarine:e("Aquamarine"),Turquoise:e("Turquoise"),"Light blue":e("Light blue"),Blue:e("Blue"),Purple:e("Purple")};return t.map(s=>{const o=n[s.label];return o&&o!=s.label&&(s.label=o),s})}function ah(i){return i.map(aZ).filter(t=>!!t)}function aZ(i){return typeof i=="string"?{model:i,label:i,hasBorder:!1,view:{name:"span",styles:{color:i}}}:{model:i.color,label:i.label||i.color,hasBorder:i.hasBorder===void 0?!1:i.hasBorder,view:{name:"span",styles:{color:`${i.color}`}}}}class nN extends xe{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=Nj,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",n=>Se.isMediaForcedColors?null:n)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class e2 extends fe{constructor(e,n){super(e);w(this,"columns");w(this,"items");w(this,"focusTracker");w(this,"keystrokes");const s=n&&n.colorDefinitions?n.colorDefinitions:[];this.columns=(n==null?void 0:n.columns)||5;const o={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new yt,this.keystrokes=new Ot,this.items.on("add",(r,a)=>{a.isOn=a.color===this.selectedColor}),s.forEach(r=>{const a=new nN;a.set({color:r.color,label:r.label,tooltip:!0,hasBorder:r.options.hasBorder}),a.on("execute",()=>{this.fire("execute",{value:r.color,hasBorder:r.options.hasBorder,label:r.label})}),this.items.add(a)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:o}}),this.on("change:selectedColor",(r,a,l)=>{for(const u of this.items)u.isOn=u.color===l})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){var e;super.render();for(const n of this.items)this.focusTracker.add(n.element);this.items.on("add",(n,s)=>{this.focusTracker.add(s.element)}),this.items.on("remove",(n,s)=>{this.focusTracker.remove(s.element)}),this.keystrokes.listenTo(this.element),Q0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:(e=this.locale)==null?void 0:e.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function iN(i,t){if(!i)return"";const e=sN(i);if(!e)return"";if(e.space===t)return i;if(!dZ(e))return"";const s=qV[e.space][t];if(!s)return"";const o=s(e.space==="hex"?e.hexValue:e.values);return uZ(o,t)}function lZ(i){if(!i)return"";const t=sN(i);return t?t.space==="hex"?t.hexValue:iN(i,"hex"):"#000"}function cZ(i,t){customElements.get(i)===void 0&&customElements.define(i,t)}function uZ(i,t){switch(t){case"hex":return`#${i}`;case"rgb":return`rgb(${i[0]}, ${i[1]}, ${i[2]})`;case"hsl":return`hsl(${i[0]}, ${i[1]}%, ${i[2]}%)`;case"hwb":return`hwb(${i[0]}, ${i[1]}, ${i[2]})`;case"lab":return`lab(${i[0]}% ${i[1]} ${i[2]})`;case"lch":return`lch(${i[0]}% ${i[1]} ${i[2]})`;default:return""}}function sN(i){if(i.startsWith("#")){const e=OA(i);return{space:"hex",values:e.values,hexValue:i,alpha:e.alpha}}const t=OA(i);return t.space?t:null}function dZ(i){return Object.keys(qV).includes(i.space)}class sn extends fe{constructor(e,n){super(e);w(this,"fieldView");w(this,"labelView");w(this,"statusView");w(this,"fieldWrapperChildren");const s=`ck-labeled-field-view-${si()}`,o=`ck-labeled-field-view-status-${si()}`;this.fieldView=n(this,s,o),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(s),this.statusView=this._createStatusView(o),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,l)=>a||l);const r=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",r.to("class"),r.if("isEnabled","ck-disabled",a=>!a),r.if("isEmpty","ck-labeled-field-view_empty"),r.if("isFocused","ck-labeled-field-view_focused"),r.if("placeholder","ck-labeled-field-view_placeholder"),r.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const n=new Qi(this.locale);return n.for=e,n.bind("text").to(this,"label"),n}_createStatusView(e){const n=new fe(this.locale),s=this.bindTemplate;return n.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",s.if("errorText","ck-labeled-field-view__status_error"),s.if("_statusText","ck-hidden",o=>!o)],id:e,role:s.if("errorText","alert")},children:[{text:s.to("_statusText")}]}),n}focus(e){this.fieldView.focus(e)}}class hZ extends fe{constructor(e){super(e);w(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new yt,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",n.if("isFocused","ck-input_focused"),n.if("isEmpty","ck-input-text_empty"),n.if("hasError","ck-error")],id:n.to("id"),placeholder:n.to("placeholder"),tabindex:n.to("tabIndex"),readonly:n.to("isReadOnly"),"aria-invalid":n.if("hasError",!0),"aria-describedby":n.to("ariaDescribedById"),"aria-label":n.to("ariaLabel")},on:{input:n.to((...s)=>{this.fire("input",...s),this._updateIsEmpty()}),change:n.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,n,s)=>{this._setDomElementValue(s),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=fZ(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function fZ(i){return!i.value}class oN extends hZ{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class rN extends oN{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class mZ extends oN{constructor(t,{min:e,max:n,step:s}={}){super(t);const o=this.bindTemplate;this.set("min",e),this.set("max",n),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}class gZ extends fe{constructor(e){super(e);w(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",n.to("position",s=>`ck-dropdown__panel_${s}`),n.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():Ze("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const hc=class hc extends fe{constructor(e,n,s){super(e);w(this,"buttonView");w(this,"panelView");w(this,"focusTracker");w(this,"keystrokes");w(this,"listView");w(this,"toolbarView");w(this,"menuView");const o=this.bindTemplate;this.buttonView=n,this.panelView=s,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ot,this.focusTracker=new yt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",o.to("class"),o.if("isEnabled","ck-disabled",r=>!r)],id:o.to("id"),"aria-describedby":o.to("ariaDescribedById")},children:[n,s]}),n.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":o.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(n,s,o)=>{if(o)if(this.panelPosition==="auto"){const r=hc._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(n,s)=>{this.isOpen&&(this.isOpen=!1,s())};this.keystrokes.set("arrowdown",(n,s)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,s())}),this.keystrokes.set("arrowright",(n,s)=>{this.isOpen&&s()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:n,southEast:s,southWest:o,northEast:r,northWest:a,southMiddleEast:l,southMiddleWest:u,northMiddleEast:h,northMiddleWest:m}=hc.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[s,o,l,u,e,r,a,h,m,n]:[o,s,u,l,e,a,r,m,h,n]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};w(hc,"defaultPanelPositions",{south:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,n)=>({top:e.bottom,left:e.left-n.width+e.width,name:"sw"}),southMiddleEast:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/4,name:"sme"}),southMiddleWest:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)*3/4,name:"smw"}),north:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/2,name:"n"}),northEast:(e,n)=>({top:e.top-n.height,left:e.left,name:"ne"}),northWest:(e,n)=>({top:e.top-n.height,left:e.left-n.width+e.width,name:"nw"}),northMiddleEast:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/4,name:"nme"}),northMiddleWest:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)*3/4,name:"nmw"})}),w(hc,"_getOptimalPosition",S0);let av=hc;class aN extends xe{constructor(e){super(e);w(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new os;return e.content=Mp,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class rs extends fe{constructor(e){super(e);w(this,"children");const n=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",n.if("isVisible","ck-hidden",s=>!s)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class e1 extends fe{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Km extends fe{constructor(e,n=new Qi){super(e);w(this,"labelView");w(this,"items");w(this,"children");const s=this.bindTemplate,o=new Ka(e);this.set({label:"",isVisible:!0}),this.labelView=n,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,o]),o.set({role:"group",ariaLabelledBy:n.id}),o.focusTracker.destroy(),o.keystrokes.destroy(),this.items=o.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",s.if("isVisible","ck-hidden",r=>!r)]},children:this.children})}focus(){if(this.items){const e=this.items.find(n=>!(n instanceof e1));e&&e.focus()}}}class Ka extends fe{constructor(e){super(e);w(this,"focusables");w(this,"items");w(this,"focusTracker");w(this,"keystrokes");w(this,"_focusCycler");w(this,"_listItemGroupToChangeListeners",new WeakMap);const n=this.bindTemplate;this.focusables=new Sn,this.items=this.createCollection(),this.focusTracker=new yt,this.keystrokes=new Ot,this._focusCycler=new cn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:n.to("role"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Km?this._registerFocusableItemsGroup(e):e instanceof rs&&this._registerFocusableListItem(e);this.items.on("change",(e,n)=>{for(const s of n.removed)s instanceof Km?this._deregisterFocusableItemsGroup(s):s instanceof rs&&this._deregisterFocusableListItem(s);for(const s of Array.from(n.added).reverse())s instanceof Km?this._registerFocusableItemsGroup(s,n.index):this._registerFocusableListItem(s,n.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,n){this.focusTracker.add(e.element),this.focusables.add(e,n)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(n,s)=>{for(const o of s.removed)this._deregisterFocusableListItem(o);for(const o of Array.from(s.added).reverse())this._registerFocusableListItem(o,this.items.getIndex(e)+s.index)}}_registerFocusableItemsGroup(e,n){Array.from(e.items).forEach((o,r)=>{const a=typeof n<"u"?n+r:void 0;this._registerFocusableListItem(o,a)});const s=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,s),e.items.on("change",s)}_deregisterFocusableItemsGroup(e){for(const n of e.items)this._deregisterFocusableListItem(n);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const t2=Nc("px"),pZ={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Mi=class Mi extends fe{constructor(e){super(e);w(this,"content");w(this,"_pinWhenIsVisibleCallback");w(this,"_resizeObserver");const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",n.to("position",s=>`ck-balloon-panel_${s}`),n.if("isVisible","ck-balloon-panel_visible"),n.if("withArrow","ck-balloon-panel_with-arrow"),n.to("class")],style:{top:n.to("top",t2),left:n.to("left",t2)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const n=Zm(e.target);if(n&&!Vo(n))return!1;this.show();const s=Mi.defaultPositions,o=Object.assign({},{element:this.element,positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth],limiter:he.document.body,fitInViewport:!0},e),r=Mi._getOptimalPosition(o)||pZ,a=parseInt(r.left),l=parseInt(r.top),u=r.name,h=r.config||{},{withArrow:m=!0}=h;return this.top=l,this.left=a,this.position=u,this.withArrow=m,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let n=Zm(e.target);const s=e.limiter?Zm(e.limiter):he.document.body;if(this.listenTo(he.document,"scroll",(o,r)=>{const a=r.target,l=n&&a.contains(n),u=s&&a.contains(s);(l||u||!n||!s)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(he.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(n&&Gt(n)&&(n=n.parentElement),n)){const o=()=>{Vo(n)||this.unpin()};this._resizeObserver=new E0(n,o)}return!0}_stopPinning(){this.stopListening(he.document,"scroll"),this.stopListening(he.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:n=Mi.arrowSideOffset,heightOffset:s=Mi.arrowHeightOffset,stickyVerticalOffset:o=Mi.stickyVerticalOffset,config:r}=e;return{northWestArrowSouthWest:(u,h)=>({top:a(u,h),left:u.left-n,name:"arrow_sw",...r&&{config:r}}),northWestArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.left-h.width*.25-n,name:"arrow_smw",...r&&{config:r}}),northWestArrowSouth:(u,h)=>({top:a(u,h),left:u.left-h.width/2,name:"arrow_s",...r&&{config:r}}),northWestArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.left-h.width*.75+n,name:"arrow_sme",...r&&{config:r}}),northWestArrowSouthEast:(u,h)=>({top:a(u,h),left:u.left-h.width+n,name:"arrow_se",...r&&{config:r}}),northArrowSouthWest:(u,h)=>({top:a(u,h),left:u.left+u.width/2-n,name:"arrow_sw",...r&&{config:r}}),northArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width*.25-n,name:"arrow_smw",...r&&{config:r}}),northArrowSouth:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width/2,name:"arrow_s",...r&&{config:r}}),northArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width*.75+n,name:"arrow_sme",...r&&{config:r}}),northArrowSouthEast:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width+n,name:"arrow_se",...r&&{config:r}}),northEastArrowSouthWest:(u,h)=>({top:a(u,h),left:u.right-n,name:"arrow_sw",...r&&{config:r}}),northEastArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.right-h.width*.25-n,name:"arrow_smw",...r&&{config:r}}),northEastArrowSouth:(u,h)=>({top:a(u,h),left:u.right-h.width/2,name:"arrow_s",...r&&{config:r}}),northEastArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.right-h.width*.75+n,name:"arrow_sme",...r&&{config:r}}),northEastArrowSouthEast:(u,h)=>({top:a(u,h),left:u.right-h.width+n,name:"arrow_se",...r&&{config:r}}),southWestArrowNorthWest:u=>({top:l(u),left:u.left-n,name:"arrow_nw",...r&&{config:r}}),southWestArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.left-h.width*.25-n,name:"arrow_nmw",...r&&{config:r}}),southWestArrowNorth:(u,h)=>({top:l(u),left:u.left-h.width/2,name:"arrow_n",...r&&{config:r}}),southWestArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.left-h.width*.75+n,name:"arrow_nme",...r&&{config:r}}),southWestArrowNorthEast:(u,h)=>({top:l(u),left:u.left-h.width+n,name:"arrow_ne",...r&&{config:r}}),southArrowNorthWest:u=>({top:l(u),left:u.left+u.width/2-n,name:"arrow_nw",...r&&{config:r}}),southArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width*.25-n,name:"arrow_nmw",...r&&{config:r}}),southArrowNorth:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width/2,name:"arrow_n",...r&&{config:r}}),southArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width*.75+n,name:"arrow_nme",...r&&{config:r}}),southArrowNorthEast:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width+n,name:"arrow_ne",...r&&{config:r}}),southEastArrowNorthWest:u=>({top:l(u),left:u.right-n,name:"arrow_nw",...r&&{config:r}}),southEastArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.right-h.width*.25-n,name:"arrow_nmw",...r&&{config:r}}),southEastArrowNorth:(u,h)=>({top:l(u),left:u.right-h.width/2,name:"arrow_n",...r&&{config:r}}),southEastArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.right-h.width*.75+n,name:"arrow_nme",...r&&{config:r}}),southEastArrowNorthEast:(u,h)=>({top:l(u),left:u.right-h.width+n,name:"arrow_ne",...r&&{config:r}}),westArrowEast:(u,h)=>({top:u.top+u.height/2-h.height/2,left:u.left-h.width-s,name:"arrow_e",...r&&{config:r}}),eastArrowWest:(u,h)=>({top:u.top+u.height/2-h.height/2,left:u.right+s,name:"arrow_w",...r&&{config:r}}),viewportStickyNorth:(u,h,m)=>{const p=new Pe(he.document.body).getIntersection(m.getVisible());if(!p)return null;const v=p.getVisible();return!u.getIntersection(v)||!(v.top-u.top-o<h.height&&v.bottom-u.bottom<h.height)?null:{top:v.top+o,left:u.left+u.width/2-h.width/2,name:"arrowless",config:{withArrow:!1,...r}}}};function a(u,h){return u.top-h.height-s}function l(u){return u.bottom+s}}};w(Mi,"arrowSideOffset",25),w(Mi,"arrowHeightOffset",10),w(Mi,"stickyVerticalOffset",20),w(Mi,"_getOptimalPosition",S0),w(Mi,"defaultPositions",Mi.generatePositions());let Qn=Mi;function Zm(i){return Pr(i)?i:xp(i)?i.commonAncestorContainer:typeof i=="function"?Zm(i()):null}class lN extends fe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class bZ extends fe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wZ(i){return i.bindTemplate.to(t=>{t.target===i.element&&t.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function cN(i){if(Array.isArray(i))return{items:i,removeItems:[]};const t={items:[],removeItems:[]};return i?{...t,...i}:t}const yZ={alignLeft:j0,bold:NV,importExport:qj,paragraph:tK,plus:sK,text:gK,threeVerticalDots:Z0,pilcrow:iK,dragIndicator:Dj};class Da extends fe{constructor(e,n){super(e);w(this,"options");w(this,"items");w(this,"focusTracker");w(this,"keystrokes");w(this,"itemsView");w(this,"children");w(this,"focusables");w(this,"_focusCycler");w(this,"_behavior");const s=this.bindTemplate,o=this.t;this.options=n||{},this.set("ariaLabel",o("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new yt,this.keystrokes=new Ot,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new _Z(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const r=e.uiLanguageDirection==="rtl";this._focusCycler=new cn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[r?"arrowright":"arrowleft","arrowup"],focusNext:[r?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",s.to("class"),s.if("isCompact","ck-toolbar_compact"),s.if("isGrouping","ck-toolbar_grouping"),s.if("isVertical","ck-toolbar_vertical")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:s.to("role"),"aria-label":s.to("ariaLabel"),style:{maxWidth:s.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:wZ(this)}}),this._behavior=this.options.shouldGroupWhenFull?new i2(this):new n2(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,n)=>{this.focusTracker.add(n)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,n,s){this.items.addMany(this._buildItemsFromConfig(e,n,s))}switchBehavior(e){this._behavior.type!==e&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),e==="dynamic"?(this._behavior=new i2(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new n2(this),this._behavior.render(this)))}_buildItemsFromConfig(e,n,s){const o=cN(e),r=s||o.removeItems;return this._cleanItemsConfiguration(o.items,n,r).map(l=>is(l)?this._createNestedToolbarDropdown(l,n,r):l==="|"?new lN:l==="-"?new bZ:n.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,n,s){const o=e.filter((r,a,l)=>r==="|"?!0:s.indexOf(r)!==-1?!1:r==="-"?this.options.shouldGroupWhenFull?(Ze("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!is(r)&&!n.has(r)?(Ze("toolbarview-item-unavailable",{item:r}),!1):!0);return this._cleanSeparatorsAndLineBreaks(o)}_cleanSeparatorsAndLineBreaks(e){const n=a=>a!=="-"&&a!=="|",s=e.length,o=e.findIndex(n);if(o===-1)return[];const r=s-e.slice().reverse().findIndex(n);return e.slice(o,r).filter((a,l,u)=>n(a)?!0:!(l>0&&u[l-1]===a))}_createNestedToolbarDropdown(e,n,s){let{label:o,icon:r,items:a,tooltip:l=!0,withText:u=!1}=e;if(a=this._cleanItemsConfiguration(a,n,s),!a.length)return null;const h=this.locale,m=ii(h);return o||Ze("toolbarview-nested-toolbar-dropdown-missing-label",e),m.class="ck-toolbar__nested-toolbar-dropdown",m.buttonView.set({label:o,tooltip:l,withText:!!u}),r!==!1?m.buttonView.icon=yZ[r]||r||Z0:m.buttonView.withText=!0,Op(m,()=>m.toolbarView._buildItemsFromConfig(a,n,s)),m}}class _Z extends fe{constructor(e){super(e);w(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class n2{constructor(t){w(this,"type","static");t.isGrouping=!1,t.itemsView.children.bindTo(t.items).using(e=>e),t.focusables.bindTo(t.items).using(e=>Oc(e)?e:null)}render(){}destroy(){}}class i2{constructor(t){w(this,"type","dynamic");w(this,"view");w(this,"viewChildren");w(this,"viewFocusables");w(this,"viewItemsView");w(this,"viewFocusTracker");w(this,"viewLocale");w(this,"ungroupedItems");w(this,"groupedItems");w(this,"groupedItemsDropdown");w(this,"resizeObserver",null);w(this,"cachedPadding",null);w(this,"shouldUpdateGroupingOnNextResize",!1);w(this,"viewElement");this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.view.isGrouping=!0,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(e,n)=>{const s=n.index,o=Array.from(n.added);for(const r of n.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=s;r<s+o.length;r++){const a=o[r-s];r>this.ungroupedItems.length?this.groupedItems.add(a,r-this.ungroupedItems.length):this.ungroupedItems.add(a,r)}this._updateGrouping()})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const t=this.view;if(t.items.length){for(let e=0;e<t.items.length;e++){const n=[...t.items][e];this.ungroupedItems.add(n,e)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Vo(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new Pe(t.lastChild),s=new Pe(t);if(!this.cachedPadding){const o=he.window.getComputedStyle(t),r=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[r])}return e==="ltr"?n.right>s.right-this.cachedPadding:n.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new E0(this.viewElement,e=>{(!t||t!==e.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new lN),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=ii(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=t.uiLanguageDirection==="ltr"?"sw":"se",Op(n,this.groupedItems),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:t.uiLanguageDirection==="rtl"?"se":"sw",icon:Z0}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{Oc(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class Np extends fe{constructor(e,n){super(e);w(this,"children");w(this,"actionView");w(this,"arrowView");w(this,"keystrokes");w(this,"focusTracker");const s=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(n),this.arrowView=this._createArrowView(),this.keystrokes=new Ot,this.focusTracker=new yt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",s.to("class"),s.if("isVisible","ck-hidden",o=>!o),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,n)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),n())}),this.keystrokes.set("arrowleft",(e,n)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),n())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const n=e||new xe;return e||n.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),n.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),n.delegate("execute").to(this),n}_createArrowView(){const e=new xe,n=e.bindTemplate;return e.icon=Mp,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":n.to("isOn"),"aria-haspopup":!0,"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function ii(i,t=aN){const e=typeof t=="function"?new t(i):t,n=new gZ(i),s=new av(i,e,n);return e.bind("isEnabled").to(s),e instanceof Np?e.arrowView.bind("isOn").to(s,"isOpen"):e.bind("isOn").to(s,"isOpen"),vZ(s),s}function Op(i,t,e={}){i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.isOpen?s2(i,t,e):i.once("change:isOpen",()=>s2(i,t,e),{priority:"highest"}),e.enableActiveItemFocusOnDropdownOpen&&t1(i,()=>i.toolbarView.items.find(n=>n.isOn))}function s2(i,t,e){const n=i.locale,s=n.t,o=i.toolbarView=new Da(n),r=typeof t=="function"?t():t;o.ariaLabel=e.ariaLabel||s("Dropdown toolbar"),e.maxWidth&&(o.maxWidth=e.maxWidth),e.class&&(o.class=e.class),e.isCompact&&(o.isCompact=e.isCompact),e.isVertical&&(o.isVertical=!0),r instanceof Sn?o.items.bindTo(r).using(a=>a):o.items.addMany(r),i.panelView.children.add(o),i.focusTracker.add(o),o.items.delegate("execute").to(i)}function Za(i,t,e={}){i.isOpen?o2(i,t,e):i.once("change:isOpen",()=>o2(i,t,e),{priority:"highest"}),t1(i,()=>i.listView.items.find(n=>n instanceof rs?n.children.first.isOn:!1))}function o2(i,t,e){const n=i.locale,s=i.listView=new Ka(n),o=typeof t=="function"?t():t;s.ariaLabel=e.ariaLabel,s.role=e.role,dN(i,s.items,o,n),i.panelView.children.add(s),s.items.delegate("execute").to(i)}function t1(i,t){i.on("change:isOpen",()=>{if(!i.isOpen)return;const e=t();e&&(typeof e.focus=="function"?e.focus():Ze("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:Aa.low-10})}function vZ(i){CZ(i),TZ(i),xZ(i),kZ(i),EZ(i),SZ(i)}function CZ(i){Uo({emitter:i,activator:()=>i.isRendered&&i.isOpen,callback:()=>{i.isOpen=!1},contextElements:()=>[i.element,...uN(i.focusTracker).filter(t=>!i.element.contains(t))]})}function uN(i){return[...i.elements,...i.externalViews.flatMap(t=>uN(t.focusTracker))]}function TZ(i){i.on("execute",t=>{t.source instanceof Vp||(i.isOpen=!1)})}function xZ(i){i.focusTracker.on("change:isFocused",(t,e,n)=>{n||!i.isOpen||(i.isOpen=!1)})}function kZ(i){i.keystrokes.set("arrowdown",(t,e)=>{i.isOpen&&(i.panelView.focus(),e())}),i.keystrokes.set("arrowup",(t,e)=>{i.isOpen&&(i.panelView.focusLast(),e())})}function EZ(i){i.on("change:isOpen",(t,e,n)=>{if(n)return;i.focusTracker.elements.some(o=>o.contains(he.document.activeElement))&&i.buttonView.focus()})}function SZ(i){i.on("change:isOpen",(t,e,n)=>{n&&i.panelView.focus()},{priority:"low"})}function dN(i,t,e,n){AZ(t),t.bindTo(e).using(s=>{if(s.type==="separator")return new e1(n);if(s.type==="group"){const o=new Km(n);return o.set({label:s.label}),dN(i,o.items,s.items,n),o.items.delegate("execute").to(i),o}else if(s.type==="button"||s.type==="switchbutton"){const o=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",r=new rs(n);let a;return s.type==="button"?(a=new Dc(n),a.set({isToggleable:o})):a=new Vp(n),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(r),r.children.add(a),r}return null})}function AZ(i){let t=0;const e=o=>!(o instanceof rs)||!(o.children.first instanceof Dc)?null:o.children.first,n=o=>{const r=e(o);return!r||!r.isToggleable?null:r},s=o=>{for(const r of i){const a=e(r);a&&(a.hasCheckSpace=o)}};i.on("change",(o,r)=>{const a=t>0;for(const u of r.removed)n(u)&&t--;for(const u of r.added){const h=e(u);h&&(h.isToggleable&&t++,h.hasCheckSpace=t>0)}const l=t>0;a!==l&&s(l)})}const ti=(i,t,e)=>{const n=new rN(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},RZ=(i,t,e)=>{const n=new mZ(i.locale);return n.set({id:t,ariaDescribedById:e,inputMode:"numeric"}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},hN=(i,t,e)=>{const n=ii(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isEnabled").to(i),n},IZ=150;class PZ extends fe{constructor(e,n={}){super(e);w(this,"hexInputRow");w(this,"_debounceColorPickerEvent");w(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const s=this.createCollection();n.hideInput||s.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:s}),this._config=n,this._debounceColorPickerEvent=ss(o=>{this.set("color",o),this.fire("colorSelected",{color:this.color})},IZ,{leading:!0}),this.on("set:color",(o,r,a)=>{o.return=iN(a,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Yy(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Yy(this.color)!=Yy(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),cZ("hex-color-picker",BK),this.picker=he.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const n=e.detail.value;this._debounceColorPickerEvent(n)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Se.isGecko||Se.isiOS||Se.isSafari||Se.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const s=[...this.picker.shadowRoot.children].filter(o=>o.getAttribute("role")==="slider").map(o=>new MZ(o));this.slidersView=this.createCollection(),s.forEach(o=>{this.slidersView.add(o)})}_createInputRow(){const e=this._createColorInput();return new NZ(this.locale,e)}_createColorInput(){const e=new sn(this.locale,ti),{t:n}=this.locale;return e.set({label:n("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",s=>e.isFocused?e.fieldView.value:s.startsWith("#")?s.substring(1):s),e.fieldView.on("input",()=>{const s=e.fieldView.element.value;if(s){const o=fN(s);o&&this._debounceColorPickerEvent(o)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function Yy(i){let t=lZ(i);return t||(t="#000"),t.length===4&&(t="#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join("")),t.toLowerCase()}class MZ extends fe{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class VZ extends fe{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class NZ extends fe{constructor(e,n){super(e);w(this,"children");w(this,"inputView");this.inputView=n,this.children=this.createCollection([new VZ,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return fN(this.inputView.fieldView.element.value)}}function fN(i){if(!i)return null;const t=i.trim().replace(/^#/,"");return![3,4,6,8].includes(t.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(t)?null:`#${t}`}class OZ extends wt(En){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(t,e){return this.find(n=>n.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class DZ extends fe{constructor(e,{colors:n,columns:s,removeButtonLabel:o,documentColorsLabel:r,documentColorsCount:a,colorPickerLabel:l,focusTracker:u,focusables:h}){super(e);w(this,"items");w(this,"colorDefinitions");w(this,"focusTracker");w(this,"columns");w(this,"documentColors");w(this,"documentColorsCount");w(this,"staticColorsGrid");w(this,"documentColorsGrid");w(this,"colorPickerButtonView");w(this,"removeColorButtonView");w(this,"_focusables");w(this,"_documentColorsLabel");w(this,"_removeButtonLabel");w(this,"_colorPickerLabel");const m=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=u,this.items=this.createCollection(),this.colorDefinitions=n,this.columns=s,this.documentColors=new OZ,this.documentColorsCount=a,this._focusables=h,this._removeButtonLabel=o,this._colorPickerLabel=l,this._documentColorsLabel=r,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",m.if("isVisible","ck-hidden",p=>!p)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,n){const s=e.document,o=this.documentColorsCount;this.documentColors.clear();for(const r of s.getRoots()){const a=e.createRangeIn(r);for(const l of a.getItems())if(l.is("$textProxy")&&l.hasAttribute(n)&&(this._addColorToDocumentColors(l.getAttribute(n)),this.documentColors.length>=o))return}}updateSelectedColors(){const e=this.documentColorsGrid,n=this.staticColorsGrid,s=this.selectedColor;n.selectedColor=s,e&&(e.selectedColor=s)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Ti.bind(this.documentColors,this.documentColors),n=new fe(this.locale);n.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(n),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new xe,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:Vj,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new xe;return e.set({withText:!0,icon:Bj,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new e2(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(n,s)=>{this.fire("execute",{value:s.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Ti.bind(this.documentColors,this.documentColors),n=new e2(this.locale,{columns:this.columns});return n.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),n.items.bindTo(this.documentColors).using(s=>{var r;const o=new nN;return o.set({color:s.color,hasBorder:(r=s.options)==null?void 0:r.hasBorder}),s.label&&o.set({label:s.label,tooltip:!0}),o.on("execute",()=>{this.fire("execute",{value:s.color,source:"documentColorsGrid"})}),o}),this.documentColors.on("change:isEmpty",(s,o,r)=>{r&&(n.selectedColor=null)}),n}_addColorToDocumentColors(e){const n=this.colorDefinitions.find(s=>s.color===e);n?this.documentColors.add(Object.assign({},n)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class LZ extends fe{constructor(e,{focusTracker:n,focusables:s,keystrokes:o,colorPickerViewConfig:r}){super(e);w(this,"items");w(this,"colorPickerView");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"actionBarView");w(this,"focusTracker");w(this,"keystrokes");w(this,"_focusables");w(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=n,this.keystrokes=o,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=s,this._colorPickerViewConfig=r;const a=this.bindTemplate,{saveButtonView:l,cancelButtonView:u}=this._createActionButtons();this.saveButtonView=l,this.cancelButtonView=u,this.actionBarView=this._createActionBarView({saveButtonView:l,cancelButtonView:u}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",a.if("isVisible","ck-hidden",h=>!h)]},children:this.items})}render(){super.render();const e=new PZ(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(n,s,o)=>{e.color=o}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const n of this.colorPickerView.slidersView)this.focusTracker.add(n.element),this._focusables.add(n);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:n}){const s=new fe,o=this.createCollection();return o.add(e),o.add(n),s.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:o}),s}_createActionButtons(){const e=this.locale,n=e.t,s=new xe(e),o=new xe(e);return s.set({icon:Pp,class:"ck-button-save",type:"button",withText:!1,label:n("Accept")}),o.set({icon:Rh,class:"ck-button-cancel",type:"button",withText:!1,label:n("Cancel")}),s.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),o.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:s,cancelButtonView:o}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,n)=>{this.fire("execute",{value:n.color,source:"colorPicker"}),this.set("selectedColor",n.color)})}}class n1 extends fe{constructor(e,{colors:n,columns:s,removeButtonLabel:o,documentColorsLabel:r,documentColorsCount:a,colorPickerLabel:l,colorPickerViewConfig:u}){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"items");w(this,"colorGridsFragmentView");w(this,"colorPickerFragmentView");w(this,"_focusCycler");w(this,"_focusables");w(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new yt,this.keystrokes=new Ot,this._focusables=new Sn,this._colorPickerViewConfig=u,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new DZ(e,{colors:n,columns:s,removeButtonLabel:o,documentColorsLabel:r,documentColorsCount:a,colorPickerLabel:l,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new LZ(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:u}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(h,m,p)=>{this.colorGridsFragmentView.set("selectedColor",p),this.colorPickerFragmentView.set("selectedColor",p)}),this.colorGridsFragmentView.on("change:selectedColor",(h,m,p)=>{this.set("selectedColor",p)}),this.colorPickerFragmentView.on("change:selectedColor",(h,m,p)=>{this.set("selectedColor",p)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,n){this.colorGridsFragmentView.updateDocumentColors(e,n)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class BZ{constructor(t){w(this,"editor");w(this,"_components",new Map);this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(Jy(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new N("componentfactory-item-missing",this,{name:t});return this._components.get(Jy(t)).callback(this.editor.locale)}has(t){return this._components.has(Jy(t))}}function Jy(i){return String(i).toLowerCase()}const r2="ck-tooltip",Tn=class Tn extends Yn(){constructor(e){super();w(this,"tooltipTextView");w(this,"balloonPanelView");w(this,"_currentElementWithTooltip",null);w(this,"_currentTooltipPosition",null);w(this,"_mutationObserver",null);w(this,"_pinTooltipDebounced");w(this,"_unpinTooltipDebounced");w(this,"_watchdogExcluded");if(Tn._editors.add(e),Tn._instance)return Tn._instance;Tn._instance=this,this.tooltipTextView=new fe(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Qn(e.locale),this.balloonPanelView.class=r2,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=FZ(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=ss(this._pinTooltip,600),this._unpinTooltipDebounced=ss(this._unpinTooltip,400),this.listenTo(he.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(he.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(he.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(he.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(he.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(he.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const n=e.ui.view&&e.ui.view.body;Tn._editors.delete(e),this.stopListening(e.ui),n&&n.has(this.balloonPanelView)&&n.remove(this.balloonPanelView),Tn._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Tn._instance=null)}static getPositioningFunctions(e){const n=Tn.defaultBalloonPositions;return{s:[n.southArrowNorth,n.southArrowNorthEast,n.southArrowNorthWest],n:[n.northArrowSouth],e:[n.eastArrowWest],w:[n.westArrowEast],sw:[n.southArrowNorthEast],se:[n.southArrowNorthWest]}[e]}_onKeyDown(e,n){n.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),n.stopPropagation())}_onEnterOrFocus(e,{target:n}){const s=Xy(n);if(!s){e.name==="focus"&&this._unpinTooltip();return}if(s===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),e.name==="focus"&&!s.matches(":hover")||s.matches("[data-cke-tooltip-instant]")?this._pinTooltip(s,Qy(s)):this._pinTooltipDebounced(s,Qy(s))}_onLeaveOrBlur(e,{target:n,relatedTarget:s}){if(e.name==="mouseleave"){if(!Pr(n))return;const o=this.balloonPanelView.element,r=o&&(o===s||o.contains(s)),a=!r&&n===o;if(r){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;const l=Xy(n),u=Xy(s);(a||l&&l!==u)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||l&&l.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:n}){this._currentElementWithTooltip&&(n.contains(this.balloonPanelView.element)&&n.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:n,position:s,cssClass:o}){this._unpinTooltip();const r=Ln(Tn._editors.values()).ui.view.body;r.has(this.balloonPanelView)||r.add(this.balloonPanelView),this.tooltipTextView.text=n,this.balloonPanelView.class=[r2,o].filter(a=>a).join(" "),this.balloonPanelView.pin({target:e,positions:Tn.getPositioningFunctions(s)}),this._mutationObserver.attach(e);for(const a of Tn._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=s}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Tn._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=Qy(this._currentElementWithTooltip);if(!Vo(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Tn.getPositioningFunctions(e.position)})}};w(Tn,"defaultBalloonPositions",Qn.generatePositions({heightOffset:5,sideOffset:13})),w(Tn,"_editors",new Set),w(Tn,"_instance",null);let lv=Tn;function Xy(i){return Pr(i)?i.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function Qy(i){return{text:i.dataset.ckeTooltipText,position:i.dataset.ckeTooltipPosition||"s",cssClass:i.dataset.ckeTooltipClass||""}}function FZ(i){const t=new MutationObserver(()=>{i()});return{attach(e){t.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){t.disconnect()}}}const UZ=50,zZ=350;class mN extends Yn(){constructor(e,n={}){super();w(this,"editor");w(this,"_balloonView",null);w(this,"_showBalloonThrottled",vc(()=>this._showBalloon(),50,{leading:!0}));w(this,"_lastFocusedEditableElement",null);w(this,"_balloonClass");this.editor=e,this._balloonClass=n.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(n,s,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(n,s,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,n=new Qn,s=this._createBadgeContent();return n.content.add(s),this._balloonClass&&(n.class=this._balloonClass),e.ui.view.body.add(n),n}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),n=e.side==="right"?HZ(this._lastFocusedEditableElement,e):WZ(this._lastFocusedEditableElement,e);return{target:this._lastFocusedEditableElement,positions:[n]}}_updateLastFocusedEditableElement(){const e=this.editor,n=e.ui.focusTracker.isFocused,s=e.ui.focusTracker.focusedElement;if(!n||!s){this._lastFocusedEditableElement=null;return}const o=Array.from(e.ui.getEditableElementsNames()).map(r=>e.ui.getEditableElement(r));o.includes(s)?this._lastFocusedEditableElement=s:this._lastFocusedEditableElement=o[0]}}function HZ(i,t){return gN(i,t,(e,n)=>e.left+e.width-n.width-t.horizontalOffset)}function WZ(i,t){return gN(i,t,e=>e.left+t.horizontalOffset)}function gN(i,t,e){return(n,s)=>{const o=new Pe(i);if(o.width<zZ||o.height<UZ)return null;let r;t.position==="inside"?r=o.bottom-s.height:r=o.bottom-s.height/2,r-=t.verticalOffset;const a=e(o,s),u=n.clone().moveTo(a,r).getIntersection(s.clone().moveTo(a,r)).getVisible();return!u||u.getArea()<s.getArea()?null:{top:r,left:a,name:`position_${t.position}-side_${t.side}`,config:{withArrow:!1}}}}const qZ="Powered by";class GZ extends mN{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor;if(t.config.get("ui.poweredBy.forceVisible"))return!0;const n=t.config.get("licenseKey");if(n=="GPL")return!0;const s=M0(n.split(".")[1]);return s?!s.whiteLabel:!0}_createBadgeContent(){return new $Z(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},n=e.position||t.position,s=n==="inside"?5:t.verticalOffset;return{position:n,side:e.side||t.side,label:e.label===void 0?qZ:e.label,verticalOffset:e.verticalOffset!==void 0?e.verticalOffset:s,horizontalOffset:e.horizontalOffset!==void 0?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class $Z extends fe{constructor(t,e){super(t);const n=new os,s=this.bindTemplate;n.set({content:oK,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],n],on:{dragstart:s.to(o=>o.preventDefault())}}]})}}class jZ extends mN{constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"});w(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const n=this.editor.config.get("licenseKey"),s=a2(n);return!!(s&&this.licenseTypeMessage[s])}_createBadgeContent(){const e=this.editor.config.get("licenseKey"),n=a2(e);return new KZ(this.editor.locale,this.licenseTypeMessage[n])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),n=this.editor.config.get("ui.poweredBy")||{},s=n.position||e.position,o=n.side||e.side;return{position:s,side:o==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class KZ extends fe{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function a2(i){if(i=="GPL")return"GPL";const t=M0(i.split(".")[1]);return t?t.licenseType||"production":null}const l2={POLITE:"polite",ASSERTIVE:"assertive"};class ZZ{constructor(t){w(this,"editor");w(this,"view");this.editor=t,t.once("ready",()=>{for(const e of Object.values(l2))this.announce("",e)})}announce(t,e=l2.POLITE){const n=this.editor;if(!n.ui.view)return;this.view||(this.view=new YZ(n.locale),n.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:o}=typeof e=="string"?{politeness:e}:e;let r=this.view.regionViews.find(a=>a.politeness===s);r||(r=new JZ(n,s),this.view.regionViews.add(r)),r.announce({announcement:t,isUnsafeHTML:o})}}class YZ extends fe{constructor(e){super(e);w(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class JZ extends fe{constructor(e,n){super(e.locale);w(this,"politeness");w(this,"_domConverter");w(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":n,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=n,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:n}){if(!e.trim().length)return;const s=document.createElement("li");n?this._domConverter.setContentOf(s,e):s.innerText=e,this._listElement.appendChild(s)}get _listElement(){return this.element.querySelector("ul")}}class Lc extends rs{constructor(t,e){super(t);const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const ym=5,$l={toggleMenusAndFocusItemsOnHover(i){i.on("menu:mouseenter",t=>{if(!(!i.isFocusBorderEnabled&&!i.isOpen)){if(i.isOpen)for(const e of i.menus){const n=t.path[0],s=n instanceof Lc&&n.children.first===e;e.isOpen=(t.path.includes(e)||s)&&e.isEnabled}t.source.focus()}})},focusCycleMenusOnArrows(i){const t=i.locale.uiLanguageDirection==="rtl";i.on("menu:arrowright",n=>{e(n.source,t?-1:1)}),i.on("menu:arrowleft",n=>{e(n.source,t?1:-1)});function e(n,s){const o=i.children.getIndex(n),r=n.isOpen,a=i.children.length,l=i.children.get((o+a+s)%a);n.isOpen=!1,r&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(i){i.on("change:isOpen",()=>{i.isOpen||i.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(i){i.on("menu:change:isOpen",(t,e,n)=>{n&&i.menus.filter(s=>t.source.parentMenuView===s.parentMenuView&&t.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(i){Uo({emitter:i,activator:()=>i.isOpen,callback:()=>i.close(),contextElements:()=>i.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(i){let t=!1;i.on("change:isOpen",(e,n,s)=>{s||(t||(i.isFocusBorderEnabled=!1),t=!1)}),i.listenTo(i.element,"keydown",()=>{t=!0},{useCapture:!0}),i.listenTo(i.element,"keyup",()=>{t=!1},{useCapture:!0}),i.listenTo(i.element,"focus",()=>{t&&(i.isFocusBorderEnabled=!0)},{useCapture:!0})}},hr={openAndFocusPanelOnArrowDownKey(i){i.keystrokes.set("arrowdown",(t,e)=>{i.isEnabled&&i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen||(i.isOpen=!0),i.panelView.focus(),e())})},openOnArrowRightKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(t,(e,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!0})},toggleOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!i.isOpen})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(t,e)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),e())})},closeOnArrowLeftKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(t,(e,n)=>{i.isOpen&&(i.isOpen=!1,i.focus(),n())})},closeOnEscKey(i){i.keystrokes.set("esc",(t,e)=>{i.isOpen&&(i.isOpen=!1,i.focus(),e())})},closeOnParentClose(i){i.parentMenuView.on("change:isOpen",(t,e,n)=>{!n&&t.source===i.parentMenuView&&(i.isOpen=!1)})}},XZ={southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,t)=>({top:i.bottom,left:i.left-t.width+i.width,name:"sw"}),northEast:(i,t)=>({top:i.top-t.height,left:i.left,name:"ne"}),northWest:(i,t)=>({top:i.top-t.height,left:i.left-t.width+i.width,name:"nw"}),eastSouth:i=>({top:i.top,left:i.right-ym,name:"es"}),eastNorth:(i,t)=>({top:i.top-t.height,left:i.right-ym,name:"en"}),westSouth:(i,t)=>({top:i.top,left:i.left-t.width+ym,name:"ws"}),westNorth:(i,t)=>({top:i.top-t.height,left:i.left-t.width+ym,name:"wn"})},QZ=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function eY(i){let t;return!("items"in i)||!i.items?t={items:Di(QZ),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...i}:t={items:i.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...i},t}function tY({normalizedConfig:i,locale:t,componentFactory:e,extraItems:n}){const s=Di(i);return c2(i,s,n),nY(i,s),c2(i,s,s.addItems),iY(i,s,e),pN(i,s),sY(s,t),s}function nY(i,t){const e=t.removeItems,n=[];t.items=t.items.filter(({menuId:s})=>e.includes(s)?(n.push(s),!1):!0),Bc(t.items,s=>{s.groups=s.groups.filter(({groupId:o})=>e.includes(o)?(n.push(o),!1):!0);for(const o of s.groups)o.items=o.items.filter(r=>{const a=bN(r);return e.includes(a)?(n.push(a),!1):!0})});for(const s of e)n.includes(s)||Ze("menu-bar-item-could-not-be-removed",{menuBarConfig:i,itemName:s})}function c2(i,t,e){const n=[];if(e.length!=0){for(const s of e){const o=aY(s.position),r=lY(s.position);if(oY(s))if(!r)o==="start"?(t.items.unshift(s.menu),n.push(s)):o==="end"&&(t.items.push(s.menu),n.push(s));else{const a=t.items.findIndex(l=>l.menuId===r);a!=-1?o==="before"?(t.items.splice(a,0,s.menu),n.push(s)):o==="after"&&(t.items.splice(a+1,0,s.menu),n.push(s)):u2(t,s.menu,r,o)&&n.push(s)}else rY(s)?Bc(t.items,a=>{if(a.menuId===r)o==="start"?(a.groups.unshift(s.group),n.push(s)):o==="end"&&(a.groups.push(s.group),n.push(s));else{const l=a.groups.findIndex(u=>u.groupId===r);l!==-1&&(o==="before"?(a.groups.splice(l,0,s.group),n.push(s)):o==="after"&&(a.groups.splice(l+1,0,s.group),n.push(s)))}}):u2(t,s.item,r,o)&&n.push(s)}for(const s of e)n.includes(s)||Ze("menu-bar-item-could-not-be-added",{menuBarConfig:i,addedItemConfig:s})}}function u2(i,t,e,n){let s=!1;return Bc(i.items,o=>{for(const{groupId:r,items:a}of o.groups){if(s)return;if(r===e)n==="start"?(a.unshift(t),s=!0):n==="end"&&(a.push(t),s=!0);else{const l=a.findIndex(u=>bN(u)===e);l!==-1&&(n==="before"?(a.splice(l,0,t),s=!0):n==="after"&&(a.splice(l+1,0,t),s=!0))}}}),s}function iY(i,t,e){Bc(t.items,n=>{for(const s of n.groups)s.items=s.items.filter(o=>{const r=typeof o=="string"&&!e.has(o);return r&&!t.isUsingDefaultConfig&&Ze("menu-bar-item-unavailable",{menuBarConfig:i,parentMenuConfig:Di(n),componentName:o}),!r})})}function pN(i,t){const e=t.isUsingDefaultConfig;let n=!1;if(t.items=t.items.filter(s=>s.groups.length?!0:(e_(i,s,e),!1)),!t.items.length){e_(i,i,e);return}Bc(t.items,s=>{s.groups=s.groups.filter(o=>o.items.length?!0:(n=!0,!1));for(const o of s.groups)o.items=o.items.filter(r=>wN(r)&&!r.groups.length?(e_(i,r,e),n=!0,!1):!0)}),n&&pN(i,t)}function e_(i,t,e){e||Ze("menu-bar-menu-empty",{menuBarConfig:i,emptyMenuConfig:t})}function sY(i,t){const e=t.t,n={File:e({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:e({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:e({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:e({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:e({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:e({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:e({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:e({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:e({string:"Font",id:"MENU_BAR_MENU_FONT"})};Bc(i.items,s=>{s.label in n&&(s.label=n[s.label])})}function Bc(i,t){if(Array.isArray(i))for(const n of i)e(n);function e(n){t(n);for(const s of n.groups)for(const o of s.items)wN(o)&&e(o)}}function oY(i){return typeof i=="object"&&"menu"in i}function rY(i){return typeof i=="object"&&"group"in i}function aY(i){return i.startsWith("start")?"start":i.startsWith("end")?"end":i.startsWith("after")?"after":"before"}function lY(i){const t=i.match(/^[^:]+:(.+)/);return t?t[1]:null}function bN(i){return typeof i=="string"?i:i.menuId}function wN(i){return typeof i=="object"&&"menuId"in i}class cY extends wt(){constructor(e){super();w(this,"editor");w(this,"componentFactory");w(this,"focusTracker");w(this,"tooltipManager");w(this,"poweredBy");w(this,"evaluationBadge");w(this,"ariaLiveAnnouncer");w(this,"isReady",!1);w(this,"_editableElementsMap",new Map);w(this,"_focusableToolbarDefinitions",[]);w(this,"_extraMenuBarElements",[]);w(this,"_lastFocusedForeignElement",null);w(this,"_domEmitter");const n=e.editing.view;this.editor=e,this.componentFactory=new BZ(e),this.focusTracker=new yt,this.tooltipManager=new lv(e),this.poweredBy=new GZ(e),this.evaluationBadge=new jZ(e),this.ariaLiveAnnouncer=new ZZ(e),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(n.document,"layoutChanged",this.update.bind(this)),this.listenTo(n,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(e,n){this._editableElementsMap.set(e,n),n.ckeditorInstance||(n.ckeditorInstance=this.editor),this.focusTracker.add(n);const s=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(n)};this.isReady?s():this.once("ready",s)}removeEditableElement(e){const n=this._editableElementsMap.get(e);n&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(n),this.focusTracker.remove(n),n.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,n={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:n})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}initMenuBar(e){const n=e.element;this.focusTracker.add(n),this.editor.keystrokes.listenTo(n);const s=eY(this.editor.config.get("menuBar")||{});e.fillFromConfig(s,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(o,r)=>{n.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),r())}),this.editor.keystrokes.set("Alt+F9",(o,r)=>{n.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),r())})}_readViewportOffsetFromConfig(){const e=this.editor,n=e.config.get("ui.viewportOffset");if(n)return n;const s=e.config.get("toolbar.viewportTopOffset");return s?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:s}):{top:0}}_initFocusTracking(){const e=this.editor;let n;e.keystrokes.set("Alt+F10",(s,o)=>{this._saveLastFocusedForeignElement();const r=this._getCurrentFocusedToolbarDefinition();(!r||!n)&&(n=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<n.length;a++){const l=n.shift();if(n.push(l),l!==r&&this._focusFocusableCandidateToolbar(l)){r&&r.options.afterBlur&&r.options.afterBlur();break}}o()}),e.keystrokes.set("Esc",(s,o)=>{const r=this._getCurrentFocusedToolbarDefinition();r&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),r.options.afterBlur&&r.options.afterBlur(),o())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const n of this._focusableToolbarDefinitions){const{toolbarView:s,options:o}=n;(Vo(s.element)||o.beforeFocus)&&e.push(n)}return e.sort((n,s)=>d2(n)-d2(s)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:n,options:{beforeFocus:s}}=e;return s&&s(),Vo(n.element)?(n.focus(),!0):!1}_handleScrollToTheSelection(e,n){const s={top:0,bottom:0,left:0,right:0,...this.viewportOffset};n.viewportOffset.top+=s.top,n.viewportOffset.bottom+=s.bottom,n.viewportOffset.left+=s.left,n.viewportOffset.right+=s.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const n of e)this.focusTracker.add(n.element);e.on("add",(n,s)=>{this.focusTracker.add(s.element)}),e.on("remove",(n,s)=>{this.focusTracker.remove(s.element)})}_initViewportOffset(e){this.on("set:viewportOffset",(n,s,o)=>{const r=this._getVisualViewportTopOffset(o);o.visualTop!==r&&(n.return={...o,visualTop:r})}),this.set("viewportOffset",e)}_initVisualViewportSupport(){if(!he.window.visualViewport)return;const e=()=>{const n=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==n&&(this.viewportOffset={...this.viewportOffset,visualTop:n})};this._domEmitter=new(Yn()),this._domEmitter.listenTo(he.window.visualViewport,"scroll",e),this._domEmitter.listenTo(he.window.visualViewport,"resize",e)}_getVisualViewportTopOffset(e){const n=$m().top,s=e.top||0;return n>s?0:s-n}}function d2(i){const{toolbarView:t,options:e}=i;let n=10;return Vo(t.element)&&n--,e.isContextual&&(n-=2),n}class uY extends fe{constructor(e){super(e);w(this,"body");w(this,"menuBarView");w(this,"toolbar");this.body=new rv(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class dY extends uY{constructor(e){super(e);w(this,"top");w(this,"main");w(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,n=new Qi;return n.text=e("Rich Text Editor"),n.extendTemplate({attributes:{class:"ck-voice-label"}}),n}}class hY extends fe{constructor(e,n,s){super(e);w(this,"name",null);w(this,"_editingView");w(this,"_editableElement");w(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=s,this._hasExternalElement=!!this._editableElement,this._editingView=n}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?s(this):n(this);function n(o){e.change(r=>{const a=e.document.getRoot(o.name);r.addClass(o.isFocused?"ck-focused":"ck-blurred",a),r.removeClass(o.isFocused?"ck-blurred":"ck-focused",a)})}function s(o){e.once("change:isRenderingInProgress",(r,a,l)=>{l?s(o):n(o)})}}}class fY extends hY{constructor(e,n,s,o={}){super(e,n,s);w(this,"_options");this._options=o,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(n=>{const s=e.document.getRoot(this.name);n.setAttribute("aria-label",this.getEditableAriaLabel(),s)})}getEditableAriaLabel(){const e=this.locale.t,n=this._options.label,s=this._editableElement,o=this.name;if(typeof n=="string")return n;if(typeof n=="object")return n[o];if(typeof n=="function")return n(this);if(s){const r=s.getAttribute("aria-label");if(r)return r}return e("Rich Text Editor. Editing area: %0",o)}}class Vn extends fe{constructor(e,n={}){super(e);w(this,"children");const s=this.bindTemplate;this.set("class",["ck","ck-form__row",...bn(n.class||[])]),this.children=this.createCollection(),n.children&&n.children.forEach(o=>this.children.add(o)),this.set("_role",null),this.set("_ariaLabelledBy",null),n.labelView&&this.set({_role:"group",_ariaLabelledBy:n.labelView.id}),this.setTemplate({tag:"div",attributes:{class:s.to("class",o=>o.join(" ")),role:s.to("_role"),"aria-labelledby":s.to("_ariaLabelledBy")},children:this.children})}}class h2 extends IV{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class La extends wt(){constructor(t,e){super(),e&&l5(this,e),t&&this.set(t)}}const _m=Nc("px");class as extends te{constructor(e){super(e);w(this,"positionLimiter");w(this,"visibleStack");w(this,"_viewToStack",new Map);w(this,"_idToStack",new Map);w(this,"_view",null);w(this,"_rotatorView",null);w(this,"_fakePanelsView",null);this.positionLimiter=()=>{const n=this.editor.editing.view,o=n.document.selection.editableElement;return o?n.domConverter.mapViewToDom(o.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new N("contextualballoon-add-view-exist",[this,e]);const n=e.stackId||"main";if(!this._idToStack.has(n)){this._idToStack.set(n,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(n)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(n);return}const s=this._idToStack.get(n);e.singleViewMode&&this.showStack(n),s.set(e.view,e),this._viewToStack.set(e.view,s),s===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new N("contextualballoon-remove-view-not-exist",[this,e]);const n=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(n.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(n.values())[n.size-2])),n.size===1?(this._idToStack.delete(this._getStackId(n)),this._numberOfStacks=this._idToStack.size):n.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),e}showStack(e){this.visibleStack=e;const n=this._idToStack.get(e);if(!n)throw new N("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==n&&this._showView(Array.from(n.values()).pop())}_createPanelView(){this._view=new Qn(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(s=>s[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)+1;e[n]||(n=0),this.showStack(this._getStackId(e[n]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)-1;e[n]||(n=e.length-1),this.showStack(this._getStackId(e[n]))}_createRotatorView(){const e=new mY(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(s,o)=>!o&&s>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(s,o)=>{if(o<2)return"";const r=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return n("%0 of %1",[r,o])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new gY(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(n,s)=>!s&&n>=2?Math.min(n-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:n="",withArrow:s=!0,singleViewMode:o=!1}){this.view.class=n,this.view.withArrow=s,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),o&&(this._singleViewMode=!0)}}class mY extends fe{constructor(e){super(e);w(this,"focusTracker");w(this,"buttonPrevView");w(this,"buttonNextView");w(this,"content");const n=e.t,s=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new yt,this.buttonPrevView=this._createButtonView(n("Previous"),ja),this.buttonNextView=this._createButtonView(n("Next"),LV),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",s.to("isNavigationVisible",o=>o?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:s.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,n){const s=new xe(this.locale);return s.set({label:e,icon:n,tooltip:!0}),s}}class gY extends fe{constructor(e,n){super(e);w(this,"content");w(this,"_balloonPanelView");const s=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=n,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",s.to("numberOfPanels",o=>o?"":"ck-hidden")],style:{top:s.to("top",_m),left:s.to("left",_m),width:s.to("width",_m),height:s.to("height",_m)}},children:this.content}),this.on("change:numberOfPanels",(o,r,a,l)=>{a>l?this._addPanels(a-l):this._removePanels(l-a),this.updatePosition()})}_addPanels(e){for(;e--;){const n=new fe;n.setTemplate({tag:"div"}),this.content.add(n),this.registerChild(n)}}_removePanels(e){for(;e--;){const n=this.content.last;this.content.remove(n),this.deregisterChild(n),n.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:n}=this._balloonPanelView,{width:s,height:o}=new Pe(this._balloonPanelView.element);Object.assign(this,{top:e,left:n,width:s,height:o})}}}const jl=Nc("px");class pY extends fe{constructor(e){super(e);w(this,"content");w(this,"contentPanelElement");w(this,"_contentPanelPlaceholder");const n=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Ti({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:n.to("isSticky",s=>s?"block":"none"),height:n.to("isSticky",s=>s?jl(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Ti({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",n.if("isSticky","ck-sticky-panel__content_sticky"),n.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:n.to("isSticky",s=>s?jl(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:n.to("_stickyTopOffset",s=>s&&jl(s)),bottom:n.to("_stickyBottomOffset",s=>s&&jl(s)),marginLeft:n.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(he.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),he.window.visualViewport&&(this.listenTo(he.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(he.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new Pe(this.limiterElement);let n=e.getVisible();if(n){const r=new Pe(he.window);r.top+=this.viewportTopOffset,r.height-=this.viewportTopOffset,n=n.getIntersection(r)}const{left:s,top:o}=$m();if(e.moveBy(s,o),n&&n.moveBy(s,o),n&&e.top<n.top)if(this._contentPanelRect.height+this.limiterBottomOffset>n.height){const r=Math.max(e.bottom-n.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+r+1<e.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(n.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=jl(-he.window.scrollX+$m().left)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=jl(-he.window.scrollX+$m().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Pe(this.contentPanelElement)}}class bY extends sn{constructor(e,n){const s=e.t,o=Object.assign({},{showResetButton:!0,showIcon:!0,creator:ti},n);super(e,o.creator);w(this,"iconView");w(this,"resetButtonView");w(this,"_viewConfig");this.label=n.label,this._viewConfig=o,this._viewConfig.showIcon&&(this.iconView=new os,this.iconView.content=$j,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new xe(e),this.resetButtonView.set({label:s("Clear"),icon:Rh,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",r=>!r),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}class yN extends fe{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",t.if("isVisible","ck-hidden",e=>!e)],tabindex:-1},children:[{tag:"span",children:[{text:[t.to("primaryText")]}]},{tag:"span",children:[{text:[t.to("secondaryText")]}]}]})}focus(){this.element.focus()}}class wY extends fe{constructor(e){super(e);w(this,"focusTracker");w(this,"children");w(this,"_focusCycler");this.children=this.createCollection(),this.focusTracker=new yt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new cn({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class yY extends fe{constructor(e,n){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"resultsView");w(this,"filteredView");w(this,"infoView");w(this,"queryView");w(this,"focusCycler");w(this,"_config");this._config=n,this.filteredView=n.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new yt,this.keystrokes=new Ot,this.resultsView=new wY(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),n.infoView&&n.infoView.instance?this.infoView=n.infoView.instance:(this.infoView=new yN,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new cn({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(s,{resultsCount:o,totalItemsCount:r})=>{this.resultsCount=o,this.totalItemsCount=r}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",n.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=n=>n.stopPropagation();for(const n of this.focusableChildren)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search(""),this.filteredView.element.scrollTo(0,0)}search(e){const n=e?new RegExp(k0(e),"ig"):null,s=this.filteredView.filter(n);this.fire("search",{query:e,...s})}_createSearchTextQueryView(){const e=new bY(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,n=this.infoView;this.on("search",(o,r)=>{if(r.resultsCount)n.set({isVisible:!1});else{const a=this._config.infoView&&this._config.infoView.text;let l,u;r.totalItemsCount?a!=null&&a.notFound?(l=a.notFound.primary,u=a.notFound.secondary):(l=e("No results found"),u=""):a!=null&&a.noSearchableItems?(l=a.noSearchableItems.primary,u=a.noSearchableItems.secondary):(l=e("No searchable items"),u=""),n.set({primaryText:s(l,r),secondaryText:s(u,r),isVisible:!0})}});function s(o,{query:r,resultsCount:a,totalItemsCount:l}){return typeof o=="function"?o(r,a,l):o}}}class _Y extends Dc{constructor(e){super(e);w(this,"arrowView");const n=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s)),"data-cke-tooltip-disabled":n.to("isOn")},on:{mouseenter:n.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new os;return e.content=Mp,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class vY extends fe{constructor(e){super(e);w(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",n.to("position",s=>`ck-menu-bar__menu__panel_position_${s}`),n.if("isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const sp=class sp extends fe{constructor(e){super(e);w(this,"buttonView");w(this,"panelView");w(this,"focusTracker");w(this,"keystrokes");const n=this.bindTemplate;this.buttonView=new _Y(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new vY(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ot,this.focusTracker=new yt,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",n.to("class"),n.if("isEnabled","ck-disabled",s=>!s),n.if("parentMenuView","ck-menu-bar__menu_top-level",s=>!s)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),hr.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(hr.openOnButtonClick(this),hr.openOnArrowRightKey(this),hr.closeOnArrowLeftKey(this),hr.openAndFocusOnEnterKeyPress(this),hr.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),hr.openAndFocusPanelOnArrowDownKey(this),hr.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,n)=>{this.fire("arrowright"),n()}),this.keystrokes.set("arrowleft",(e,n)=>{this.fire("arrowleft"),n()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,n,s)=>{if(!s)return;const o=sp._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:n,northEast:s,northWest:o,westSouth:r,eastSouth:a,westNorth:l,eastNorth:u}=XZ;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,u,r,l]:[e,n,s,o]:this.parentMenuView?[r,l,a,u]:[n,e,o,s]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};w(sp,"_getOptimalPosition",S0);let ys=sp;class kc extends Ka{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(e=>{const n=f2(e);return n&&n.isToggleable});this.items.forEach(e=>{const n=f2(e);n&&(n.hasCheckSpace=t)})}}function f2(i){return i instanceof rs?i.children.map(t=>CY(t)?t.buttonView:t).find(t=>t instanceof Dc):null}function CY(i){return typeof i=="object"&&"buttonView"in i&&i.buttonView instanceof xe}class _N extends sZ{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const m2=["mouseenter","arrowleft","arrowright","change:isOpen"];class TY extends fe{constructor(e){super(e);w(this,"children");w(this,"menus",[]);const n=e.t,s=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",s.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":n("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,n,s=[]){const o=this.locale,a=tY({normalizedConfig:e,locale:o,componentFactory:n,extraItems:s}).items.map(l=>this._createMenu({componentFactory:n,menuDefinition:l}));this.children.addMany(a)}render(){super.render(),$l.toggleMenusAndFocusItemsOnHover(this),$l.closeMenusWhenTheBarCloses(this),$l.closeMenuWhenAnotherOnTheSameLevelOpens(this),$l.focusCycleMenusOnArrows(this),$l.closeOnClickOutside(this),$l.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}disable(){for(const e of this.children)e.isEnabled=!1}enable(){for(const e of this.children)e.isEnabled=!0}registerMenu(e,n=null){n?(e.delegate(...m2).to(n),e.parentMenuView=n):e.delegate(...m2).to(this,s=>"menu:"+s),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:n,parentMenuView:s}){const o=this.locale,r=new ys(o);return this.registerMenu(r,s),r.buttonView.set({label:n.label}),r.once("change:isOpen",()=>{const a=new kc(o);a.ariaLabel=n.label,r.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:n,parentMenuView:r,componentFactory:e}))}),r}_createMenuItems({menuDefinition:e,parentMenuView:n,componentFactory:s}){const o=this.locale,r=[];for(const a of e.groups){for(const l of a.items){const u=new Lc(o,n);if(is(l))u.children.add(this._createMenu({componentFactory:s,menuDefinition:l,parentMenuView:n}));else{const h=this._createMenuItemContentFromFactory({componentName:l,componentFactory:s,parentMenuView:n});if(!h)continue;u.children.add(h)}r.push(u)}a!==e.groups[e.groups.length-1]&&r.push(new e1(o))}return r}_createMenuItemContentFromFactory({componentName:e,parentMenuView:n,componentFactory:s}){const o=s.create(e);return o instanceof ys||o instanceof Jn||o instanceof _N?(this._registerMenuTree(o,n),o.on("execute",()=>{this.close()}),o):(Ze("menu-bar-component-unsupported",{componentName:e,componentView:o}),null)}_registerMenuTree(e,n){if(!(e instanceof ys)){e.delegate("mouseenter").to(n);return}this.registerMenu(e,n);const s=e.panelView.children.filter(r=>r instanceof kc)[0];if(!s){e.delegate("mouseenter").to(n);return}const o=s.items.filter(r=>r instanceof rs);for(const r of o)this._registerMenuTree(r.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(n,s,o)=>{clearTimeout(e),o?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(r=>r.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const i1=["left","right","center","justify"];function vN(i){return i1.includes(i)}function CN(i,t){return t.contentLanguageDirection=="rtl"?i==="right":i==="left"}function TN(i){const t=i.map(n=>{let s;return typeof n=="string"?s={name:n}:s=n,s}).filter(n=>{const s=i1.includes(n.name);return s||Ze("alignment-config-name-not-recognized",{option:n}),s}),e=t.filter(n=>!!n.className).length;if(e&&e<t.length)throw new N("alignment-config-classnames-are-missing",{configuredOptions:i});return t.forEach((n,s,o)=>{const r=o.slice(s+1);if(r.some(l=>l.name==n.name))throw new N("alignment-config-name-already-defined",{option:n,configuredOptions:i});if(n.className&&r.some(u=>u.className==n.className))throw new N("alignment-config-classname-already-defined",{option:n,configuredOptions:i})}),t}const s1="alignment";class xY extends Ge{refresh(){const e=this.editor.locale,n=Ln(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!n&&this._canBeAligned(n),this.isEnabled&&n.hasAttribute("alignment")?this.value=n.getAttribute("alignment"):this.value=e.contentLanguageDirection==="rtl"?"right":"left"}execute(t={}){const e=this.editor,n=e.locale,s=e.model,o=s.document,r=t.value;s.change(a=>{const l=Array.from(o.selection.getSelectedBlocks()).filter(m=>this._canBeAligned(m)),u=l[0].getAttribute("alignment");CN(r,n)||u===r||!r?kY(l,a):EY(l,a,r)})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,s1)}}function kY(i,t){for(const e of i)t.removeAttribute(s1,e)}function EY(i,t,e){for(const n of i)t.setAttribute(s1,e,n)}class SY extends te{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("alignment",{options:i1.map(e=>({name:e}))})}init(){const t=this.editor,e=t.locale,n=t.model.schema,o=TN(t.config.get("alignment.options")).filter(u=>vN(u.name)&&!CN(u.name,e)),r=o.some(u=>!!u.className);n.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?t.conversion.attributeToAttribute(PY(o)):t.conversion.for("downcast").attributeToAttribute(AY(o));const a=RY(o);for(const u of a)t.conversion.for("upcast").attributeToAttribute(u);const l=IY(o);for(const u of l)t.conversion.for("upcast").attributeToAttribute(u);t.commands.add("alignment",new xY(t))}}function AY(i){const t={};for(const{name:n}of i)t[n]={key:"style",value:{"text-align":n}};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}function RY(i){const t=[];for(const{name:e}of i)t.push({view:{key:"style",value:{"text-align":e}},model:{key:"alignment",value:e}});return t}function IY(i){const t=[];for(const{name:e}of i)t.push({view:{key:"align",value:e},model:{key:"alignment",value:e}});return t}function PY(i){const t={};for(const n of i)t[n.name]={key:"class",value:n.className};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}const Ju=new Map([["left",j0],["right",VV],["center",PV],["justify",MV]]);class MY extends te{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=TN(t.config.get("alignment.options"));e.map(n=>n.name).filter(vN).forEach(n=>this._addButton(n)),this._addToolbarDropdown(e),this._addMenuBarMenu(e)}_addButton(t){this.editor.ui.componentFactory.add(`alignment:${t}`,n=>this._createButton(n,t))}_createButton(t,e,n={}){const s=this.editor,o=s.commands.get("alignment"),r=new xe(t);return r.set({label:this.localizedOptionTitles[e],icon:Ju.get(e),tooltip:!0,isToggleable:!0,...n}),r.bind("isEnabled").to(o),r.bind("isOn").to(o,"value",a=>a===e),this.listenTo(r,"execute",()=>{s.execute("alignment",{value:e}),s.editing.view.focus()}),r}_addToolbarDropdown(t){const e=this.editor;e.ui.componentFactory.add("alignment",s=>{const o=ii(s),r=s.uiLanguageDirection==="rtl"?"w":"e",a=s.t;Op(o,()=>t.map(h=>this._createButton(s,h.name,{tooltipPosition:r})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),o.buttonView.set({label:a("Text alignment"),tooltip:!0}),o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=s.contentLanguageDirection==="rtl"?Ju.get("right"):Ju.get("left"),u=e.commands.get("alignment");return o.buttonView.bind("icon").to(u,"value",h=>Ju.get(h)||l),o.bind("isEnabled").to(u,"isEnabled"),this.listenTo(o,"execute",()=>{e.editing.view.focus()}),o})}_addMenuBarMenu(t){const e=this.editor;e.ui.componentFactory.add("menuBar:alignment",n=>{const s=e.commands.get("alignment"),o=n.t,r=new ys(n),a=new kc(n);r.bind("isEnabled").to(s),a.set({ariaLabel:o("Text alignment"),role:"menu"}),r.buttonView.set({label:o("Text alignment")});for(const l of t){const u=new Lc(n,r),h=new Jn(n);h.delegate("execute").to(r),h.set({label:this.localizedOptionTitles[l.name],icon:Ju.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),h.on("execute",()=>{e.execute("alignment",{value:l.name}),e.editing.view.focus()}),h.bind("isOn").to(s,"value",m=>m===l.name),h.bind("isEnabled").to(s,"isEnabled"),u.children.add(h),a.items.add(u)}return r.panelView.children.add(a),r})}}class VY extends te{static get requires(){return[SY,MY]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class xN{constructor(t,e=20){w(this,"model");w(this,"limit");w(this,"_isLocked");w(this,"_size");w(this,"_batch",null);w(this,"_changeCallback");w(this,"_selectionChangeCallback");this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(n,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){(!this.isLocked||t)&&(this._batch=null,this._size=0)}}class NY extends Ge{constructor(e,n){super(e);w(this,"_buffer");this._buffer=new xN(e.model,n),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const n=this.editor.model,s=n.document,o=e.text||"",r=o.length;let a=s.selection;if(e.selection?a=e.selection:e.range&&(a=n.createSelection(e.range)),!n.canEditAt(a))return;const l=e.resultRange;n.enqueueChange(this._buffer.batch,u=>{this._buffer.lock();const h=Array.from(s.selection.getAttributes());n.deleteContent(a),o&&n.insertContent(u.createText(o,h),a),l?u.setSelection(l):a.is("documentSelection")||u.setSelection(a),this._buffer.unlock(),this._buffer.input(r)})}}const kN=["insertText","insertReplacementText"],OY=[...kN,"insertCompositionText"];class DY extends Ks{constructor(e){super(e);w(this,"focusObserver");this.focusObserver=e.getObserver(Ag);const n=Se.isAndroid?OY:kN,s=e.document;s.on("beforeinput",(o,r)=>{if(!this.isEnabled)return;const{data:a,targetRanges:l,inputType:u,domEvent:h,isComposing:m}=r;if(!n.includes(u))return;this.focusObserver.flush();const p=new Mo(s,"insertText");s.fire(p,new Oa(e,h,{text:a,selection:e.createSelection(l),isComposing:m})),p.stop.called&&o.stop()}),Se.isAndroid||s.on("compositionend",(o,{data:r,domEvent:a})=>{this.isEnabled&&r&&s.fire("insertText",new Oa(e,a,{text:r,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class EN extends te{constructor(){super(...arguments);w(this,"_typingQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,o=e.editing.mapper,r=n.document.selection;this._typingQueue=new LY(e),s.addObserver(DY);const a=new NY(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",a),e.commands.add("input",a),this.listenTo(s.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(s.document,"insertText",(l,u)=>{const{text:h,selection:m}=u;if(s.document.selection.isFake&&m&&s.document.selection.isSimilar(m)&&u.preventDefault(),!a.isEnabled){u.preventDefault();return}let p;m?p=Array.from(m.getRanges()).map(x=>o.toModelRange(x)):p=Array.from(r.getRanges());let v=h;if(Se.isAndroid){const x=Array.from(p[0].getItems()).reduce((k,S)=>k+(S.is("$textProxy")?S.data:""),"");if(x&&(x.length<=v.length?v.startsWith(x)&&(v=v.substring(x.length),p[0].start=p[0].start.getShiftedBy(x.length)):x.startsWith(v)&&(p[0].start=p[0].start.getShiftedBy(v.length),v="")),v.length==0&&p[0].isCollapsed)return}const C={text:v,selection:n.createSelection(p)};this._typingQueue.push(C,!!u.isComposing),u.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),Se.isAndroid?this.listenTo(s.document,"keydown",(l,u)=>{r.isCollapsed||u.keyCode!=229||!s.document.isComposing||g2(n,a)}):this.listenTo(s.document,"compositionstart",()=>{r.isCollapsed||g2(n,a)},{priority:"high"}),this.listenTo(s.document,"mutations",(l,{mutations:u})=>{if(this._typingQueue.hasAffectedElements())for(const{node:h}of u){const m=FY(h,o),p=o.toModelElement(m);if(this._typingQueue.isElementAffected(p)){this._typingQueue.flush("mutations");return}}}),this.listenTo(s.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(s.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const l=[];if(this._typingQueue.hasAffectedElements())for(const u of this._typingQueue.flushAffectedElements()){const h=o.toViewElement(u);h&&l.push({type:"children",node:h})}(l.length||!Se.isAndroid)&&s.document.fire("mutations",{mutations:l})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class LY{constructor(t){w(this,"editor");w(this,"flushDebounced",ss(()=>this.flush("timeout"),50));w(this,"_queue",[]);w(this,"_isComposing",!1);w(this,"_affectedElements",new Set);this.editor=t}destroy(){for(this.flushDebounced.cancel(),this._affectedElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(t,e){const n={text:t.text};if(t.selection){n.selectionRanges=[];for(const s of t.selection.getRanges())n.selectionRanges.push(ei.fromRange(s)),this._affectedElements.add(s.start.parent)}this._queue.push(n),this._isComposing||(this._isComposing=e),this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const n=t.selectionRanges.map(s=>BY(s)).filter(s=>!!s);n.length&&(e.selection=this.editor.model.createSelection(n))}return e}flush(t){const e=this.editor,n=e.model,s=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const r=e.commands.get("insertText").buffer;n.enqueueChange(r.batch,()=>{for(r.lock();this._queue.length;){const a=this.shift();e.execute("insertText",a)}r.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),s.scrollToTheSelection()}isElementAffected(t){return this._affectedElements.has(t)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const t=Array.from(this._affectedElements);return this._affectedElements.clear(),t}}function g2(i,t){if(!t.isEnabled)return;const e=t.buffer;e.lock(),i.enqueueChange(e.batch,()=>{i.deleteContent(i.document.selection)}),e.unlock()}function BY(i){const t=i.toRange();return i.detach(),t.root.rootName=="$graveyard"?null:t}function FY(i,t){let e=i.is("$text")?i.parent:i;for(;!t.toModelElement(e);)e=e.parent;return e}class p2 extends Ge{constructor(e,n){super(e);w(this,"direction");w(this,"_buffer");this.direction=n,this._buffer=new xN(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const n=this.editor.model,s=n.document;n.enqueueChange(this._buffer.batch,o=>{this._buffer.lock();const r=o.createSelection(e.selection||s.selection);if(!n.canEditAt(r))return;const a=e.sequence||1,l=r.isCollapsed;if(r.isCollapsed&&n.modifySelection(r,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(o);return}if(this._shouldReplaceFirstBlockWithParagraph(r,a)){this.editor.execute("paragraph",{selection:r});return}if(r.isCollapsed)return;let u=0;r.getFirstRange().getMinimalFlatRanges().forEach(h=>{u+=q_(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),n.deleteContent(r,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(u),o.setSelection(r),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const n=this.editor.model,o=n.document.selection,r=n.schema.getLimitElement(o);if(!(o.isCollapsed&&o.containsEntireContent(r))||!n.schema.checkChild(r,"paragraph"))return!1;const l=r.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const n=this.editor.model,o=n.document.selection,r=n.schema.getLimitElement(o),a=e.createElement("paragraph");e.remove(e.createRangeIn(r)),e.insert(a,r),e.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(e,n){const s=this.editor.model;if(n>1||this.direction!="backward"||!e.isCollapsed)return!1;const o=e.getFirstPosition(),r=s.schema.getLimitElement(o),a=r.getChild(0);return!(o.parent!=a||!e.containsEntireContent(a)||!s.schema.checkChild(r,"paragraph")||a.name=="paragraph")}}const UY="character",b2="word",zY="codePoint",yr="selection",ic="backward",fd="forward",SN={deleteContent:{unit:yr,direction:ic},deleteContentBackward:{unit:zY,direction:ic},deleteWordBackward:{unit:b2,direction:ic},deleteHardLineBackward:{unit:yr,direction:ic},deleteSoftLineBackward:{unit:yr,direction:ic},deleteContentForward:{unit:UY,direction:fd},deleteWordForward:{unit:b2,direction:fd},deleteHardLineForward:{unit:yr,direction:fd},deleteSoftLineForward:{unit:yr,direction:fd}};class HY extends Ks{constructor(t){super(t);const e=t.document;let n=0;e.on("keydown",()=>{n++}),e.on("keyup",()=>{n=0}),e.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:a,inputType:l}=o,u=SN[l];if(!u)return;const h={direction:u.direction,unit:u.unit,sequence:n};h.unit==yr&&(h.selectionToRemove=t.createSelection(r[0])),l==="deleteContentBackward"&&(Se.isAndroid&&(h.sequence=1),qY(r)&&(h.unit=yr,h.selectionToRemove=t.createSelection(r)));const m=new Ga(e,"delete",r[0]);e.fire(m,new Oa(t,a,h)),m.stop.called&&s.stop()}),Se.isBlink&&WY(this)}observe(){}stopObserving(){}}function WY(i){const t=i.view,e=t.document;let n=null,s=!1;e.on("keydown",(a,{keyCode:l})=>{n=l,s=!1}),e.on("keyup",(a,{keyCode:l,domEvent:u})=>{const h=e.selection,m=i.isEnabled&&l==n&&o(l)&&!h.isCollapsed&&!s;if(n=null,m){const p=h.getFirstRange(),v=new Ga(e,"delete",p),C={unit:yr,direction:r(l),selectionToRemove:h};e.fire(v,new Oa(t,u,C))}}),e.on("beforeinput",(a,{inputType:l})=>{const u=SN[l];o(n)&&u&&u.direction==r(n)&&(s=!0)},{priority:"high"}),e.on("beforeinput",(a,{inputType:l,data:u})=>{n==Ue.delete&&l=="insertText"&&u==""&&a.stop()},{priority:"high"});function o(a){return a==Ue.backspace||a==Ue.delete}function r(a){return a==Ue.backspace?ic:fd}}function qY(i){if(i.length!=1||i[0].isCollapsed)return!1;const t=i[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for(const{nextPosition:n,item:s}of t){if(n.parent.is("$text")){const o=n.parent.data,r=n.offset;if(V0(o,r)||N0(o,r)||V5(o,r))continue;e++}else(s.is("containerElement")||s.is("emptyElement"))&&e++;if(e>1)return!0}return!1}class Vr extends te{constructor(){super(...arguments);w(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.editing.view,s=n.document,o=e.model.document;n.addObserver(HY),this._undoOnBackspace=!1;const r=new p2(e,"forward");e.commands.add("deleteForward",r),e.commands.add("forwardDelete",r),e.commands.add("delete",new p2(e,"backward")),this.listenTo(s,"delete",(a,l)=>{s.isComposing||l.preventDefault();const{direction:u,sequence:h,selectionToRemove:m,unit:p}=l,v=u==="forward"?"deleteForward":"delete",C={sequence:h};if(p=="selection"){const x=Array.from(m.getRanges()).map(k=>e.editing.mapper.toModelRange(k));C.selection=e.model.createSelection(x)}else C.unit=p;e.execute(v,C),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(s,"keydown",(a,l)=>{if(s.isComposing||l.keyCode!=Ue.backspace||!o.selection.isCollapsed)return;const u=e.model.schema.getLimitElement(o.selection),h=e.model.createPositionAt(u,0);if(h.isTouching(o.selection.getFirstPosition())){l.preventDefault();const m=e.model.schema.getNearestSelectionRange(h,"forward");if(!m)return;const p=n.createSelection(e.editing.mapper.toViewRange(m)),v=p.getFirstRange(),C=new Ga(document,"delete",v),x={unit:"selection",direction:"backward",selectionToRemove:p};s.fire(C,new Oa(n,l.domEvent,x))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(s,"delete",(a,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(o,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class o1 extends te{static get requires(){return[EN,Vr]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function AN(i,t){let e=i.start;return{text:Array.from(i.getWalker({ignoreElementEnd:!1})).reduce((s,{item:o})=>o.is("$text")||o.is("$textProxy")?s+o.data:(e=t.createPositionAfter(o),""),""),range:t.createRange(e,i.end)}}class r1 extends wt(){constructor(e,n){super();w(this,"model");w(this,"testCallback");w(this,"_hasMatch");this.model=e,this.testCallback=n,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const n=this.model.document;this.listenTo(n.selection,"change:range",(s,{directChange:o})=>{if(o){if(!n.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(n,"change:data",(s,o)=>{o.isUndo||!o.isLocal||this._evaluateTextBeforeSelection("data",{batch:o})})}_evaluateTextBeforeSelection(e,n={}){const s=this.model,r=s.document.selection,a=s.createRange(s.createPositionAt(r.focus.parent,0),r.focus),{text:l,range:u}=AN(a,s),h=this.testCallback(l);if(!h&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!h,h){const m=Object.assign(n,{text:l,range:u});typeof h=="object"&&Object.assign(m,h),this.fire(`matched:${e}`,m)}}}class w2 extends te{constructor(e){super(e);w(this,"attributes");w(this,"_overrideUid");w(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,o=e.locale,r=n.document.selection;this.listenTo(s.document,"arrowKey",(a,l)=>{if(!r.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;const u=l.keyCode==Ue.arrowright,h=l.keyCode==Ue.arrowleft;if(!u&&!h)return;const m=o.contentLanguageDirection;let p=!1;m==="ltr"&&u||m==="rtl"&&h?p=this._handleForwardMovement(l):p=this._handleBackwardMovement(l),p===!0&&a.stop()},{context:"$text",priority:"highest"}),this.listenTo(r,"change:range",(a,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!l.directChange&&Yi(r.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const n=this.attributes,s=this.editor.model,o=s.document.selection,r=o.getFirstPosition();return this._isGravityOverridden||r.isAtStart&&go(o,n)?!1:Yi(r,n)?(e&&Qu(e),go(o,n)&&Yi(r,n,!0)?Xu(s,n):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const n=this.attributes,s=this.editor.model,o=s.document.selection,r=o.getFirstPosition();return this._isGravityOverridden?(e&&Qu(e),this._restoreGravity(),Yi(r,n,!0)?Xu(s,n):vm(s,n,r),!0):r.isAtStart?go(o,n)?(e&&Qu(e),vm(s,n,r),!0):!1:!go(o,n)&&Yi(r,n,!0)?(e&&Qu(e),vm(s,n,r),!0):y2(r,n)?r.isAtEnd&&!go(o,n)&&Yi(r,n)?(e&&Qu(e),vm(s,n,r),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,o=e.editing.view.document;e.editing.view.addObserver(Rp),e.editing.view.addObserver(V$);let r=!1,a=!1;this.listenTo(o,"touchstart",()=>{a=!1,r=!0}),this.listenTo(o,"mousedown",()=>{a=!0}),this.listenTo(o,"selectionChange",()=>{const l=this.attributes;if(!a&&!r||(a=!1,r=!1,!s.isCollapsed)||!go(s,l))return;const u=s.getFirstPosition();Yi(u,l)&&(u.isAtStart||Yi(u,l,!0)?Xu(n,l):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const n=this.editor.model,s=n.document.selection,o=this.attributes;this.listenTo(n,"insertContent",()=>{const r=s.getFirstPosition();go(s,o)&&Yi(r,o)&&Xu(n,o)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,o=e.editing.view;let r=!1,a=!1;this.listenTo(o.document,"delete",(l,u)=>{r=u.direction==="backward"},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{if(!r)return;const l=s.getFirstPosition();a=go(s,this.attributes)&&!y2(l,this.attributes)},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{r&&(r=!1,!a&&e.model.enqueueChange(()=>{const l=s.getFirstPosition();go(s,this.attributes)&&Yi(l,this.attributes)&&(l.isAtStart||Yi(l,this.attributes,!0)?Xu(n,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function go(i,t){for(const e of t)if(i.hasAttribute(e))return!0;return!1}function vm(i,t,e){const n=e.nodeBefore;i.change(s=>{if(n){const o=[],r=i.schema.isObject(n)&&i.schema.isInline(n);for(const[a,l]of n.getAttributes())i.schema.checkAttribute("$text",a)&&(!r||i.schema.getAttributeProperties(a).copyFromObject!==!1)&&o.push([a,l]);s.setSelectionAttribute(o)}else s.removeSelectionAttribute(t)})}function Xu(i,t){i.change(e=>{e.removeSelectionAttribute(t)})}function Qu(i){i.preventDefault()}function y2(i,t){const e=i.getShiftedBy(-1);return Yi(e,t)}function Yi(i,t,e=!1){const{nodeBefore:n,nodeAfter:s}=i;for(const o of t){const r=n?n.getAttribute(o):void 0,a=s?s.getAttribute(o):void 0;if(!(e&&(r===void 0||a===void 0))&&a!==r)return!0}return!1}const _2={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:Kl('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:Kl("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:Kl("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:Kl('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:Kl('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:Kl("'"),to:[null,"‚",null,"’"]}},v2={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},GY=["symbols","mathematical","typography","quotes"];class $Y extends te{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("typing",{transformations:{include:GY}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,n=t.plugins.get("Delete"),s=YY(t.config.get("typing.transformations")),o=a=>{for(const l of s)if(l.from.test(a))return{normalizedTransformation:l}},r=new r1(t.model,o);r.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:u,to:h}=l.normalizedTransformation,m=u.exec(l.text),p=h(m.slice(1)),v=l.range;let C=m.index;e.enqueueChange(x=>{for(let k=1;k<m.length;k++){const S=m[k],I=p[k-1];if(I==null){C+=S.length;continue}const P=v.start.getShiftedBy(C),L=e.createRange(P,P.getShiftedBy(S.length)),O=ZY(P);e.insertContent(x.createText(I,O),L),C+=I.length}e.enqueueChange(()=>{n.requestUndoOnBackspace()})})}),r.bind("isEnabled").to(this)}}function jY(i){return typeof i=="string"?new RegExp(`(${k0(i)})$`):i}function KY(i){return typeof i=="string"?()=>[i]:i instanceof Array?()=>i:i}function ZY(i){return(i.textNode?i.textNode:i.nodeAfter).getAttributes()}function Kl(i){return new RegExp(`(^|\\s)(${i})([^${i}]*)(${i})$`)}function YY(i){const t=i.extra||[],e=i.remove||[],n=o=>!e.includes(o),s=i.include.concat(t).filter(n);return JY(s).filter(n).map(o=>typeof o=="string"&&_2[o]?_2[o]:o).filter(o=>typeof o=="object").map(o=>({from:jY(o.from),to:KY(o.to)}))}function JY(i){const t=new Set;for(const e of i)if(typeof e=="string"&&v2[e])for(const n of v2[e])t.add(n);else t.add(e);return Array.from(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Dp(i,t,e,n){return n.createRange(C2(i,t,e,!0,n),C2(i,t,e,!1,n))}function C2(i,t,e,n,s){let o=i.textNode||(n?i.nodeBefore:i.nodeAfter),r=null;for(;o&&o.getAttribute(t)==e;)r=o,o=n?o.previousSibling:o.nextSibling;return r?s.createPositionAt(r,n?"before":"after"):i}function XY(i,t,e,n){const s=i.editing.view,o=new Set;s.document.registerPostFixer(r=>{const a=i.model.document.selection;let l=!1;if(a.hasAttribute(t)){const u=Dp(a.getFirstPosition(),t,a.getAttribute(t),i.model),h=i.editing.mapper.toViewRange(u);for(const m of h.getItems())m.is("element",e)&&!m.hasClass(n)&&(r.addClass(n,m),o.add(m),l=!0)}return l}),i.conversion.for("editingDowncast").add(r=>{r.on("insert",a,{priority:"highest"}),r.on("remove",a,{priority:"highest"}),r.on("attribute",a,{priority:"highest"}),r.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const u of o.values())l.removeClass(n,u),o.delete(u)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fr(i,t,e,n){let s,o=null;typeof n=="function"?s=n:(o=i.commands.get(n),s=()=>{i.execute(n)}),i.model.document.on("change:data",(r,a)=>{if(o&&!o.isEnabled||!t.isEnabled)return;const l=Ln(i.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const u=Array.from(i.model.document.differ.getChanges()),h=u[0];if(u.length!=1||h.type!=="insert"||h.name!="$text"||h.length!=1)return;const m=h.position.parent;if(m.is("element","codeBlock")||m.is("element","listItem")&&typeof n!="function"&&!["numberedList","bulletedList","todoList"].includes(n)||o&&o.value===!0)return;const p=m.getChild(0),v=i.model.createRangeOn(p);if(!v.containsRange(l)&&!l.end.isEqual(v.end))return;const C=e.exec(p.data.substr(0,l.end.offset));C&&i.model.enqueueChange(x=>{const k=x.createPositionAt(m,0),S=x.createPositionAt(m,C[0].length),I=new ei(k,S);if(s({match:C})!==!1){x.remove(I);const L=i.model.document.selection.getFirstRange(),O=x.createRangeIn(m);m.isEmpty&&!O.isEqual(L)&&!O.containsRange(L,!0)&&x.remove(m)}I.detach(),i.model.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Zl(i,t,e,n){let s,o;e instanceof RegExp?s=e:o=e,o=o||(r=>{let a;const l=[],u=[];for(;(a=s.exec(r))!==null&&!(a&&a.length<4);){let{index:h,"1":m,"2":p,"3":v}=a;const C=m+p+v;h+=a[0].length-C.length;const x=[h,h+m.length],k=[h+m.length+p.length,h+m.length+p.length+v.length];l.push(x),l.push(k),u.push([h+m.length,h+m.length+p.length])}return{remove:l,format:u}}),i.model.document.on("change:data",(r,a)=>{if(a.isUndo||!a.isLocal||!t.isEnabled)return;const l=i.model,u=l.document.selection;if(!u.isCollapsed)return;const h=Array.from(l.document.differ.getChanges()),m=h[0];if(h.length!=1||m.type!=="insert"||m.name!="$text"||m.length!=1)return;const p=u.focus,v=p.parent,{text:C,range:x}=QY(l.createRange(l.createPositionAt(v,0),p),l),k=o(C),S=T2(x.start,k.format,l),I=T2(x.start,k.remove,l);S.length&&I.length&&l.enqueueChange(P=>{if(n(P,S)!==!1){for(const O of I.reverse())P.remove(O);l.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})}})})}function T2(i,t,e){return t.filter(n=>n[0]!==void 0&&n[1]!==void 0).map(n=>e.createRange(i.getShiftedBy(n[0]),i.getShiftedBy(n[1])))}function QY(i,t){let e=i.start;return{text:Array.from(i.getItems()).reduce((s,o)=>!(o.is("$text")||o.is("$textProxy"))||o.getAttribute("code")?(e=t.createPositionAfter(o),""):s+o.data,""),range:t.createRange(e,i.end)}}class eJ extends te{static get requires(){return[Vr]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&fr(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&fr(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&fr(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&fr(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const e=Cm(this.editor,"bold");Zl(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),Zl(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(t.get("italic")){const e=Cm(this.editor,"italic");Zl(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),Zl(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(t.get("code")){const e=Cm(this.editor,"code");Zl(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(t.get("strikethrough")){const e=Cm(this.editor,"strikethrough");Zl(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{const n=e[7],s=new RegExp(`^(#{${n}})\\s$`);fr(this.editor,this,s,()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&fr(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&fr(t,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&fr(this.editor,this,/^---$/,"horizontalLine")}}function Cm(i,t){return(e,n)=>{if(!i.commands.get(t).isEnabled)return!1;const o=i.model.schema.getValidRanges(n,t);for(const r of o)e.setAttribute(t,!0,r);e.removeSelectionAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class tJ extends te{constructor(e){super(e);w(this,"adapter");w(this,"_debouncedSave");w(this,"_lastDocumentVersion");w(this,"_savePromise");w(this,"_domEmitter");w(this,"_config");w(this,"_pendingActions");w(this,"_makeImmediateSave");w(this,"_action",null);const n=e.config.get("autosave")||{},s=n.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=ss(this._save.bind(this),s),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(Yn()),this._config=n,this._pendingActions=e.plugins.get(Pg),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[Pg]}init(){const e=this.editor,n=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(n,"change:data",(s,o)=>{this._saveCallbacks.length&&o.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(s,o)=>{this._pendingActions.hasAny&&(o.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class a1 extends Ge{constructor(e,n){super(e);w(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,o=n.document.selection,r=e.forceValue===void 0?!this.value:e.forceValue;n.change(a=>{if(o.isCollapsed)r?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const l=n.schema.getValidRanges(o.getRanges(),this.attributeKey);for(const u of l)r?a.setAttribute(this.attributeKey,r,u):a.removeAttribute(this.attributeKey,u)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,n=e.schema,s=e.document.selection;if(s.isCollapsed)return s.hasAttribute(this.attributeKey);for(const o of s.getRanges())for(const r of o.getItems())if(n.checkAttribute(r,this.attributeKey))return r.hasAttribute(this.attributeKey);return!1}}const Yl="bold";class nJ extends te{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Yl}),t.model.schema.setAttributeProperties(Yl,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Yl,view:"strong",upcastAlso:["b",n=>{const s=n.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(Yl,new a1(t,Yl)),t.keystrokes.set("CTRL+B",Yl),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function l1({editor:i,commandName:t,plugin:e,icon:n,label:s,keystroke:o}){return r=>{const a=i.commands.get(t),l=new r(i.locale);return l.set({label:s,icon:n,keystroke:o,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Jn?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),e.listenTo(l,"execute",()=>{i.execute(t),i.editing.view.focus()}),l}}const t_="bold";class iJ extends te{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=l1({editor:t,commandName:t_,plugin:this,icon:NV,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(t_,()=>n(xe)),t.ui.componentFactory.add("menuBar:"+t_,()=>n(Jn))}}class sJ extends te{static get requires(){return[nJ,iJ]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const Jl="italic";class oJ extends te{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Jl}),t.model.schema.setAttributeProperties(Jl,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Jl,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(Jl,new a1(t,Jl)),t.keystrokes.set("CTRL+I",Jl),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}const n_="italic";class rJ extends te{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=l1({editor:t,commandName:n_,plugin:this,icon:Gj,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(n_,()=>n(xe)),t.ui.componentFactory.add("menuBar:"+n_,()=>n(Jn))}}class aJ extends te{static get requires(){return[oJ,rJ]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const ed="underline";class lJ extends te{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:ed}),t.model.schema.setAttributeProperties(ed,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:ed,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add(ed,new a1(t,ed)),t.keystrokes.set("CTRL+U","underline"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Underline text"),keystroke:"CTRL+U"}]})}}const i_="underline";class cJ extends te{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=l1({editor:t,commandName:i_,plugin:this,icon:pK,label:e("Underline"),keystroke:"CTRL+U"});t.ui.componentFactory.add(i_,()=>n(xe)),t.ui.componentFactory.add("menuBar:"+i_,()=>n(Jn))}}class uJ extends te{static get requires(){return[lJ,cJ]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*RN(i,t){for(const e of t)e&&i.getAttributeProperties(e[0]).copyOnEnter&&(yield e)}class dJ extends Ge{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,n=e.document.selection,s=e.schema,o=n.isCollapsed,r=n.getFirstRange(),a=r.start.parent,l=r.end.parent;if(s.isLimit(a)||s.isLimit(l))return!o&&a==l&&e.deleteContent(n),!1;if(o){const u=RN(t.model.schema,n.getAttributes());return x2(t,r.start),t.setSelectionAttribute(u),!0}else{const u=!(r.start.isAtStart&&r.end.isAtEnd),h=a==l;if(e.deleteContent(n,{leaveUnmerged:u}),u){if(h)return x2(t,n.focus),!0;t.setSelection(l,0)}}return!1}}function x2(i,t){i.split(t),i.setSelection(t.parent.nextSibling,0)}const hJ={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class IN extends Ks{constructor(t){super(t);const e=this.document;let n=!1;e.on("keydown",(s,o)=>{n=o.shiftKey}),e.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;let r=o.inputType;Se.isSafari&&n&&r=="insertParagraph"&&(r="insertLineBreak");const a=o.domEvent,l=hJ[r];if(!l)return;const u=new Ga(e,"enter",o.targetRanges[0]);e.fire(u,new Oa(t,a,{isSoft:l.isSoft})),u.stop.called&&s.stop()})}observe(){}stopObserving(){}}class PN extends te{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,s=this.editor.t;e.addObserver(IN),t.commands.add("enter",new dJ(t)),this.listenTo(n,"enter",(o,r)=>{n.isComposing||r.preventDefault(),!r.isSoft&&(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class fJ extends Ge{execute(){const t=this.editor.model,e=t.document;t.change(n=>{gJ(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=mJ(t.schema,e.selection)}}function mJ(i,t){if(t.rangeCount>1)return!1;const e=t.anchor;if(!e||!i.checkChild(e,"softBreak"))return!1;const n=t.getFirstRange(),s=n.start.parent,o=n.end.parent;return!((cv(s,i)||cv(o,i))&&s!==o)}function gJ(i,t,e){const n=e.isCollapsed,s=e.getFirstRange(),o=s.start.parent,r=s.end.parent,a=o==r;if(n){const l=RN(i.schema,e.getAttributes());k2(i,t,s.end),t.removeSelectionAttribute(e.getAttributeKeys()),t.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);i.deleteContent(e,{leaveUnmerged:l}),a?k2(i,t,e.focus):l&&t.setSelection(r,0)}}function k2(i,t,e){const n=t.createElement("softBreak");i.insertContent(n,e),t.setSelection(n,"after")}function cv(i,t){return i.is("rootElement")?!1:t.isLimit(i)||cv(i.parent,t)}class pJ extends te{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.conversion,s=t.editing.view,o=s.document,r=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(IN),t.commands.add("shiftEnter",new fJ(t)),this.listenTo(o,"enter",(a,l)=>{o.isComposing||l.preventDefault(),l.isSoft&&(t.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class bJ extends Tt(){constructor(){super(...arguments);w(this,"_stack",[])}add(e,n){const s=this._stack,o=s[0];this._insertDescriptor(e);const r=s[0];o!==r&&!s_(o,r)&&this.fire("change:top",{oldDescriptor:o,newDescriptor:r,writer:n})}remove(e,n){const s=this._stack,o=s[0];this._removeDescriptor(e);const r=s[0];o!==r&&!s_(o,r)&&this.fire("change:top",{oldDescriptor:o,newDescriptor:r,writer:n})}_insertDescriptor(e){const n=this._stack,s=n.findIndex(r=>r.id===e.id);if(s_(e,n[s]))return;s>-1&&n.splice(s,1);let o=0;for(;n[o]&&wJ(n[o],e);)o++;n.splice(o,0,e)}_removeDescriptor(e){const n=this._stack,s=n.findIndex(o=>o.id===e);s>-1&&n.splice(s,1)}}function s_(i,t){return i&&t&&i.priority==t.priority&&Og(i.classes)==Og(t.classes)}function wJ(i,t){return i.priority>t.priority?!0:i.priority<t.priority?!1:Og(i.classes)>Og(t.classes)}function Og(i){return Array.isArray(i)?i.sort().join(","):i}const yJ="ck-widget",E2="ck-widget_selected";function Jt(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function c1(i,t,e={}){if(!i.is("containerElement"))throw new N("widget-to-widget-wrong-element-type",null,{element:i});return t.setAttribute("contenteditable","false",i),t.addClass(yJ,i),t.setCustomProperty("widget",!0,i),i.getFillerOffset=xJ,t.setCustomProperty("widgetLabel",[],i),e.label&&CJ(i,e.label),e.hasSelectionHandle&&kJ(i,t),MN(i,t),i}function _J(i,t,e){if(t.classes&&e.addClass(bn(t.classes),i),t.attributes)for(const n in t.attributes)e.setAttribute(n,t.attributes[n],i)}function vJ(i,t,e){if(t.classes&&e.removeClass(bn(t.classes),i),t.attributes)for(const n in t.attributes)e.removeAttribute(n,i)}function MN(i,t,e=_J,n=vJ){const s=new bJ;s.on("change:top",(a,l)=>{l.oldDescriptor&&n(i,l.oldDescriptor,l.writer),l.newDescriptor&&e(i,l.newDescriptor,l.writer)});const o=(a,l,u)=>s.add(l,u),r=(a,l,u)=>s.remove(l,u);t.setCustomProperty("addHighlight",o,i),t.setCustomProperty("removeHighlight",r,i)}function CJ(i,t){i.getCustomProperty("widgetLabel").push(t)}function TJ(i){return i.getCustomProperty("widgetLabel").reduce((e,n)=>typeof n=="function"?e?e+". "+n():n():e?e+". "+n:n,"")}function u1(i,t,e={}){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],i),e.withAriaRole!==!1&&t.setAttribute("role","textbox",i),t.setAttribute("tabindex","-1",i),e.label&&t.setAttribute("aria-label",e.label,i),t.setAttribute("contenteditable",i.isReadOnly?"false":"true",i),i.on("change:isReadOnly",(n,s,o)=>{t.setAttribute("contenteditable",o?"false":"true",i)}),i.on("change:isFocused",(n,s,o)=>{o?t.addClass("ck-editor__nested-editable_focused",i):t.removeClass("ck-editor__nested-editable_focused",i)}),MN(i,t),i}function VN(i,t){const e=i.getSelectedElement();if(e){const n=wr(i);if(n)return t.createRange(t.createPositionAt(e,n))}return t.schema.findOptimalInsertionRange(i)}function xJ(){return null}function kJ(i,t){const e=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const s=this.toDomElement(n),o=new os;return o.set("content",Oj),o.render(),s.appendChild(o.element),s});t.insert(t.createPositionAt(i,0),e),t.addClass(["ck-widget_with-selection-handle"],i)}function d1(i){const t=a=>{const{width:l,paddingLeft:u,paddingRight:h}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(u)||0)-(parseFloat(h)||0)},e=i.parentElement;if(!e)return 0;let n=t(e);const s=5;let o=0,r=e;for(;isNaN(n);){if(r=r.parentElement,++o>s)return 0;n=t(r)}return n}function EJ(i,t=new Pe(i)){const e=d1(i);return e?t.width/e*100:0}const yo="widget-type-around";function ma(i,t,e){return!!i&&Jt(i)&&!e.isInline(t)}function SJ(i){return i.closest(".ck-widget__type-around__button")}function AJ(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function RJ(i,t){const e=i.closest(".ck-widget");return t.mapDomToView(e)}function wr(i){return i.getAttribute(yo)}const NN=["before","after"],IJ=new DOMParser().parseFromString(rK,"image/svg+xml").firstChild,S2="ck-widget__type-around_disabled";class PJ extends te{constructor(){super(...arguments);w(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[PN,Vr]}init(){const e=this.editor,n=e.editing.view;this.on("change:isEnabled",(s,o,r)=>{n.change(a=>{for(const l of n.document.roots)r?a.removeClass(S2,l):a.addClass(S2,l)}),r||e.model.change(a=>{a.removeSelectionAttribute(yo)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,n){const s=this.editor,o=s.editing.view,r=s.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);s.execute("insertParagraph",{position:s.model.createPositionAt(e,n),attributes:r}),o.focus(),o.scrollToTheSelection()}_listenToIfEnabled(e,n,s,o){this.listenTo(e,n,(...r)=>{this.isEnabled&&s(...r)},o)}_insertParagraphAccordingToFakeCaretPosition(){const s=this.editor.model.document.selection,o=wr(s);if(!o)return!1;const r=s.getSelectedElement();return this._insertParagraph(r,o),!0}_enableTypeAroundUIInjection(){const e=this.editor,n=e.model.schema,s=e.locale.t,o={before:s("Insert paragraph before block"),after:s("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(r,a,l)=>{const u=l.mapper.toViewElement(a.item);u&&ma(u,a.item,n)&&(MJ(l.writer,o,u),u.getCustomProperty("widgetLabel").push(()=>this.isEnabled?s("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,n=e.model,s=n.document.selection,o=n.schema,r=e.editing.view;this._listenToIfEnabled(r.document,"arrowKey",(l,u)=>{this._handleArrowKeyPress(l,u)},{context:[Jt,"$text"],priority:"high"}),this._listenToIfEnabled(s,"change:range",(l,u)=>{u.directChange&&e.model.change(h=>{h.removeSelectionAttribute(yo)})}),this._listenToIfEnabled(n.document,"change:data",()=>{const l=s.getSelectedElement();if(l){const u=e.editing.mapper.toViewElement(l);if(ma(u,l,o))return}e.model.change(u=>{u.removeSelectionAttribute(yo)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,u,h)=>{const m=h.writer;if(this._currentFakeCaretModelElement){const x=h.mapper.toViewElement(this._currentFakeCaretModelElement);x&&(m.removeClass(NN.map(a),x),this._currentFakeCaretModelElement=null)}const p=u.selection.getSelectedElement();if(!p)return;const v=h.mapper.toViewElement(p);if(!ma(v,p,o))return;const C=wr(u.selection);C&&(m.addClass(a(C),v),this._currentFakeCaretModelElement=p)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,u,h)=>{h||e.model.change(m=>{m.removeSelectionAttribute(yo)})});function a(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,n){const s=this.editor,o=s.model,r=o.document.selection,a=o.schema,l=s.editing.view,u=n.keyCode,h=FH(u,s.locale.contentLanguageDirection),m=l.document.selection.getSelectedElement(),p=s.editing.mapper.toModelElement(m);let v;ma(m,p,a)?v=this._handleArrowKeyPressOnSelectedWidget(h):r.isCollapsed?v=this._handleArrowKeyPressWhenSelectionNextToAWidget(h):n.shiftKey||(v=this._handleArrowKeyPressWhenNonCollapsedSelection(h)),v&&(n.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const s=this.editor.model,o=s.document.selection,r=wr(o);return s.change(a=>{if(r){if(!(r===(e?"after":"before")))return a.removeSelectionAttribute(yo),!0}else return a.setSelectionAttribute(yo,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const n=this.editor,s=n.model,o=s.schema,r=n.plugins.get("Widget"),a=r._getObjectElementNextToSelection(e),l=n.editing.mapper.toViewElement(a);return ma(l,a,o)?(s.change(u=>{r._setSelectionOverElement(a),u.setSelectionAttribute(yo,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const n=this.editor,s=n.model,o=s.schema,r=n.editing.mapper,a=s.document.selection,l=e?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,u=r.toViewElement(l);return ma(u,l,o)?(s.change(h=>{h.setSelection(l,"on"),h.setSelectionAttribute(yo,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,n=e.editing.view;this._listenToIfEnabled(n.document,"mousedown",(s,o)=>{const r=SJ(o.domTarget);if(!r)return;const a=AJ(r),l=RJ(r,n.domConverter),u=e.editing.mapper.toModelElement(l);this._insertParagraph(u,a),o.preventDefault(),s.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,n=e.model.document.selection,s=e.editing.view;this._listenToIfEnabled(s.document,"enter",(o,r)=>{if(o.eventPhase!="atTarget")return;const a=n.getSelectedElement(),l=e.editing.mapper.toViewElement(a),u=e.model.schema;let h;this._insertParagraphAccordingToFakeCaretPosition()?h=!0:ma(l,a,u)&&(this._insertParagraph(a,r.isSoft?"before":"after"),h=!0),h&&(r.preventDefault(),o.stop())},{context:Jt})}_enableInsertingParagraphsOnTypingKeystroke(){const n=this.editor.editing.view.document;this._listenToIfEnabled(n,"insertText",(s,o)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(o.selection=n.selection)},{priority:"high"}),Se.isAndroid?this._listenToIfEnabled(n,"keydown",(s,o)=>{o.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(n,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const e=this.editor,n=e.editing.view,s=e.model,o=s.schema;this._listenToIfEnabled(n.document,"delete",(r,a)=>{if(r.eventPhase!="atTarget")return;const l=wr(s.document.selection);if(!l)return;const u=a.direction,h=s.document.selection.getSelectedElement(),m=l==="before",p=u=="forward";if(m===p)e.execute("delete",{selection:s.createSelection(h,"on")});else{const C=o.getNearestSelectionRange(s.createPositionAt(h,l),u);if(C)if(!C.isCollapsed)s.change(x=>{x.setSelection(C),e.execute(p?"deleteForward":"delete")});else{const x=s.createSelection(C.start);if(s.modifySelection(x,{direction:u}),!x.focus.isEqual(C.start))s.change(k=>{k.setSelection(C),e.execute(p?"deleteForward":"delete")});else{const k=OJ(o,C.start.parent);s.deleteContent(s.createSelection(k,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),r.stop()},{context:Jt})}_enableInsertContentIntegration(){const e=this.editor,n=this.editor.model,s=n.document.selection;this._listenToIfEnabled(e.model,"insertContent",(o,[r,a])=>{if(a&&!a.is("documentSelection"))return;const l=wr(s);if(l)return o.stop(),n.change(u=>{const h=s.getSelectedElement(),m=n.createPositionAt(h,l),p=u.createSelection(m),v=n.insertContent(r,p);return u.setSelection(p),v})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(o,r)=>{const[,a,l={}]=r;if(a&&!a.is("documentSelection"))return;const u=wr(s);u&&(l.findOptimalPosition=u,r[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(o,[r])=>{if(r&&!r.is("documentSelection"))return;wr(s)&&o.stop()},{priority:"high"})}}function MJ(i,t,e){const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const o=this.toDomElement(s);return VJ(o,t),NJ(o),o});i.insert(i.createPositionAt(e,"end"),n)}function VJ(i,t){for(const e of NN){const n=new Ti({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${e}`],title:t[e],"aria-hidden":"true"},children:[i.ownerDocument.importNode(IJ,!0)]});i.appendChild(n.render())}}function NJ(i){const t=new Ti({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(t.render())}function OJ(i,t){let e=t;for(const n of t.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;e=n}return e}function DJ(i){const t=i.model;return(e,n)=>{const s=n.keyCode==Ue.arrowup,o=n.keyCode==Ue.arrowdown,r=n.shiftKey,a=t.document.selection;if(!s&&!o)return;const l=o;if(r&&FJ(a,l))return;const u=LJ(i,a,l);if(u){if(u.isCollapsed){if(a.isCollapsed)return;if(r)return}(u.isCollapsed||BJ(i,u,l))&&(t.change(h=>{const m=l?u.end:u.start;if(r){const p=t.createSelection(a.anchor);p.setFocus(m),h.setSelection(p)}else h.setSelection(m)}),e.stop(),n.preventDefault(),n.stopPropagation())}}}function LJ(i,t,e){const n=i.model;if(e){const s=t.isCollapsed?t.focus:t.getLastPosition(),o=A2(n,s,"forward");if(!o)return null;const r=n.createRange(s,o),a=R2(n.schema,r,"backward");return a?n.createRange(s,a):null}else{const s=t.isCollapsed?t.focus:t.getFirstPosition(),o=A2(n,s,"backward");if(!o)return null;const r=n.createRange(o,s),a=R2(n.schema,r,"forward");return a?n.createRange(a,s):null}}function A2(i,t,e){const n=i.schema,s=i.createRangeIn(t.root),o=e=="forward"?"elementStart":"elementEnd";for(const{previousPosition:r,item:a,type:l}of s.getWalker({startPosition:t,direction:e})){if(n.isLimit(a)&&!n.isInline(a))return r;if(l==o&&n.isBlock(a))return null}return null}function R2(i,t,e){const n=e=="backward"?t.end:t.start;if(i.checkChild(n,"$text"))return n;for(const{nextPosition:s}of t.getWalker({direction:e}))if(i.checkChild(s,"$text"))return s;return null}function BJ(i,t,e){const n=i.model,s=i.view.domConverter;if(e){const u=n.createSelection(t.start);n.modifySelection(u),!u.focus.isAtEnd&&!t.start.isEqual(u.focus)&&(t=n.createRange(u.focus,t.end))}const o=i.mapper.toViewRange(t),r=s.viewRangeToDom(o),a=Pe.getDomRangeRects(r);let l;for(const u of a){if(l===void 0){l=Math.round(u.bottom);continue}if(Math.round(u.top)>=l)return!1;l=Math.max(l,Math.round(u.bottom))}return!0}function FJ(i,t){return!i.isCollapsed&&i.isBackward==t}class Ph extends te{constructor(){super(...arguments);w(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[PJ,Vr]}init(){const e=this.editor,n=e.editing.view,s=n.document,o=e.t;this.editor.editing.downcastDispatcher.on("selection",(r,a,l)=>{const u=l.writer,h=a.selection;if(h.isCollapsed)return;const m=h.getSelectedElement();if(!m)return;const p=e.editing.mapper.toViewElement(m);Jt(p)&&l.consumable.consume(h,"selection")&&u.setSelection(u.createRangeOn(p),{fake:!0,label:TJ(p)})}),this.editor.editing.downcastDispatcher.on("selection",(r,a,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const u=l.writer,h=u.document.selection;let m=null;for(const p of h.getRanges())for(const v of p){const C=v.item;Jt(C)&&!HJ(C,m)&&(u.addClass(E2,C),this._previouslySelected.add(C),m=C)}},{priority:"low"}),n.addObserver(Rp),this.listenTo(s,"mousedown",(...r)=>this._onMousedown(...r)),this.listenTo(s,"arrowKey",(...r)=>{this._handleSelectionChangeOnArrowKeyPress(...r)},{context:[Jt,"$text"]}),this.listenTo(s,"arrowKey",(...r)=>{this._preventDefaultOnArrowKeyPress(...r)},{context:"$root"}),this.listenTo(s,"arrowKey",DJ(this.editor.editing),{context:"$text"}),this.listenTo(s,"delete",(r,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),r.stop())},{context:"$root"}),this.listenTo(s,"tab",(r,a)=>{r.eventPhase=="atTarget"&&(a.shiftKey||this._selectFirstNestedEditable()&&(a.preventDefault(),r.stop()))},{context:Jt,priority:"low"}),this.listenTo(s,"tab",(r,a)=>{a.shiftKey&&this._selectAncestorWidget()&&(a.preventDefault(),r.stop())},{priority:"low"}),this.listenTo(s,"keydown",(r,a)=>{a.keystroke==Ue.esc&&this._selectAncestorWidget()&&(a.preventDefault(),r.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:o("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:o("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:o("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:o("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:o("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:o("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,n){const s=this.editor,o=s.editing.view,r=o.document;let a=n.target;if(!a)return;if(n.domEvent.detail>=3){this._selectBlockContent(a)&&n.preventDefault();return}if(!Jt(a)){const u=UJ(a);if(!u)return;if(Jt(u))a=u;else{const h=zJ(o,n);if(h&&Jt(h))a=h;else return}}Se.isAndroid&&n.preventDefault(),r.isFocused||o.focus();const l=s.editing.mapper.toModelElement(a);this._setSelectionOverElement(l)}_selectBlockContent(e){const n=this.editor,s=n.model,o=n.editing.mapper,r=s.schema,a=o.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=WJ(o.toModelElement(a),s.schema);return l?(s.change(u=>{const h=r.isLimit(l)?null:qJ(u.createPositionAfter(l),r),m=u.createPositionAt(l,0),p=h?u.createPositionAt(h,0):u.createPositionAt(l,"end");u.setSelection(u.createRange(m,p))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,n){const s=n.keyCode,o=this.editor.model,r=o.schema,a=o.document.selection,l=a.getSelectedElement(),u=I0(s,this.editor.locale.contentLanguageDirection),h=u=="down"||u=="right",m=u=="up"||u=="down";if(l&&r.isObject(l)){const v=h?a.getLastPosition():a.getFirstPosition(),C=r.getNearestSelectionRange(v,h?"forward":"backward");C&&(o.change(x=>{x.setSelection(C)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed&&!n.shiftKey){const v=a.getFirstPosition(),C=a.getLastPosition(),x=v.nodeAfter,k=C.nodeBefore;(x&&r.isObject(x)||k&&r.isObject(k))&&(o.change(S=>{S.setSelection(h?C:v)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed)return;const p=this._getObjectElementNextToSelection(h);if(p&&r.isObject(p)){if(r.isInline(p)&&m)return;this._setSelectionOverElement(p),n.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,n){const s=this.editor.model,o=s.schema,r=s.document.selection.getSelectedElement();r&&o.isObject(r)&&(n.preventDefault(),e.stop())}_handleDelete(e){const s=this.editor.model.document.selection;if(!this.editor.model.canEditAt(s)||!s.isCollapsed)return;const o=this._getObjectElementNextToSelection(e);if(o)return this.editor.model.change(r=>{let a=s.anchor.parent;for(;a.isEmpty;){const l=a;a=l.parent,r.remove(l)}this._setSelectionOverElement(o)}),!0}_setSelectionOverElement(e){this.editor.model.change(n=>{n.setSelection(n.createRangeOn(e))})}_getObjectElementNextToSelection(e){const n=this.editor.model,s=n.schema,o=n.document.selection,r=n.createSelection(o);if(n.modifySelection(r,{direction:e?"forward":"backward"}),r.isEqual(o))return null;const a=e?r.focus.nodeBefore:r.focus.nodeAfter;return a&&s.isObject(a)?a:null}_clearPreviouslySelectedWidgets(e){for(const n of this._previouslySelected)e.removeClass(E2,n);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,s=this.editor.editing.view.document;for(const o of s.selection.getFirstRange().getItems())if(o.is("editableElement")){const r=e.editing.mapper.toModelElement(o);/* istanbul ignore next -- @preserve */if(!r)continue;const a=e.model.createPositionAt(r,0),l=e.model.schema.getNearestSelectionRange(a,"forward");return e.model.change(u=>{u.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,n=e.editing.mapper,o=e.editing.view.document.selection.getFirstPosition().parent,a=(o.is("$text")?o.parent:o).findAncestor(Jt);if(!a)return!1;const l=n.toModelElement(a);/* istanbul ignore next -- @preserve */return l?(e.model.change(u=>{u.setSelection(l,"on")}),!0):!1}}function UJ(i){let t=i;for(;t;){if(t.is("editableElement")||Jt(t))return t;t=t.parent}return null}function zJ(i,t){const e=x5(t.domEvent);let n=null;if(e?n=i.domConverter.domRangeToView(e):n=i.createRange(i.createPositionAt(t.target,0)),!n)return null;const s=n.start;if(!s.parent)return null;let o=s.parent;return s.parent.is("editableElement")&&(s.isAtEnd&&s.nodeBefore?o=s.nodeBefore:s.isAtStart&&s.nodeAfter&&(o=s.nodeAfter)),o.is("$text")?o.parent:o}function HJ(i,t){return t?Array.from(i.getAncestors()).includes(t):!1}function WJ(i,t){for(const e of i.getAncestors({includeSelf:!0,parentFirst:!0})){if(t.checkChild(e,"$text"))return e;if(t.isLimit(e)&&!t.isObject(e))break}return null}function qJ(i,t){const e=new Eo({startPosition:i});for(const{item:n}of e){if(t.isLimit(n)||!n.is("element"))return null;if(t.checkChild(n,"$text"))return n}return null}class Dg extends te{constructor(){super(...arguments);w(this,"_toolbarDefinitions",new Map);w(this,"_balloon")}static get requires(){return[as]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const n=e.plugins.get("BalloonToolbar");this.listenTo(n,"show",s=>{GJ(e.editing.view.document.selection)&&s.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:n,items:s,getRelatedElement:o,balloonClassName:r="ck-toolbar-container",positions:a}){if(!s.length){Ze("widget-toolbar-no-items",{toolbarId:e});return}const l=this.editor,u=l.t,h=new Da(l.locale);if(h.ariaLabel=n||u("Widget toolbar"),this._toolbarDefinitions.has(e))throw new N("widget-toolbar-duplicated",this,{toolbarId:e});const m={view:h,getRelatedElement:o,balloonClassName:r,itemsConfig:s,positions:a,initialized:!1};l.ui.addToolbar(h,{isContextual:!0,beforeFocus:()=>{const p=o(l.editing.view.document.selection);p&&this._showToolbar(m,p)},afterBlur:()=>{this._hideToolbar(m)}}),this._toolbarDefinitions.set(e,m)}_updateToolbarsVisibility(){let e=0,n=null,s=null;for(const o of this._toolbarDefinitions.values()){const r=o.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!r)this._isToolbarInBalloon(o)&&this._hideToolbar(o);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(o)&&this._hideToolbar(o);else{const a=r.getAncestors().length;a>e&&(e=a,n=r,s=o)}}s&&this._showToolbar(s,n)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,n){this._isToolbarVisible(e)?I2(this.editor,n,e.positions):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:ON(this.editor,n,e.positions),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const s of this._toolbarDefinitions.values())if(this._isToolbarVisible(s)){const o=s.getRelatedElement(this.editor.editing.view.document.selection);I2(this.editor,o,e.positions)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function I2(i,t,e){const n=i.plugins.get("ContextualBalloon"),s=ON(i,t,e);n.updatePosition(s)}function ON(i,t,e){const n=i.editing.view,s=Qn.defaultPositions;return{target:n.domConverter.mapViewToDom(t),positions:e||[s.northArrowSouth,s.northArrowSouthWest,s.northArrowSouthEast,s.southArrowNorth,s.southArrowNorthWest,s.southArrowNorthEast,s.viewportStickyNorth]}}function GJ(i){const t=i.getSelectedElement();return!!(t&&Jt(t))}class $J extends wt(){constructor(e){super();w(this,"_referenceCoordinates");w(this,"_options");w(this,"_originalWidth");w(this,"_originalHeight");w(this,"_originalWidthPercents");w(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,n,s){const o=new Pe(n);this.activeHandlePosition=ZJ(e),this._referenceCoordinates=jJ(n,YJ(this.activeHandlePosition)),this._originalWidth=o.width,this._originalHeight=o.height,this._aspectRatio=o.width/o.height;const r=s.style.width;r&&r.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(r):this._originalWidthPercents=EJ(s,o)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function jJ(i,t){const e=new Pe(i),n=t.split("-"),s={x:n[1]=="right"?e.right:e.left,y:n[0]=="bottom"?e.bottom:e.top};return s.x+=i.ownerDocument.defaultView.scrollX,s.y+=i.ownerDocument.defaultView.scrollY,s}function KJ(i){return`ck-widget__resizer__handle-${i}`}function ZJ(i){const t=["top-left","top-right","bottom-right","bottom-left"];for(const e of t)if(i.classList.contains(KJ(e)))return e}function YJ(i){const t=i.split("-"),e={top:"bottom",bottom:"top",left:"right",right:"left"};return`${e[t[0]]}-${e[t[1]]}`}class JJ extends fe{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",e=>e?`ck-orientation-${e}`:"")],style:{display:t.if("_isVisible","none",e=>!e)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(n,s)=>n!==null&&s!==null),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(n,s,o)=>t.unit==="px"?`${n}×${s}`:`${o}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(n,s,o)=>s<50||o<50?"above-center":n)}_dismiss(){this.unbind(),this._isVisible=!1}}class P2 extends wt(){constructor(e){super();w(this,"_state");w(this,"_sizeView");w(this,"_options");w(this,"_viewResizerWrapper",null);w(this,"_initialViewWidth");this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(n,s)=>n&&s),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",n=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),n.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(n=>{n.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(n=>{n.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,n=this._options.viewElement;this._options.editor.editing.view.change(o=>{const r=o.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(a){const l=this.toDomElement(a);return e._appendHandles(l),e._appendSizeUI(l),l});o.insert(o.createPositionAt(n,"end"),r),o.addClass("ck-widget_with-resizer",n),this._viewResizerWrapper=r,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new $J(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const n=this._proposeNewSize(e);this._options.editor.editing.view.change(h=>{const m=this._options.unit||"%",p=(m==="%"?n.widthPercents:n.width)+m;h.setStyle("width",p,this._options.viewElement)});const o=this._getHandleHost(),r=new Pe(o),a=Math.round(r.width),l=Math.round(r.height),u=new Pe(o);n.width=Math.round(u.width),n.height=Math.round(u.height),this.redraw(r),this.state.update({...n,handleHostWidth:a,handleHostHeight:l})}commit(){const e=this._options.unit||"%",n=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(n)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const n=this._domResizerWrapper;if(!eX(n))return;const s=n.parentElement,o=this._getHandleHost(),r=this._viewResizerWrapper,a=[r.getStyle("width"),r.getStyle("height"),r.getStyle("left"),r.getStyle("top")];let l;if(s.isSameNode(o)){const u=e||new Pe(o);l=[u.width+"px",u.height+"px",void 0,void 0]}else l=[o.offsetWidth+"px",o.offsetHeight+"px",o.offsetLeft+"px",o.offsetTop+"px"];Gn(a,l)!=="same"&&this._options.editor.editing.view.change(u=>{u.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},r)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(n=>{n.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const n=this.state,s=QJ(e),o=this._options.isCentered?this._options.isCentered(this):!0,r={x:n._referenceCoordinates.x-(s.x+n.originalWidth),y:s.y-n.originalHeight-n._referenceCoordinates.y};o&&n.activeHandlePosition.endsWith("-right")&&(r.x=s.x-(n._referenceCoordinates.x+n.originalWidth)),o&&(r.x*=2);let a=Math.abs(n.originalWidth+r.x),l=Math.abs(n.originalHeight+r.y);return(a/n.aspectRatio>l?"width":"height")=="width"?l=a/n.aspectRatio:a=l*n.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(n.originalWidthPercents/n.originalWidth*a*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const n=["top-left","top-right","bottom-right","bottom-left"];for(const s of n)e.appendChild(new Ti({tag:"div",attributes:{class:`ck-widget__resizer__handle ${XJ(s)}`}}).render())}_appendSizeUI(e){this._sizeView=new JJ,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function XJ(i){return`ck-widget__resizer__handle-${i}`}function QJ(i){return{x:i.pageX,y:i.pageY}}function eX(i){return i&&i.ownerDocument&&i.ownerDocument.contains(i)}class o_ extends te{constructor(){super(...arguments);w(this,"_resizers",new Map);w(this,"_observer");w(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,n=he.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(Rp),this._observer=new(Yn()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(n,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(n,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=vc(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[o,r]of this._resizers)o.isAttached()||(this._resizers.delete(o),r.destroy())},{priority:"lowest"}),this._observer.listenTo(he.window,"resize",this._redrawSelectedResizerThrottled);const s=this.editor.editing.view.document.selection;s.on("change",()=>{const o=s.getSelectedElement(),r=this.getResizerByViewElement(o)||null;r?this.select(r):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const n=new P2(e),s=this.editor.plugins;if(n.attach(),s.has("WidgetToolbarRepository")){const a=s.get("WidgetToolbarRepository");n.on("begin",()=>{a.forceDisabled("resize")},{priority:"lowest"}),n.on("cancel",()=>{a.clearForceDisabled("resize")},{priority:"highest"}),n.on("commit",()=>{a.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,n);const r=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(r)==n&&this.select(n),n}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const n of this._resizers.values())if(n.containsHandle(e))return n}_mouseDownListener(e,n){const s=n.domTarget;P2.isResizeHandle(s)&&(this._activeResizer=this._getResizerByHandle(s)||null,this._activeResizer&&(this._activeResizer.begin(s),e.stop(),n.preventDefault()))}_mouseMoveListener(e,n){this._activeResizer&&this._activeResizer.updateSize(n)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class lh extends Bo{constructor(e){super(e);w(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const n=this.document;this.listenTo(n,"paste",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"drop",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"dragover",s("dragging"),{priority:"low"});function s(o){return(r,a)=>{a.preventDefault();const l=a.dropRange?[a.dropRange]:null,u=new Mo(n,o);n.fire(u,{dataTransfer:a.dataTransfer,method:r.name,targetRanges:l,target:a.target,domEvent:a.domEvent}),u.stop.called&&a.stopPropagation()}}}onDomEvent(e){const n="clipboardData"in e?e.clipboardData:e.dataTransfer,s=e.type=="drop"||e.type=="paste",o={dataTransfer:new G5(n,{cacheFiles:s})};if(e.type=="drop"||e.type=="dragover"){const r=x5(e);o.dropRange=r&&this.view.domConverter.domRangeToView(r)}this.fire(e.type,e,o)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tX(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nX(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const M2=["figcaption","li"],V2=["ol","ul"];function DN(i,t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let e="",n=null;for(const s of t.getChildren())e+=iX(s,n)+DN(i,s),n=s;if(t.is("rawElement")){const s=document.createElement("div");t.render(s,i),e+=LN(s)}return e}function LN(i){let t="";if(i.nodeType===Node.TEXT_NODE)return i.textContent;if(i.tagName==="BR")return`
`;for(const e of i.childNodes)t+=LN(e);return t}function iX(i,t){return t?i.is("element","li")&&!i.isEmpty&&i.getChild(0).is("containerElement")||V2.includes(i.name)&&V2.includes(t.name)?`

`:!i.is("containerElement")&&!t.is("containerElement")?"":M2.includes(i.name)||M2.includes(t.name)?`
`:i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering")||t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class Pd extends te{constructor(){super(...arguments);w(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,n){this._markersToCopy.set(e,n)}_copySelectedFragmentWithMarkers(e,n,s=o=>o.model.getSelectedContent(o.model.document.selection)){return this.editor.model.change(o=>{const r=o.model.document.selection;o.setSelection(n);const a=this._insertFakeMarkersIntoSelection(o,o.model.document.selection,e),l=s(o),u=this._removeFakeMarkersInsideElement(o,l);for(const[h,m]of Object.entries(a)){u[h]||(u[h]=o.createRangeIn(l));for(const p of m)o.remove(p)}l.markers.clear();for(const[h,m]of Object.entries(u))l.markers.set(h,m);return o.setSelection(r),l})}_pasteMarkersIntoTransformedElement(e,n){const s=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(o=>{const r=this._insertFakeMarkersElements(o,s),a=n(o),l=this._removeFakeMarkersInsideElement(o,a);for(const u of Object.values(r).flat())o.remove(u);for(const[u,h]of Object.entries(l))o.model.markers.has(u)||o.addMarker(u,{usingOperation:!0,affectsData:!0,range:h});return a})}_pasteFragmentWithMarkers(e){const n=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const s of n)e.markers.set(s.name,s.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,n,s={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const o=this._markersToCopy.get(e);this._markersToCopy.set(e,s),n(),o?this._markersToCopy.set(e,o):this._markersToCopy.delete(e)}_isMarkerCopyable(e,n){const s=this._getMarkerClipboardConfig(e);if(!s)return!1;if(!n)return!0;const{allowedActions:o}=s;return o==="all"||o.includes(n)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[n]=e.split(":");return this._markersToCopy.get(n)||null}_insertFakeMarkersIntoSelection(e,n,s){const o=this._getCopyableMarkersFromSelection(e,n,s);return this._insertFakeMarkersElements(e,o)}_getCopyableMarkersFromSelection(e,n,s){const o=Array.from(n.getRanges()),r=new Set(o.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),a=l=>{if(!this._isMarkerCopyable(l.name,s))return!1;const{copyPartiallySelected:h}=this._getMarkerClipboardConfig(l.name);if(!h){const m=l.getRange();return o.some(p=>p.containsRange(m,!0))}return!0};return Array.from(r).filter(a).map(l=>({name:s==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,n=null){const{model:s}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([r,a])=>{if(!this._hasMarkerConfiguration(r))return[{name:r,range:a}];if(this._isMarkerCopyable(r,n)){const l=this._getMarkerClipboardConfig(r),u=s.markers.has(r)&&s.markers.get(r).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||u)&&(r=this._getUniqueMarkerName(r)),[{name:r,range:a}]}return[]})}_insertFakeMarkersElements(e,n){const s={},o=n.flatMap(r=>{const{start:a,end:l}=r.range;return[{position:a,marker:r,type:"start"},{position:l,marker:r,type:"end"}]}).sort(({position:r},{position:a})=>r.isBefore(a)?1:-1);for(const{position:r,marker:a,type:l}of o){const u=e.createElement("$marker",{"data-name":a.name,"data-type":l});s[a.name]||(s[a.name]=[]),s[a.name].push(u),e.insert(u,r)}return s}_removeFakeMarkersInsideElement(e,n){const o=this._getAllFakeMarkersFromElement(e,n).reduce((r,a)=>{const l=a.markerElement&&e.createPositionBefore(a.markerElement);let u=r[a.name],h=!1;return u!=null&&u.start&&(u!=null&&u.end)&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?r[this._getUniqueMarkerName(a.name)]=r[a.name]:h=!0,u=null),h||(r[a.name]={...u,[a.type]:l}),a.markerElement&&e.remove(a.markerElement),r},{});return F9(o,r=>new Z(r.start||e.createPositionFromPath(n,[0]),r.end||e.createPositionAt(n,"end")))}_getAllFakeMarkersFromElement(e,n){const s=Array.from(e.createRangeIn(n)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const l=a.getAttribute("data-name"),u=a.getAttribute("data-type");return[{markerElement:a,name:l,type:u}]}),o=[],r=[];for(const a of s)a.type==="end"&&(s.some(u=>u.name===a.name&&u.type==="start")||o.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(s.some(u=>u.name===a.name&&u.type==="end")||r.unshift({markerElement:null,name:a.name,type:"end"}));return[...o,...s,...r]}_getUniqueMarkerName(e){const n=e.split(":"),s=si().substring(1,6);return n.length===3?`${n.slice(0,2).join(":")}:${s}`:`${n.join(":")}:${s}`}}class ls extends te{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[Pd]}init(){this.editor.editing.view.addObserver(lh),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,n){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:n==="cut"},()=>{const o=s._copySelectedFragmentWithMarkers(n,e);this.fire("outputTransformation",{dataTransfer:t,content:o,method:n})})}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,s=n.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(r,a)=>{a.method=="paste"&&!t.model.canEditAt(t.model.document.selection)&&r.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(r,a)=>{const l=a.dataTransfer;let u;if(a.content)u=a.content;else{let p="";l.getData("text/html")?p=nX(l.getData("text/html")):l.getData("text/plain")&&(p=tX(l.getData("text/plain"))),u=this.editor.data.htmlProcessor.toView(p)}const h=new Mo(this,"inputTransformation"),m=l.getData("application/ckeditor5-editor-id")||null;this.fire(h,{content:u,dataTransfer:l,sourceEditorId:m,targetRanges:a.targetRanges,method:a.method}),h.stop.called&&r.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(r,a)=>{if(a.content.isEmpty)return;const u=this.editor.data.toModel(a.content,"$clipboardHolder");u.childCount!=0&&(r.stop(),e.change(()=>{this.fire("contentInsertion",{content:u,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(r,a)=>{a.resultRange=o._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,s=t.editing.view.document,o=(r,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,e.selection,r.name)};this.listenTo(s,"copy",o,{priority:"low"}),this.listenTo(s,"cut",(r,a)=>{t.model.canEditAt(t.model.document.selection)?o(r,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(r,a)=>{const l=t.data.toView(a.content,{isClipboardPipeline:!0});s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(r,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",DN(t.data.htmlProcessor.domConverter,a.content)),a.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),a.method=="cut"&&t.model.deleteContent(e.selection)},{priority:"low"})}}const r_=Nc("px");class sX extends fe{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",e=>!e)],style:{left:t.to("left",e=>r_(e)),top:t.to("top",e=>r_(e)),width:t.to("width",e=>r_(e))}}})}}class Tm extends te{constructor(){super(...arguments);w(this,"removeDropMarkerDelayed",P0(()=>this.removeDropMarker(),40));w(this,"_updateDropMarkerThrottled",vc(e=>this._updateDropMarker(e),40));w(this,"_reconvertMarkerThrottled",vc(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));w(this,"_dropTargetLineView",new sX);w(this,"_domEmitter",new(Yn()));w(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,n,s,o,r,a){this.removeDropMarkerDelayed.cancel();const l=N2(this.editor,e,n,s,o,r,a);/* istanbul ignore next -- @preserve */if(l){if(a&&a.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,n,s,o,r,a){const l=N2(this.editor,e,n,s,o,r,a);return this.removeDropMarker(),l}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(n=>{n.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(n,{writer:s})=>{if(e.model.schema.checkChild(n.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(s);n.markerRange.isCollapsed?this._updateDropTargetLine(n.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const n=this.editor,s=n.model.markers;n.model.change(o=>{s.has("drop-target")?s.get("drop-target").getRange().isEqual(e)||o.updateMarker("drop-target",{range:e}):o.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(n){const s=this.toDomElement(n);return s.append("⁠",n.createElement("span"),"⁠"),s})}_updateDropTargetLine(e){const n=this.editor.editing,s=e.start.nodeBefore,o=e.start.nodeAfter,r=e.start.parent,a=s?n.mapper.toViewElement(s):null,l=a?n.view.domConverter.mapViewToDom(a):null,u=o?n.mapper.toViewElement(o):null,h=u?n.view.domConverter.mapViewToDom(u):null,m=n.mapper.toViewElement(r);if(!m)return;const p=n.view.domConverter.mapViewToDom(m),v=this._getScrollableRect(m),{scrollX:C,scrollY:x}=he.window,k=l?new Pe(l):null,S=h?new Pe(h):null,I=new Pe(p).excludeScrollbarsAndBorders(),P=k?k.bottom:I.top,L=S?S.top:I.bottom,O=he.window.getComputedStyle(p),J=P<=L?(P+L)/2:L;if(v.top<J&&J<v.bottom){const F=I.left+parseFloat(O.paddingLeft),j=I.right-parseFloat(O.paddingRight),U=Math.max(F+C,v.left),X=Math.min(j+C,v.right);this._dropTargetLineView.set({isVisible:!0,left:U,top:J+x,width:X-U})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const n=e.root.rootName;let s;if(this._scrollables.has(n))s=this._scrollables.get(n).domElement;else{const o=this.editor.editing.view.domConverter.mapViewToDom(e);s=rX(o),this._domEmitter.listenTo(s,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const r=new E0(s,this._reconvertMarkerThrottled);this._scrollables.set(n,{domElement:s,resizeObserver:r})}return new Pe(s).excludeScrollbarsAndBorders()}}function N2(i,t,e,n,s,o,r){const a=i.model,l=i.editing.mapper;let h=O2(i,t);for(;h;){if(!o){if(a.schema.checkChild(h,"$text")){if(e){const m=e[0].start,p=l.toModelPosition(m);if(!r||Array.from(r.getItems({shallow:!0})).every(C=>a.schema.checkChild(p,C))){if(a.schema.checkChild(p,"$text"))return a.createRange(p);if(m)return xm(i,O2(i,m.parent),n,s)}}}else if(a.schema.isInline(h))return xm(i,h,n,s)}if(a.schema.isBlock(h))return xm(i,h,n,s);if(a.schema.checkChild(h,"$block")){const m=Array.from(h.getChildren()).filter(C=>C.is("element")&&!oX(i,C));let p=0,v=m.length;if(v==0)return a.createRange(a.createPositionAt(h,"end"));for(;p<v-1;){const C=Math.floor((p+v)/2);BN(i,m[C],n,s)=="before"?v=C:p=C}return xm(i,m[p],n,s)}h=h.parent}return null}function oX(i,t){const e=i.editing.mapper,n=i.editing.view.domConverter,s=e.toViewElement(t);if(!s)return!0;const o=n.mapViewToDom(s);return he.window.getComputedStyle(o).float!="none"}function xm(i,t,e,n){const s=i.model;return s.createRange(s.createPositionAt(t,BN(i,t,e,n)))}function BN(i,t,e,n){const s=i.editing.mapper,o=i.editing.view.domConverter,r=s.toViewElement(t),a=o.mapViewToDom(r),l=new Pe(a);return i.model.schema.isInline(t)?e<(l.left+l.right)/2?"before":"after":n<(l.top+l.bottom)/2?"before":"after"}function O2(i,t){const e=i.editing.mapper,n=i.editing.view,s=e.toModelElement(t);if(s)return s;const o=n.createPositionBefore(t),r=e.findMappedViewAncestor(o);return e.toModelElement(r)}function rX(i){let t=i;do{t=t.parentElement;const e=he.window.getComputedStyle(t).overflowY;if(e=="auto"||e=="scroll")break}while(t.tagName!="BODY");return t}class aX extends te{constructor(){super(...arguments);w(this,"_isBlockDragging",!1);w(this,"_domEmitter",new(Yn()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(n,s,o)=>{o?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Se.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const s=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(s,"dragstart",(o,r)=>this._handleBlockDragStart(r)),this._domEmitter.listenTo(he.document,"dragover",(o,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(he.document,"drop",(o,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(he.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&s.setAttribute("draggable","true"),this.on("change:isEnabled",(o,r,a)=>{s.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const n=this.editor.model,s=n.document.selection,o=this.editor.editing.view,r=Array.from(s.getSelectedBlocks()),a=n.createRange(n.createPositionBefore(r[0]),n.createPositionAfter(r[r.length-1]));n.change(l=>l.setSelection(a)),this._isBlockDragging=!0,o.focus(),o.getObserver(lh).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const n=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),s=e.clientY,o=document.elementFromPoint(n,s),r=this.editor.editing.view;!o||!o.closest(".ck-editor__editable")||r.getObserver(lh).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:o,clientX:n,clientY:s,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class lX extends te{constructor(){super(...arguments);w(this,"_draggedRange");w(this,"_draggingUid");w(this,"_draggableElement");w(this,"_clearDraggableAttributesDelayed",P0(()=>this._clearDraggableAttributes(),40));w(this,"_blockMode",!1);w(this,"_domEmitter",new(Yn()));w(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[ls,Ph,Tm,aX]}init(){const e=this.editor,n=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,n.addObserver(lh),n.addObserver(Rp),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(s,o,r)=>{r?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(s,o,r)=>{r||this._finalizeDragging(!1)}),Se.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,n=e.model,s=e.editing.view,o=s.document,r=e.plugins.get(Tm);this.listenTo(o,"dragstart",(a,l)=>{var x;if((x=l.target)!=null&&x.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=si(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const u=n.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,u,"dragstart");const{dataTransfer:m,domTarget:p,domEvent:v}=l,{clientX:C}=v;this._updatePreview({dataTransfer:m,domTarget:p,clientX:C}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(o,"dragend",(a,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(he.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(o,"dragenter",()=>{this.isEnabled&&s.focus()}),this.listenTo(o,"dragleave",()=>{r.removeDropMarkerDelayed()}),this.listenTo(o,"dragging",(a,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:u,clientY:h}=l.domEvent;r.updateDropMarker(l.target,l.targetRanges,u,h,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),Se.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,s=e.editing.view.document,o=e.plugins.get(Tm);this.listenTo(s,"clipboardInput",(r,a)=>{if(a.method!="drop")return;const{clientX:l,clientY:u}=a.domEvent,h=o.getFinalDropRange(a.target,a.targetRanges,l,u,this._blockMode,this._draggedRange);if(!h){this._finalizeDragging(!1),r.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),D2(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(h,!0)){this._finalizeDragging(!1),r.stop();return}a.targetRanges=[e.editing.mapper.toViewRange(h)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(ls);e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const o=s.targetRanges.map(r=>this.editor.editing.mapper.toModelRange(r));this.editor.model.change(r=>r.setSelection(o))},{priority:"high"}),e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const o=D2(s.dataTransfer)=="move",r=!s.resultRange||!s.resultRange.isCollapsed;this._finalizeDragging(r&&o)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,n=e.editing.view,s=n.document;this.listenTo(s,"mousedown",(o,r)=>{if(Se.isAndroid||!r)return;this._clearDraggableAttributesDelayed.cancel();let a=L2(r.target);if(Se.isBlink&&!e.isReadOnly&&!a&&!s.selection.isCollapsed){const l=s.selection.getSelectedElement();(!l||!Jt(l))&&(a=s.selection.editableElement)}a&&(n.change(l=>{l.setAttribute("draggable","true",a)}),this._draggableElement=e.editing.mapper.toModelElement(a))}),this.listenTo(s,"mouseup",()=>{Se.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(n=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&n.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const n=this.editor,s=n.model;n.plugins.get(Tm).removeDropMarker(),this._clearDraggableAttributes(),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&s.change(r=>{const a=s.createSelection(this._draggedRange);s.deleteContent(a,{doNotAutoparagraph:!0});const l=a.getFirstPosition().parent;l.isEmpty&&!s.schema.checkChild(l,"$text")&&s.schema.checkChild(l,"paragraph")&&r.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const n=this.editor,s=n.model,o=s.document.selection,r=e?L2(e):null;if(r){const h=n.editing.mapper.toModelElement(r);this._draggedRange=ei.fromRange(s.createRangeOn(h)),this._blockMode=s.schema.isBlock(h),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(o.isCollapsed&&!o.getFirstPosition().parent.isEmpty)return;const a=Array.from(o.getSelectedBlocks()),l=o.getFirstRange();if(a.length==0){this._draggedRange=ei.fromRange(l);return}const u=FN(s,a);if(a.length>1)this._draggedRange=ei.fromRange(u),this._blockMode=!0;else if(a.length==1){const h=l.start.isTouching(u.start)&&l.end.isTouching(u.end);this._draggedRange=ei.fromRange(h?u:l),this._blockMode=h}s.change(h=>h.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:n,clientX:s}){const o=this.editor.editing.view,r=o.document.selection.editableElement,a=o.domConverter.mapViewToDom(r),l=he.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=ps(he.document,"div",{style:"position: fixed; left: -999999px;"}),he.document.body.appendChild(this._previewContainer));const u=new Pe(a);if(a.contains(n))return;const h=parseFloat(l.paddingLeft),m=ps(he.document,"div");m.className="ck ck-content",m.style.width=l.width,m.style.paddingLeft=`${u.left-s+h}px`,Se.isiOS&&(m.style.backgroundColor="white"),o.domConverter.setContentOf(m,e.getData("text/html")),e.setDragImage(m,0,0),this._previewContainer.appendChild(m)}}function D2(i){return Se.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function L2(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(Jt);if(Jt(i))return i;const t=i.findAncestor(e=>Jt(e)||e.is("editableElement"));return Jt(t)?t:null}function FN(i,t){const e=t[0],n=t[t.length-1],s=e.getCommonAncestor(n),o=i.createPositionBefore(e),r=i.createPositionAfter(n);if(s&&s.is("element")&&!i.schema.isLimit(s)){const a=i.createRangeOn(s),l=o.isTouching(a.start),u=r.isTouching(a.end);if(l&&u)return FN(i,[s])}return i.createRange(o,r)}class cX extends te{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[ls]}init(){const t=this.editor,e=t.model,n=t.editing.view,s=e.document.selection;n.addObserver(lh),t.plugins.get(ls).on("contentInsertion",(o,r)=>{uX(r.content,e)&&e.change(a=>{const l=Array.from(s.getAttributes()).filter(([h])=>e.schema.getAttributeProperties(h).isFormatting);s.isCollapsed||e.deleteContent(s,{doNotAutoparagraph:!0}),l.push(...s.getAttributes());const u=a.createRangeIn(r.content);for(const h of u.getItems())for(const m of l)e.schema.checkAttribute(h,m[0])&&a.setAttribute(m[0],m[1],h)})})}}function uX(i,t){let e=t.createRangeIn(i);if(i.childCount==1){const n=i.getChild(0);n.is("element")&&t.schema.isBlock(n)&&!t.schema.isObject(n)&&!t.schema.isLimit(n)&&(e=t.createRangeIn(n))}for(const n of e.getItems())if(!t.schema.isInline(n)||Array.from(n.getAttributeKeys()).find(o=>t.schema.getAttributeProperties(o).isFormatting))return!1;return!0}class h1 extends te{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Pd,ls,lX,cX]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class dX extends cY{constructor(e,n){super(e);w(this,"view");w(this,"_toolbarConfig");w(this,"_elementReplacer");this.view=n,this._toolbarConfig=cN(e.config.get("toolbar")),this._elementReplacer=new yH,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const n=this.editor,s=this.view,o=n.editing.view,r=s.editable,a=o.document.getRoot();r.name=a.rootName,s.render();const l=r.element;this.setEditableElement(r.name,l),s.editable.bind("isFocused").to(this.focusTracker),o.attachDomRoot(l),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),s.menuBarView&&this.initMenuBar(s.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,n=this.editor.editing.view;this._elementReplacer.restore(),n.getDomRoot(e.editable.name)&&n.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:n})=>n||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,n=e.editing.view,s=n.document.getRoot(),o=e.sourceElement;let r;const a=e.config.get("placeholder");a&&(r=typeof a=="string"?a:a[this.view.editable.name]),!r&&o&&o.tagName.toLowerCase()==="textarea"&&(r=o.getAttribute("placeholder")),r&&(s.placeholder=r),O0({view:n,element:s,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,n=this.editor.plugins.get("ContextualBalloon");n.on("getPositionOptions",o=>{const r=o.return;if(!r||!e.isSticky||!e.element)return;const a=new Pe(e.element).height,l=typeof r.target=="function"?r.target():r.target,u=typeof r.limiter=="function"?r.limiter():r.limiter;if(l&&u&&new Pe(l).height>=new Pe(u).height-a)return;const h={...r.viewportOffsetConfig},m=(h.top||0)+a;o.return={...r,viewportOffsetConfig:{...h,top:m}}},{priority:"low"});const s=()=>{n.visibleView&&n.updatePosition()};this.listenTo(e,"change:isSticky",s),this.listenTo(this.editor.ui,"change:viewportOffset",s)}_handleScrollToTheSelectionWithStickyPanel(e,n,s){const o=this.view.stickyPanel;if(o.isSticky){const r=new Pe(o.element).height;n.viewportOffset.top+=r}else{const r=()=>{this.editor.editing.view.scrollToTheSelection(s)};this.listenTo(o,"change:isSticky",r),setTimeout(()=>{this.stopListening(o,"change:isSticky",r)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,n=this.editor.plugins.get("Dialog");n.on("show",()=>{const s=n.view;s.on("moveTo",(o,r)=>{if(!e.isSticky||s.wasMoved||s.isModal)return;const a=new Pe(e.contentPanelElement);r[1]<a.bottom+oh.defaultOffset&&(r[1]=a.bottom+oh.defaultOffset)},{priority:"high"})},{priority:"low"})}}class hX extends dY{constructor(e,n,s={}){super(e);w(this,"stickyPanel");w(this,"toolbar");w(this,"editable");this.stickyPanel=new pY(e),this.toolbar=new Da(e,{shouldGroupWhenFull:s.shouldToolbarGroupWhenFull}),s.useMenuBar&&(this.menuBarView=new TY(e)),this.editable=new fY(e,n,void 0,{label:s.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class fX extends nv(Tj){constructor(e,n={}){if(!Ym(e)&&n.initialData!==void 0)throw new N("editor-create-initial-data",null);super(n);w(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",mX(e)),Ym(e)&&(this.sourceElement=e),this.model.document.createRoot();const s=!this.config.get("toolbar.shouldNotGroupWhenFull"),o=this.config.get("menuBar"),r=new hX(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:s,useMenuBar:o.isVisible,label:this.config.get("label")});this.ui=new dX(this,r),kj(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,n={}){return new Promise(s=>{const o=new this(e,n);s(o.initPlugins().then(()=>o.ui.init(Ym(e)?e:null)).then(()=>o.data.init(o.config.get("initialData"))).then(()=>o.fire("ready")).then(()=>o))})}}function mX(i){return Ym(i)?xH(i):i}function Ym(i){return Pr(i)}var Jm={exports:{}},gX=Jm.exports,B2;function pX(){return B2||(B2=1,function(i){((t,e)=>{i.exports?i.exports=e():t.fuzzysort=e()})(gX,t=>{var e=($,W)=>{if(!$||!W)return V;var Q=C($);D(W)||(W=v(W));var ve=Q.bitflags;return(ve&W._bitflags)!==ve?V:k(Q,W)},n=($,W,Q)=>{if(!$)return Q!=null&&Q.all?x(W,Q):Ne;var ve=C($),be=ve.bitflags,Ce=ve.containsSpace,we=m((Q==null?void 0:Q.threshold)||0),Me=(Q==null?void 0:Q.limit)||oe,Ae=0,it=0,nt=W.length;function Bn(Zs){Ae<Me?(de.add(Zs),++Ae):(++it,Zs._score>de.peek()._score&&de.replaceTop(Zs))}if(Q!=null&&Q.key)for(var wn=Q.key,He=0;He<nt;++He){var An=W[He],ct=ke(An,wn);if(ct&&(D(ct)||(ct=v(ct)),(be&ct._bitflags)===be)){var gt=k(ve,ct);gt!==V&&(gt._score<we||(gt.obj=An,Bn(gt)))}}else if(Q!=null&&Q.keys){var xi=Q.keys,ri=xi.length;e:for(var He=0;He<nt;++He){var An=W[He];{for(var un=0,st=0;st<ri;++st){var wn=xi[st],ct=ke(An,wn);if(!ct){Ie[st]=se;continue}D(ct)||(ct=v(ct)),Ie[st]=ct,un|=ct._bitflags}if((be&un)!==be)continue}if(Ce)for(let ft=0;ft<ve.spaceSearches.length;ft++)le[ft]=ce;for(var st=0;st<ri;++st){if(ct=Ie[st],ct===se){ze[st]=se;continue}if(ze[st]=k(ve,ct,!1,Ce),ze[st]===V){ze[st]=se;continue}if(Ce)for(let ut=0;ut<ve.spaceSearches.length;ut++){if(me[ut]>-1e3&&le[ut]>ce){var dn=(le[ut]+me[ut])/4;dn>le[ut]&&(le[ut]=dn)}me[ut]>le[ut]&&(le[ut]=me[ut])}}if(Ce){for(let ft=0;ft<ve.spaceSearches.length;ft++)if(le[ft]===ce)continue e}else{var $e=!1;for(let ft=0;ft<ri;ft++)if(ze[ft]._score!==ce){$e=!0;break}if(!$e)continue}var Pt=new l(ri);for(let ft=0;ft<ri;ft++)Pt[ft]=ze[ft];if(Ce){var xt=0;for(let ft=0;ft<ve.spaceSearches.length;ft++)xt+=le[ft]}else{var xt=ce;for(let ut=0;ut<ri;ut++){var gt=Pt[ut];if(gt._score>-1e3&&xt>ce){var dn=(xt+gt._score)/4;dn>xt&&(xt=dn)}gt._score>xt&&(xt=gt._score)}}if(Pt.obj=An,Pt._score=xt,Q!=null&&Q.scoreFn){if(xt=Q.scoreFn(Pt),!xt)continue;xt=m(xt),Pt._score=xt}xt<we||Bn(Pt)}}else for(var He=0;He<nt;++He){var ct=W[He];if(ct&&(D(ct)||(ct=v(ct)),(be&ct._bitflags)===be)){var gt=k(ve,ct);gt!==V&&(gt._score<we||Bn(gt))}}if(Ae===0)return Ne;for(var jt=new Array(Ae),He=Ae-1;He>=0;--He)jt[He]=de.poll();return jt.total=Ae+it,jt},s=($,W="<b>",Q="</b>")=>{for(var ve=typeof W=="function"?W:void 0,be=$.target,Ce=be.length,we=$.indexes,Me="",Ae=0,it=0,nt=!1,Bn=[],wn=0;wn<Ce;++wn){var He=be[wn];if(we[it]===wn){if(++it,nt||(nt=!0,ve?(Bn.push(Me),Me=""):Me+=W),it===we.length){ve?(Me+=He,Bn.push(ve(Me,Ae++)),Me="",Bn.push(be.substr(wn+1))):Me+=He+Q+be.substr(wn+1);break}}else nt&&(nt=!1,ve?(Bn.push(ve(Me,Ae++)),Me=""):Me+=Q);Me+=He}return ve?Bn:Me},o=$=>{typeof $=="number"?$=""+$:typeof $!="string"&&($="");var W=P($);return u($,{_targetLower:W._lower,_targetLowerCodes:W.lowerCodes,_bitflags:W.bitflags})},r=()=>{J.clear(),F.clear()};class a{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((W,Q)=>W-Q)}set indexes(W){return this._indexes=W}highlight(W,Q){return s(this,W,Q)}get score(){return h(this._score)}set score(W){this._score=m(W)}}class l extends Array{get score(){return h(this._score)}set score(W){this._score=m(W)}}var u=($,W)=>{const Q=new a;return Q.target=$,Q.obj=W.obj??V,Q._score=W._score??ce,Q._indexes=W._indexes??[],Q._targetLower=W._targetLower??"",Q._targetLowerCodes=W._targetLowerCodes??V,Q._nextBeginningIndexes=W._nextBeginningIndexes??V,Q._bitflags=W._bitflags??0,Q},h=$=>$===ce?0:$>1?$:Math.E**(((-$+1)**.04307-1)*-2),m=$=>$===0?ce:$>1?$:1-Math.pow(Math.log($)/-2+1,1/.04307),p=$=>{typeof $=="number"?$=""+$:typeof $!="string"&&($=""),$=$.trim();var W=P($),Q=[];if(W.containsSpace){var ve=$.split(/\s+/);ve=[...new Set(ve)];for(var be=0;be<ve.length;be++)if(ve[be]!==""){var Ce=P(ve[be]);Q.push({lowerCodes:Ce.lowerCodes,_lower:ve[be].toLowerCase(),containsSpace:!1})}}return{lowerCodes:W.lowerCodes,_lower:W._lower,containsSpace:W.containsSpace,bitflags:W.bitflags,spaceSearches:Q}},v=$=>{if($.length>999)return o($);var W=J.get($);return W!==void 0||(W=o($),J.set($,W)),W},C=$=>{if($.length>999)return p($);var W=F.get($);return W!==void 0||(W=p($),F.set($,W)),W},x=($,W)=>{var Q=[];Q.total=$.length;var ve=(W==null?void 0:W.limit)||oe;if(W!=null&&W.key)for(var be=0;be<$.length;be++){var Ce=$[be],we=ke(Ce,W.key);if(we!=V){D(we)||(we=v(we));var Me=u(we.target,{_score:we._score,obj:Ce});if(Q.push(Me),Q.length>=ve)return Q}}else if(W!=null&&W.keys)for(var be=0;be<$.length;be++){for(var Ce=$[be],Ae=new l(W.keys.length),it=W.keys.length-1;it>=0;--it){var we=ke(Ce,W.keys[it]);if(!we){Ae[it]=se;continue}D(we)||(we=v(we)),we._score=ce,we._indexes.len=0,Ae[it]=we}if(Ae.obj=Ce,Ae._score=ce,Q.push(Ae),Q.length>=ve)return Q}else for(var be=0;be<$.length;be++){var we=$[be];if(we!=V&&(D(we)||(we=v(we)),we._score=ce,we._indexes.len=0,Q.push(we),Q.length>=ve))return Q}return Q},k=($,W,Q=!1,ve=!1)=>{if(Q===!1&&$.containsSpace)return S($,W,ve);for(var be=$._lower,Ce=$.lowerCodes,we=Ce[0],Me=W._targetLowerCodes,Ae=Ce.length,it=Me.length,He=0,nt=0,Bn=0;;){var wn=we===Me[nt];if(wn){if(j[Bn++]=nt,++He,He===Ae)break;we=Ce[He]}if(++nt,nt>=it)return V}var He=0,An=!1,ct=0,gt=W._nextBeginningIndexes;gt===V&&(gt=W._nextBeginningIndexes=O(W.target)),nt=j[0]===0?0:gt[j[0]-1];var xi=0;if(nt!==it)for(;;)if(nt>=it){if(He<=0||(++xi,xi>200))break;--He;var ri=U[--ct];nt=gt[ri]}else{var wn=Ce[He]===Me[nt];if(wn){if(U[ct++]=nt,++He,He===Ae){An=!0;break}++nt}else nt=gt[nt]}var un=Ae<=1?-1:W._targetLower.indexOf(be,j[0]),st=!!~un,dn=st?un===0||W._nextBeginningIndexes[un-1]===un:!1;if(st&&!dn){for(var $e=0;$e<gt.length;$e=gt[$e])if(!($e<=un)){for(var Pt=0;Pt<Ae&&Ce[Pt]===W._targetLowerCodes[$e+Pt];Pt++);if(Pt===Ae){un=$e,dn=!0;break}}}var xt=ft=>{for(var ut=0,qr=0,Rn=1;Rn<Ae;++Rn)ft[Rn]-ft[Rn-1]!==1&&(ut-=ft[Rn],++qr);var tl=ft[Ae-1]-ft[0]-(Ae-1);if(ut-=(12+tl)*qr,ft[0]!==0&&(ut-=ft[0]*ft[0]*.2),!An)ut*=1e3;else{for(var Ys=1,Rn=gt[0];Rn<it;Rn=gt[Rn])++Ys;Ys>24&&(ut*=(Ys-24)*10)}return ut-=(it-Ae)/2,st&&(ut/=1+Ae*Ae*1),dn&&(ut/=1+Ae*Ae*1),ut-=(it-Ae)/2,ut};if(An)if(dn){for(var $e=0;$e<Ae;++$e)j[$e]=un+$e;var jt=j,Zs=xt(j)}else var jt=U,Zs=xt(U);else{if(st)for(var $e=0;$e<Ae;++$e)j[$e]=un+$e;var jt=j,Zs=xt(jt)}W._score=Zs;for(var $e=0;$e<Ae;++$e)W._indexes[$e]=jt[$e];W._indexes.len=Ae;const el=new a;return el.target=W.target,el._score=W._score,el._indexes=W._indexes,el},S=($,W,Q)=>{for(var ve=new Set,be=0,Ce=V,we=0,Me=$.spaceSearches,Ae=Me.length,it=0,nt=()=>{for(let dn=it-1;dn>=0;dn--)W._nextBeginningIndexes[X[dn*2+0]]=X[dn*2+1]},Bn=!1,st=0;st<Ae;++st){me[st]=ce;var wn=Me[st];if(Ce=k(wn,W),Q){if(Ce===V)continue;Bn=!0}else if(Ce===V)return nt(),V;var He=st===Ae-1;if(!He){var An=Ce._indexes,ct=!0;for(let $e=0;$e<An.len-1;$e++)if(An[$e+1]-An[$e]!==1){ct=!1;break}if(ct){var gt=An[An.len-1]+1,xi=W._nextBeginningIndexes[gt-1];for(let $e=gt-1;$e>=0&&xi===W._nextBeginningIndexes[$e];$e--)W._nextBeginningIndexes[$e]=gt,X[it*2+0]=$e,X[it*2+1]=xi,it++}}be+=Ce._score/Ae,me[st]=Ce._score/Ae,Ce._indexes[0]<we&&(be-=(we-Ce._indexes[0])*2),we=Ce._indexes[0];for(var ri=0;ri<Ce._indexes.len;++ri)ve.add(Ce._indexes[ri])}if(Q&&!Bn)return V;nt();var un=k($,W,!0);if(un!==V&&un._score>be){if(Q)for(var st=0;st<Ae;++st)me[st]=un._score/Ae;return un}Q&&(Ce=W),Ce._score=be;var st=0;for(let dn of ve)Ce._indexes[st++]=dn;return Ce._indexes.len=st,Ce},I=$=>$.replace(new RegExp("\\p{Script=Latin}+","gu"),W=>W.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),P=$=>{$=I($);for(var W=$.length,Q=$.toLowerCase(),ve=[],be=0,Ce=!1,we=0;we<W;++we){var Me=ve[we]=Q.charCodeAt(we);if(Me===32){Ce=!0;continue}var Ae=Me>=97&&Me<=122?Me-97:Me>=48&&Me<=57?26:Me<=127?30:31;be|=1<<Ae}return{lowerCodes:ve,bitflags:be,containsSpace:Ce,_lower:Q}},L=$=>{for(var W=$.length,Q=[],ve=0,be=!1,Ce=!1,we=0;we<W;++we){var Me=$.charCodeAt(we),Ae=Me>=65&&Me<=90,it=Ae||Me>=97&&Me<=122||Me>=48&&Me<=57,nt=Ae&&!be||!Ce||!it;be=Ae,Ce=it,nt&&(Q[ve++]=we)}return Q},O=$=>{$=I($);for(var W=$.length,Q=L($),ve=[],be=Q[0],Ce=0,we=0;we<W;++we)be>we?ve[we]=be:(be=Q[++Ce],ve[we]=be===void 0?W:be);return ve},J=new Map,F=new Map,j=[],U=[],X=[],le=[],me=[],Ie=[],ze=[],ke=($,W)=>{var Q=$[W];if(Q!==void 0)return Q;if(typeof W=="function")return W($);var ve=W;Array.isArray(W)||(ve=W.split("."));for(var be=ve.length,Ce=-1;$&&++Ce<be;)$=$[ve[Ce]];return $},D=$=>typeof $=="object"&&typeof $._bitflags=="number",oe=1/0,ce=-oe,Ne=[];Ne.total=0;var V=null,se=o(""),pe=$=>{var W=[],Q=0,ve={},be=Ce=>{for(var we=0,Me=W[we],Ae=1;Ae<Q;){var it=Ae+1;we=Ae,it<Q&&W[it]._score<W[Ae]._score&&(we=it),W[we-1>>1]=W[we],Ae=1+(we<<1)}for(var nt=we-1>>1;we>0&&Me._score<W[nt]._score;nt=(we=nt)-1>>1)W[we]=W[nt];W[we]=Me};return ve.add=Ce=>{var we=Q;W[Q++]=Ce;for(var Me=we-1>>1;we>0&&Ce._score<W[Me]._score;Me=(we=Me)-1>>1)W[we]=W[Me];W[we]=Ce},ve.poll=Ce=>{if(Q!==0){var we=W[0];return W[0]=W[--Q],be(),we}},ve.peek=Ce=>{if(Q!==0)return W[0]},ve.replaceTop=Ce=>{W[0]=Ce,be()},ve},de=pe();return{single:e,go:n,prepare:o,cleanup:r}})}(Jm)),Jm.exports}var bX=pX();const wX=ap(bX);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2023, Koala Interactive SAS
 * For licensing, see https://github.com/koala-interactive/is-emoji-supported/blob/master/LICENSE.md
 */function yX(i){const t=_X();/* istanbul ignore next -- @preserve */if(!t)return!1;const e=25,n=20,s=Math.floor(e/2);t.font=s+"px Arial, Sans-Serif",t.textBaseline="top",t.canvas.width=n*2,t.canvas.height=e,t.clearRect(0,0,n*2,e),t.fillStyle="#FF0000",t.fillText(i,0,22),t.fillStyle="#0000FF",t.fillText(i,n,22);const o=t.getImageData(0,0,n,e).data,r=o.length;let a=0;for(;a<r&&!o[a+3];a+=4);/* istanbul ignore next -- @preserve */if(a>=r)return!1;const l=n+a/4%n,u=Math.floor(a/4/n),h=t.getImageData(l,u,1,1).data;/* istanbul ignore next -- @preserve */if(o[a]!==h[0]||o[a+2]!==h[2])return!1;/* istanbul ignore next -- @preserve */return!(t.measureText(i).width>=n)}function _X(){try{return document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{/* istanbul ignore next -- @preserve */return null}}const vX={0:"default",1:"light",2:"medium-light",3:"medium",4:"medium-dark",5:"dark"},CX={"🫩":16,"🫨":15.1,"🫠":14,"😶‍🌫️":13.1,"🧑‍💻":12.1,"🥰":11,"🤪":5,"⚕️":4,"🤣":3,"👋🏽":2,"😀":1,"😐":.7,"😂":.6},F2=24,op=class op extends te{static get pluginName(){return"EmojiUtils"}static get isOfficialPlugin(){return!0}isEmojiSupported(t,e,n){return t.version<=e?this.hasZwj(t.emoji)?this.isEmojiZwjSupported(t,n):!0:!1}getEmojiSupportedVersionByOs(){for(const[t,e]of Object.entries(CX))if(op._isEmojiSupported(t))return e;return 0}hasZwj(t){return t.includes("‍")}isEmojiZwjSupported(t,e){return this.getNodeWidth(e,t.emoji)<F2*1.8}getNodeWidth(t,e){const n=document.createElement("span");n.textContent=e,t.appendChild(n);const s=n.offsetWidth;return t.removeChild(n),s}createEmojiWidthTestingContainer(){const t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.whiteSpace="nowrap",t.style.fontSize=F2+"px",t}normalizeEmojiSkinTone(t){const e={...t,skins:{default:t.emoji}};return t.skins&&t.skins.forEach(n=>{const s=vX[n.tone];e.skins[s]=n.emoji}),e}isEmojiCategoryAllowed(t){return t.group!==2}};w(op,"_isEmojiSupported",yX);let uv=op;const TX="https://cdn.ckeditor.com/ckeditor5/data/emoji/{version}/en.json",xX=16,fc=class fc extends te{constructor(e){super(e);w(this,"_items");w(this,"_url");w(this,"_repositoryPromise");e.config.define("emoji",{version:void 0,skinTone:"default",definitionsUrl:void 0,useCustomFont:!1}),this._url=this._getUrl(),this._repositoryPromise=new Promise(n=>{this._repositoryPromiseResolveCallback=n}),this._items=null}static get requires(){return[uv]}static get pluginName(){return"EmojiRepository"}static get isOfficialPlugin(){return!0}async init(){return this._warnAboutCdnUse(),await this._loadAndCacheEmoji(),this._items=this._getItems(),this._items?this._repositoryPromiseResolveCallback(!0):(Ze("emoji-repository-empty"),this._repositoryPromiseResolveCallback(!1))}getEmojiByQuery(e){return this._items?e.split(/\s/).filter(Boolean).some(o=>o.length>=2)?wX.go(e,this._items,{threshold:.6,keys:["emoticon","annotation",o=>e.split(/\s/).filter(Boolean).flatMap(l=>{var u;return(u=o.tags)==null?void 0:u.filter(h=>h.startsWith(l))}).join()]}).map(o=>o.obj):[]:[]}getEmojiCategories(){const e=this._getItems();if(!e)return[];const{t:n}=this.editor.locale,s=[{title:n("Smileys & Expressions"),icon:"😄",groupId:0},{title:n("Gestures & People"),icon:"👋",groupId:1},{title:n("Animals & Nature"),icon:"🐻",groupId:3},{title:n("Food & Drinks"),icon:"🍎",groupId:4},{title:n("Travel & Places"),icon:"🚘",groupId:5},{title:n("Activities"),icon:"🏀",groupId:6},{title:n("Objects"),icon:"💡",groupId:7},{title:n("Symbols"),icon:"🔵",groupId:8},{title:n("Flags"),icon:"🏁",groupId:9}],o=m9(e,r=>r.group);return s.map(r=>({...r,items:o[r.groupId]}))}getSkinTones(){const{t:e}=this.editor.locale;return[{id:"default",icon:"👋",tooltip:e("Default skin tone")},{id:"light",icon:"👋🏻",tooltip:e("Light skin tone")},{id:"medium-light",icon:"👋🏼",tooltip:e("Medium Light skin tone")},{id:"medium",icon:"👋🏽",tooltip:e("Medium skin tone")},{id:"medium-dark",icon:"👋🏾",tooltip:e("Medium Dark skin tone")},{id:"dark",icon:"👋🏿",tooltip:e("Dark skin tone")}]}isReady(){return this._repositoryPromise}_getUrl(){const{definitionsUrl:e,version:n}=this.editor.config.get("emoji");if(!e||e==="cdn"){const s=n||xX,o=new URL(TX.replace("{version}",s.toString()));return o.searchParams.set("editorVersion",m5),o}return n&&Ze("emoji-repository-redundant-version"),new URL(e)}_warnAboutCdnUse(){const e=this.editor,n=e.config.get("emoji"),s=e.config.get("licenseKey"),o=window[Symbol.for("cke distribution")];s!=="GPL"&&o!=="cloud"&&(n&&n.definitionsUrl||Ze("emoji-repository-cdn-use"))}_getItems(){const e=fc._results[this._url.href];return e&&e.length?e:null}async _loadAndCacheEmoji(){if(fc._results[this._url.href])return;const e=await fetch(this._url,{cache:"force-cache"}).then(n=>n.ok?n.json():[]).catch(()=>[]);fc._results[this._url.href]=this._normalizeEmoji(e)}_normalizeEmoji(e){const n=this.editor,s=n.config.get("emoji.useCustomFont"),o=n.plugins.get("EmojiUtils"),r=e.filter(h=>o.isEmojiCategoryAllowed(h));if(s)return r.map(h=>o.normalizeEmojiSkinTone(h));const a=o.getEmojiSupportedVersionByOs(),l=o.createEmojiWidthTestingContainer();document.body.appendChild(l);const u=r.filter(h=>o.isEmojiSupported(h,a,l)).map(h=>o.normalizeEmojiSkinTone(h));return l.remove(),u}};w(fc,"_results",{});let Lg=fc;const Xl=":",a_=":__EMOJI_SHOW_ALL:",l_=":__EMOJI_HINT:";class kX extends te{constructor(e){super(e);w(this,"_emojiDropdownLimit");w(this,"_skinTone");this.editor.config.define("emoji",{dropdownLimit:6}),this._emojiDropdownLimit=e.config.get("emoji.dropdownLimit"),this._skinTone=e.config.get("emoji.skinTone"),this._setupMentionConfiguration(e)}static get requires(){return[Lg,o1,"Mention"]}static get pluginName(){return"EmojiMention"}static get isOfficialPlugin(){return!0}_setupMentionConfiguration(e){const n=e.config.get("mergeFields.prefix"),s=e.config.get("mention.feeds"),o=n?n[0]===Xl:!1;if(s.filter(u=>!u._isEmojiMarker).some(u=>u.marker===Xl)||o){Ze("emoji-config-marker-already-used",{marker:Xl});return}if(s.some(u=>u._isEmojiMarker))return;const l={_isEmojiMarker:!0,marker:Xl,dropdownLimit:this._emojiDropdownLimit,itemRenderer:this._customItemRendererFactory(this.editor.t),feed:this._queryEmojiCallbackFactory()};this.editor.config.set("mention.feeds",[...s,l])}async init(){const e=this.editor;this.emojiPickerPlugin=e.plugins.has("EmojiPicker")?e.plugins.get("EmojiPicker"):null,this.emojiRepositoryPlugin=e.plugins.get("EmojiRepository"),this._isEmojiRepositoryAvailable=await this.emojiRepositoryPlugin.isReady(),this._isEmojiRepositoryAvailable&&e.once("ready",this._overrideMentionExecuteListener.bind(this))}_customItemRendererFactory(e){return n=>{const s=document.createElement("button");s.classList.add("ck"),s.classList.add("ck-button"),s.classList.add("ck-button_with-text"),s.id=`mention-list-item-id${n.id.slice(0,-1)}`,s.type="button",s.tabIndex=-1;const o=document.createElement("span");return o.classList.add("ck"),o.classList.add("ck-button__label"),s.appendChild(o),n.id===l_?(s.classList.add("ck-list-item-button"),s.classList.add("ck-disabled"),o.textContent=e("Keep on typing to see the emoji.")):n.id===a_?o.textContent=e("Show all emoji..."):o.textContent=`${n.text} ${n.id}`,s}}_overrideMentionExecuteListener(){const e=this.editor;e.commands.get("mention").on("execute",(n,s)=>{const o=s[0];if(o.marker===Xl&&(n.stop(),o.mention.id!==l_))if(o.mention.id===a_){const r=[...o.range.getItems()].filter(l=>l.is("$textProxy")).map(l=>l.data).reduce((l,u)=>l+u,"");e.model.change(l=>{e.model.deleteContent(l.createSelection(o.range))});const a=this.emojiPickerPlugin;a.showUI(r.slice(1)),setTimeout(()=>{a.emojiPickerView.focus()})}else e.execute("insertText",{text:o.mention.text,range:o.range})},{priority:"high"})}_queryEmojiCallbackFactory(){return e=>{if(e.startsWith(" "))return[];if(e.startsWith(Xl))return[];if(!this._isEmojiRepositoryAvailable)return[];const n=this.emojiRepositoryPlugin.getEmojiByQuery(e).map(o=>{let r=o.skins[this._skinTone]||o.skins.default;return this.emojiPickerPlugin&&(r=o.skins[this.emojiPickerPlugin.skinTone]||o.skins.default),{id:`:${o.annotation}:`,text:r}});if(!this.emojiPickerPlugin)return n.slice(0,this._emojiDropdownLimit);const s={id:e.length>1?a_:l_};return[...n.slice(0,this._emojiDropdownLimit-1),s]}}}class EX extends Ge{refresh(){const e=this.editor.model,n=e.schema,s=e.document.selection;this.isEnabled=n.checkChild(s.getFirstPosition(),"$text")}execute(t=""){this.editor.plugins.get("EmojiPicker").showUI(t)}}class SX extends fe{constructor(e,{categoryName:n,emojiCategories:s,getEmojiByQuery:o,skinTone:r}){super(e);w(this,"tiles");w(this,"focusTracker");w(this,"keystrokes");w(this,"emojiCategories");w(this,"cachedTiles");w(this,"_getEmojiByQuery");this.set("isEmpty",!0),this.set("categoryName",n),this.set("skinTone",r),this.tiles=this.createCollection(),this.cachedTiles=this.createCollection(),this.focusTracker=new yt,this.keystrokes=new Ot,this._getEmojiByQuery=o,this.emojiCategories=s;const a=this.bindTemplate;this.setTemplate({tag:"div",children:[{tag:"div",attributes:{role:"grid",class:["ck","ck-emoji__grid"]},children:this.tiles}],attributes:{role:"tabpanel",class:["ck","ck-emoji__tiles",a.if("isEmpty","ck-hidden",l=>l)]}}),Q0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>he.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy(),this.focusTracker.destroy()}focus(){const e=this.tiles.first;e&&e.focus()}filter(e){const{matchingItems:n,allItems:s}=e?this._getItemsByQuery(e.source):this._getItemsByCategory();return this._updateGrid(n),this.set("isEmpty",n.length===0),{resultsCount:n.length,totalItemsCount:s.length}}_getItemsByQuery(e){return{matchingItems:this._getEmojiByQuery(e),allItems:this.emojiCategories.flatMap(n=>n.items)}}_getItemsByCategory(){const e=this.emojiCategories.find(s=>s.title===this.categoryName),{items:n}=e;return{matchingItems:n,allItems:n}}_updateGrid(e){[...this.tiles].forEach(n=>{this.focusTracker.remove(n),this.tiles.remove(n)}),e.map(n=>{const s=n.skins[this.skinTone]||n.skins.default;return this.cachedTiles.get(s)||this._createTile(s,n.annotation)}).forEach(n=>{this.tiles.add(n),this.focusTracker.add(n)})}_createTile(e,n){const s=new xe(this.locale);return s.viewUid=e,s.extendTemplate({attributes:{class:["ck-emoji__tile"]}}),s.set({label:e,tooltip:n,withText:!0,ariaLabel:n,ariaLabelledBy:void 0}),s.on("execute",()=>{this.fire("execute",{name:n,emoji:e})}),this.cachedTiles.add(s),s}}class AX extends fe{constructor(e,{emojiCategories:n,categoryName:s}){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"focusCycler");w(this,"buttonViews");this.buttonViews=this.createCollection(n.map(o=>this._createCategoryButton(o))),this.focusTracker=new yt,this.keystrokes=new Ot,this.focusCycler=new cn({focusables:this.buttonViews,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__categories-list"],role:"tablist"},children:this.buttonViews}),this.on("change:categoryName",(o,r,a,l)=>{const u=this.buttonViews.find(m=>m.tooltip===l);u&&(u.isOn=!1);const h=this.buttonViews.find(m=>m.tooltip===a);h.isOn=!0}),this.set("categoryName",s)}render(){super.render(),this.buttonViews.forEach(e=>{this.focusTracker.add(e)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),this.buttonViews.destroy()}focus(){this.buttonViews.first.focus()}enableCategories(){this.buttonViews.forEach(e=>{e.isEnabled=!0})}disableCategories(){this.buttonViews.forEach(e=>{e.set({class:"",isEnabled:!1,isOn:!1})})}_createCategoryButton(e){const n=new xe,s=n.bindTemplate;return n.extendTemplate({attributes:{"aria-selected":s.to("isOn",o=>o.toString()),class:["ck-emoji__category-item"]}}),n.set({ariaLabel:e.title,label:e.icon,role:"tab",tooltip:e.title,withText:!0,ariaLabelledBy:void 0}),n.on("execute",()=>{this.categoryName=e.title}),n.on("change:isEnabled",()=>{n.isEnabled&&n.tooltip===this.categoryName&&(n.isOn=!0)}),n}}class RX extends fe{constructor(e,{gridView:n,resultsView:s}){super(e);w(this,"inputView");w(this,"gridView");this.gridView=n;const o=e.t;this.inputView=new yY(this.locale,{queryView:{label:o("Find an emoji (min. 2 characters)"),creator:ti},filteredView:this.gridView,infoView:{instance:s}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search"],tabindex:"-1"},children:[this.inputView.queryView]}),this.inputView.delegate("search").to(this)}destroy(){super.destroy(),this.inputView.destroy()}search(e){const n=e?new RegExp(k0(e),"ig"):null,s=this.gridView.filter(n);this.inputView.fire("search",{query:e,...s})}setInputValue(e){e?this.inputView.queryView.fieldView.value=e:this.inputView.queryView.fieldView.reset()}getInputValue(){return this.inputView.queryView.fieldView.element.value}focus(){this.inputView.focus()}}class IX extends fe{constructor(e,{skinTone:n,skinTones:s}){super(e);w(this,"dropdownView");w(this,"_skinTones");this.set("skinTone",n),this._skinTones=s;const o=e.t,r=o("Select skin tone"),a=ii(e),l=new En;for(const{id:u,icon:h,tooltip:m}of this._skinTones){const p={type:"button",model:new La({value:u,label:h,ariaLabel:m,tooltip:m,tooltipPosition:"e",role:"menuitemradio",withText:!0,ariaLabelledBy:void 0})};p.model.bind("isOn").to(this,"skinTone",v=>v===u),l.add(p)}Za(a,l,{ariaLabel:r,role:"menu"}),a.buttonView.set({label:this._getSkinTone().icon,ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),this.dropdownView=a,this.listenTo(a,"execute",u=>{this.skinTone=u.source.value}),a.buttonView.bind("label").to(this,"skinTone",()=>this._getSkinTone().icon),a.buttonView.bind("ariaLabel").to(this,"skinTone",()=>`${this._getSkinTone().tooltip}, ${r}`),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__skin-tone"]},children:[a]})}focus(){this.dropdownView.buttonView.focus()}_getSkinTone(){return this._skinTones.find(e=>e.id===this.skinTone)}}class PX extends fe{constructor(e,{emojiCategories:n,getEmojiByQuery:s,skinTone:o,skinTones:r}){super(e);w(this,"items");w(this,"focusTracker");w(this,"keystrokes");w(this,"focusCycler");w(this,"searchView");w(this,"toneView");w(this,"categoriesView");w(this,"gridView");w(this,"infoView");const a=n[0].title;this.gridView=new SX(e,{categoryName:a,emojiCategories:n,getEmojiByQuery:s,skinTone:o}),this.infoView=new yN,this.searchView=new RX(e,{gridView:this.gridView,resultsView:this.infoView}),this.categoriesView=new AX(e,{emojiCategories:n,categoryName:a}),this.toneView=new IX(e,{skinTone:o,skinTones:r}),this.items=this.createCollection([this.searchView,this.toneView,this.categoriesView,this.gridView,this.infoView]),this.focusTracker=new yt,this.keystrokes=new Ot,this.focusCycler=new cn({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[{tag:"div",children:[this.searchView,this.toneView],attributes:{class:["ck","ck-emoji__search"]}},this.categoriesView,this.gridView,{tag:"div",children:[this.infoView],attributes:{class:["ck","ck-search__results"]}}],attributes:{tabindex:"-1",class:["ck","ck-emoji","ck-search"]}}),this._setupEventListeners()}render(){super.render(),this.focusTracker.add(this.searchView.element),this.focusTracker.add(this.toneView.element),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.focusTracker.add(this.infoView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.searchView.focus()}_setupEventListeners(){const e=this.locale.t;this.searchView.on("search",(n,s)=>{s.query?this.categoriesView.disableCategories():this.categoriesView.enableCategories()}),this.searchView.on("search",(n,s)=>{s.query.length===1?this.infoView.set({primaryText:e("Keep on typing to see the emoji."),secondaryText:e("The query must contain at least two characters."),isVisible:!0}):s.resultsCount?this.infoView.set({isVisible:!1}):this.infoView.set({primaryText:e('No emojis were found matching "%0".',s.query),secondaryText:e("Please try a different phrase or check the spelling."),isVisible:!0})}),this.searchView.on("search",()=>{this.fire("update"),this.gridView.element.scrollTo(0,0)}),this.categoriesView.on("change:categoryName",(n,s,o)=>{this.gridView.categoryName=o,this.searchView.search("")}),this.toneView.on("change:skinTone",(n,s,o)=>{this.gridView.skinTone=o,this.searchView.search(this.searchView.getInputValue())})}}class MX extends fe{constructor(e){super(e);w(this,"backButtonView");w(this,"focusTracker",new yt);w(this,"keystrokes",new Ot);w(this,"children");w(this,"_focusables",new Sn);w(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.children=this.createCollection([this._createHeaderView()]),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form","ck-emoji-picker-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),[...this.children.filter(Oc),this.backButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element),eN(n)&&this._focusCycler.chain(n.focusCycler)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:ja,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Emoji picker")});return n.children.add(this.backButtonView,0),n}}const mr="emoji-picker";class VX extends te{static get requires(){return[Lg,as,xc,o1]}static get pluginName(){return"EmojiPicker"}static get isOfficialPlugin(){return!0}async init(){const t=this.editor;if(this.balloonPlugin=t.plugins.get("ContextualBalloon"),this.emojiRepositoryPlugin=t.plugins.get("EmojiRepository"),!await this.emojiRepositoryPlugin.isReady())return;const e=new EX(t);t.commands.add("emoji",e),t.ui.componentFactory.add("emoji",()=>{const n=this._createButton(xe,e);return n.set({tooltip:!0}),n}),t.ui.componentFactory.add("menuBar:emoji",()=>this._createButton(Jn,e)),this._setupConversion()}destroy(){super.destroy(),this.emojiPickerView&&this.emojiPickerView.destroy()}get skinTone(){return this.emojiPickerView?this.emojiPickerView.gridView.skinTone:this.editor.config.get("emoji.skinTone")}showUI(t=""){this._showFakeVisualSelection(),this.emojiPickerView||(this.emojiPickerView=this._createEmojiPickerView()),t&&this.emojiPickerView.searchView.setInputValue(t),this.emojiPickerView.searchView.search(t),this.emojiPickerFormView||(this.emojiPickerFormView=this._createEmojiPickerFormView()),this.balloonPlugin.hasView(this.emojiPickerFormView)||(this.emojiPickerFormView.backButtonView.isVisible=!!this.balloonPlugin.visibleView,this.balloonPlugin.add({view:this.emojiPickerFormView,position:this._getBalloonPositionData(),balloonClassName:"ck-emoji-picker-balloon"})),this.emojiPickerView.focus()}_createButton(t,e){const n=new t(this.editor.locale),s=this.editor.locale.t;return n.bind("isEnabled").to(e,"isEnabled"),n.set({label:s("Emoji"),icon:Lj,isToggleable:!0}),n.on("execute",()=>{this.editor.editing.view.scrollToTheSelection(),this.showUI()}),n}_createEmojiPickerView(){const t=new PX(this.editor.locale,{emojiCategories:this.emojiRepositoryPlugin.getEmojiCategories(),skinTone:this.editor.config.get("emoji.skinTone"),skinTones:this.emojiRepositoryPlugin.getSkinTones(),getEmojiByQuery:e=>this.emojiRepositoryPlugin.getEmojiByQuery(e)});return this.listenTo(t.gridView,"execute",(e,n)=>{const s=this.editor,o=n.emoji;this._hideUI(),s.execute("insertText",{text:o})}),t}_createEmojiPickerFormView(){const t=new MX(this.editor.locale);return t.children.add(this.emojiPickerView),this.listenTo(this.emojiPickerView,"update",()=>{this.balloonPlugin.visibleView===t&&this.balloonPlugin.updatePosition()}),this.listenTo(t,"cancel",()=>{this._hideUI()}),t.keystrokes.set("Esc",(e,n)=>{this._hideUI(),n()}),Uo({emitter:t,contextElements:[this.balloonPlugin.view.element],callback:()=>{this._hideUI(!1)},activator:()=>this.balloonPlugin.visibleView===t}),t}_hideUI(t=!0){this.balloonPlugin.remove(this.emojiPickerFormView),this.emojiPickerView.searchView.setInputValue(""),t&&this.editor.editing.view.focus(),this._hideFakeVisualSelection()}_setupConversion(){const t=this.editor;t.conversion.for("editingDowncast").markerToHighlight({model:mr,view:{classes:["ck-fake-emoji-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:mr,view:(e,{writer:n})=>{if(!e.markerRange.isCollapsed)return null;const s=n.createUIElement("span");return n.addClass(["ck-fake-emoji-selection","ck-fake-emoji-selection_collapsed"],s),s}})}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document;return{target:()=>t.domConverter.viewRangeToDom(e.selection.getFirstRange())}}_showFakeVisualSelection(){const t=this.editor.model;t.change(e=>{const n=t.document.selection.getFirstRange();if(t.markers.has(mr))e.updateMarker(mr,{range:n});else if(n.start.isAtEnd){const s=n.start.getLastMatchingPosition(({item:o})=>!t.schema.isContent(o),{boundaries:n});e.addMarker(mr,{usingOperation:!1,affectsData:!1,range:e.createRange(s,n.end)})}else e.addMarker(mr,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(mr)&&t.change(e=>{e.removeMarker(mr)})}}class NX extends te{static get requires(){return[kX,VX]}static get pluginName(){return"Emoji"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class OX extends Ge{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!U2(t.schema,n))do if(n=n.parent,!n)return;while(!U2(t.schema,n));t.change(s=>{s.setSelection(n,"in")})}}function U2(i,t){return i.isLimit(t)&&(i.checkChild(t,"$text")||i.checkChild(t,"paragraph"))}const DX=R0("Ctrl+A");class LX extends te{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,s=t.editing.view.document;t.commands.add("selectAll",new OX(t)),this.listenTo(s,"keydown",(o,r)=>{Cc(r)===DX&&(t.execute("selectAll"),r.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}class BX extends te{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(xe);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Jn))}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("selectAll"),o=new t(e.locale),r=n.t;return o.set({label:r("Select all"),icon:aK,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),o}}class FX extends te{static get requires(){return[LX,BX]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class UN extends Ge{constructor(e){super(e);w(this,"_stack",[]);w(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(n,s)=>{s[1]={...s[1]};const o=s[1];o.batchType||(o.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(n,s)=>{s[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const n=this.editor.model.document.selection,s={ranges:n.hasOwnRange?Array.from(n.getRanges()):[],isBackward:n.isBackward};this._stack.push({batch:e,selection:s}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,n,s){const o=this.editor.model,r=o.document,a=[],l=e.map(h=>h.getTransformedByOperations(s)),u=l.flat();for(const h of l){const m=h.filter(p=>p.root!=r.graveyard).filter(p=>!zX(p,u));m.length&&(UX(m),a.push(m[0]))}a.length&&o.change(h=>{h.setSelection(a,{backward:n})})}_undo(e,n){const s=this.editor.model,o=s.document;this._createdBatches.add(n);const r=e.operations.slice().filter(a=>a.isDocumentOperation);r.reverse();for(const a of r){const l=a.baseVersion+1,u=Array.from(o.history.getOperations(l)),m=KG([a.getReversed()],u,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let p of m){const v=p.affectedSelectable;v&&!s.canEditAt(v)&&(p=new pn(p.baseVersion)),n.addOperation(p),s.applyOperation(p),o.history.setOperationAsUndone(a,p)}}}}function UX(i){i.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<i.length;t++){const n=i[t-1].getJoined(i[t],!0);n&&(t--,i.splice(t,2,n))}}function zX(i,t){return t.some(e=>e!==i&&e.containsRange(i,!0))}class HX extends UN{execute(t=null){const e=t?this._stack.findIndex(o=>o.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(n.batch,s);const o=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,o)}),this.fire("revert",n.batch,s),this.refresh()}}class WX extends UN{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const s=t.batch.operations[t.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(s);this._restoreSelection(t.selection.ranges,t.selection.isBackward,o),this._undo(t.batch,e)}),this.refresh()}}class qX extends te{constructor(){super(...arguments);w(this,"_undoCommand");w(this,"_redoCommand");w(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._undoCommand=new HX(e),this._redoCommand=new WX(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(s,o)=>{const r=o[0];if(!r.isDocumentOperation)return;const a=r.batch,l=this._redoCommand.createdBatches.has(a),u=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(l?this._undoCommand.addBatch(a):u||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(s,o,r)=>{this._redoCommand.addBatch(r)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Undo"),keystroke:"CTRL+Z"},{label:n("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class GX extends te{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?PA:RA,o=e.uiLanguageDirection=="ltr"?RA:PA;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",o)}_addButtonsToFactory(t,e,n,s){const o=this.editor;o.ui.componentFactory.add(t,()=>{const r=this._createButton(xe,t,e,n,s);return r.set({tooltip:!0}),r}),o.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Jn,t,e,n,s))}_createButton(t,e,n,s,o){const r=this.editor,a=r.locale,l=r.commands.get(e),u=new t(a);return u.set({label:n,icon:o,keystroke:s}),u.bind("isEnabled").to(l,"isEnabled"),this.listenTo(u,"execute",()=>{r.execute(e),r.editing.view.focus()}),u}}class f1 extends te{static get requires(){return[qX,GX]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class $X extends te{static get requires(){return[iZ,h1,PN,FX,pJ,o1,f1]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Lp extends Ge{constructor(e,n){super(e);w(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=n.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,o=n.document.selection,r=e.value,a=e.batch,l=u=>{if(o.isCollapsed)r?u.setSelectionAttribute(this.attributeKey,r):u.removeSelectionAttribute(this.attributeKey);else{const h=n.schema.getValidRanges(o.getRanges(),this.attributeKey);for(const m of h)r?u.setAttribute(this.attributeKey,r,m):u.removeAttribute(this.attributeKey,m)}};a?n.enqueueChange(a,u=>{l(u)}):n.change(u=>{l(u)})}}const fi="fontSize",mi="fontFamily",Fs="fontColor",To="fontBackgroundColor";function zN(i,t){const e={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]=n.view,n.upcastAlso&&(e.upcastAlso[n.model]=n.upcastAlso);return e}function HN(i){return t=>KX(t.getStyle(i))}function WN(i){return(t,{writer:e})=>e.createAttributeElement("span",{style:`${i}:${t}`},{priority:7})}function jX({dropdownView:i,colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a}){const l=i.locale,u=new n1(l,{colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a});return i.colorSelectorView=u,i.panelView.children.add(u),u}function KX(i){return i.replace(/\s/g,"")}class ZX extends Lp{constructor(t){super(t,mi)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function qN(i){return i.map(YX).filter(t=>t!==void 0)}function YX(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return JX(i)}function JX(i){const t=i.replace(/"|'/g,"").split(","),e=t[0],n=t.map(XX).join(", ");return{title:e,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function XX(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}class QX extends te{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(mi,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:mi}),t.model.schema.setAttributeProperties(mi,{isFormatting:!0,copyOnEnter:!0});const e=qN(t.config.get("fontFamily.options")).filter(s=>s.model),n=zN(mi,e);t.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(n),t.commands.add(mi,new ZX(t))}_prepareAnyValueConverters(){const t=this.editor;t.conversion.for("downcast").attributeToElement({model:mi,view:(e,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),t.conversion.for("upcast").elementToAttribute({model:{key:mi,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:mi,value:e=>e.getAttribute("face")}})}}class eQ extends te{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(mi),o=e("Font Family"),r=tQ(n,s);t.ui.componentFactory.add(mi,a=>{const l=ii(a);return Za(l,r,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:kA,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",u=>{t.execute(u.source.commandName,{value:u.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${mi}`,a=>{const l=new ys(a);l.buttonView.set({label:o,icon:kA}),l.bind("isEnabled").to(s);const u=new kc(a);for(const h of r){const m=new Lc(a,l),p=new Jn(a);p.set({role:"menuitemradio",isToggleable:!0}),p.bind(...Object.keys(h.model)).to(h.model),p.delegate("execute").to(l),p.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),m.children.add(p),u.items.add(m)}return l.panelView.children.add(u),l})}_getLocalizedOptions(){const t=this.editor,e=t.t;return qN(t.config.get(mi).options).map(s=>(s.title==="Default"&&(s.title=e("Default")),s))}}function tQ(i,t){const e=new En;for(const n of i){const s={type:"button",model:new La({commandName:mi,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(t,"value",o=>o===n.model?!0:!o||!n.model?!1:o.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase()),n.view&&typeof n.view!="string"&&n.view.styles&&s.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),e.add(s)}return e}class nQ extends te{static get requires(){return[QX,eQ]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class iQ extends Lp{constructor(t){super(t,fi)}}function m1(i){return i.map(t=>sQ(t)).filter(t=>t!==void 0)}const z2={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function sQ(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&aQ(i))return dv(i);const t=rQ(i);if(t)return dv(t);if(i==="default")return{model:void 0,title:"Default"};if(!lQ(i))return oQ(i)}function oQ(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},dv(i)}function dv(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function rQ(i){return typeof i=="string"?z2[i]:z2[i.model]}function aQ(i){return i.title&&i.model&&i.view}function lQ(i){let t;if(typeof i=="object")if(i.model)t=parseFloat(i.model);else throw new N("font-size-invalid-definition",null,i);else t=parseFloat(i);return isNaN(t)}const H2=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class cQ extends te{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(fi,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:fi}),t.model.schema.setAttributeProperties(fi,{isFormatting:!0,copyOnEnter:!0});const e=t.config.get("fontSize.supportAllValues"),n=m1(this.editor.config.get("fontSize.options")).filter(o=>o.model),s=zN(fi,n);e?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(s),t.commands.add(fi,new iQ(t))}_prepareAnyValueConverters(t){const e=this.editor,n=t.model.values.filter(s=>!Ip(String(s))&&!CV(String(s)));if(n.length)throw new N("font-size-invalid-use-of-named-presets",null,{presets:n});e.conversion.for("downcast").attributeToElement({model:fi,view:(s,{writer:o})=>{if(s)return o.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:fi,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:fi,value:e=>{const n=e.getAttribute("size"),s=n[0]==="-"||n[0]==="+";let o=parseInt(n,10);s&&(o=3+o);const r=H2.length-1,a=Math.min(Math.max(o,0),r);return H2[a]}}})}}class uQ extends te{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(fi),o=e("Font Size"),r=dQ(n,s);t.ui.componentFactory.add(fi,a=>{const l=ii(a);return Za(l,r,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:EA,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",u=>{t.execute(u.source.commandName,{value:u.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${fi}`,a=>{const l=new ys(a);l.buttonView.set({label:o,icon:EA}),l.bind("isEnabled").to(s);const u=new kc(a);for(const h of r){const m=new Lc(a,l),p=new Jn(a);p.set({role:"menuitemradio",isToggleable:!0}),p.bind(...Object.keys(h.model)).to(h.model),p.delegate("execute").to(l),p.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),m.children.add(p),u.items.add(m)}return l.panelView.children.add(u),l})}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return m1(t.config.get(fi).options).map(o=>{const r=n[o.title];return r&&r!=o.title&&(o=Object.assign({},o,{title:r})),o})}}function dQ(i,t){const e=new En;for(const n of i){const s={type:"button",model:new La({commandName:fi,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&s.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&s.model.set("class",`${s.model.class} ${n.view.classes}`)),s.model.bind("isOn").to(t,"value",o=>o===n.model),e.add(s)}return e}class hQ extends te{static get requires(){return[cQ,uQ]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(t){return m1(t)}}class fQ extends Lp{constructor(t){super(t,Fs)}}class mQ extends te{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Fs,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Fs,value:HN("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Fs,value:e=>e.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:Fs,view:WN("color")}),t.commands.add(Fs,new fQ(t)),t.model.schema.extend("$text",{allowAttributes:Fs}),t.model.schema.setAttributeProperties(Fs,{isFormatting:!0,copyOnEnter:!0})}}class GN extends te{constructor(e,{commandName:n,componentName:s,icon:o,dropdownLabel:r}){super(e);w(this,"commandName");w(this,"componentName");w(this,"icon");w(this,"dropdownLabel");w(this,"columns");this.commandName=n,this.componentName=s,this.icon=o,this.dropdownLabel=r,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,n=e.locale,s=n.t,o=e.commands.get(this.commandName),r=e.config.get(this.componentName),a=ah(r.colors),l=rh(n,a),u=r.documentColors,h=r.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,m=>{const p=ii(m);let v=!1;const C=jX({dropdownView:p,colors:l.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:u!==0?s("Document colors"):"",documentColorsCount:u===void 0?this.columns:u,colorPickerViewConfig:h?r.colorPicker||{}:!1});return C.bind("selectedColor").to(o,"value"),p.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),p.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),p.bind("isEnabled").to(o),C.on("execute",(x,k)=>{p.isOpen&&e.execute(this.commandName,{value:k.value,batch:this._undoStepBatch}),k.source!=="colorPicker"&&e.editing.view.focus(),k.source==="colorPickerSaveButton"&&(p.isOpen=!1)}),C.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),C.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(p.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),p.on("change:isOpen",(x,k,S)=>{v||(v=!0,p.colorSelectorView.appendUI()),S&&(u!==0&&C.updateDocumentColors(e.model,this.componentName),C.updateSelectedColors(),C.showColorGridsFragment())}),t1(p,()=>p.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(x=>x.isOn)),p}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,m=>{const p=new ys(m);p.buttonView.set({label:this.dropdownLabel,icon:this.icon}),p.bind("isEnabled").to(o);let v=!1;const C=new n1(m,{colors:l.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:u!==0?s("Document colors"):"",documentColorsCount:u===void 0?this.columns:u,colorPickerViewConfig:!1});return C.bind("selectedColor").to(o,"value"),C.delegate("execute").to(p),C.on("execute",(x,k)=>{e.execute(this.commandName,{value:k.value,batch:this._undoStepBatch}),e.editing.view.focus()}),p.on("change:isOpen",(x,k,S)=>{v||(v=!0,C.appendUI()),S&&(u!==0&&C.updateDocumentColors(e.model,this.componentName),C.updateSelectedColors(),C.showColorGridsFragment())}),p.panelView.children.add(C),p})}}class gQ extends GN{constructor(t){const e=t.locale.t;super(t,{commandName:Fs,componentName:Fs,icon:Uj,dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class pQ extends te{static get requires(){return[mQ,gQ]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class bQ extends Lp{constructor(t){super(t,To)}}class wQ extends te{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(To,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.data.addStyleProcessorRules($0),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:To,value:HN("background-color")}}),t.conversion.for("downcast").attributeToElement({model:To,view:WN("background-color")}),t.commands.add(To,new bQ(t)),t.model.schema.extend("$text",{allowAttributes:To}),t.model.schema.setAttributeProperties(To,{isFormatting:!0,copyOnEnter:!0})}}class yQ extends GN{constructor(t){const e=t.locale.t;super(t,{commandName:To,componentName:To,icon:Fj,dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class _Q extends te{static get requires(){return[wQ,yQ]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class vQ extends Ge{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,n=Ln(e.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&W2(n,t.schema)}execute(t={}){const e=this.editor.model,n=e.document,s=t.selection||n.selection;e.canEditAt(s)&&e.change(o=>{const r=s.getSelectedBlocks();for(const a of r)!a.is("element","paragraph")&&W2(a,e.schema)&&o.rename(a,"paragraph")})}}function W2(i,t){return t.checkChild(i.parent,"paragraph")&&!t.isObject(i)}class CQ extends Ge{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,n=t.attributes;let s=t.position;return e.canEditAt(s)?e.change(o=>{if(s=this._findPositionToInsertParagraph(s,o),!s)return null;const r=o.createElement("paragraph");return n&&e.schema.setAllowedAttributes(r,n,o),e.insertContent(r,s),o.setSelection(r,"in"),o.createPositionAt(r,0)}):null}_findPositionToInsertParagraph(t,e){const n=this.editor.model;if(n.schema.checkChild(t,"paragraph"))return t;const s=n.schema.findAllowedParent(t,"paragraph");if(!s)return null;const o=t.parent,r=n.schema.checkChild(o,"$text");return o.isEmpty||r&&t.isAtEnd?n.createPositionAfter(o):!o.isEmpty&&r&&t.isAtStart?n.createPositionBefore(o):e.split(t,s).position}}const rp=class rp extends te{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new vQ(t)),t.commands.add("insertParagraph",new CQ(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(n,{writer:s})=>!rp.paragraphLikeElements.has(n.name)||n.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};w(rp,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let hv=rp;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function TQ(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function q2(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function $N(i,t){const e=i.plugins.get("ImageUtils"),n=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return o=>e.isInlineImageView(o)?n&&(o.getStyle("display")=="block"||o.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==t?null:s(o):null;function s(o){const r={name:!0};return o.hasAttribute("src")&&(r.attributes=["src"]),r}}function g1(i,t){const e=Ln(t.getSelectedBlocks());return!e||i.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function Bg(i){return i&&i.endsWith("px")?parseInt(i):null}function Fg(i){const t=Bg(i.getStyle("width")),e=Bg(i.getStyle("height"));return!!(t&&e)}const xQ=/^(image|image-inline)$/;class Dn extends te{constructor(){super(...arguments);w(this,"_domEmitter",new(Yn()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},n=null,s=null,o={}){const r=this.editor,a=r.model,l=a.document.selection,u=jN(r,n||l,s);e={...Object.fromEntries(l.getAttributes()),...e};for(const h in e)a.schema.checkAttribute(u,h)||delete e[h];return a.change(h=>{const{setImageSizes:m=!0}=o,p=h.createElement(u,e);return a.insertObject(p,n,null,{setSelection:"on",findOptimalPosition:!n&&u!="imageInline"?"auto":void 0}),p.parent?(m&&this.setImageNaturalSizeAttributes(p),p):null})}setImageNaturalSizeAttributes(e){const n=e.getAttribute("src");n&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(s=>{const o=new he.window.Image;this._domEmitter.listenTo(o,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(s.batch,r=>{r.setAttribute("width",o.naturalWidth,e),r.setAttribute("height",o.naturalHeight,e)}),this._domEmitter.stopListening(o,"load")}),o.src=n}))}getClosestSelectedImageWidget(e){const n=e.getFirstPosition();if(!n)return null;const s=e.getSelectedElement();if(s&&this.isImageWidget(s))return s;let o=n.parent;for(;o;){if(o.is("element")&&this.isImageWidget(o))return o;o=o.parent}return null}getClosestSelectedImageElement(e){const n=e.getSelectedElement();return this.isImage(n)?n:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:xQ})}isImageAllowed(){const n=this.editor.model.document.selection;return kQ(this.editor,n)&&EQ(n)}toImageWidget(e,n,s){return n.setCustomProperty("image",!0,e),c1(e,n,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${s}`:s}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Jt(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const n=this.editor.editing.view;for(const{item:s}of n.createRangeIn(e))if(this.isInlineImageView(s))return s}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function kQ(i,t){if(jN(i,t,null)=="imageBlock"){const n=SQ(t,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function EQ(i){return[...i.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function SQ(i,t){const n=VN(i,t).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function jN(i,t,e){const n=i.model.schema,s=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?e||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":t.is("selection")?g1(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const AQ=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class RQ extends te{constructor(e){super(e);w(this,"_timeoutId");w(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[h1,Dn,f1,Vr]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const o=n.selection.getFirstRange(),r=zt.fromPosition(o.start);r.stickiness="toPrevious";const a=zt.fromPosition(o.end);a.stickiness="toNext",n.once("change:data",()=>{this._embedImageBetweenPositions(r,a),r.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(he.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,n){const s=this.editor,o=new ei(e,n),r=o.getWalker({ignoreElementEnd:!0}),a=Object.fromEntries(s.model.document.selection.getAttributes()),l=this.editor.plugins.get("ImageUtils");let u="";for(const h of r)h.item.is("$textProxy")&&(u+=h.item.data);if(u=u.trim(),!u.match(AQ)){o.detach();return}this._positionToInsert=zt.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!s.commands.get("insertImage").isEnabled){o.detach();return}s.model.change(p=>{this._timeoutId=null,p.remove(o),o.detach();let v;this._positionToInsert.root.rootName!=="$graveyard"&&(v=this._positionToInsert.toPosition()),l.insertImage({...a,src:u},v),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get("Delete").requestUndoOnBackspace()},100)}}class IQ extends Ge{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.model,o=n.getClosestSelectedImageElement(s.document.selection);s.change(r=>{r.setAttribute("alt",t.newValue,o)})}}class PQ extends te{static get requires(){return[Dn]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new IQ(this.editor))}}class MQ extends fe{constructor(e){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"labeledInput");w(this,"backButtonView");w(this,"saveButtonView");w(this,"children");w(this,"_focusables");w(this,"_focusCycler");this.focusTracker=new yt,this.keystrokes=new Ot,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Vn(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Sn,this.keystrokes.set("Esc",(n,s)=>{this.fire("cancel"),s()}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:ja,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createSaveButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Text Alternative")});return n.children.add(this.backButtonView,0),n}_createLabeledInputView(){const e=this.locale.t,n=new sn(this.locale,ti);return n.label=e("Text alternative"),n.class="ck-labeled-field-view_full-width",n}}function VQ(i){const t=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const n=p1(i);t.updatePosition(n)}}function p1(i){const t=i.editing.view,e=Qn.defaultPositions,n=i.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class NQ extends te{constructor(){super(...arguments);w(this,"_balloon");w(this,"_form")}static get requires(){return[as]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,n=e.t;e.ui.componentFactory.add("imageTextAlternative",s=>{const o=e.commands.get("imageTextAlternative"),r=new xe(s);return r.set({label:n("Change image text alternative"),icon:mK,tooltip:!0}),r.bind("isEnabled").to(o,"isEnabled"),r.bind("isOn").to(o,"value",a=>!!a),this.listenTo(r,"execute",()=>{this._showForm()}),r})}_createForm(){const e=this.editor,s=e.editing.view.document,o=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(sh(MQ))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(e.ui,"update",()=>{o.getClosestSelectedImageWidget(s.selection)?this._isVisible&&VQ(e):this._hideForm(!0)}),Uo({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,n=e.commands.get("imageTextAlternative"),s=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:p1(e)}),s.fieldView.value=s.fieldView.element.value=n.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class b1 extends te{static get requires(){return[PQ,NQ]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function OQ(i){const t=(e,n,s)=>{if(!s.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const o=i.findViewImgElement(n.viewItem);if(!o||!s.consumable.test(o,{name:!0}))return;s.consumable.consume(n.viewItem,{name:!0,classes:"image"});const r=s.convertItem(o,n.modelCursor),a=Ln(r.modelRange.getItems());if(!a){s.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n)};return e=>{e.on("element:figure",t)}}function KN(i,t){const e=(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=o.writer,a=o.mapper.toViewElement(s.item),l=i.findViewImgElement(a);s.attributeNewValue===null?(r.removeAttribute("srcset",l),r.removeAttribute("sizes",l)):s.attributeNewValue&&(r.setAttribute("srcset",s.attributeNewValue,l),r.setAttribute("sizes","100vw",l))};return n=>{n.on(`attribute:srcset:${t}`,e)}}function Ug(i,t,e){const n=(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const a=r.writer,l=r.mapper.toViewElement(o.item),u=i.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",u)};return s=>{s.on(`attribute:${e}:${t}`,n)}}class w1 extends Ks{observe(t){this.listenTo(t,"load",(e,n)=>{const s=n.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class DQ extends Ge{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||e==="block"&&Ze("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||e==="inline"&&Ze("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=bn(t.source),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((r,a)=>{const l=n.getSelectedElement();if(typeof r=="string"&&(r={src:r}),a&&l&&s.isImage(l)){const u=this.editor.model.createPositionAfter(l);s.insertImage({...r,...o},u,t.imageType)}else t.breakBlock?s.insertImage({...r,...o},n.getFirstPosition(),t.imageType):s.insertImage({...r,...o},null,t.imageType)})}}class LQ extends Ge{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",t.source,e),this.cleanupImage(s,e),n.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class ZN extends te{static get requires(){return[Dn]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(w1),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new DQ(t),s=new LQ(t);t.commands.add("insertImage",n),t.commands.add("replaceImageSource",s),t.commands.add("imageInsert",n)}}class YN extends te{static get requires(){return[Dn]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=t==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:r=>Fg(r)?Bg(r.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:r=>Fg(r)?Bg(r.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(r=>{o(r,"width","width",!0,!0),o(r,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(r=>{o(r,"width","width",!1),o(r,"height","height",!1)}),e.conversion.for("upcast").add(r=>{r.on("element:img",(a,l,u)=>{const h=l.viewItem.getAttribute("width"),m=l.viewItem.getAttribute("height");h&&m&&u.consumable.consume(l.viewItem,{styles:["aspect-ratio"]})})});function o(r,a,l,u,h=!1){r.on(`attribute:${a}:${t}`,(m,p,v)=>{if(!v.consumable.consume(p.item,m.name))return;const C=v.writer,x=v.mapper.toViewElement(p.item),k=n.findViewImgElement(x);p.attributeNewValue!==null?C.setAttribute(l,p.attributeNewValue,k):C.removeAttribute(l,k);const S=p.item.getAttribute("width"),I=p.item.getAttribute("height"),P=S&&I;if(P&&h&&C.setAttribute("loading","lazy",k),p.item.hasAttribute("sources"))return;const L=p.item.hasAttribute("resizedWidth");t==="imageInline"&&!L&&!u||P&&C.setStyle("aspect-ratio",`${S}/${I}`,k)})}}}class JN extends Ge{constructor(e,n){super(e);w(this,"_modelElementName");this._modelElementName=n}refresh(){const n=this.editor.plugins.get("ImageUtils"),s=n.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=n.isInlineImage(s):this.isEnabled=n.isBlockImage(s)}execute(e={}){const n=this.editor,s=this.editor.model,o=n.plugins.get("ImageUtils"),r=o.getClosestSelectedImageElement(s.document.selection),a=Object.fromEntries(r.getAttributes());return!a.src&&!a.uploadId?null:s.change(l=>{const{setImageSizes:u=!0}=e,h=Array.from(s.markers).filter(v=>v.getRange().containsItem(r)),m=o.insertImage(a,s.createSelection(r,"on"),this._modelElementName,{setImageSizes:u});if(!m)return null;const p=l.createRangeOn(m);for(const v of h){const C=v.getRange(),x=C.root.rootName!="$graveyard"?C.getJoined(p,!0):p;l.updateMarker(v,{range:x})}return{oldElement:r,newElement:m}})}}class XN extends te{static get requires(){return[Dn]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,n=t.plugins.get("ImageUtils");e.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(o,r,a)=>{if(!a.consumable.test(r.item,o.name)||!r.item.is("element","imageBlock")&&!r.item.is("element","imageInline"))return;a.consumable.consume(r.item,o.name);const l=a.writer,u=a.mapper.toViewElement(r.item),h=n.findViewImgElement(u);r.attributeNewValue?(l.addClass("image_placeholder",h),l.setStyle("background-image",`url(${r.attributeNewValue})`,h),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,h)):(l.removeClass("image_placeholder",h),l.removeStyle("background-image",h))})})}_setupLoadListener(){const t=this.editor,e=t.model,n=t.editing,s=n.view,o=t.plugins.get("ImageUtils");s.addObserver(w1),this.listenTo(s.document,"imageLoaded",(r,a)=>{const l=s.domConverter.mapDomToView(a.target);if(!l)return;const u=o.getImageWidgetFromImageView(l);if(!u)return;const h=n.mapper.toModelElement(u);!h||!h.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},m=>{m.removeAttribute("placeholder",h)})})}}class QN extends te{static get requires(){return[ZN,YN,Dn,XN,ls]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new JN(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>q2(r)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>s.toImageWidget(q2(r),r,e("image widget"))}),n.for("downcast").add(Ug(s,"imageBlock","src")).add(Ug(s,"imageBlock","alt")).add(KN(s,"imageBlock")),n.for("upcast").elementToElement({view:$N(t,"imageBlock"),model:(o,{writer:r})=>r.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(OQ(s))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let u;if(!l.every(s.isInlineImageView))return;a.targetRanges?u=t.editing.mapper.toModelRange(a.targetRanges[0]):u=e.document.selection.getFirstRange();const h=e.createSelection(u);if(g1(e.schema,h)==="imageBlock"){const m=new Fo(n.document),p=l.map(v=>m.createElement("figure",{class:"image"},v));a.content=m.createDocumentFragment(p)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&e.change(l=>{const u=l.createRangeIn(a.content);for(const h of u.getItems())h.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(h)})})}}class BQ extends fe{constructor(e,n=[]){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"_focusables");w(this,"_focusCycler");w(this,"children");this.focusTracker=new yt,this.keystrokes=new Ot,this._focusables=new Sn,this.children=this.createCollection(),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const s of n)this.children.add(s),this._focusables.add(s),s instanceof rZ&&this._focusables.addMany(s.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),zr({view:this});for(const n of this._focusables)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class Mh extends te{constructor(e){super(e);w(this,"dropdownView");w(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Dn]}init(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=s.isImage(n.getSelectedElement())});const o=a=>this._createToolbarComponent(a),r=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",o),e.ui.componentFactory.add("imageInsert",o),e.ui.componentFactory.add("menuBar:insertImage",r)}registerIntegration({name:e,observable:n,buttonViewCreator:s,formViewCreator:o,menuBarButtonViewCreator:r,requiresForm:a=!1,override:l=!1}){this._integrations.has(e)&&!l&&Ze("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:n,buttonViewCreator:s,menuBarButtonViewCreator:r,formViewCreator:o,requiresForm:a})}_createToolbarComponent(e){const n=this.editor,s=e.t,o=this._prepareIntegrations();if(!o.length)return null;let r;const a=o[0];if(o.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);r=a.buttonViewCreator(!0)}else{const h=a.buttonViewCreator(!1);r=new Np(e,h),r.tooltip=!0,r.bind("label").to(this,"isImageSelected",m=>s(m?"Replace image":"Insert image"))}const l=this.dropdownView=ii(e,r),u=o.map(({observable:h})=>typeof h=="function"?h():h);return l.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(m=>m)),l.once("change:isOpen",()=>{const h=o.flatMap(({formViewCreator:p})=>p(o.length==1)),m=new BQ(n.locale,h);l.panelView.children.add(m)}),l}_createMenuBarComponent(e){const n=e.t,s=this._prepareIntegrations();if(!s.length)return null;const o=s.flatMap(({menuBarButtonViewCreator:l})=>l(s.length==1)),r=new ys(e),a=new kc(e);r.panelView.children.add(a),r.buttonView.set({icon:zj,label:n("Image")});for(const l of o){const u=new Lc(e,r);u.children.add(l),a.items.add(u),l.delegate("execute").to(r)}return r}_prepareIntegrations(){const n=this.editor.config.get("image.insert.integrations"),s=[];if(!n.length)return Ze("image-insert-integrations-not-specified"),s;for(const o of n){if(!this._integrations.has(o)){["upload","assetManager","url"].includes(o)||Ze("image-insert-unknown-integration",{item:o});continue}s.push(this._integrations.get(o))}return s.length||Ze("image-insert-integrations-not-registered"),s}}class FQ extends te{static get requires(){return[QN,Ph,b1,Mh]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class UQ extends te{static get requires(){return[ZN,YN,Dn,XN,ls]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new JN(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:r})=>r.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:r})=>s.toImageWidget(TQ(r),r,e("image widget"))}),n.for("downcast").add(Ug(s,"imageInline","src")).add(Ug(s,"imageInline","alt")).add(KN(s,"imageInline")),n.for("upcast").elementToElement({view:$N(t,"imageInline"),model:(o,{writer:r})=>r.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let u;if(!l.every(s.isBlockImageView))return;a.targetRanges?u=t.editing.mapper.toModelRange(a.targetRanges[0]):u=e.document.selection.getFirstRange();const h=e.createSelection(u);if(g1(e.schema,h)==="imageInline"){const m=new Fo(n.document),p=l.map(v=>v.childCount===1?(Array.from(v.getAttributes()).forEach(C=>m.setAttribute(...C,s.findViewImgElement(v))),v.getChild(0)):v);a.content=m.createDocumentFragment(p)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&e.change(l=>{const u=l.createRangeIn(a.content);for(const h of u.getItems())h.is("element","imageInline")&&s.setImageNaturalSizeAttributes(h)})})}}class zQ extends te{static get requires(){return[UQ,Ph,b1,Mh]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class eO extends te{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[Dn]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return t.name=="figcaption"&&e.isBlockImageView(t.parent)?{name:!0}:null}}class HQ extends Ge{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),n=t.plugins.get("ImageUtils");if(!t.plugins.has(QN)){this.isEnabled=!1,this.value=!1;return}const s=t.model.document.selection,o=s.getSelectedElement();if(!o){const r=e.getCaptionFromModelSelection(s);this.isEnabled=!!r,this.value=!!r;return}this.isEnabled=n.isImage(o),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(o):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(n=>{this.value?this._hideImageCaption(n):this._showImageCaption(n,e)})}_showImageCaption(t,e){const s=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),r=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const l=o._getSavedCaption(a);r.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const u=l||t.createElement("caption");t.append(u,a),e&&t.setSelection(u,"in")}_hideImageCaption(t){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageCaptionEditing"),o=e.plugins.get("ImageCaptionUtils");let r=n.getSelectedElement(),a;r?a=o.getCaptionFromImageModelElement(r):(a=o.getCaptionFromModelSelection(n),r=a.parent),s._saveCaption(r,a),t.setSelection(r,"on"),t.remove(a)}}class WQ extends te{constructor(e){super(e);w(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[Dn,eO]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema;n.isRegistered("caption")?n.extend("caption",{allowIn:"imageBlock"}):n.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new HQ(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,n=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ImageCaptionUtils"),r=e.t;e.conversion.for("upcast").elementToElement({view:a=>o.matchImageCaptionViewElement(a),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>s.isBlockImage(a.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>{if(!s.isBlockImage(a.parent))return null;const u=l.createEditableElement("figcaption");l.setCustomProperty("imageCaption",!0,u),u.placeholder=r("Enter image caption"),O0({view:n,element:u,keepOnFocus:!0});const h=a.parent.getAttribute("alt"),m=h?r("Caption for image: %0",[h]):r("Caption for the image");return u1(u,l,{label:m})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),o=e.commands.get("imageTypeInline"),r=e.commands.get("imageTypeBlock"),a=l=>{if(!l.return)return;const{oldElement:u,newElement:h}=l.return;/* istanbul ignore if: paranoid check -- @preserve */if(!u)return;if(n.isBlockImage(u)){const p=s.getCaptionFromImageModelElement(u);if(p){this._saveCaption(h,p);return}}const m=this._getSavedCaption(u);m&&this._saveCaption(h,m)};o&&this.listenTo(o,"execute",a,{priority:"low"}),r&&this.listenTo(r,"execute",a,{priority:"low"})}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?Rt.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}_registerCaptionReconversion(){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ImageCaptionUtils");n.document.on("change:data",()=>{const r=n.document.differ.getChanges();for(const a of r){if(a.attributeKey!=="alt")continue;const l=a.range.start.nodeAfter;if(s.isBlockImage(l)){const u=o.getCaptionFromImageModelElement(l);if(!u)return;e.editing.reconvertItem(u)}}})}}class qQ extends te{static get requires(){return[eO]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageCaptionUtils"),s=t.t;t.ui.componentFactory.add("toggleImageCaption",o=>{const r=t.commands.get("toggleImageCaption"),a=new xe(o);return a.set({icon:OV,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(r,"value","isEnabled"),a.bind("label").to(r,"value",l=>s(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=n.getCaptionFromModelSelection(t.model.document.selection);if(l){const u=t.editing.mapper.toViewElement(l);e.scrollToTheSelection(),e.change(h=>{h.addClass("image__caption_highlighted",u)})}t.editing.view.focus()}),a})}}class GQ extends te{static get requires(){return[WQ,qQ]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function tO(i){const t=i.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function $Q(i){return new Promise((t,e)=>{const n=i.getAttribute("src");fetch(n).then(s=>s.blob()).then(s=>{const o=nO(s,n),a=`image.${o.replace("image/","")}`,l=new File([s],a,{type:o});t(l)}).catch(s=>s&&s.name==="TypeError"?KQ(n).then(t).catch(e):e(s))})}function jQ(i,t){return!i.isInlineImageView(t)||!t.getAttribute("src")?!1:!!t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!t.getAttribute("src").match(/^blob:/g)}function nO(i,t){return i.type?i.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function KQ(i){return ZQ(i).then(t=>{const e=nO(t,i),s=`image.${e.replace("image/","")}`;return new File([t],s,{type:e})})}function ZQ(i){return new Promise((t,e)=>{const n=he.document.createElement("img");n.addEventListener("load",()=>{const s=he.document.createElement("canvas");s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),s.toBlob(r=>r?t(r):e())}),n.addEventListener("error",()=>e()),n.src=i})}class YQ extends te{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),r=tO(o),a=new t(e.locale),l=n.t;return a.set({acceptedType:o.map(u=>`image/${u}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:Hj}),a.bind("isEnabled").to(s),a.on("done",(u,h)=>{const m=Array.from(h).filter(p=>r.test(p.type));m.length&&(e.execute("uploadImage",{file:m}),e.editing.view.focus())}),a}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this.editor.commands.get("uploadImage"),s=this._createButton(QA);return s.tooltip=!0,s.bind("label").to(e,"isImageSelected",n,"isAccessAllowed",(o,r)=>t(r?o?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),s}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this._createButton(QA);return n.withText=!0,n.bind("label").to(e,"isImageSelected",s=>t(s?"Replace from computer":"Upload from computer")),n.on("execute",()=>{e.dropdownView.isOpen=!1}),n}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createButton(_N);switch(n.withText=!0,t){case"standalone":n.label=e("Image from computer");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("From computer");break}return n}}class JQ extends te{constructor(e){super(e);w(this,"placeholder");w(this,"uploadStatusChange",(e,n,s)=>{const o=this.editor,r=n.item,a=r.getAttribute("uploadId");if(!s.consumable.consume(n.item,e.name))return;const l=o.plugins.get("ImageUtils"),u=o.plugins.get(Tr),h=a?n.attributeNewValue:null,m=this.placeholder,p=o.editing.mapper.toViewElement(r),v=s.writer;if(h=="reading"){G2(p,v),$2(l,m,p,v);return}if(h=="uploading"){const C=u.loaders.get(a);G2(p,v),C?(j2(p,v),QQ(p,v,C,o.editing.view),see(l,p,v,C)):$2(l,m,p,v);return}h=="complete"&&u.loaders.get(a)&&tee(p,v,o.editing.view),eee(p,v),j2(p,v),XQ(p,v)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function G2(i,t){i.hasClass("ck-appear")||t.addClass("ck-appear",i)}function XQ(i,t){t.removeClass("ck-appear",i)}function $2(i,t,e,n){e.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",e);const s=i.findViewImgElement(e);s.getAttribute("src")!==t&&n.setAttribute("src",t,s),iO(e,"placeholder")||n.insert(n.createPositionAfter(s),iee(n))}function j2(i,t){i.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",i),sO(i,t,"placeholder")}function QQ(i,t,e,n){const s=nee(t);t.insert(t.createPositionAt(i,"end"),s),e.on("change:uploadedPercent",(o,r,a)=>{n.change(l=>{l.setStyle("width",a+"%",s)})})}function eee(i,t){sO(i,t,"progressBar")}function tee(i,t,e){const n=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(i,"end"),n),setTimeout(()=>{e.change(s=>s.remove(s.createRangeOn(n)))},3e3)}function nee(i){const t=i.createUIElement("div",{class:"ck-progress-bar"});return i.setCustomProperty("progressBar",!0,t),t}function iee(i){const t=i.createUIElement("div",{class:"ck-upload-placeholder-loader"});return i.setCustomProperty("placeholder",!0,t),t}function iO(i,t){for(const e of i.getChildren())if(e.getCustomProperty(t))return e}function sO(i,t,e){const n=iO(i,e);n&&t.remove(t.createRangeOn(n))}function see(i,t,e,n){if(n.data){const s=i.findViewImgElement(t);e.setAttribute("src",n.data,s)}}class oee extends Ge{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=bn(t.file),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((r,a)=>{const l=n.getSelectedElement();if(a&&l&&s.isImage(l)){const u=this.editor.model.createPositionAfter(l);this._uploadImage(r,o,u)}else this._uploadImage(r,o)})}_uploadImage(t,e,n){const s=this.editor,r=s.plugins.get(Tr).createLoader(t),a=s.plugins.get("ImageUtils");r&&a.insertImage({...e,uploadId:r.id},n)}}class ree extends te{constructor(e){super(e);w(this,"_uploadImageElements");w(this,"_uploadedImages",new Map);e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[Tr,h2,ls,Dn]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.conversion,o=e.plugins.get(Tr),r=e.plugins.get("ImageUtils"),a=e.plugins.get("ClipboardPipeline"),l=tO(e.config.get("image.upload.types")),u=new oee(e);e.commands.add("uploadImage",u),e.commands.add("imageUpload",u),s.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(h=>h.on("element:img",(m,p,v)=>{if(!v.consumable.test(p.viewItem,{attributes:["data-ck-upload-id"]}))return;const C=p.viewItem.getAttribute("data-ck-upload-id");if(!C)return;const[x]=Array.from(p.modelRange.getItems({shallow:!0})),k=o.loaders.get(C);x&&(v.writer.setAttribute("uploadId",C,x),v.consumable.consume(p.viewItem,{attributes:["data-ck-upload-id"]}),k&&k.data&&v.writer.setAttribute("uploadStatus",k.status,x))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(h,m)=>{if(aee(m.dataTransfer))return;const p=Array.from(m.dataTransfer.files).filter(C=>C?l.test(C.type):!1);if(!p.length)return;if(h.stop(),e.model.change(C=>{m.targetRanges&&C.setSelection(m.targetRanges.map(x=>e.editing.mapper.toModelRange(x))),e.execute("uploadImage",{file:p})}),!e.commands.get("uploadImage").isAccessAllowed){const C=e.plugins.get("Notification"),x=e.locale.t;C.showWarning(x("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(a,"inputTransformation",(h,m)=>{const p=Array.from(e.editing.view.createRangeIn(m.content)).map(C=>C.item).filter(C=>jQ(r,C)&&!C.getAttribute("uploadProcessed")).map(C=>({promise:$Q(C),imageElement:C}));if(!p.length)return;const v=new Fo(e.editing.view.document);for(const C of p){v.setAttribute("uploadProcessed",!0,C.imageElement);const x=o.createLoader(C.promise);x&&(v.setAttribute("src","",C.imageElement),v.setAttribute("uploadId",x.id,C.imageElement))}}),e.editing.view.document.on("dragover",(h,m)=>{m.preventDefault()}),n.on("change",()=>{const h=n.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),m=new Set;for(const p of h)if(p.type=="insert"&&p.name!="$text"){const v=p.position.nodeAfter,C=p.position.root.rootName=="$graveyard";for(const x of lee(e,v)){const k=x.getAttribute("uploadId");if(!k)continue;const S=o.loaders.get(k);if(!S){!C&&this._uploadedImages.has(k)&&e.model.enqueueChange({isUndoable:!1},I=>{I.setAttribute("uploadStatus","complete",x),this.fire("uploadComplete",{data:this._uploadedImages.get(k),imageElement:x})});continue}C?m.has(k)||Array.from(this._uploadImageElements.get(k)).every(P=>P.root.rootName=="$graveyard")&&S.abort():(m.add(k),this._uploadImageElements.has(k)?this._uploadImageElements.get(k).add(x):this._uploadImageElements.set(k,new Set([x])),S.status=="idle"&&this._readAndUpload(S))}}}),this.on("uploadComplete",(h,{imageElement:m,data:p})=>{const v=p.urls?p.urls:p;this.editor.model.change(C=>{C.setAttribute("src",v.default,m),this._parseAndSetSrcsetAttributeOnImage(v,m,C),r.setImageNaturalSizeAttributes(m)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const n=this.editor,s=n.model,o=n.locale.t,r=n.plugins.get(Tr),a=n.plugins.get(h2),l=n.plugins.get("ImageUtils"),u=this._uploadImageElements;return s.enqueueChange({isUndoable:!1},m=>{const p=u.get(e.id);for(const v of p)m.setAttribute("uploadStatus","reading",v)}),e.read().then(()=>{const m=e.upload();n.ui&&n.ui.ariaLiveAnnouncer.announce(o("Uploading image"));for(const p of u.get(e.id)){/* istanbul ignore next -- @preserve */if(Se.isSafari){const v=n.editing.mapper.toViewElement(p),C=l.findViewImgElement(v);n.editing.view.once("render",()=>{if(!C.parent)return;const x=n.editing.view.domConverter.mapViewToDom(C.parent);if(!x)return;const k=x.style.display;x.style.display="none",x._ckHack=x.offsetHeight,x.style.display=k})}s.enqueueChange({isUndoable:!1},v=>{v.setAttribute("uploadStatus","uploading",p)})}return m}).then(m=>{s.enqueueChange({isUndoable:!1},p=>{for(const v of u.get(e.id))p.setAttribute("uploadStatus","complete",v),this.fire("uploadComplete",{data:m,imageElement:v});n.ui&&n.ui.ariaLiveAnnouncer.announce(o("Image upload complete")),this._uploadedImages.set(e.id,m)}),h()}).catch(m=>{if(n.ui&&n.ui.ariaLiveAnnouncer.announce(o("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw m;e.status=="error"&&m&&a.showWarning(m,{title:o("Upload failed"),namespace:"upload"}),s.enqueueChange({isUndoable:!1},p=>{for(const v of u.get(e.id))v.root.rootName!=="$graveyard"&&p.remove(v)}),h()});function h(){s.enqueueChange({isUndoable:!1},m=>{for(const p of u.get(e.id))m.removeAttribute("uploadId",p),m.removeAttribute("uploadStatus",p);u.delete(e.id)}),r.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,n,s){let o=0;const r=Object.keys(e).filter(a=>{const l=parseInt(a,10);if(!isNaN(l))return o=Math.max(o,l),!0}).map(a=>`${e[a]} ${a}w`).join(", ");if(r!=""){const a={srcset:r};!n.hasAttribute("width")&&!n.hasAttribute("height")&&(a.width=o),s.setAttributes(a,n)}}_registerConverters(e){const{conversion:n,plugins:s}=this.editor,o=s.get(Tr),r=s.get(Dn);n.for("dataDowncast").add(a=>{a.on(`attribute:uploadId:${e}`,(l,u,h)=>{if(!h.consumable.test(u.item,l.name))return;const m=o.loaders.get(u.attributeNewValue);if(!m||!m.data)return null;const p=h.mapper.toViewElement(u.item),v=r.findViewImgElement(p);v&&(h.consumable.consume(u.item,l.name),h.writer.setAttribute("data-ck-upload-id",m.id,v))})})}}function aee(i){return Array.from(i.types).includes("text/html")&&i.getData("text/html")!==""}function lee(i,t){const e=i.plugins.get("ImageUtils");return Array.from(i.model.createRangeOn(t)).filter(n=>e.isImage(n.item)).map(n=>n.item)}class oO extends te{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[ree,YQ,JQ]}}class cee extends fe{constructor(e){super(e);w(this,"urlInputView");w(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new Ot,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),zr({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,n=e.t,s=new sn(e,ti);return s.bind("label").to(this,"isImageSelected",o=>n(o?"Update image URL":"Insert image via URL")),s.bind("isEnabled").to(this),s.fieldView.inputMode="url",s.fieldView.placeholder="https://example.com/image.png",s.fieldView.bind("value").to(this,"imageURLInputValue",o=>o||""),s.fieldView.on("input",()=>{this.imageURLInputValue=s.fieldView.element.value.trim()}),s}focus(){this.urlInputView.focus()}}class uee extends te{constructor(){super(...arguments);w(this,"_imageInsertUI");w(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Mh,xc]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const n=new e(this.editor.locale);return n.icon=Wj,n.on("execute",()=>{this._showModal()}),n}_createToolbarButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(xe);return n.tooltip=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert image via URL")),n}_createDropdownButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(xe);return n.withText=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert via URL")),n}_createMenuBarButton(e){const n=this.editor.locale.t,s=this._createInsertUrlButton(Jn);switch(s.withText=!0,e){case"standalone":s.label=n("Image via URL");break;case"insertOnly":s.label=n("Image");break;case"insertNested":s.label=n("Via URL");break}return s}_createInsertUrlView(){const e=this.editor,n=e.locale,s=e.commands.get("replaceImageSource"),o=e.commands.get("insertImage"),r=new cee(n);return r.bind("isImageSelected").to(this._imageInsertUI),r.bind("isEnabled").toMany([o,s],"isEnabled",(...a)=>a.some(l=>l)),r}_showModal(){const e=this.editor,s=e.locale.t,o=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const r=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=r.value||"",o.show({id:"insertImageViaUrl",title:s("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>o.hide()},{label:this._imageInsertUI.isImageSelected?s("Save"):s("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class rO extends te{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[uee,Mh]}}class dee extends te{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[oO,rO,Mh]}}class hee extends Ge{refresh(){const t=this.editor,n=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!n,!n||!n.hasAttribute("resizedWidth")?this.value=null:this.value={width:n.getAttribute("resizedWidth"),height:null}}execute(t){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(n.document.selection);this.value={width:t.width,height:null},o&&n.change(r=>{r.setAttribute("resizedWidth",t.width,o),r.removeAttribute("resizedHeight",o),s.setImageNaturalSizeAttributes(o)})}}class aO extends te{static get requires(){return[Dn]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new hee(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${t}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,u=a.mapper.toViewElement(r.item);r.attributeNewValue!==null?(l.setStyle("width",r.attributeNewValue,u),l.addClass("image_resized",u)):(l.removeStyle("width",u),l.removeClass("image_resized",u))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),e.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${t}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,u=a.mapper.toViewElement(r.item),h=t==="imageInline"?n.findViewImgElement(u):u;r.attributeNewValue!==null?l.setStyle("height",r.attributeNewValue,h):l.removeStyle("height",h)})),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>Fg(s)?null:s.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>Fg(s)?null:s.getStyle("height")}}),e.conversion.for("upcast").add(s=>{s.on(`element:${t==="imageBlock"?"figure":"img"}`,(o,r,a)=>{a.consumable.consume(r.viewItem,{classes:["image_resized"]})})})}}const c_={small:eK,medium:Qj,large:Xj,custom:Yj,original:Jj};class fee extends te{constructor(e){super(e);w(this,"_resizeUnit");this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[aO]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.config.get("image.resizeOptions"),s=e.commands.get("resizeImage");this.bind("isEnabled").to(s);for(const o of n)this._registerImageResizeButton(o);this._registerImageResizeDropdown(n)}_registerImageResizeButton(e){const n=this.editor,{name:s,value:o,icon:r}=e;n.ui.componentFactory.add(s,a=>{const l=new xe(a),u=n.commands.get("resizeImage"),h=this._getOptionLabelValue(e,!0);if(!c_[r])throw new N("imageresizebuttons-missing-icon",n,e);if(l.set({label:h,icon:c_[r],tooltip:h,isToggleable:!0}),l.bind("isEnabled").to(this),n.plugins.has("ImageCustomResizeUI")&&td(e)){const m=n.plugins.get("ImageCustomResizeUI");this.listenTo(l,"execute",()=>{m._showForm(this._resizeUnit)})}else{const m=o?o+this._resizeUnit:null;l.bind("isOn").to(u,"value",u,"isEnabled",fv(m)),this.listenTo(l,"execute",()=>{n.execute("resizeImage",{width:m})})}return l})}_registerImageResizeDropdown(e){const n=this.editor,s=n.t,o=e.find(a=>!a.value),r=a=>{const l=n.commands.get("resizeImage"),u=ii(a,aN),h=u.buttonView,m=s("Resize image");return h.set({tooltip:m,commandValue:o.value,icon:c_.medium,isToggleable:!0,label:this._getOptionLabelValue(o),withText:!0,class:"ck-resize-image-button",ariaLabel:m,ariaLabelledBy:void 0}),h.bind("label").to(l,"value",p=>p&&p.width?p.width:this._getOptionLabelValue(o)),u.bind("isEnabled").to(this),Za(u,()=>this._getResizeDropdownListItemDefinitions(e,l),{ariaLabel:s("Image resize list"),role:"menu"}),this.listenTo(u,"execute",p=>{"onClick"in p.source?p.source.onClick():(n.execute(p.source.commandName,{width:p.source.commandValue}),n.editing.view.focus())}),u};n.ui.componentFactory.add("resizeImage",r),n.ui.componentFactory.add("imageResize",r)}_getOptionLabelValue(e,n=!1){const s=this.editor.t;return e.label?e.label:n?td(e)?s("Custom image size"):e.value?s("Resize image to %0",e.value+this._resizeUnit):s("Resize image to the original size"):td(e)?s("Custom"):e.value?e.value+this._resizeUnit:s("Original")}_getResizeDropdownListItemDefinitions(e,n){const{editor:s}=this,o=new En,r=e.map(a=>td(a)?{...a,valueWithUnits:"custom"}:a.value?{...a,valueWithUnits:`${a.value}${this._resizeUnit}`}:{...a,valueWithUnits:null});for(const a of r){let l=null;if(s.plugins.has("ImageCustomResizeUI")&&td(a)){const u=s.plugins.get("ImageCustomResizeUI");l={type:"button",model:new La({label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{u._showForm(this._resizeUnit)}})};const h=Object.values(r).map(m=>m.valueWithUnits);l.model.bind("isOn").to(n,"value",n,"isEnabled",mee(h))}else l={type:"button",model:new La({commandName:"resizeImage",commandValue:a.valueWithUnits,label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null})},l.model.bind("isOn").to(n,"value",n,"isEnabled",fv(a.valueWithUnits));l.model.bind("isEnabled").to(n,"isEnabled"),o.add(l)}return o}}function td(i){return i.value==="custom"}function fv(i){return(t,e)=>{const n=t;return n===void 0||!e?!1:i===null&&n===i?!0:n!==null&&n.width===i}}function mee(i){return(t,e)=>!i.some(n=>fv(n)(t,e))}const gee="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",u_="image_resized";class pee extends te{static get requires(){return[o_,Dn]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils");e.addObserver(w1),this.listenTo(e.document,"imageLoaded",(s,o)=>{if(!o.target.matches(gee))return;const r=t.editing.view.domConverter,a=r.domToView(o.target),l=n.getImageWidgetFromImageView(a);let u=this.editor.plugins.get(o_).getResizerByViewElement(l);if(u){u.redraw();return}const h=t.editing.mapper,m=h.toModelElement(l);u=t.plugins.get(o_).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:m,viewElement:l,editor:t,getHandleHost(p){return p.querySelector("img")},getResizeHost(){return r.mapViewToDom(h.toViewElement(m))},isCentered(){return m.getAttribute("imageStyle")=="alignCenter"},onCommit(p){e.change(v=>{v.removeClass(u_,l)}),t.execute("resizeImage",{width:p})}}),u.on("updateSize",()=>{l.hasClass(u_)||e.change(v=>{v.addClass(u_,l)});const p=m.name==="imageInline"?a:l;p.getStyle("height")&&e.change(v=>{v.removeStyle("height",p)})}),u.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lO(i){if(!i)return null;const[,t,e]=i.trim().match(/([.,\d]+)(%|px)$/)||[],n=Number.parseFloat(t);return Number.isNaN(n)?null:{value:n,unit:e}}function cO(i,t,e){return e==="px"?{value:t.value,unit:"px"}:{value:t.value/i*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function uO(i){const{editing:t}=i,n=i.plugins.get("ImageUtils").getClosestSelectedImageElement(i.model.document.selection);if(!n)return null;const s=t.mapper.toViewElement(n),o=t.view.domConverter.mapViewToDom(s);return{model:n,view:s,dom:o}}function bee(i,t){const e=uO(i);if(!e)return null;const n=lO(e.model.getAttribute("resizedWidth")||null);if(!n)return null;if(n.unit===t)return n;const s=d1(e.dom),o={value:new Pe(e.dom).width};return cO(s,o,t)}class wee extends fe{constructor(e,n,s){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"unit");w(this,"backButtonView");w(this,"saveButtonView");w(this,"labeledInput");w(this,"children");w(this,"_focusables");w(this,"_focusCycler");w(this,"_validators");this.focusTracker=new yt,this.keystrokes=new Ot,this.unit=n,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Vn(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Sn,this._validators=s,this.keystrokes.set("Esc",(o,r)=>{this.fire("cancel"),r()}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:ja,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createSaveButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Image Resize")});return n.children.add(this.backButtonView,0),n}_createLabeledInputView(){const e=this.locale.t,n=new sn(this.locale,RZ);return n.label=e("Resize image (in %0)",this.unit),n.class="ck-labeled-field-view_full-width",n.fieldView.set({step:.1}),n}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.labeledInput.errorText=n,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const n=Number.parseFloat(e);return Number.isNaN(n)?null:n}get sizeWithUnits(){const{parsedSize:e,unit:n}=this;return e===null?null:`${e}${n}`}}function yee(i,t){const e=uO(i);if(!e)return null;const n=d1(e.dom),s=lO(window.getComputedStyle(e.dom).minWidth)||{value:1},o=Math.max(.1,cO(n,s,t).value);return{unit:t,lower:o,upper:t==="px"?n:100}}class _ee extends te{constructor(){super(...arguments);w(this,"_balloon");w(this,"_form")}static get requires(){return[as]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const n=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(sh(wee))(n.locale,e,vee(n)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(n.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{n.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),Uo({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const n=this.editor,s=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:p1(n)});const o=bee(n,e),r=o?o.value.toFixed(1):"",a=yee(n,e);s.fieldView.value=s.fieldView.element.value=r,a&&Object.assign(s.fieldView,{min:a.lower.toFixed(1),max:Math.ceil(a.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function vee(i){const t=i.t;return[e=>{if(e.rawSize.trim()==="")return t("The value must not be empty.");if(e.parsedSize===null)return t("The value should be a plain number.")}]}class Cee extends te{static get requires(){return[aO,pee,_ee,fee]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class Tee extends Ge{constructor(e,n){super(e);w(this,"_defaultStyles");w(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(n.map(s=>{if(s.isDefault)for(const o of s.modelElements)this._defaultStyles[o]=s.name;return[s.name,s]}))}refresh(){const s=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!s,this.isEnabled?s.hasAttribute("imageStyle")?this.value=s.getAttribute("imageStyle"):this.value=this._defaultStyles[s.name]:this.value=!1}execute(e={}){const n=this.editor,s=n.model,o=n.plugins.get("ImageUtils");s.change(r=>{const a=e.value,{setImageSizes:l=!0}=e;let u=o.getClosestSelectedImageElement(s.document.selection);a&&this.shouldConvertImageType(a,u)&&(this.editor.execute(o.isBlockImage(u)?"imageTypeInline":"imageTypeBlock",{setImageSizes:l}),u=o.getClosestSelectedImageElement(s.document.selection)),!a||this._styles.get(a).isDefault?r.removeAttribute("imageStyle",u):r.setAttribute("imageStyle",a,u),l&&o.setImageNaturalSizeAttributes(u)})}shouldConvertImageType(e,n){return!this._styles.get(e).modelElements.includes(n.name)}}const Xm={get inline(){return{name:"inline",title:"In line",icon:BV,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:K0,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:FV,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:Mg,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:Vg,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:UV,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:Mg,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:Vg,modelElements:["imageBlock"],className:"image-style-side"}}},dO={full:Zj,left:FV,right:UV,center:Mg,inlineLeft:K0,inlineRight:Vg,inline:BV},hO=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function xee(i){return(i.configuredStyles.options||[]).map(n=>See(n)).filter(n=>Aee(n,i))}function kee(i,t){return i&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:i?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}}function Eee(i){return i.has("ImageBlockEditing")&&i.has("ImageInlineEditing")?[...hO]:[]}function See(i){return typeof i=="string"?Xm[i]?i={...Xm[i]}:i={name:i}:i=Ree(Xm[i.name],i),typeof i.icon=="string"&&(i.icon=dO[i.icon]||i.icon),i}function Aee(i,{isBlockPluginLoaded:t,isInlinePluginLoaded:e}){const{modelElements:n,name:s}=i;if(!n||!n.length||!s)return fO({style:i}),!1;{const o=[t?"imageBlock":null,e?"imageInline":null];if(!n.some(r=>o.includes(r)))return Ze("image-style-missing-dependency",{style:i,missingPlugins:n.map(r=>r==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function Ree(i,t){const e={...t};for(const n in i)Object.prototype.hasOwnProperty.call(t,n)||(e[n]=i[n]);return e}function fO(i){Ze("image-style-configuration-definition-invalid",i)}var mv={normalizeStyles:xee,getDefaultStylesConfiguration:kee,getDefaultDropdownDefinitions:Eee,warnInvalidStyle:fO,DEFAULT_OPTIONS:Xm,DEFAULT_ICONS:dO,DEFAULT_DROPDOWN_DEFINITIONS:hO};function Iee(i){return(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const s=K2(e.attributeNewValue,i),o=K2(e.attributeOldValue,i),r=n.mapper.toViewElement(e.item),a=n.writer;o&&a.removeClass(o.className,r),s&&a.addClass(s.className,r)}}function Pee(i){const t={imageInline:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,n,s)=>{if(!n.modelRange)return;const o=n.viewItem,r=Ln(n.modelRange.getItems());if(r&&s.schema.checkAttribute(r,"imageStyle"))for(const a of t[r.name])s.consumable.consume(o,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,r)}}function K2(i,t){for(const e of t)if(e.name===i)return e}class mO extends te{constructor(){super(...arguments);w(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Dn]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:n}=mv,s=this.editor,o=s.plugins.has("ImageBlockEditing"),r=s.plugins.has("ImageInlineEditing");s.config.define("image.styles",n(o,r)),this.normalizedStyles=e({configuredStyles:s.config.get("image.styles"),isBlockPluginLoaded:o,isInlinePluginLoaded:r}),this._setupConversion(o,r),this._setupPostFixer(),s.commands.add("imageStyle",new Tee(s,this.normalizedStyles))}_setupConversion(e,n){const s=this.editor,o=s.model.schema,r=Iee(this.normalizedStyles),a=Pee(this.normalizedStyles);s.editing.downcastDispatcher.on("attribute:imageStyle",r),s.data.downcastDispatcher.on("attribute:imageStyle",r),e&&(o.extend("imageBlock",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:figure",a,{priority:"low"})),n&&(o.extend("imageInline",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:img",a,{priority:"low"}))}_setupPostFixer(){const e=this.editor,n=e.model.document,s=e.plugins.get(Dn),o=new Map(this.normalizedStyles.map(r=>[r.name,r]));n.registerPostFixer(r=>{let a=!1;for(const l of n.differ.getChanges())if(l.type=="insert"||l.type=="attribute"&&l.attributeKey=="imageStyle"){let u=l.type=="insert"?l.position.nodeAfter:l.range.start.nodeAfter;if(u&&u.is("element","paragraph")&&u.childCount>0&&(u=u.getChild(0)),!s.isImage(u))continue;const h=u.getAttribute("imageStyle");if(!h)continue;const m=o.get(h);(!m||!m.modelElements.includes(u.name))&&(r.removeAttribute("imageStyle",u),a=!0)}return a})}}class Mee extends te{static get requires(){return[mO]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],n=t.get("ImageStyleEditing"),s=Z2(n.normalizedStyles,this.localizedDefaultStylesTitles);for(const r of s)this._createButton(r);const o=Z2([...e.filter(is),...mv.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const r of o)this._createDropdown(r,s)}_createDropdown(t,e){const n=this.editor.ui.componentFactory;n.add(t.name,s=>{let o;const{defaultItem:r,items:a,title:l}=t,u=a.filter(v=>e.find(({name:C})=>Y2(C)===v)).map(v=>{const C=n.create(v);return v===r&&(o=C),C});a.length!==u.length&&mv.warnInvalidStyle({dropdown:t});const h=ii(s,Np),m=h.buttonView,p=m.arrowView;return Op(h,u,{enableActiveItemFocusOnDropdownOpen:!0}),m.set({label:J2(l,o.label),class:null,tooltip:!0}),p.unbind("label"),p.set({label:l}),m.bind("icon").toMany(u,"isOn",(...v)=>{const C=v.findIndex(Ql);return C<0?o.icon:u[C].icon}),m.bind("label").toMany(u,"isOn",(...v)=>{const C=v.findIndex(Ql);return J2(l,C<0?o.label:u[C].label)}),m.bind("isOn").toMany(u,"isOn",(...v)=>v.some(Ql)),m.bind("class").toMany(u,"isOn",(...v)=>v.some(Ql)?"ck-splitbutton_flatten":void 0),m.on("execute",()=>{u.some(({isOn:v})=>v)?h.isOpen=!h.isOpen:o.fire("execute")}),h.bind("isEnabled").toMany(u,"isEnabled",(...v)=>v.some(Ql)),this.listenTo(h,"execute",()=>{this.editor.editing.view.focus()}),h})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(Y2(e),n=>{const s=this.editor.commands.get("imageStyle"),o=new xe(n);return o.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>r===e),o.on("execute",this._executeCommand.bind(this,e)),o})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function Z2(i,t){for(const e of i)t[e.title]&&(e.title=t[e.title]);return i}function Y2(i){return`imageStyle:${i}`}function J2(i,t){return(i?i+": ":"")+t}class Vee extends te{static get requires(){return[mO,Mee]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class Nee extends te{static get requires(){return[Dg,Dn]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Dg),s=t.plugins.get("ImageUtils");n.register("image",{ariaLabel:e("Image toolbar"),items:Oee(t.config.get("image.toolbar")||[]),getRelatedElement:o=>s.getClosestSelectedImageWidget(o)})}}function Oee(i){return i.map(t=>is(t)?t.name:t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Dee extends te{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.commands.add("indent",new vA(t)),t.commands.add("outdent",new vA(t))}}class Lee extends te{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?SA:AA,o=e.uiLanguageDirection=="ltr"?AA:SA;this._defineButton("indent",n("Increase indent"),s),this._defineButton("outdent",n("Decrease indent"),o)}_defineButton(t,e,n){const s=this.editor;s.ui.componentFactory.add(t,()=>{const o=this._createButton(xe,t,e,n);return o.set({tooltip:!0}),o}),s.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Jn,t,e,n))}_createButton(t,e,n,s){const o=this.editor,r=o.commands.get(e),a=new t(o.locale);return a.set({label:n,icon:s}),a.bind("isEnabled").to(r,"isEnabled"),this.listenTo(a,"execute",()=>{o.execute(e),o.editing.view.focus()}),a}}class Bee extends te{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[Dee,Lee]}}class km extends Ge{constructor(e,n){super(e);w(this,"_indentBehavior");this._indentBehavior=n}refresh(){const n=this.editor.model,s=Ln(n.document.selection.getSelectedBlocks());if(!s||!this._isIndentationChangeAllowed(s)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(s.getAttribute("blockIndent"))}execute(){const e=this.editor.model,n=this._getBlocksToChange();e.change(s=>{for(const o of n){const r=o.getAttribute("blockIndent"),a=this._indentBehavior.getNextIndent(r);a?s.setAttribute("blockIndent",a,o):s.removeAttribute("blockIndent",o)}})}_getBlocksToChange(){const n=this.editor.model.document.selection;return Array.from(n.getSelectedBlocks()).filter(o=>this._isIndentationChangeAllowed(o))}_isIndentationChangeAllowed(e){const n=this.editor;return n.model.schema.checkAttribute(e,"blockIndent")?!n.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!n.plugins.get("ListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class X2{constructor(t){w(this,"isForward");w(this,"offset");w(this,"unit");this.isForward=t.direction==="forward",this.offset=t.offset,this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||"0");return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||"0");if(!(!t||t.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,o=e+s;return o>0?o+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Q2{constructor(t){w(this,"isForward");w(this,"classes");this.isForward=t.direction==="forward",this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(t){const e=this.classes.indexOf(t),n=this.isForward?1:-1;return this.classes[e+n]}}const Fee=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class Uee extends te{constructor(t){super(t),t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.config.get("indentBlock");e.classes&&e.classes.length?(this._setupConversionUsingClasses(e.classes),t.commands.add("indentBlock",new km(t,new Q2({direction:"forward",classes:e.classes}))),t.commands.add("outdentBlock",new km(t,new Q2({direction:"backward",classes:e.classes})))):(t.data.addStyleProcessorRules(rj),this._setupConversionUsingOffset(),t.commands.add("indentBlock",new km(t,new X2({direction:"forward",offset:e.offset,unit:e.unit}))),t.commands.add("outdentBlock",new km(t,new X2({direction:"backward",offset:e.offset,unit:e.unit}))))}afterInit(){const t=this.editor,e=t.model.schema,n=t.commands.get("indent"),s=t.commands.get("outdent"),o=t.config.get("heading.options");(o&&o.map(l=>l.model)||Fee).forEach(l=>{e.isRegistered(l)&&e.extend(l,{allowAttributes:"blockIndent"})}),e.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(t.commands.get("indentBlock")),s.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion,n=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[n]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>{if(!s.is("element","li"))return s.getStyle(n)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[n]:s}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const n of t)e.model.values.push(n),e.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(e)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class zee{constructor(){w(this,"_definitions",new Set)}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(e=>this._definitions.add(e)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(e,n,s)=>{if(!s.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||s.schema.isInline(n.item)))return;const o=s.writer,r=o.document.selection;for(const a of this._definitions){const l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(const u in a.styles)o.setStyle(u,a.styles[u],l);o.setCustomProperty("link",!0,l),a.callback(n.attributeNewValue)?n.item.is("selection")?o.wrap(r.getFirstRange(),l):o.wrap(s.mapper.toViewRange(n.range),l):o.unwrap(s.mapper.toViewRange(n.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(e,n,{writer:s,mapper:o})=>{const r=o.toViewElement(n.item),a=Array.from(r.getChildren()).find(l=>l.is("element","a"));if(a)for(const l of this._definitions){const u=Cs(l.attributes);if(l.callback(n.attributeNewValue)){for(const[h,m]of u)h==="class"?s.addClass(m,a):s.setAttribute(h,m,a);l.classes&&s.addClass(l.classes,a);for(const h in l.styles)s.setStyle(h,l.styles[h],a)}else{for(const[h,m]of u)h==="class"?s.removeClass(m,a):s.removeAttribute(h,a);l.classes&&s.removeClass(l.classes,a);for(const h in l.styles)s.removeStyle(h,a)}}})}}}const Hee=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Wee="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",qee=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Gee=/^((\w+:(\/{2,})?)|(\W))/i,$ee=["https?","ftps?","mailto"],md="Ctrl+K";function jee(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function eR(i,{writer:t}){const e=t.createAttributeElement("a",{href:i},{priority:5});return t.setCustomProperty("link",!0,e),e}function gO(i,t=$ee){const e=String(i),n=t.join("|"),s=new RegExp(`${Wee.replace("<protocols>",n)}`,"i");return Kee(e,s)?e:"#"}function Kee(i,t){return!!i.replace(Hee,"").match(t)}function Zee(i,t){const e={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return t.forEach(n=>("label"in n&&e[n.label]&&(n.label=e[n.label]),n)),t}function Yee(i){const t=[];if(i)for(const[e,n]of Object.entries(i)){const s=Object.assign({},n,{id:`link${q9(e)}`});t.push(s)}return t}function gv(i,t){return i?t.checkAttribute(i.name,"linkHref"):!1}function Jee(i){return qee.test(i)}function y1(i,t){const e=Jee(i)?"mailto:":t,n=!!e&&!pO(i);return i&&n?e+i:i}function pO(i){return Gee.test(i)}function Xee(i){window.open(i,"_blank","noopener")}function pv(i){let t="";for(const e of i.getItems()){if(!e.is("$text")&&!e.is("$textProxy"))return;t+=e.data}return t}class Qee extends Ge{constructor(){super(...arguments);w(this,"manualDecorators",new En);w(this,"automaticDecorators",new zee)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,n=e.document.selection,s=n.getSelectedElement()||Ln(n.getSelectedBlocks());gv(s,e.schema)?(this.value=s.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(s,"linkHref")):(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(n,"linkHref"));for(const o of this.manualDecorators)o.value=this._getDecoratorStateFromModel(o.id)}execute(e,n={},s){const o=this.editor.model,r=o.document.selection,a=[],l=[];for(const u in n)n[u]?a.push(u):l.push(u);o.change(u=>{const h=v=>{u.setAttribute("linkHref",e,v),a.forEach(C=>u.setAttribute(C,!0,v)),l.forEach(C=>u.removeAttribute(C,v))},m=(v,C)=>{const x=pv(v);if(!x)return v;let k=s;if(k||(k=C&&C==x?e:x),k!=x){const S=ete(x,k);let I=0;for(const{offset:P,actual:L,expected:O}of S){const J=P+I,F=u.createRange(v.start.getShiftedBy(J),v.start.getShiftedBy(J+L.length)),U=tte(F,v).getAttributes(),X=Array.from(U).filter(([me])=>o.schema.getAttributeProperties(me).isFormatting),le=u.createText(O,X);h(le),o.insertContent(le,F),I+=O.length}return u.createRange(v.start,v.start.getShiftedBy(k.length))}},p=v=>{const{plugins:C}=this.editor;if(u.setSelection(v.end),C.has("TwoStepCaretMovement"))C.get("TwoStepCaretMovement")._handleForwardMovement();else for(const x of["linkHref",...a,...l])u.removeSelectionAttribute(x)};if(r.isCollapsed){const v=r.getFirstPosition();if(r.hasAttribute("linkHref")){const C=r.getAttribute("linkHref"),x=Dp(v,"linkHref",C,o),k=m(x,C);h(k||x),k&&p(k)}else if(e!==""){const C=Cs(r.getAttributes());C.set("linkHref",e),a.forEach(k=>{C.set(k,!0)});const x=o.insertContent(u.createText(s||e,C),v);p(x)}}else{const v=Array.from(r.getRanges()),C=o.schema.getValidRanges(v,"linkHref"),x=[];for(const I of r.getSelectedBlocks())o.schema.checkAttribute(I,"linkHref")&&x.push(u.createRangeOn(I));const k=x.slice();for(const I of C)this._isRangeToUpdate(I,x)&&k.push(I);const S=v.map(I=>({start:zt.fromPosition(I.start,"toPrevious"),end:zt.fromPosition(I.end,"toNext")}));for(let I of k){const P=(I.start.textNode||I.start.nodeAfter).getAttribute("linkHref");I=m(I,P)||I,h(I)}u.setSelection(S.map(I=>{const P=I.start.toPosition(),L=I.end.toPosition();return I.start.detach(),I.end.detach(),o.createRange(P,L)}))}})}_getDecoratorStateFromModel(e){const n=this.editor.model,s=n.document.selection,o=s.getSelectedElement();return gv(o,n.schema)?o.getAttribute(e):s.getAttribute(e)}_isRangeToUpdate(e,n){for(const s of n)if(s.containsRange(e))return!1;return!0}}function ete(i,t){const e=pc(i,t),n={equal:0,insert:0,delete:0},s=[];let o="",r="";for(const a of[...e,null])a=="insert"?r+=t[n.equal+n.insert]:a=="delete"?o+=i[n.equal+n.delete]:(o.length||r.length)&&(s.push({offset:n.equal,actual:o,expected:r}),o="",r=""),a&&n[a]++;return s}function tte(i,t){if(!i.isCollapsed)return Ln(i.getItems());const e=i.start;return e.textNode?e.textNode:!e.nodeBefore||e.isEqual(t.start)?e.nodeAfter:e.nodeBefore}class nte extends Ge{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();gv(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,s=t.commands.get("link");e.change(o=>{const r=n.isCollapsed?[Dp(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const a of r)if(o.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)o.removeAttribute(l.id,a)})}}class ite extends wt(){constructor({id:e,label:n,attributes:s,classes:o,styles:r,defaultValue:a}){super();w(this,"id");w(this,"defaultValue");w(this,"label");w(this,"attributes");w(this,"classes");w(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=n,this.attributes=s,this.classes=o,this.styles=r}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const ste="ck-link_selected",tR="automatic",ote="manual",rte=/^(https?:)?\/\//;class Ec extends te{constructor(e){super(e);w(this,"_linkOpeners",[]);e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[w2,EN,ls]}init(){const e=this.editor,n=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:eR}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,a)=>eR(gO(r,n),a)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),e.commands.add("link",new Qee(e)),e.commands.add("unlink",new nte(e));const s=Zee(e.t,Yee(e.config.get("link.decorators")));this._enableAutomaticDecorators(s.filter(r=>r.mode===tR)),this._enableManualDecorators(s.filter(r=>r.mode===ote)),e.plugins.get(w2).registerAttribute("linkHref"),XY(e,"linkHref","a",ste),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(e){this._linkOpeners.push(e)}_enableAutomaticDecorators(e){const n=this.editor,o=n.commands.get("link").automaticDecorators;n.config.get("link.addTargetToExternalLinks")&&o.add({id:"linkIsExternal",mode:tR,callback:r=>!!r&&rte.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),o.add(e),o.length&&n.conversion.for("downcast").add(o.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const n=this.editor,o=n.commands.get("link").manualDecorators;e.forEach(r=>{n.model.schema.extend("$text",{allowAttributes:r.id});const a=new ite(r);o.add(a),n.conversion.for("downcast").attributeToElement({model:a.id,view:(l,{writer:u,schema:h},{item:m})=>{if((m.is("selection")||h.isInline(m))&&l){const p=u.createAttributeElement("a",a.attributes,{priority:5});a.classes&&u.addClass(a.classes,p);for(const v in a.styles)u.setStyle(v,a.styles[v],p);return u.setCustomProperty("link",!0,p),p}}}),n.conversion.for("upcast").elementToAttribute({view:{name:"a",...a._createPattern()},model:{key:a.id}})})}_enableLinkOpen(){const e=this.editor,s=e.editing.view.document,o=r=>{this._linkOpeners.some(a=>a(r))||Xee(r)};this.listenTo(s,"click",(r,a)=>{if(!(Se.isMac?a.domEvent.metaKey:a.domEvent.ctrlKey))return;let u=a.domTarget;if(u.tagName.toLowerCase()!="a"&&(u=u.closest("a")),!u)return;const h=u.getAttribute("href");h&&(r.stop(),a.preventDefault(),o(h))},{context:"$capture"}),this.listenTo(s,"keydown",(r,a)=>{const u=e.commands.get("link").value;u&&a.keyCode===Ue.enter&&a.altKey&&(r.stop(),o(u))})}_enableSelectionAttributesFixer(){const n=this.editor.model,s=n.document.selection;this.listenTo(s,"change:attribute",(o,{attributeKeys:r})=>{!r.includes("linkHref")||s.hasAttribute("linkHref")||n.change(a=>{ate(a,lte(n.schema))})})}_enableClipboardIntegration(){const e=this.editor,n=e.model,s=this.editor.config.get("link.defaultProtocol");s&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(o,r)=>{n.change(a=>{const l=a.createRangeIn(r.content);for(const u of l.getItems())if(u.hasAttribute("linkHref")){const h=y1(u.getAttribute("linkHref"),s);a.setAttribute("linkHref",h,u)}})})}}function ate(i,t){i.removeSelectionAttribute("linkHref");for(const e of t)i.removeSelectionAttribute(e)}function lte(i){return i.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class cte extends xe{constructor(t){super(t);const e=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:e.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:e.to(n=>{if(this.href){const s=()=>n.preventDefault();this.fire("navigate",this.href,s)}})}}),this.template.tag="a"}}class ute extends fe{constructor(e,n){super(e);w(this,"focusTracker",new yt);w(this,"keystrokes",new Ot);w(this,"backButtonView");w(this,"saveButtonView");w(this,"displayedTextInputView");w(this,"urlInputView");w(this,"children");w(this,"providersListChildren");w(this,"_validators");w(this,"_focusables",new Sn);w(this,"_focusCycler");this._validators=n,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:ja,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createSaveButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({label:e("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Link")});return n.children.add(this.backButtonView,0),n}_createProvidersListView(){const e=new Ka(this.locale);return e.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),e.items.bindTo(this.providersListChildren).using(n=>{const s=new rs(this.locale);return s.children.add(n),s}),e}_createDisplayedTextInput(){const e=this.locale.t,n=new sn(this.locale,ti);return n.label=e("Displayed text"),n.class="ck-labeled-field-view_full-width",n}_createUrlInput(){const e=this.locale.t,n=new sn(this.locale,ti);return n.fieldView.inputMode="url",n.label=e("Link URL"),n.class="ck-labeled-field-view_full-width",n}_createFormChildren(){this.children.add(new Vn(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new Vn(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}class dte extends fe{constructor(e){super(e);w(this,"focusTracker",new yt);w(this,"keystrokes",new Ot);w(this,"backButtonView");w(this,"listView");w(this,"listChildren");w(this,"emptyListInformation");w(this,"children");w(this,"_focusables",new Sn);w(this,"_focusCycler");this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(n,s,o)=>{o?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(n,s)=>{this.fire("cancel"),s()}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const e=new Ka(this.locale);return e.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),e.items.bindTo(this.listChildren).using(n=>{const s=new rs(this.locale);return s.children.add(n),s}),e}_createBackButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:ja,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createHeaderView(){const e=new zo(this.locale);return e.bind("label").to(this,"title"),e.children.add(this.backButtonView,0),e}_createEmptyLinksListItemView(){const e=new fe(this.locale);return e.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),e}}class hte extends fe{constructor(e){super(e);w(this,"focusTracker",new yt);w(this,"keystrokes",new Ot);w(this,"backButtonView");w(this,"children");w(this,"listChildren");w(this,"_focusables",new Sn);w(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(n,s)=>{this.fire("back"),s()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,n=new xe(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:ja,tooltip:!0}),n.delegate("execute").to(this,"back"),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Link properties")});return n.children.add(this.backButtonView,0),n}_createListView(){const e=new Ka(this.locale);return e.extendTemplate({attributes:{class:["ck-link__list"]}}),e.items.bindTo(this.listChildren).using(n=>{const s=new rs(this.locale);return s.children.add(n),s}),e}}class fte extends xe{constructor(e){super(e);w(this,"arrowView");this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new os;return e.content=LV,e}}const Os="link-ui";class bO extends te{constructor(){super(...arguments);w(this,"toolbarView",null);w(this,"formView",null);w(this,"linkProviderItemsView",null);w(this,"propertiesView",null);w(this,"_balloon");w(this,"_linksProviders",new En)}static get requires(){return[as,Ec]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=this.editor.t;this.set("selectedLinkableText",void 0),e.editing.view.addObserver(M$),this._balloon=e.plugins.get(as),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Os,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Os,view:(s,{writer:o})=>{if(!s.markerRange.isCollapsed)return null;const r=o.createUIElement("span");return o.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],r),r}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Create link"),keystroke:md},{label:n("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(e){const n=this._linksProviders.filter(s=>(s.order||0)<=(e.order||0)).length;this._linksProviders.add(e,n)}_createViews(){const e=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),e.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const e=this.editor,n=new Da(e.locale),s=e.commands.get("link");n.class="ck-link-toolbar";let o=e.config.get("link.toolbar");return s.manualDecorators.length||(o=o.filter(r=>r!=="linkProperties")),n.fillFromConfig(o,e.ui.componentFactory),n.keystrokes.set("Esc",(r,a)=>{this._hideUI(),a()}),n.keystrokes.set(md,(r,a)=>{this._addFormView(),a()}),e.ui.addToolbar(n,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),n}_createFormView(){const e=this.editor,n=e.locale.t,s=e.commands.get("link"),o=e.config.get("link.defaultProtocol"),r=new(sh(ute))(e.locale,mte(e));return r.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",a=>a!==void 0),r.urlInputView.bind("isEnabled").to(s,"isEnabled"),r.saveButtonView.bind("isEnabled").to(s,"isEnabled"),r.saveButtonView.bind("label").to(s,"value",a=>n(a?"Update":"Insert")),this.listenTo(r,"submit",()=>{if(r.isValid()){const a=r.urlInputView.fieldView.element.value,l=y1(a,o),u=r.displayedTextInputView.fieldView.element.value;e.execute("link",l,this._getDecoratorSwitchesState(),u!==this.selectedLinkableText?u:void 0),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(a,l)=>{this._closeFormView(),l()}),r.providersListChildren.bindTo(this._linksProviders).using(a=>this._createLinksListProviderButton(a)),r}_createLinkProviderListView(e){return e.getListItems().map(({href:n,label:s,icon:o})=>{const r=new xe;return r.set({label:s,icon:o,tooltip:!1,withText:!0}),r.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=n,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),r})}_createLinkProviderItemsView(e){const n=this.editor,s=n.locale.t,o=new dte(n.locale),{emptyListPlaceholder:r,label:a}=e;return o.emptyListPlaceholder=r||s("No links available"),o.title=a,this.listenTo(o,"cancel",()=>{n.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),o}_createPropertiesView(){const e=this.editor,n=this.editor.commands.get("link"),s=new(sh(hte))(e.locale);return this.listenTo(s,"back",()=>{e.editing.view.focus(),this._removePropertiesView()}),s.listChildren.bindTo(n.manualDecorators).using(o=>{const r=new Vp(e.locale);return r.set({label:o.label,withText:!0}),r.bind("isOn").toMany([o,n],"value",(a,l)=>l===void 0&&a===void 0?!!o.defaultValue:!!a),r.on("execute",()=>{o.set("value",!r.isOn),e.execute("link",n.value,this._getDecoratorSwitchesState())}),r}),s}_getDecoratorSwitchesState(){const e=this.editor.commands.get("link");return Array.from(e.manualDecorators).reduce((n,s)=>{const o=e.value===void 0&&s.value===void 0?s.defaultValue:s.value;return{...n,[s.id]:!!o}},{})}_registerEditingOpeners(){this.editor.plugins.get(Ec)._registerLinkOpener(n=>{const s=this._getLinkProviderLinkByHref(n);if(!s)return!1;const{item:o,provider:r}=s;return r.navigate?r.navigate(o):!1})}_registerComponents(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const n=this._createButton(xe);return n.set({tooltip:!0}),n}),e.ui.componentFactory.add("menuBar:link",()=>{const n=this._createButton(Jn);return n.set({role:"menuitemcheckbox"}),n}),e.ui.componentFactory.add("linkPreview",n=>{const s=new cte(n),o=e.config.get("link.allowedProtocols"),r=e.commands.get("link"),a=n.t;s.bind("isEnabled").to(r,"value",u=>!!u),s.bind("href").to(r,"value",u=>u&&gO(u,o));const l=u=>{if(!u){s.label=void 0,s.icon=void 0,s.tooltip=a("Open link in new tab");return}const h=this._getLinkProviderLinkByHref(u);if(h){const{label:m,tooltip:p,icon:v}=h.item;s.label=m,s.tooltip=p||!1,s.icon=v}else s.label=u,s.icon=void 0,s.tooltip=a("Open link in new tab")};return l(r.value),this.listenTo(r,"change:value",(u,h,m)=>{l(m)}),this.listenTo(s,"navigate",(u,h,m)=>{const p=this._getLinkProviderLinkByHref(h);if(!p)return;const{provider:v,item:C}=p,{navigate:x}=v;x&&x(C)&&(u.stop(),m())}),s}),e.ui.componentFactory.add("unlink",n=>{const s=e.commands.get("unlink"),o=new xe(n),r=n.t;return o.set({label:r("Unlink"),icon:bK,tooltip:!0}),o.bind("isEnabled").to(s),this.listenTo(o,"execute",()=>{e.execute("unlink"),this._hideUI()}),o}),e.ui.componentFactory.add("editLink",n=>{const s=e.commands.get("link"),o=new xe(n),r=n.t;return o.set({label:r("Edit link"),icon:nK,tooltip:!0}),o.bind("isEnabled").to(s),this.listenTo(o,"execute",()=>{this._addFormView()}),o}),e.ui.componentFactory.add("linkProperties",n=>{const s=e.commands.get("link"),o=new xe(n),r=n.t;return o.set({label:r("Link properties"),icon:lK,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled",s,"value",s,"manualDecorators",(a,l,u)=>a&&!!l&&u.length>0),this.listenTo(o,"execute",()=>{this._addPropertiesView()}),o})}_createLinksListProviderButton(e){const n=this.editor.locale,s=new fte(n);return s.set({label:e.label}),this.listenTo(s,"execute",()=>{this._showLinksProviderView(e)}),s}_createButton(e){const n=this.editor,s=n.locale,o=n.commands.get("link"),r=new e(n.locale),a=s.t;return r.set({label:a("Link"),icon:DV,keystroke:md,isToggleable:!0}),r.bind("isEnabled").to(o,"isEnabled"),r.bind("isOn").to(o,"value",l=>!!l),this.listenTo(r,"execute",()=>{n.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),r}_enableBalloonActivators(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(md,(s,o)=>{o(),e.commands.get("link").isEnabled&&(e.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,n)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,n)=>{this._isUIVisible&&(this._hideUI(),n())}),Uo({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),!this._isToolbarInPanel&&this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=e.isEnabled&&!!e.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=e.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),!this._arePropertiesInPanel&&(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(e){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(e),this._addLinkProviderItemsView(e)}_addLinkProviderItemsView(e){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(e)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const e=this.editor.commands.get("link");this.selectedLinkableText=void 0,e.value!==void 0?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(e=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(e=!0){const n=this.editor;this._isUIInPanel&&(this.stopListening(n.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e&&n.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(e),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const e=this.editor,n=e.editing.view.document;let s=this._getSelectedLinkElement(),o=a();const r=()=>{const l=this._getSelectedLinkElement(),u=a();s&&!l||!s&&u!==o?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),s=l,o=u};function a(){return n.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",r),this.listenTo(this._balloon,"change:visibleView",r)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const e=this.editor.editing.view,n=e.document;if(this.editor.model.markers.has(Os)){const o=this.editor.editing.mapper.markerNameToElements(Os);if(o){const r=Array.from(o),a=e.createRange(e.createPositionBefore(r[0]),e.createPositionAfter(r[r.length-1]));return{target:e.domConverter.viewRangeToDom(a)}}}return{target:()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(n.selection.getFirstRange())}}}_getSelectedLinkElement(){const e=this.editor.editing.view,n=e.document.selection,s=n.getSelectedElement();if(n.isCollapsed||s&&Jt(s))return d_(n.getFirstPosition());{const o=n.getFirstRange().getTrimmed(),r=d_(o.start),a=d_(o.end);return!r||r!=a?null:e.createRangeIn(r).getTrimmed().isEqual(o)?r:null}}_getSelectedLinkableText(){const e=this.editor.model,n=this.editor.editing,s=this._getSelectedLinkElement();if(!s)return pv(e.document.selection.getFirstRange());const o=n.view.createRangeOn(s),r=n.mapper.toModelRange(o);return pv(r)}_getLinkProviderLinkByHref(e){if(!e)return null;for(const n of this._linksProviders){const s=n.getItem?n.getItem(e):n.getListItems().find(o=>o.href===e);if(s)return{provider:n,item:s}}return null}_showFakeVisualSelection(){const e=this.editor.model;e.change(n=>{const s=e.document.selection.getFirstRange();if(e.markers.has(Os))n.updateMarker(Os,{range:s});else if(s.start.isAtEnd){const o=s.start.getLastMatchingPosition(({item:r})=>!e.schema.isContent(r),{boundaries:s});n.addMarker(Os,{usingOperation:!1,affectsData:!1,range:n.createRange(o,s.end)})}else n.addMarker(Os,{usingOperation:!1,affectsData:!1,range:s})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Os)&&e.change(n=>{n.removeMarker(Os)})}}function d_(i){return i.getAncestors().find(t=>jee(t))||null}function mte(i){const t=i.t,e=i.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!e&&!n.url.length)return t("Link URL must not be empty.")}]}const gte=4,wO=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),pte=2;class bte extends te{static get requires(){return[Vr,Ec]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?Dp(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const s=this.editor.model,o=s.document.selection,r=o.getFirstPosition(),a=o.getLastPosition();let l=e.getJoined(this._expandLinkRange(s,r)||e);l&&(l=l.getJoined(this._expandLinkRange(s,a)||e)),l&&(l.start.isBefore(r)||l.end.isAfter(a))&&t.setSelection(l)}_enablePasteLinking(){const t=this.editor,e=t.model,n=e.document.selection,s=t.plugins.get("ClipboardPipeline"),o=t.commands.get("link");s.on("inputTransformation",(r,a)=>{if(!this.isEnabled||!o.isEnabled||n.isCollapsed||a.method!=="paste"||n.rangeCount>1)return;const l=n.getFirstRange(),u=a.dataTransfer.getData("text/plain");if(!u)return;const h=u.match(wO);h&&h[2]===u&&(e.change(m=>{this._selectEntireLinks(m,l),o.execute(u)}),r.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new r1(t.model,n=>{let s=n;if(!wte(s))return;s=s.slice(0,-1),"!.:,;?".includes(s[s.length-1])&&(s=s.slice(0,-1));const o=nR(s);if(o)return{url:o,removedTrailingCharacters:n.length-s.length}});e.on("matched:data",(n,s)=>{const{batch:o,range:r,url:a,removedTrailingCharacters:l}=s;if(!o.isTyping)return;const u=r.end.getShiftedBy(-l),h=u.getShiftedBy(-a.length),m=t.model.createRange(h,u);this._applyAutoLink(a,m)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",()=>{var r;const s=e.document.selection.getFirstPosition();let o;(r=s.parent.previousSibling)!=null&&r.is("element")?o=e.createRangeIn(s.parent.previousSibling):o=e.createRange(e.createPositionAt(s.parent,0),s),this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",()=>{const s=e.document.selection.getFirstPosition(),o=e.createRange(e.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:s}=AN(t,e),o=nR(n);if(o){const r=e.createRange(s.end.getShiftedBy(-o.length),s.end);this._applyAutoLink(o,r)}}_applyAutoLink(t,e){const n=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),o=y1(t,s);!this.isEnabled||!yte(e,n)||!pO(o)||_te(e)||this._persistAutoLink(o,e)}_persistAutoLink(t,e){const n=this.editor.model,s=this.editor.plugins.get("Delete");n.enqueueChange(o=>{o.setAttribute("linkHref",t,e),n.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function wte(i){return i.length>gte&&i[i.length-1]===" "&&i[i.length-2]!==" "}function nR(i){const t=wO.exec(i);return t?t[pte]:null}function yte(i,t){return t.schema.checkAttributeInSelection(t.createSelection(i),"linkHref")}function _te(i){const t=i.start.nodeAfter;return!!t&&t.hasAttribute("linkHref")}class vte extends te{static get requires(){return[Ec,bO,bte]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class Cte extends te{static get requires(){return["ImageEditing","ImageUtils",Ec]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(Tte(t)),t.conversion.for("downcast").add(xte(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,n=t.commands.get("link").automaticDecorators;n.length&&t.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const n of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:n.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:n.id}),t.conversion.for("downcast").add(kte(n)),t.conversion.for("upcast").add(Ete(t,n))}}function Tte(i){const t=i.plugins.has("ImageInlineEditing"),e=i.plugins.get("ImageUtils");return n=>{n.on("element:a",(s,o,r)=>{const a=o.viewItem,l=e.findViewImgElement(a);if(!l)return;const u=l.findAncestor(v=>e.isBlockImageView(v));if(t&&!u)return;const h={attributes:["href"]};if(!r.consumable.consume(a,h))return;const m=a.getAttribute("href");if(!m)return;let p=o.modelCursor.parent;if(!p.is("element","imageBlock")){const v=r.convertItem(l,o.modelCursor);o.modelRange=v.modelRange,o.modelCursor=v.modelCursor,p=o.modelCursor.nodeBefore}p&&p.is("element","imageBlock")&&r.writer.setAttribute("linkHref",m,p)},{priority:"high"})}}function xte(i){const t=i.plugins.get("ImageUtils");return e=>{e.on("attribute:linkHref:imageBlock",(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=o.mapper.toViewElement(s.item),a=o.writer,l=Array.from(r.getChildren()).find(m=>m.is("element","a")),u=t.findViewImgElement(r),h=u.parent.is("element","picture")?u.parent:u;if(l)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,l):(a.move(a.createRangeOn(h),a.createPositionAt(r,0)),a.remove(l));else{const m=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(r,0),m),a.move(a.createRangeOn(h),a.createPositionAt(m,0))}},{priority:"high"})}}function kte(i){return t=>{t.on(`attribute:${i.id}:imageBlock`,(e,n,s)=>{const o=s.mapper.toViewElement(n.item),r=Array.from(o.getChildren()).find(a=>a.is("element","a"));if(r){if(i.value===void 0){for(const a in i.attributes)s.writer.removeAttribute(a,r);i.classes&&s.writer.removeClass(i.classes,r);for(const a in i.styles)s.writer.removeStyle(a,r);return}for(const[a,l]of Cs(i.attributes))s.writer.setAttribute(a,l,r);i.classes&&s.writer.addClass(i.classes,r);for(const a in i.styles)s.writer.setStyle(a,i.styles[a],r)}})}}function Ete(i,t){const e=i.plugins.has("ImageInlineEditing"),n=i.plugins.get("ImageUtils");return s=>{s.on("element:a",(o,r,a)=>{const l=r.viewItem,u=n.findViewImgElement(l);if(!u)return;const h=u.findAncestor(C=>n.isBlockImageView(C));if(e&&!h)return;const p=new Ts(t._createPattern()).match(l);if(!p||!a.consumable.consume(l,p.match))return;const v=r.modelCursor.nodeBefore||r.modelCursor.parent;a.writer.setAttribute(t.id,!0,v)},{priority:"high"})}}class Ste extends te{static get requires(){return[Ec,bO,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(n,s)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(s.preventDefault(),n.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",n=>{const s=new xe(n),o=t.plugins.get("LinkUI"),r=t.commands.get("link");return s.set({isEnabled:!0,label:e("Link image"),icon:DV,keystroke:md,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?o._addToolbarView():o._showUI(!0)}),s})}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class Ate extends te{static get requires(){return[Cte,Ste]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Rte=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:i,typeAttribute:t,listType:e}of Rte);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function iR(i,t){const e=(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=s.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(s.item),u=[...l.getChildren()].find(m=>m.getCustomProperty("media-content"));a.remove(u);const h=i.getMediaViewElement(a,r,t);a.insert(a.createPositionAt(l,0),h)};return n=>{n.on("attribute:url:media",e)}}function Ite(i,t,e){return t.setCustomProperty("media",!0,i),c1(i,t,{label:e})}function sR(i,t,e,n){return i.createContainerElement("figure",{class:"media"},[t.getMediaViewElement(i,e,n),i.createSlot()])}function oR(i){const t=i.getSelectedElement();return t&&t.is("element","media")?t:null}function yO(i,t,e,n){i.change(s=>{const o=s.createElement("media",{url:t});i.insertObject(o,e,null,{setSelection:"on",findOptimalPosition:n?"auto":void 0})})}class Pte extends Ge{refresh(){const t=this.editor.model,e=t.document.selection,n=oR(e);this.value=n?n.getAttribute("url"):void 0,this.isEnabled=Vte(e)||Mte(e,t)}execute(t){const e=this.editor.model,n=e.document.selection,s=oR(n);s?e.change(o=>{o.setAttribute("url",t,s)}):yO(e,t,n,!0)}}function Mte(i,t){let n=VN(i,t).start.parent;return n.isEmpty&&!t.schema.isLimit(n)&&(n=n.parent),t.schema.checkChild(n,"media")}function Vte(i){const t=i.getSelectedElement();return!!t&&t.name==="media"}const Nte="0 0 64 42";class Ote{constructor(t,e){w(this,"locale");w(this,"providerDefinitions");const n=e.providers,s=e.extraProviders||[],o=new Set(e.removeProviders),r=n.concat(s).filter(a=>{const l=a.name;return l?!o.has(l):(Ze("media-embed-no-provider-name",{provider:a}),!1)});this.locale=t,this.providerDefinitions=r}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n)}_getMedia(t){if(!t)return new rR(this.locale);t=t.trim();for(const e of this.providerDefinitions){const n=e.html,s=bn(e.url);for(const o of s){const r=this._getUrlMatches(t,o);if(r)return new rR(this.locale,t,r,n)}}return null}_getUrlMatches(t,e){let n=t.match(e);if(n)return n;let s=t.replace(/^https?:\/\//,"");return n=s.match(e),n||(s=s.replace(/^www\./,""),n=s.match(e),n)?n:null}}class rR{constructor(t,e,n,s){w(this,"url");w(this,"_locale");w(this,"_match");w(this,"_previewRenderer");this.url=this._getValidUrl(e),this._locale=t,this._match=n,this._previewRenderer=s}getViewElement(t,e){const n={};let s;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");const o=this._getPreviewHtml(e);s=t.createRawElement("div",n,(r,a)=>{a.setContentOf(r,o)})}else this.url&&(n.url=this.url),s=t.createEmptyElement(e.elementName,n);return t.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new os,e=this._locale.t;return t.content=jj,t.viewBox=Nte,new Ti({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":e("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}class zg extends te{constructor(e){super(e);w(this,"registry");e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:n=>{const s=n[1],o=n[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${s}${o?`?start=${o}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new Ote(e.locale,e.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.t,o=e.conversion,r=e.config.get("mediaEmbed.previewsInData"),a=e.config.get("mediaEmbed.elementName"),l=this.registry;e.commands.add("mediaEmbed",new Pte(e)),n.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),o.for("dataDowncast").elementToStructure({model:"media",view:(u,{writer:h})=>{const m=u.getAttribute("url");return sR(h,l,m,{elementName:a,renderMediaPreview:!!m&&r})}}),o.for("dataDowncast").add(iR(l,{elementName:a,renderMediaPreview:r})),o.for("editingDowncast").elementToStructure({model:"media",view:(u,{writer:h})=>{const m=u.getAttribute("url"),p=sR(h,l,m,{elementName:a,renderForEditingView:!0});return Ite(p,h,s("media widget"))}}),o.for("editingDowncast").add(iR(l,{elementName:a,renderForEditingView:!0})),o.for("upcast").elementToElement({view:u=>["oembed",a].includes(u.name)&&u.getAttribute("url")?{name:!0}:null,model:(u,{writer:h})=>{const m=u.getAttribute("url");return l.hasMedia(m)?h.createElement("media",{url:m}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(u,{writer:h})=>{const m=u.getAttribute("data-oembed-url");return l.hasMedia(m)?h.createElement("media",{url:m}):null}}).add(u=>{const h=(m,p,v)=>{if(!v.consumable.consume(p.viewItem,{name:!0,classes:"media"}))return;const{modelRange:C,modelCursor:x}=v.convertChildren(p.viewItem,p.modelCursor);p.modelRange=C,p.modelCursor=x,Ln(C.getItems())||v.consumable.revert(p.viewItem,{name:!0,classes:"media"})};u.on("element:figure",h)})}}const Dte=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class Lte extends te{constructor(e){super(e);w(this,"_timeoutId");w(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[h1,Vr,f1]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const r=n.selection.getFirstRange(),a=zt.fromPosition(r.start);a.stickiness="toPrevious";const l=zt.fromPosition(r.end);l.stickiness="toNext",n.once("change:data",()=>{this._embedMediaBetweenPositions(a,l),a.detach(),l.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(he.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,n){const s=this.editor,o=s.plugins.get(zg).registry,r=new ei(e,n),a=r.getWalker({ignoreElementEnd:!0});let l="";for(const h of a)h.item.is("$textProxy")&&(l+=h.item.data);if(l=l.trim(),!l.match(Dte)){r.detach();return}if(!o.hasMedia(l)){r.detach();return}if(!s.commands.get("mediaEmbed").isEnabled){r.detach();return}this._positionToInsert=zt.fromPosition(e),this._timeoutId=he.window.setTimeout(()=>{s.model.change(h=>{this._timeoutId=null,h.remove(r),r.detach();let m=null;this._positionToInsert.root.rootName!=="$graveyard"&&(m=this._positionToInsert),yO(s.model,l,m,!1),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get(Vr).requestUndoOnBackspace()},100)}}class Bte extends fe{constructor(e,n){super(n);w(this,"focusTracker");w(this,"keystrokes");w(this,"urlInputView");w(this,"_validators");w(this,"_urlInputViewInfoDefault");w(this,"_urlInputViewInfoTip");this.focusTracker=new yt,this.keystrokes=new Ot,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),zr({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,n=new sn(this.locale,ti),s=n.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),n.label=e("Media URL"),n.infoText=this._urlInputViewInfoDefault,s.inputMode="url",s.on("input",()=>{n.infoText=s.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=s.element.value.trim()}),n}}class Fte extends te{constructor(){super(...arguments);w(this,"_formView")}static get requires(){return[zg,xc]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(xe);return s.tooltip=!0,s.label=n("Insert media"),s}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(Jn);return s.label=n("Media"),s})}_createDialogButton(e){const n=this.editor,s=new e(n.locale),o=n.commands.get("mediaEmbed"),r=this.editor.plugins.get("Dialog");return s.icon=Kj,s.bind("isEnabled").to(o,"isEnabled"),s.on("execute",()=>{r.id==="mediaEmbed"?r.hide():this._showDialog()}),s}_showDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.commands.get("mediaEmbed"),o=e.locale.t,r=s.value!==void 0;if(!this._formView){const a=e.plugins.get(zg).registry;this._formView=new(sh(Bte))(Ute(e.t,a),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}n.show({id:"mediaEmbed",title:o("Media embed"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=s.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:o("Cancel"),withText:!0,onExecute:()=>n.hide()},{label:o(r?"Save":"Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,n=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),n.hide(),e.editing.view.focus())}}function Ute(i,t){return[e=>{if(!e.url.length)return i("The URL must not be empty.")},e=>{if(!t.hasMedia(e.url))return i("This media URL is not supported.")}]}class zte extends te{static get requires(){return[zg,Fte,Lte,Ph]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const aR={"(":")","[":"]","{":"}"};class Hte extends Ge{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"mention")}execute(t){const e=this.editor.model,s=e.document.selection,o=typeof t.mention=="string"?{id:t.mention}:t.mention,r=o.id,a=t.range||s.getFirstRange();if(!e.canEditAt(a))return;const l=t.text||r,u=_O({_text:l,id:r},o);if(!r.startsWith(t.marker))throw new N("mentioncommand-incorrect-id",this);e.change(h=>{const m=Cs(s.getAttributes()),p=new Map(m.entries());p.set("mention",u);const v=e.insertContent(h.createText(l,p),a),C=v.start.nodeBefore,x=v.end.nodeAfter,k=x&&x.is("$text")&&x.data.startsWith(" ");let S=!1;if(C&&x&&C.is("$text")&&x.is("$text")){const I=C.data.slice(-1),P=I in aR,L=P&&x.data.startsWith(aR[I]);S=P&&L}!S&&!k&&e.insertContent(h.createText(" ",m),a.start.getShiftedBy(l.length))})}}class Wte extends te{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model,n=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:s=>vO(s)}}),t.conversion.for("downcast").attributeToElement({model:"mention",view:Gte}),t.conversion.for("downcast").add(qte),n.registerPostFixer(s=>Kte(s,n,e.schema)),n.registerPostFixer(s=>Zte(s,n)),n.registerPostFixer(s=>$te(s,n)),t.commands.add("mention",new Hte(t))}}function _O(i,t){return Object.assign({uid:si()},i,t||{})}function vO(i,t){const e=i.getAttribute("data-mention"),n=i.getChild(0);if(!n)return;const s={id:e,_text:n.data};return _O(s,t)}function qte(i){i.on("attribute:mention",(t,e,n)=>{const s=e.attributeNewValue;if(!e.item.is("$textProxy")||!s)return;const o=e.range.start;(o.textNode||o.nodeAfter).data!=s._text&&n.consumable.consume(e.item,t.name)},{priority:"highest"})}function Gte(i,{writer:t}){if(!i)return;const e={class:"mention","data-mention":i.id},n={id:i.uid,priority:20};return t.createAttributeElement("span",e,n)}function $te(i,t){const e=t.selection,n=e.focus;return e.isCollapsed&&e.hasAttribute("mention")&&jte(n)?(i.removeSelectionAttribute("mention"),!0):!1}function jte(i){const t=i.isAtStart;return i.nodeBefore&&i.nodeBefore.is("$text")||t}function Kte(i,t,e){const n=t.differ.getChanges();let s=!1;for(const o of n){if(o.type=="attribute")continue;const r=o.position;if(o.name=="$text"){const a=r.textNode&&r.textNode.nextSibling;s=ga(r.textNode,i)||s,s=ga(a,i)||s,s=ga(r.nodeBefore,i)||s,s=ga(r.nodeAfter,i)||s}if(o.name!="$text"&&o.type=="insert"){const a=r.nodeAfter;for(const l of i.createRangeIn(a).getItems())s=ga(l,i)||s}if(o.type=="insert"&&e.isInline(o.name)){const a=r.nodeAfter&&r.nodeAfter.nextSibling;s=ga(r.nodeBefore,i)||s,s=ga(a,i)||s}}return s}function Zte(i,t){const e=t.differ.getChanges();let n=!1;for(const s of e)if(s.type==="attribute"&&s.attributeKey!="mention"){const o=s.range.start.nodeBefore,r=s.range.end.nodeAfter;for(const a of[o,r])CO(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(i.setAttribute(s.attributeKey,s.attributeNewValue,a),n=!0)}return n}function CO(i){if(!i||!(i.is("$text")||i.is("$textProxy"))||!i.hasAttribute("mention"))return!1;const t=i.data,n=i.getAttribute("mention")._text;return t!=n}function ga(i,t){return CO(i)?(t.removeAttribute("mention",i),!0):!1}class Yte extends Ka{constructor(e){super(e);w(this,"selected");w(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,n=this.items.getIndex(e);this.select(n+1)}selectPrevious(){const e=this.selected,n=this.items.getIndex(e);this.select(n-1)}select(e){let n=0;e>0&&e<this.items.length?n=e:e<0&&(n=this.items.length-1);const s=this.items.get(n);this.selected!==s&&(this.selected&&this.selected.removeHighlight(),s.highlight(),this.selected=s,this._isItemVisibleInScrolledArea(s)||(this.element.scrollTop=s.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new Pe(this.element).contains(new Pe(e.element))}}class Jte extends fe{constructor(e,n){super(e);w(this,"domElement");this.template=void 0,this.domElement=n,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(s,o,r)=>{r?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class Xte extends rs{constructor(){super(...arguments);w(this,"item");w(this,"marker")}highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}const Em=3,Qte=[Ue.arrowup,Ue.arrowdown,Ue.esc],ene=[Ue.enter,Ue.tab];class tne extends te{constructor(e){super(e);w(this,"_mentionsView");w(this,"_mentionsConfigurations");w(this,"_balloon");w(this,"_items",new En);w(this,"_lastRequested");w(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=ss(this._requestFeed,100),e.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[as]}init(){const e=this.editor,n=e.config.get("mention.commitKeys")||ene,s=Qte.concat(n);this._balloon=e.plugins.get(as),e.editing.view.document.on("keydown",(a,l)=>{r(l.keyCode)&&this._isUIVisible&&(l.preventDefault(),a.stop(),l.keyCode==Ue.arrowdown&&this._mentionsView.selectNext(),l.keyCode==Ue.arrowup&&this._mentionsView.selectPrevious(),n.includes(l.keyCode)&&this._mentionsView.executeSelected(),l.keyCode==Ue.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),Uo({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const o=e.config.get("mention.feeds");for(const a of o){const{feed:l,marker:u,dropdownLimit:h}=a;if(!lne(u))throw new N("mentionconfig-incorrect-marker",null,{marker:u});const m=typeof l=="function"?l.bind(this.editor):one(l),p=a.itemRenderer,v={marker:u,feedCallback:m,itemRenderer:p,dropdownLimit:h};this._mentionsConfigurations.set(u,v)}this._setupTextWatcher(o),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(a,l)=>this._handleFeedResponse(l)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function r(a){return s.includes(a)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,n=new Yte(e);return n.items.bindTo(this._items).using(s=>{const{item:o,marker:r}=s,{dropdownLimit:a}=this._mentionsConfigurations.get(r),l=a||this.editor.config.get("mention.dropdownLimit")||10;if(n.items.length>=l)return null;const u=new Xte(e),h=this._renderItem(o,r);return h.delegate("execute").to(u),u.children.add(h),u.item=o,u.marker=r,u.on("execute",()=>{n.fire("execute",{item:o,marker:r})}),u}),n.on("execute",(s,o)=>{const r=this.editor,a=r.model,l=o.item,u=o.marker,h=r.model.markers.get("mention"),m=a.createPositionAt(a.document.selection.focus),p=a.createPositionAt(h.getStart()),v=a.createRange(p,m);this._hideUIAndRemoveMarker(),r.execute("mention",{mention:l,text:l.text,marker:u,range:v}),r.editing.view.focus()}),n}_getItemRenderer(e){const{itemRenderer:n}=this._mentionsConfigurations.get(e);return n}_requestFeed(e,n){this._lastRequested=n;const{feedCallback:s}=this._mentionsConfigurations.get(e),o=s(n);if(!(o instanceof Promise)){this.fire("requestFeed:response",{feed:o,marker:e,feedText:n});return}o.then(a=>{this._lastRequested==n?this.fire("requestFeed:response",{feed:a,marker:e,feedText:n}):this.fire("requestFeed:discarded",{feed:a,marker:e,feedText:n})}).catch(a=>{this.fire("requestFeed:error",{error:a}),Ze("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const n=this.editor,s=e.map(a=>({...a,pattern:xO(a.marker,a.minimumCharacters||0)})),o=new r1(n.model,ine(s));o.on("matched",(a,l)=>{const u=TO(s,l.text),m=n.model.document.selection.focus,p=n.model.createPositionAt(m.parent,u.position);if(rne(m)||ane(p)){this._hideUIAndRemoveMarker();return}const v=sne(u,l.text),C=u.marker.length+v.length,x=m.getShiftedBy(-C),k=m.getShiftedBy(-v.length),S=n.model.createRange(x,k);if(h_(n)){const I=n.model.markers.get("mention");n.model.change(P=>{P.updateMarker(I,{range:S})})}else n.model.change(I=>{I.addMarker("mention",{range:S,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(u.marker,v)}),o.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const r=n.commands.get("mention");return o.bind("isEnabled").to(r),o}_handleFeedResponse(e){const{feed:n,marker:s}=e;if(!h_(this.editor))return;this._items.clear();for(const r of n){const a=typeof r!="object"?{id:r,text:r}:r;this._items.add({item:a,marker:s})}const o=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(o):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0,balloonClassName:"ck-mention-balloon"}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),h_(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,n){const s=this.editor;let o,r=e.id;const a=this._getItemRenderer(n);if(a){const l=a(e);typeof l!="string"?o=new Jte(s.locale,l):r=l}if(!o){const l=new xe(s.locale);l.label=r,l.withText=!0,o=l}return o}_getBalloonPanelPositionData(e,n){const s=this.editor,o=s.editing,r=o.view.domConverter,a=o.mapper,l=s.locale.uiLanguageDirection;return{target:()=>{let u=e.getRange();u.start.root.rootName=="$graveyard"&&(u=s.model.document.selection.getFirstRange());const h=a.toViewRange(u);return Pe.getDomRangeRects(r.viewRangeToDom(h)).pop()},limiter:()=>{const u=this.editor.editing.view,m=u.document.selection.editableElement;return m?u.domConverter.mapViewToDom(m.root):null},positions:nne(n,l)}}}function nne(i,t){const e={caret_se:n=>({top:n.bottom+Em,left:n.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(n,s)=>({top:n.top-s.height-Em,left:n.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(n,s)=>({top:n.bottom+Em,left:n.right-s.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(n,s)=>({top:n.top-s.height-Em,left:n.right-s.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,i)?[e[i]]:t!=="rtl"?[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]:[e.caret_sw,e.caret_se,e.caret_nw,e.caret_ne]}function TO(i,t){let e;for(const n of i){const s=t.lastIndexOf(n.marker);s>0&&!t.substring(s-1).match(n.pattern)||(!e||s>=e.position)&&(e={marker:n.marker,position:s,minimumCharacters:n.minimumCharacters,pattern:n.pattern})}return e}function xO(i,t){const e=t==0?"*":`{${t},}`,n=Se.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,s=".";i=i.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const o=`(?:^|[ ${n}])(${i})(${s}${e})$`;return new RegExp(o,"u")}function ine(i){return e=>{const n=TO(i,e);if(!n)return!1;let s=0;n.position!==0&&(s=n.position-1);const o=e.substring(s);return n.pattern.test(o)}}function sne(i,t){let e=0;i.position!==0&&(e=i.position-1);const n=xO(i.marker,0);return t.substring(e).match(n)[2]}function one(i){return t=>i.filter(n=>(typeof n=="string"?n:String(n.id)).toLowerCase().includes(t.toLowerCase()))}function rne(i){const t=i.textNode&&i.textNode.hasAttribute("mention"),e=i.nodeBefore;return t||e&&e.is("$text")&&e.hasAttribute("mention")}function ane(i){const t=i.nodeAfter;return t&&t.is("$text")&&t.hasAttribute("mention")}function lne(i){return!!i}function h_(i){return i.model.markers.has("mention")}class cne extends te{toMentionAttribute(t,e){return vO(t,e)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[Wte,tne]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function une(i,t){const e=[];for(const n of t.createRangeIn(i)){const s=n.item;s.is("element","a")&&!s.hasAttribute("href")&&(s.hasAttribute("id")||s.hasAttribute("name"))&&e.push(s)}for(const n of e){const s=n.parent.getChildIndex(n)+1,o=n.getChildren();t.insertChild(s,o,n.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function dne(i){const t=parseFloat(i);return i.endsWith("pt")?sc(t*96/72):i.endsWith("pc")?sc(t*12*96/72):i.endsWith("in")?sc(t*96):i.endsWith("cm")?sc(t*96/2.54):i.endsWith("mm")?sc(t/10*96/2.54):i}function lR(i){return i!==void 0&&i.endsWith("px")}function sc(i){return i.toFixed(2).replace(/\.?0+$/,"")+"px"}function hne(i,t,e){if(!i.childCount)return;const n=new Fo(i.document),s=mne(i,n);if(!s.length)return;const o={},r=[];for(const a of s)if(a.indent!==void 0){gne(a)||(r.length=0);const l=`${a.id}:${a.indent}`,u=Math.min(a.indent-1,r.length);if(u<r.length&&r[u].id!==a.id&&(r.length=u),u<r.length-1)r.length=u+1;else{const m=pne(a,t);if(u>r.length-1||r[u].listElement.name!=m.type){u==0&&m.type=="ol"&&a.id!==void 0&&o[l]&&(m.startIndex=o[l]);const p=_ne(m,n,e);if(lR(a.marginLeft)&&(u==0||lR(r[u-1].marginLeft))){let v=a.marginLeft;u>0&&(v=sc(parseFloat(v)-parseFloat(r[u-1].marginLeft))),n.setStyle("padding-left",v,p)}if(r.length==0){const v=a.element.parent,C=v.getChildIndex(a.element)+1;n.insertChild(C,p,v)}else{const v=r[u-1].listItemElements;n.appendChild(p,v[v.length-1])}r[u]={...a,listElement:p,listItemElements:[]},u==0&&a.id!==void 0&&(o[l]=m.startIndex||1)}}const h=a.element.name=="li"?a.element:n.createElement("li");n.appendChild(h,r[u].listElement),r[u].listItemElements.push(h),u==0&&a.id!==void 0&&o[l]++,a.element!=h&&n.appendChild(a.element,h),Cne(a.element,n),n.removeStyle("text-indent",a.element),n.removeStyle("margin-left",a.element)}else{const l=r.find(u=>u.marginLeft==a.marginLeft);if(l){const u=l.listItemElements;n.appendChild(a.element,u[u.length-1]),n.removeStyle("margin-left",a.element)}else r.length=0}}function fne(i,t){for(const e of t.createRangeIn(i)){const n=e.item;if(n.is("element","li")){const s=n.getChild(0);s&&s.is("element","p")&&t.unwrapElement(s)}}}function mne(i,t){const e=t.createRangeIn(i),n=[],s=new Set;for(const o of e.getItems()){if(!o.is("element")||!o.name.match(/^(p|h\d+|li|div)$/))continue;let r=Tne(o);if(r!==void 0&&parseFloat(r)==0&&!Array.from(o.getClassNames()).find(a=>a.startsWith("MsoList"))&&(r=void 0),o.hasStyle("mso-list")||r!==void 0&&s.has(r)){const a=vne(o);n.push({element:o,id:a.id,order:a.order,indent:a.indent,marginLeft:r}),r!==void 0&&s.add(r)}else s.clear()}return n}function gne(i){const t=i.element.previousSibling;return cR(t||i.element.parent)}function cR(i){return i.is("element","ol")||i.is("element","ul")}function pne(i,t){const e=new RegExp(`@list l${i.id}:level${i.indent}\\s*({[^}]*)`,"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,o=new RegExp(`@list\\s+l${i.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),r=new RegExp(`@list l${i.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=o.exec(t),l=r.exec(t),u=a&&!l,h=e.exec(t);let m="decimal",p="ol",v=null;if(h&&h[1]){const C=n.exec(h[1]);if(C&&C[1]&&(m=C[1].trim(),p=m!=="bullet"&&m!=="image"?"ol":"ul"),m==="bullet"){const x=bne(i.element);x&&(m=x)}else{const x=s.exec(h[1]);x&&x[1]&&(v=parseInt(x[1]))}u&&(p="ol")}return{type:p,startIndex:v,style:yne(m),isLegalStyleList:u}}function bne(i){if(i.name=="li"&&i.parent.name=="ul"&&i.parent.hasAttribute("type"))return i.parent.getAttribute("type");const t=wne(i);if(!t)return null;const e=t._data;return e==="o"?"circle":e==="·"?"disc":e==="§"?"square":null}function wne(i){if(i.getChild(0).is("$text"))return null;for(const t of i.getChildren()){if(!t.is("element","span"))continue;const e=t.getChild(0);if(e)return e.is("$text")?e:e.getChild(0)}/* istanbul ignore next -- @preserve */return null}function yne(i){if(i.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(i){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return i;default:return null}}function _ne(i,t,e){const n=t.createElement(i.type);return i.style&&t.setStyle("list-style-type",i.style,n),i.startIndex&&i.startIndex>1&&t.setAttribute("start",i.startIndex,n),i.isLegalStyleList&&e&&t.addClass("legal-list",n),n}function vne(i){const t=i.getStyle("mso-list");if(t===void 0)return{};const e=t.match(/(^|\s{1,100})l(\d+)/i),n=t.match(/\s{0,100}lfo(\d+)/i),s=t.match(/\s{0,100}level(\d+)/i);return e&&n&&s?{id:e[2],order:n[1],indent:parseInt(s[1])}:{indent:1}}function Cne(i,t){const e=new Ts({name:"span",styles:{"mso-list":"Ignore"}}),n=t.createRangeIn(i);for(const s of n)s.type==="elementStart"&&e.match(s.item)&&t.remove(s.item)}function Tne(i){const t=i.getStyle("margin-left");return t===void 0||t.endsWith("px")?t:dne(t)}function xne(i,t){if(!i.childCount)return;const e=new Fo(i.document),n=Ene(i,e);Sne(n,i,e),Rne(n,i,e),Ane(i,e);const s=Ine(i,e);s.length&&Mne(s,Pne(t),e)}function kne(i){return btoa(i.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}function Ene(i,t){const e=t.createRangeIn(i),n=new Ts({name:/v:(.+)/}),s=[];for(const o of e){if(o.type!="elementStart")continue;const r=o.item,a=r.previousSibling,l=a&&a.is("element")?a.name:null,u=["Chart"],h=n.match(r),m=r.getAttribute("o:gfxdata"),p=l==="v:shapetype",v=m&&u.some(C=>r.getAttribute("id").includes(C));h&&m&&!p&&!v&&s.push(o.item.getAttribute("id"))}return s}function Sne(i,t,e){const n=e.createRangeIn(t),s=new Ts({name:"img"}),o=[];for(const r of n)if(r.item.is("element")&&s.match(r.item)){const a=r.item,l=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];l.length&&l.every(u=>i.indexOf(u)>-1)?o.push(a):a.getAttribute("src")||o.push(a)}for(const r of o)e.remove(r)}function Ane(i,t){const e=t.createRangeIn(i),n=new Ts({name:/v:(.+)/}),s=[];for(const o of e)o.type=="elementStart"&&n.match(o.item)&&s.push(o.item);for(const o of s)t.remove(o)}function Rne(i,t,e){const n=e.createRangeIn(t),s=[];for(const a of n)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const l=a.item.getAttribute("id");if(i.includes(l))continue;o(a.item.parent.getChildren(),l)||s.push(a.item)}for(const a of s){const l={src:r(a)};a.hasAttribute("alt")&&(l.alt=a.getAttribute("alt"));const u=e.createElement("img",l);e.insertChild(a.index+1,u,a.parent)}function o(a,l){for(const u of a){/* istanbul ignore else -- @preserve */if(u.is("element")&&(u.name=="img"&&u.getAttribute("v:shapes")==l||o(u.getChildren(),l)))return!0}return!1}function r(a){for(const l of a.getChildren()){/* istanbul ignore else -- @preserve */if(l.is("element")&&l.getAttribute("src"))return l.getAttribute("src")}}}function Ine(i,t){const e=t.createRangeIn(i),n=new Ts({name:"img"}),s=[];let o=0;for(const r of e)r.item.is("element")&&n.match(r.item)&&(r.item.getAttribute("src").startsWith("file://")&&s.push({element:r.item,imageIndex:o}),o++);return s}function Pne(i){if(!i)return[];const t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),n=i.match(e),s=[];if(n)for(const o of n){let r=!1;o.includes("\\pngblip")?r="image/png":o.includes("\\jpegblip")&&(r="image/jpeg"),r&&s.push({hex:o.replace(t,"").replace(/[^\da-fA-F]/g,""),type:r})}return s}function Mne(i,t,e){for(let n=0;n<i.length;n++){const{element:s,imageIndex:o}=i[n],r=t[o];if(r){const a=`data:${r.type};base64,${kne(r.hex)}`;e.setAttribute("src",a,s)}}}function Vne(i){const t=[],e=new Fo(i.document);for(const{item:n}of e.createRangeIn(i))if(n.is("element")){for(const s of n.getClassNames())/\bmso/gi.exec(s)&&e.removeClass(s,n);for(const s of n.getStyleNames())/\bmso/gi.exec(s)&&e.removeStyle(s,n);(n.is("element","w:sdt")||n.is("element","w:sdtpr")&&n.isEmpty||n.is("element","o:p")&&n.isEmpty)&&t.push(n)}for(const n of t){const s=n.parent,o=s.getChildIndex(n);e.insertChild(o,n.getChildren(),s),e.remove(n)}}const Nne=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,One=/xmlns:o="urn:schemas-microsoft-com/i;class Dne{constructor(t,e=!1){w(this,"document");w(this,"hasMultiLevelListPlugin");this.document=t,this.hasMultiLevelListPlugin=e}isActive(t){return Nne.test(t)||One.test(t)}execute(t){const e=new Fo(this.document),{body:n,stylesString:s}=t._parsedData;une(n,e),hne(n,s,this.hasMultiLevelListPlugin),xne(n,t.dataTransfer.getData("text/rtf")),Vne(n),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Lne(i,t){for(const e of i.getChildren())if(e.is("element","b")&&e.getStyle("font-weight")==="normal"){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}function Bne(i,t){const e=new Ep(t.document.stylesProcessor),n=new Ap(e,{renderingMode:"data"}),s=n.blockElements,o=n.inlineObjectElements,r=[];for(const a of t.createRangeIn(i)){const l=a.item;if(l.is("element","br")){const u=uR(l,"forward",t,{blockElements:s,inlineObjectElements:o}),h=uR(l,"backward",t,{blockElements:s,inlineObjectElements:o}),m=dR(u,s);(dR(h,s)||m)&&r.push(l)}}for(const a of r)a.hasClass("Apple-interchange-newline")?t.remove(a):t.replace(a,t.createElement("p"))}function uR(i,t,e,{blockElements:n,inlineObjectElements:s}){let o=e.createPositionAt(i,t=="forward"?"after":"before");return o=o.getLastMatchingPosition(({item:r})=>r.is("element")&&!n.includes(r.name)&&!s.includes(r.name),{direction:t}),t=="forward"?o.nodeAfter:o.nodeBefore}function dR(i,t){return!!i&&i.is("element")&&t.includes(i.name)}const Fne=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class Une{constructor(t){w(this,"document");this.document=t}isActive(t){return Fne.test(t)}execute(t){const e=new Fo(this.document),{body:n}=t._parsedData;Lne(n,e),fne(n,e),Bne(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zne(i,t){for(const e of i.getChildren())e.is("element","table")&&e.hasAttribute("xmlns")&&t.removeAttribute("xmlns",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Hne(i,t){for(const e of i.getChildren())if(e.is("element","google-sheets-html-origin")){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Wne(i,t){for(const e of i.getChildren())e.is("element","table")&&e.getStyle("width")==="0px"&&t.removeStyle("width",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function qne(i,t){for(const e of Array.from(i.getChildren()))e.is("element","style")&&t.remove(e)}const Gne=/<google-sheets-html-origin/i;class $ne{constructor(t){w(this,"document");this.document=t}isActive(t){return Gne.test(t)}execute(t){const e=new Fo(this.document),{body:n}=t._parsedData;Hne(n,e),zne(n,e),Wne(n,e),qne(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jne(i){return hR(hR(i)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function Kne(i){i.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t,n=e.innerText.length||0;e.innerText=Array(n+1).join("  ").substr(0,n)})}function hR(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length===1?" ":Array(e.length+1).join("  ").substr(0,e.length))}function Zne(i,t){const e=new DOMParser;i=i.replace(/<!--\[if gte vml 1]>/g,""),i=i.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const n=jne(Xne(i)),s=e.parseFromString(n,"text/html");Kne(s);const o=s.body.innerHTML,r=Yne(s,t),a=Jne(s);return{body:r,bodyString:o,styles:a.styles,stylesString:a.stylesString}}function Yne(i,t){const e=new Ep(t),n=new Ap(e,{renderingMode:"data"}),s=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);return n.domToView(s,{skipComments:!0})}function Jne(i){const t=[],e=[],n=Array.from(i.getElementsByTagName("style"));for(const s of n)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(t.push(s.sheet),e.push(s.innerHTML));return{styles:t,stylesString:e.join(" ")}}function Xne(i){const t="</body>",e="</html>",n=i.indexOf(t);if(n<0)return i;const s=i.indexOf(e,n+t.length);return i.substring(0,n+t.length)+(s>=0?i.substring(s):"")}class Qne extends te{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[ls]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),n=t.editing.view.document,s=[],o=this.editor.plugins.has("MultiLevelList");s.push(new Dne(n,o)),s.push(new Une(n)),s.push(new $ne(n)),e.on("inputTransformation",(r,a)=>{if(a._isTransformedWithPasteFromOffice||t.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const u=a.dataTransfer.getData("text/html"),h=s.find(m=>m.isActive(u));h&&(a._parsedData||(a._parsedData=Zne(u,n.stylesProcessor)),h.execute(a),a._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function _1(i,t){const{modelAttribute:e,styleName:n,viewElement:s,defaultValue:o,reduceBoxSides:r=!1,shouldUpcast:a=()=>!0}=t;i.for("upcast").attributeToAttribute({view:{name:s,styles:{[n]:/[\s\S]+/}},model:{key:e,value:(l,u,h)=>{if(!a(l))return;const m=Er(o,"",h),p=l.getNormalizedStyle(n),v=r?eg(p):p;if(m!==v)return v}}})}function bv(i,t,e,n){i.for("upcast").add(s=>s.on("element:"+t,(o,r,a)=>{if(!r.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(x=>r.viewItem.hasStyle(x));if(!l.length)return;const u={styles:l};if(!a.consumable.test(r.viewItem,u))return;const h=[...r.modelRange.getItems({shallow:!0})].pop(),m=h.findAncestor("table",{includeSelf:!0});let p=n;m&&m.getAttribute("tableType")=="layout"&&(p={style:"none",color:"",width:""}),a.consumable.consume(r.viewItem,u);const v={style:r.viewItem.getNormalizedStyle("border-style"),color:r.viewItem.getNormalizedStyle("border-color"),width:r.viewItem.getNormalizedStyle("border-width")},C={style:eg(v.style),color:eg(v.color),width:eg(v.width)};C.style!==p.style&&a.writer.setAttribute(e.style,C.style,h),C.color!==p.color&&a.writer.setAttribute(e.color,C.color,h),C.width!==p.width&&a.writer.setAttribute(e.width,C.width,h)}))}function Md(i,t){const{modelElement:e,modelAttribute:n,styleName:s}=t;i.for("downcast").attributeToAttribute({model:{name:e,key:n},view:o=>({key:"style",value:{[s]:o}})})}function Qm(i,t){const{modelAttribute:e,styleName:n}=t;i.for("downcast").add(s=>s.on(`attribute:${e}:table`,(o,r,a)=>{const{item:l,attributeNewValue:u}=r,{mapper:h,writer:m}=a;if(!a.consumable.consume(r.item,o.name))return;const p=[...h.toViewElement(l).getChildren()].find(v=>v.is("element","table"));u?m.setStyle(n,u,p):m.removeStyle(n,p)}))}function Er(i,t,e){const n=e.modelRange&&Ln(e.modelRange.getItems({shallow:!0})),s=n&&n.is("element")&&n.findAncestor("table",{includeSelf:!0});return s&&s.getAttribute("tableType")==="layout"?t:i}function eg(i){if(!i)return;const t=["top","right","bottom","left"];if(!t.every(o=>i[o]))return i;const n=i.top;return t.every(o=>i[o]===n)?n:i}function Yt(i,t,e,n,s=1){t!=null&&s!==void 0&&s!==null&&t>s?n.setAttribute(i,t,e):n.removeAttribute(i,e)}function Ya(i,t,e={}){const n=i.createElement("tableCell",e);return i.insertElement("paragraph",n),i.insert(n,t),n}function wv(i,t){const e=t.parent.parent,n=parseInt(e.getAttribute("headingColumns")||"0"),{column:s}=i.getCellLocation(t);return!!n&&s<n}function tg(i,t,e){const{modelAttribute:n}=e;i.extend("tableCell",{allowAttributes:[n]}),_1(t,{viewElement:/^(td|th)$/,...e}),Md(t,{modelElement:"tableCell",...e})}function Sr(i){const t=i.getSelectedElement();return t&&t.is("element","table")?t:i.getFirstPosition().findAncestor("table")}function eie(){return i=>{i.on("element:figure",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const s=iie(e.viewItem);if(!s||!n.consumable.test(s,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const o=n.convertItem(s,e.modelCursor),r=Ln(o.modelRange.getItems());if(!r){n.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}n.convertChildren(e.viewItem,n.writer.createPositionAt(r,"end")),n.updateConversionResult(r,e)})}}function tie(){return i=>{i.on("element:table",(t,e,n)=>{const s=e.viewItem;if(!n.consumable.test(s,{name:!0}))return;const{rows:o,headingRows:r,headingColumns:a}=sie(s),l={};a&&(l.headingColumns=a),r&&(l.headingRows=r);const u=n.writer.createElement("table",l);if(n.safeInsert(u,e.modelCursor)){if(n.consumable.consume(s,{name:!0}),o.forEach(h=>n.convertItem(h,n.writer.createPositionAt(u,"end"))),n.convertChildren(s,n.writer.createPositionAt(u,"end")),u.isEmpty){const h=n.writer.createElement("tableRow");n.writer.insert(h,n.writer.createPositionAt(u,"end")),Ya(n.writer,n.writer.createPositionAt(h,"end"))}n.updateConversionResult(u,e)}})}}function nie(){return i=>{i.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&t.stop()},{priority:"high"})}}function fR(i){return t=>{t.on(`element:${i}`,(e,n,{writer:s})=>{if(!n.modelRange)return;const o=n.modelRange.start.nodeAfter,r=s.createPositionAt(o,0);if(n.viewItem.isEmpty){s.insertElement("paragraph",r);return}const a=Array.from(o.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=s.createElement("paragraph");s.insert(l,s.createPositionAt(o,0));for(const u of a)s.move(s.createRangeOn(u),s.createPositionAt(l,"end"))}},{priority:"low"})}}function iie(i){for(const t of i.getChildren())if(t.is("element","table"))return t}function sie(i){let t=0,e;const n=[],s=[];let o;for(const r of Array.from(i.getChildren())){if(r.name!=="tbody"&&r.name!=="thead"&&r.name!=="tfoot")continue;r.name==="thead"&&!o&&(o=r);const a=Array.from(r.getChildren()).filter(u=>u.is("element","tr"));let l=null;for(const u of a){const h=Array.from(u.getChildren()).filter(m=>m.is("element","td")||m.is("element","th"));if(o&&r===o||r.name==="tbody"&&h.length>0&&(l===null||h.length===l)&&h.every(m=>m.is("element","th")))t++,n.push(u);else{s.push(u);const m=oie(u);(!e||m<e)&&(e=m)}l=Math.max(l||0,h.length)}}return{headingRows:t,headingColumns:e||0,rows:[...n,...s]}}function oie(i){let t=0,e=0;const n=Array.from(i.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;e<n.length&&n[e].name==="th";){const s=n[e],o=parseInt(s.getAttribute("colspan")||"1");t=t+o,e++}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class pt{constructor(t,e={}){w(this,"_table");w(this,"_startRow");w(this,"_endRow");w(this,"_startColumn");w(this,"_endColumn");w(this,"_includeAllSlots");w(this,"_skipRows");w(this,"_row");w(this,"_rowIndex");w(this,"_column");w(this,"_cellIndex");w(this,"_spannedCells");w(this,"_nextCellAtColumn");w(this,"_jumpedToStartRow",!1);this._table=t,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const s=t.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const o=parseInt(s.getAttribute("colspan")||"1"),r=parseInt(s.getAttribute("rowspan")||"1");(o>1||r>1)&&this._recordSpans(s,r,o),this._shouldSkipSlot()||(e=this._formatOutValue(s)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new rie(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return t||e||n||s}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const s={cell:t,row:this._row,column:this._column};for(let o=this._row;o<this._row+e;o++)for(let r=this._column;r<this._column+n;r++)(o!=this._row||r!=this._column)&&this._markSpannedCell(o,r,s)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((n,s)=>n+parseInt(s.getAttribute("colspan")||"1"),0)}}class rie{constructor(t,e,n,s){w(this,"cell");w(this,"row");w(this,"column");w(this,"cellAnchorRow");w(this,"cellAnchorColumn");w(this,"_cellIndex");w(this,"_rowIndex");w(this,"_table");this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=s,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function mR(i,t){return(e,{writer:n})=>{const s=e.getAttribute("headingRows")||0,o=n.createContainerElement("table",null,[]),r=n.createContainerElement("figure",{class:"table"},o);s>0&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("thead",null,n.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<i.getRows(e)&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("tbody",null,n.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:l}of t.additionalSlots)n.insert(n.createPositionAt(o,a),n.createSlot(l));return n.insert(n.createPositionAt(o,"after"),n.createSlot(a=>a.is("element","tableRow")?!1:!t.additionalSlots.some(({filter:l})=>l(a)))),t.asWidget?lie(r,n):r}}function aie(){return(i,{writer:t})=>i.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}function gR(i={}){return(t,{writer:e})=>{const n=t.parent,s=n.parent,o=s.getChildIndex(n),r=new pt(s,{row:o}),a=s.getAttribute("headingRows")||0,l=s.getAttribute("headingColumns")||0;let u=null;for(const h of r)if(h.cell==t){const p=h.row<a||h.column<l?"th":"td";u=i.asWidget?u1(e.createEditableElement(p),e,{withAriaRole:!1}):e.createContainerElement(p);break}return u}}function pR(i={}){return(t,{writer:e})=>{if(!t.parent.is("element","tableCell")||!kO(t))return null;if(i.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const n=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}}function kO(i){return i.parent.childCount==1&&!cie(i)}function lie(i,t){return t.setCustomProperty("table",!0,i),c1(i,t,{hasSelectionHandle:!0})}function cie(i){for(const t of i.getAttributeKeys())if(!(t.startsWith("selection:")||t=="htmlEmptyBlock"))return!0;return!1}class uie extends Ge{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=die(e,n)}execute(t={}){const e=this.editor,n=e.model,s=e.plugins.get("TableUtils"),o=e.config.get("table.defaultHeadings.rows"),r=e.config.get("table.defaultHeadings.columns");t.headingRows===void 0&&o&&(t.headingRows=o),t.headingColumns===void 0&&r&&(t.headingColumns=r),n.change(a=>{const l=s.createTable(a,t);n.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function die(i,t){const e=i.getFirstPosition().parent,n=e===e.root?e:e.parent;return t.checkChild(n,"table")}class bR extends Ge{constructor(e,n={}){super(e);w(this,"order");this.order=n.order||"below"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),o=this.order==="above",r=s.getSelectionAffectedTableCells(n),a=s.getRowIndexes(r),l=o?a.first:a.last,u=r[0].findAncestor("table");s.insertRows(u,{at:o?l:l+1,copyStructureFromAbove:!o})}}class wR extends Ge{constructor(e,n={}){super(e);w(this,"order");this.order=n.order||"right"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),o=this.order==="left",r=s.getSelectionAffectedTableCells(n),a=s.getColumnIndexes(r),l=o?a.first:a.last,u=r[0].findAncestor("table");s.insertColumns(u,{columns:1,at:o?l:l+1})}}class yR extends Ge{constructor(e,n={}){super(e);w(this,"direction");this.direction=n.direction||"horizontally"}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(n,2):e.splitCellVertically(n,2)}}function EO(i,t,e){const{startRow:n,startColumn:s,endRow:o,endColumn:r}=t,a=e.createElement("table"),l=i.getAttribute("tableType");l&&e.setAttribute("tableType",l,a);const u=o-n+1;for(let m=0;m<u;m++)e.insertElement("tableRow",a,"end");const h=[...new pt(i,{startRow:n,endRow:o,startColumn:s,endColumn:r,includeAllSlots:!0})];for(const{row:m,column:p,cell:v,isAnchor:C,cellAnchorRow:x,cellAnchorColumn:k}of h){const S=m-n,I=a.getChild(S);if(!C)(x<n||k<s)&&Ya(e,e.createPositionAt(I,"end"));else{const P=e.cloneElement(v);e.append(P,I),PO(P,m,p,o,r,e)}}return hie(a,i,n,s,e),a}function SO(i,t,e=0){const n=[],s=new pt(i,{startRow:e,endRow:t-1});for(const o of s){const{row:r,cellHeight:a}=o,l=r+a-1;r<t&&t<=l&&n.push(o)}return n}function AO(i,t,e){const n=i.parent,s=n.parent,o=n.index,r=parseInt(i.getAttribute("rowspan")),a=t-o,l={},u=r-a;u>1&&(l.rowspan=u);const h=parseInt(i.getAttribute("colspan")||"1");h>1&&(l.colspan=h);const m=o,p=m+a,v=[...new pt(s,{startRow:m,endRow:p,includeAllSlots:!0})];let C=null,x;for(const k of v){const{row:S,column:I,cell:P}=k;P===i&&x===void 0&&(x=I),x!==void 0&&x===I&&S===p&&(C=Ya(e,k.getPositionBefore(),l))}return Yt("rowspan",a,i,e),C}function RO(i,t){const e=[],n=new pt(i);for(const s of n){const{column:o,cellWidth:r}=s,a=o+r-1;o<t&&t<=a&&e.push(s)}return e}function IO(i,t,e,n){const s=parseInt(i.getAttribute("colspan")),o=e-t,r={},a=s-o;a>1&&(r.colspan=a);const l=parseInt(i.getAttribute("rowspan")||"1");l>1&&(r.rowspan=l);const u=Ya(n,n.createPositionAfter(i),r);return Yt("colspan",o,i,n),u}function PO(i,t,e,n,s,o){const r=parseInt(i.getAttribute("colspan")||"1"),a=parseInt(i.getAttribute("rowspan")||"1");if(e+r-1>s){const h=s-e+1;Yt("colspan",h,i,o,1)}if(t+a-1>n){const h=n-t+1;Yt("rowspan",h,i,o,1)}}function hie(i,t,e,n,s){const o=parseInt(t.getAttribute("headingRows")||"0");if(o>0){const a=o-e;Yt("headingRows",a,i,s,0)}const r=parseInt(t.getAttribute("headingColumns")||"0");if(r>0){const a=r-n;Yt("headingColumns",a,i,s,0)}}function yv(i,t){const e=t.getColumns(i),n=new Array(e).fill(0);for(const{column:o}of new pt(i))n[o]++;const s=n.reduce((o,r,a)=>r?o:[...o,a],[]);if(s.length>0){const o=s[s.length-1];return t.removeColumns(i,{at:o}),!0}return!1}function _v(i,t){const e=[],n=t.getRows(i);for(let s=0;s<n;s++)i.getChild(s).isEmpty&&e.push(s);if(e.length>0){const s=e[e.length-1];return t.removeRows(i,{at:s}),!0}return!1}function v1(i,t){yv(i,t)||_v(i,t)}function MO(i,t){const e=Array.from(new pt(i,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(e.every(({cellHeight:o})=>o===1))return t.lastRow;const s=e[0].cellHeight-1;return t.lastRow+s}function VO(i,t){const e=Array.from(new pt(i,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(e.every(({cellWidth:o})=>o===1))return t.lastColumn;const s=e[0].cellWidth-1;return t.lastColumn+s}class Sm extends Ge{constructor(e,n){super(e);w(this,"direction");w(this,"isHorizontal");this.direction=n.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,n=e.document,o=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(n.selection)[0],r=this.value,a=this.direction;e.change(l=>{const u=a=="right"||a=="down",h=u?o:r,m=u?r:o,p=m.parent;gie(m,h,l);const v=this.isHorizontal?"colspan":"rowspan",C=parseInt(o.getAttribute(v)||"1"),x=parseInt(r.getAttribute(v)||"1");l.setAttribute(v,C+x,h),l.setSelection(l.createRangeIn(h));const k=this.editor.plugins.get("TableUtils"),S=p.findAncestor("table");v1(S,k)})}_getMergeableCell(){const n=this.editor.model.document,s=this.editor.plugins.get("TableUtils"),o=s.getTableCellsContainingSelection(n.selection)[0];if(!o)return;const r=this.isHorizontal?fie(o,this.direction,s):mie(o,this.direction,s);if(!r)return;const a=this.isHorizontal?"rowspan":"colspan",l=parseInt(o.getAttribute(a)||"1");if(parseInt(r.getAttribute(a)||"1")===l)return r}}function fie(i,t,e){const s=i.parent.parent,o=t=="right"?i.nextSibling:i.previousSibling,r=(s.getAttribute("headingColumns")||0)>0;if(!o)return;const a=t=="right"?i:o,l=t=="right"?o:i,{column:u}=e.getCellLocation(a),{column:h}=e.getCellLocation(l),m=parseInt(a.getAttribute("colspan")||"1"),p=wv(e,a),v=wv(e,l);return r&&p!=v?void 0:u+m===h?o:void 0}function mie(i,t,e){const n=i.parent,s=n.parent,o=s.getChildIndex(n);if(t=="down"&&o===e.getRows(s)-1||t=="up"&&o===0)return null;const r=parseInt(i.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,l=t=="down"&&o+r===a,u=t=="up"&&o===a;if(a&&(l||u))return null;const h=parseInt(i.getAttribute("rowspan")||"1"),m=t=="down"?o+h:o,p=[...new pt(s,{endRow:m})],C=p.find(k=>k.cell===i).column,x=p.find(({row:k,cellHeight:S,column:I})=>I!==C?!1:t=="down"?k===m:m===k+S);return x&&x.cell?x.cell:null}function gie(i,t,e){_R(i)||(_R(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function _R(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}class pie extends Ge{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),r=t.getRows(s)-1,a=t.getRowIndexes(e),l=a.first===0&&a.last===r;this.isEnabled=!l}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),o=n[0],r=o.findAncestor("table"),a=e.getCellLocation(o).column;t.change(l=>{const u=s.last-s.first+1;e.removeRows(r,{at:s.first,rows:u});const h=bie(r,s.first,a,e.getRows(r));l.setSelection(l.createPositionAt(h,0))})}}function bie(i,t,e,n){const s=i.getChild(Math.min(t,n-1));let o=s.getChild(0),r=0;for(const a of s.getChildren()){if(r>e)return o;o=a,r+=parseInt(a.getAttribute("colspan")||"1")}return o}class wie extends Ge{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),o=t.getColumns(s),{first:r,last:a}=t.getColumnIndexes(e);this.isEnabled=a-r<o-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=_ie(this.editor.model.document.selection,t),s=e.parent.parent,o=[...new pt(s)],r={first:o.find(l=>l.cell===e).column,last:o.find(l=>l.cell===n).column},a=yie(o,e,n,r);this.editor.model.change(l=>{const u=r.last-r.first+1;t.removeColumns(s,{at:r.first,columns:u}),l.setSelection(l.createPositionAt(a,0))})}}function yie(i,t,e,n){return parseInt(e.getAttribute("colspan")||"1")>1?e:t.previousSibling||e.nextSibling?e.nextSibling||t.previousSibling:n.first?i.reverse().find(({column:o})=>o<n.first).cell:i.reverse().find(({column:o})=>o>n.last).cell}function _ie(i,t){const e=t.getSelectionAffectedTableCells(i),n=e[0],s=e.pop(),o=[n,s];return n.isBefore(s)?o:o.reverse()}class vie extends Ge{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(n.length===0){this.isEnabled=!1,this.value=!1;return}const s=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(s,"headingRows"),this.value=n.every(o=>this._isInHeading(o,o.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=e.getRowIndexes(s),l=this.value?r:a+1,u=o.getAttribute("headingRows")||0;n.change(h=>{if(l){const m=l>u?u:0,p=SO(o,l,m);for(const{cell:v}of p)AO(v,l,h)}Yt("headingRows",l,o,h,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||"0");return!!n&&t.parent.index<n}}class Cie extends Ge{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(n.length===0){this.isEnabled=!1,this.value=!1;return}const s=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(s,"headingColumns"),this.value=n.every(o=>wv(t,o))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=e.getColumnIndexes(s),l=this.value?r:a+1;n.change(u=>{if(l){const h=RO(o,l);for(const{cell:m,column:p}of h)IO(m,p,l,u)}Yt("headingColumns",l,o,u,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Tie=5,vv=40,xie=2,kie=3;function Eie(i){const t=new Set;for(const e of i.document.differ.getChanges()){let n=null;switch(e.type){case"insert":n=["table","tableRow","tableCell"].includes(e.name)?e.position:null;break;case"remove":n=["tableRow","tableCell"].includes(e.name)?e.position:null;break;case"attribute":e.range.start.nodeAfter&&(n=["table","tableRow","tableCell"].includes(e.range.start.nodeAfter.name)?e.range.start:null);break}if(!n)continue;const s=n.nodeAfter&&n.nodeAfter.is("element","table")?n.nodeAfter:n.findAncestor("table");for(const o of i.createRangeOn(s).getItems())o.is("element","table")&&Vh(o)&&t.add(o)}return t}function Sie(i,t){return vv*100/NO(i,t)}function NO(i,t){const e=vR(i,"tbody",t)||vR(i,"thead",t),n=t.editing.view.domConverter.mapViewToDom(e);return Cv(n)}function vR(i,t,e){return[...[...e.editing.mapper.toViewElement(i).getChildren()].find(o=>o.is("element","table")).getChildren()].find(o=>o.is("element",t))}function Cv(i){const t=he.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseFloat(t.width)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):parseFloat(t.width)}function Aie(i,t){const e=t.getCellLocation(i).column,n=i.getAttribute("colspan")||1;return{leftEdge:e,rightEdge:e+n-1}}function pi(i){const t=Math.pow(10,xie),e=typeof i=="number"?i:parseFloat(i);return Math.round(e*t)/t}function Rie(i,t,e){return i<=t?pi(t):i>=e?pi(e):pi(i)}function Iie(i,t){return Array(i).fill(t)}function ch(i){return i.map(t=>typeof t=="number"?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function C1(i){const t=i.map(s=>s==="auto"?s:parseFloat(s.replace("%","")));let e=Pie(t);const n=ch(e);return n!==100&&(e=e.map(s=>pi(s*100/n)).map((s,o,r)=>{if(!(o===r.length-1))return s;const l=ch(r);return pi(s+100-l)})),e.map(s=>s+"%")}function Pie(i){const t=i.filter(s=>s==="auto").length;if(t===0)return i.map(s=>pi(s));const e=ch(i),n=Math.max((100-e)/t,Tie);return i.map(s=>s==="auto"?n:s).map(s=>pi(s))}function Mie(i){const t=he.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseInt(t.width):parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderWidth)}function OO(i,t,e,n){for(let s=0;s<Math.max(e.length,i.length);s++){const o=i[s],r=e[s];r?o?n.setAttribute("columnWidth",r,o):n.appendElement("tableColumn",{columnWidth:r},t):n.remove(o)}}function Vh(i){if(i.is("element","tableColumnGroup"))return i;const t=i.getChildren();return Array.from(t).find(e=>e.is("element","tableColumnGroup"))}function Nh(i){const t=Vh(i);return t?Array.from(t.getChildren()):[]}function Vie(i){return Nh(i).map(t=>t.getAttribute("columnWidth"))}function Nie(i,t){return Nh(i).reduce((n,s)=>{const o=s.getAttribute("columnWidth"),r=s.getAttribute("colSpan");if(!r)return n.push(o),n;for(let a=0;a<r;a++)n.push(o);return t.removeAttribute("colSpan",s),n},[])}class xn extends te{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,s=n.getChildIndex(e),o=new pt(n,{row:s});for(const{cell:r,row:a,column:l}of o)if(r===t)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(t,e){const n=t.createElement("table"),s=e.rows||2,o=e.columns||2;return f_(t,n,0,s,o),e.headingRows&&Yt("headingRows",Math.min(e.headingRows,s),n,t,0),e.headingColumns&&Yt("headingColumns",Math.min(e.headingColumns,o),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,s=e.at||0,o=e.rows||1,r=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?s-1:s,l=this.getRows(t),u=this.getColumns(t);if(s>l)throw new N("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change(h=>{const m=t.getAttribute("headingRows")||0;if(m>s&&Yt("headingRows",m+o,t,h,0),!r&&(s===0||s===l)){f_(h,t,s,o,u);return}const p=r?Math.max(s,a):s,v=new pt(t,{endRow:p}),C=new Array(u).fill(1);for(const{row:x,column:k,cellHeight:S,cellWidth:I,cell:P}of v){const L=x+S-1,O=x<s&&s<=L,J=x<=a&&a<=L;O?(h.setAttribute("rowspan",S+o,P),C[k]=-I):r&&J&&(C[k]=I)}for(let x=0;x<o;x++){const k=h.createElement("tableRow");h.insert(k,t,s);for(let S=0;S<C.length;S++){const I=C[S],P=h.createPositionAt(k,"end");I>0&&Ya(h,P,I>1?{colspan:I}:void 0),S+=Math.abs(I)-1}}})}insertColumns(t,e={}){const n=this.editor.model,s=e.at||0,o=e.columns||1;n.change(r=>{const a=t.getAttribute("headingColumns");s<a&&r.setAttribute("headingColumns",a+o,t);const l=this.getColumns(t);if(s===0||l===s){for(const h of t.getChildren())h.is("element","tableRow")&&oc(o,r,r.createPositionAt(h,s?"end":0));return}const u=new pt(t,{column:s,includeAllSlots:!0});for(const h of u){const{row:m,cell:p,cellAnchorColumn:v,cellAnchorRow:C,cellWidth:x,cellHeight:k}=h;if(v<s){r.setAttribute("colspan",x+o,p);const S=C+k-1;for(let I=m;I<=S;I++)u.skipRow(I)}else oc(o,r,h.getPositionBefore())}})}removeRows(t,e){const n=this.editor.model,s=e.rows||1,o=this.getRows(t),r=e.at,a=r+s-1;if(a>o-1)throw new N("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change(l=>{const u={first:r,last:a},{cellsToMove:h,cellsToTrim:m}=Lie(t,u);if(h.size){const p=a+1;Bie(t,p,h,l)}for(let p=a;p>=r;p--)l.remove(t.getChild(p));for(const{rowspan:p,cell:v}of m)Yt("rowspan",p,v,l);Die(t,u,l),yv(t,this)||_v(t,this)})}removeColumns(t,e){const n=this.editor.model,s=e.at,o=e.columns||1,r=e.at+o-1;n.change(a=>{Oie(t,{first:s,last:r},a);const l=Nh(t);for(let u=r;u>=s;u--){for(const{cell:h,column:m,cellWidth:p}of[...new pt(t)])m<=u&&p>1&&m+p>u?Yt("colspan",p-1,h,a):m===u&&a.remove(h);if(l[u]){const h=u===0?l[1]:l[u-1],m=parseFloat(l[u].getAttribute("columnWidth")),p=parseFloat(h.getAttribute("columnWidth"));a.remove(l[u]),a.setAttribute("columnWidth",m+p+"%",h)}}_v(t,this)||yv(t,this)})}splitCellVertically(t,e=2){const n=this.editor.model,o=t.parent.parent,r=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");n.change(l=>{if(a>1){const{newCellsSpan:u,updatedSpan:h}=CR(a,e);Yt("colspan",h,t,l);const m={};u>1&&(m.colspan=u),r>1&&(m.rowspan=r);const p=a>e?e-1:a-1;oc(p,l,l.createPositionAfter(t),m)}if(a<e){const u=e-a,h=[...new pt(o)],{column:m}=h.find(({cell:x})=>x===t),p=h.filter(({cell:x,cellWidth:k,column:S})=>{const I=x!==t&&S===m,P=S<m&&S+k>m;return I||P});for(const{cell:x,cellWidth:k}of p)l.setAttribute("colspan",k+u,x);const v={};r>1&&(v.rowspan=r),oc(u,l,l.createPositionAfter(t),v);const C=o.getAttribute("headingColumns")||0;C>m&&Yt("headingColumns",C+u,o,l)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,s=t.parent,o=s.parent,r=o.getChildIndex(s),a=parseInt(t.getAttribute("rowspan")||"1"),l=parseInt(t.getAttribute("colspan")||"1");n.change(u=>{if(a>1){const h=[...new pt(o,{startRow:r,endRow:r+a-1,includeAllSlots:!0})],{newCellsSpan:m,updatedSpan:p}=CR(a,e);Yt("rowspan",p,t,u);const{column:v}=h.find(({cell:k})=>k===t),C={};m>1&&(C.rowspan=m),l>1&&(C.colspan=l);let x=0;for(const k of h){const{column:S,row:I}=k,P=I>=r+p,L=S===v;x>=m&&L&&(x=0),P&&L&&(x||oc(1,u,k.getPositionBefore(),C),x++)}}if(a<e){const h=e-a,m=[...new pt(o,{startRow:0,endRow:r})];for(const{cell:C,cellHeight:x,row:k}of m)if(C!==t&&k+x>r){const S=x+h;u.setAttribute("rowspan",S,C)}const p={};l>1&&(p.colspan=l),f_(u,o,r+1,h,1,p);const v=o.getAttribute("headingRows")||0;v>r&&Yt("headingRows",v+h,o,u)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(n=>n.is("element","tableCell")).reduce((n,s)=>{const o=parseInt(s.getAttribute("colspan")||"1");return n+o},0)}getRows(t){return Array.from(t.getChildren()).reduce((e,n)=>n.is("element","tableRow")?e+1:e,0)}createTableWalker(t,e={}){return new pt(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const s=n.getContainedElement();s&&s.is("element","tableCell")&&e.push(s)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const s=n.start.findAncestor("tableCell");s&&e.push(s)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(n=>n.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),s=[...new pt(e)].filter(o=>t.includes(o.cell)).map(o=>o.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let s=0;for(const r of t){const{row:a,column:l}=this.getCellLocation(r),u=parseInt(r.getAttribute("rowspan"))||1,h=parseInt(r.getAttribute("colspan"))||1;e.add(a),n.add(l),u>1&&e.add(a+u-1),h>1&&n.add(l+h-1),s+=u*h}return Uie(e,n)==s}sortRanges(t){return Array.from(t).sort(Fie)}_getFirstLastIndexesObject(t){const e=t.sort((o,r)=>o-r),n=e[0],s=e[e.length-1];return{first:n,last:s}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),s=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,s))return!1;const o=this.getColumnIndexes(t),r=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,r)}_areIndexesInSameSection({first:t,last:e},n){const s=t<n,o=e<n;return s===o}}function f_(i,t,e,n,s,o={}){for(let r=0;r<n;r++){const a=i.createElement("tableRow");i.insert(a,t,e),oc(s,i,i.createPositionAt(a,"end"),o)}}function oc(i,t,e,n={}){for(let s=0;s<i;s++)Ya(t,e,n)}function CR(i,t){if(i<t)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(i/t),n=i-e*t+e;return{newCellsSpan:e,updatedSpan:n}}function Oie(i,t,e){const n=i.getAttribute("headingColumns")||0;if(n&&t.first<n){const s=Math.min(n-1,t.last)-t.first+1;e.setAttribute("headingColumns",n-s,i)}}function Die(i,{first:t,last:e},n){const s=i.getAttribute("headingRows")||0;if(t<s){const o=e<s?s-(e-t+1):t;Yt("headingRows",o,i,n,0)}}function Lie(i,{first:t,last:e}){const n=new Map,s=[];for(const{row:o,column:r,cellHeight:a,cell:l}of new pt(i,{endRow:e})){const u=o+a-1;if(o>=t&&o<=e&&u>e){const p=e-o+1,v=a-p;n.set(r,{cell:l,rowspan:v})}if(o<t&&u>=t){let p;u>=e?p=e-t+1:p=u-t+1,s.push({cell:l,rowspan:a-p})}}return{cellsToMove:n,cellsToTrim:s}}function Bie(i,t,e,n){const o=[...new pt(i,{includeAllSlots:!0,row:t})],r=i.getChild(t);let a;for(const{column:l,cell:u,isAnchor:h}of o)if(e.has(l)){const{cell:m,rowspan:p}=e.get(l),v=a?n.createPositionAfter(a):n.createPositionAt(r,0);n.move(n.createRangeOn(m),v),Yt("rowspan",p,m,n),a=m}else h&&(a=u)}function Fie(i,t){const e=i.start,n=t.start;return e.isBefore(n)?-1:1}function Uie(i,t){const e=Array.from(i.values()),n=Array.from(t.values()),s=Math.max(...e),o=Math.min(...e),r=Math.max(...n),a=Math.min(...n);return(s-o+1)*(r-a+1)}class zie extends Ge{refresh(){const t=this.editor.plugins.get(xn),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(xn);t.change(n=>{const s=e.getSelectedTableCells(t.document.selection),o=s.shift(),{mergeWidth:r,mergeHeight:a}=Wie(o,s,e);Yt("colspan",r,o,n),Yt("rowspan",a,o,n);for(const u of s)Hie(u,o,n);const l=o.findAncestor("table");v1(l,e),n.setSelection(o,"in")})}}function Hie(i,t,e){TR(i)||(TR(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function TR(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}function Wie(i,t,e){let n=0,s=0;for(const u of t){const{row:h,column:m}=e.getCellLocation(u);n=xR(u,m,n,"colspan"),s=xR(u,h,s,"rowspan")}const{row:o,column:r}=e.getCellLocation(i),a=n-r,l=s-o;return{mergeWidth:a,mergeHeight:l}}function xR(i,t,e,n){const s=parseInt(i.getAttribute(n)||"1");return Math.max(e,t+s)}class qie extends Ge{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),o=n[0].findAncestor("table"),r=[];for(let a=s.first;a<=s.last;a++)for(const l of o.getChild(a).getChildren())r.push(t.createRangeOn(l));t.change(a=>{a.setSelection(r)})}}class Gie extends Ge{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),s=n[0],o=n.pop(),r=s.findAncestor("table"),a=t.getCellLocation(s),l=t.getCellLocation(o),u=Math.min(a.column,l.column),h=Math.max(a.column,l.column),m=[];for(const p of new pt(r,{startColumn:u,endColumn:h}))m.push(e.createRangeOn(p.cell));e.change(p=>{p.setSelection(m)})}}function $ie(i){i.document.registerPostFixer(t=>jie(t,i))}function jie(i,t){const e=t.document.differ.getChanges();let n=!1;const s=new Set;for(const o of e){let r=null;o.type=="insert"&&o.name=="table"&&(r=o.position.nodeAfter),(o.type=="insert"||o.type=="remove")&&(o.name=="tableRow"||o.name=="tableCell")&&(r=o.position.findAncestor("table")),Xie(o)&&(r=o.range.start.findAncestor("table")),r&&!s.has(r)&&(n=Kie(r,i)||n,n=Zie(r,i)||n,s.add(r))}return n}function Kie(i,t){let e=!1;const n=Yie(i);if(n.length){e=!0;for(const s of n)Yt("rowspan",s.rowspan,s.cell,t,1)}return e}function Zie(i,t){let e=!1;const n=Jie(i),s=[];for(const[l,u]of n.entries())!u&&i.getChild(l).is("element","tableRow")&&s.push(l);if(s.length){e=!0;for(const l of s.reverse())t.remove(i.getChild(l)),n.splice(l,1)}const o=n.filter((l,u)=>i.getChild(u).is("element","tableRow")),r=o[0];if(!o.every(l=>l===r)){const l=o.reduce((u,h)=>h>u?h:u,0);for(const[u,h]of o.entries()){const m=l-h;if(m){for(let p=0;p<m;p++)Ya(t,t.createPositionAt(i.getChild(u),"end"));e=!0}}}return e}function Yie(i){const t=parseInt(i.getAttribute("headingRows")||"0"),e=Array.from(i.getChildren()).reduce((s,o)=>o.is("element","tableRow")?s+1:s,0),n=[];for(const{row:s,cell:o,cellHeight:r}of new pt(i)){if(r<2)continue;const l=s<t?t:e;if(s+r>l){const u=l-s;n.push({cell:o,rowspan:u})}}return n}function Jie(i){const t=new Array(i.childCount).fill(0);for(const{rowIndex:e}of new pt(i,{includeAllSlots:!0}))t[e]++;return t}function Xie(i){if(i.type!=="attribute")return!1;const t=i.attributeKey;return t==="headingRows"||t==="colspan"||t==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qie(i){i.document.registerPostFixer(t=>ese(t,i))}function ese(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e)s.type=="insert"&&s.name=="table"&&(n=tse(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableRow"&&(n=DO(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableCell"&&(n=Tv(s.position.nodeAfter,i)||n),(s.type=="remove"||s.type=="insert")&&nse(s)&&(n=Tv(s.position.parent,i)||n);return n}function tse(i,t){let e=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(e=DO(n,t)||e);return e}function DO(i,t){let e=!1;for(const n of i.getChildren())e=Tv(n,t)||e;return e}function Tv(i,t){if(i.childCount==0)return t.insertElement("paragraph",i),!0;const e=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of e)t.wrap(t.createRangeOn(n),"paragraph");return!!e.length}function nse(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}function ise(i,t){const e=i.document.differ;for(const n of e.getChanges()){let s,o=!1;if(n.type=="attribute"){const u=n.range.start.nodeAfter;if(!u||!u.is("element","table")||n.attributeKey!="headingRows"&&n.attributeKey!="headingColumns")continue;s=u,o=n.attributeKey=="headingRows"}else(n.name=="tableRow"||n.name=="tableCell")&&(s=n.position.findAncestor("table"),o=n.name=="tableRow");if(!s)continue;const r=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,l=new pt(s);for(const u of l){const m=u.row<r||u.column<a?"th":"td",p=t.mapper.toViewElement(u.cell);p&&p.is("element")&&p.name!=m&&t.reconvertItem(o?u.cell.parent:u.cell)}}}function sse(i,t){const e=i.document.differ,n=new Set;for(const s of e.getChanges()){const o=s.type=="attribute"?s.range.start.parent:s.position.parent;o.is("element","tableCell")&&n.add(o)}for(const s of n.values()){const o=Array.from(s.getChildren()).filter(r=>ose(r,t.mapper));for(const r of o)t.reconvertItem(r)}}function ose(i,t){if(!i.is("element","paragraph"))return!1;const e=t.toViewElement(i);return e?kO(i)!==e.is("element","span"):!1}class Oh extends te{constructor(e){super(e);w(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[xn]}init(){const e=this.editor,n=e.model,s=n.schema,o=e.conversion,r=e.plugins.get(xn);s.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),s.register("tableRow",{allowIn:"table",isLimit:!0}),s.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),o.for("upcast").add(eie()),o.for("upcast").add(tie()),o.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:mR(r,{asWidget:!0,additionalSlots:this._additionalSlots})}),o.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:mR(r,{additionalSlots:this._additionalSlots})}),o.for("upcast").elementToElement({model:"tableRow",view:"tr"}),o.for("upcast").add(nie()),o.for("downcast").elementToElement({model:"tableRow",view:aie()}),o.for("upcast").elementToElement({model:"tableCell",view:"td"}),o.for("upcast").elementToElement({model:"tableCell",view:"th"}),o.for("upcast").add(fR("td")),o.for("upcast").add(fR("th")),o.for("editingDowncast").elementToElement({model:"tableCell",view:gR({asWidget:!0})}),o.for("dataDowncast").elementToElement({model:"tableCell",view:gR()}),o.for("editingDowncast").elementToElement({model:"paragraph",view:pR({asWidget:!0}),converterPriority:"high"}),o.for("dataDowncast").elementToElement({model:"paragraph",view:pR(),converterPriority:"high"}),o.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),o.for("upcast").attributeToAttribute({model:{key:"colspan",value:kR("colspan")},view:"colspan"}),o.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),o.for("upcast").attributeToAttribute({model:{key:"rowspan",value:kR("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new uie(e)),e.commands.add("insertTableRowAbove",new bR(e,{order:"above"})),e.commands.add("insertTableRowBelow",new bR(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new wR(e,{order:"left"})),e.commands.add("insertTableColumnRight",new wR(e,{order:"right"})),e.commands.add("removeTableRow",new pie(e)),e.commands.add("removeTableColumn",new wie(e)),e.commands.add("splitTableCellVertically",new yR(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new yR(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new zie(e)),e.commands.add("mergeTableCellRight",new Sm(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Sm(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Sm(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Sm(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Cie(e)),e.commands.add("setTableRowHeader",new vie(e)),e.commands.add("selectTableRow",new qie(e)),e.commands.add("selectTableColumn",new Gie(e)),$ie(n),Qie(n),this.listenTo(n.document,"change:data",()=>{ise(n,e.editing),sse(n,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function kR(i){return t=>{const e=parseInt(t.getAttribute(i));return Number.isNaN(e)||e<=0?null:e}}class ER extends fe{constructor(e){super(e);w(this,"items");w(this,"keystrokes");w(this,"focusTracker");const n=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Ot,this.focusTracker=new yt,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(s,o)=>`${o} × ${s}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":n.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:n.to("label")}]}],on:{mousedown:n.to(s=>{s.preventDefault()}),click:n.to(()=>{this.fire("execute")})}}),this.on("boxover",(s,o)=>{const{row:r,column:a}=o.target.dataset;this.items.get((parseInt(r,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(s,o,r)=>{if(!r)return;const{row:a,column:l}=r.dataset;this.set({rows:parseInt(a),columns:parseInt(l)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),Q0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,n=this.columns;this.items.map((s,o)=>{const r=Math.floor(o/10),a=o%10,l=r<e&&a<n;s.set("isOn",l)})}_createGridButton(e,n,s,o){const r=new xe(e);return r.set({label:o,class:"ck-insert-table-dropdown-grid-box"}),r.extendTemplate({attributes:{"data-row":n,"data-column":s}}),r}_createGridCollection(){const e=[];for(let n=0;n<100;n++){const s=Math.floor(n/10),o=n%10,r=`${s+1} × ${o+1}`;e.push(this._createGridButton(this.locale,s+1,o+1,r))}return this.createCollection(e)}}class rse extends te{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,s=t.locale.contentLanguageDirection==="ltr";t.ui.componentFactory.add("insertTable",o=>{const r=t.commands.get("insertTable"),a=ii(o);a.bind("isEnabled").to(r),a.buttonView.set({icon:IA,label:e("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new ER(o),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}))}),a}),t.ui.componentFactory.add("menuBar:insertTable",o=>{const r=t.commands.get("insertTable"),a=new ys(o),l=new ER(o);return l.delegate("execute").to(a),a.on("change:isOpen",(u,h,m)=>{m||l.reset()}),l.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:IA}),a.panelView.children.add(l),a.bind("isEnabled").to(r),a}),t.ui.componentFactory.add("tableColumn",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),uK,r,o)}),t.ui.componentFactory.add("tableRow",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),fK,r,o)}),t.ui.componentFactory.add("mergeTableCells",o=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),dK,r,o)})}_prepareDropdown(t,e,n,s){const o=this.editor,r=ii(s),a=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0}),r.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(u=>u)),this.listenTo(r,"execute",l=>{o.execute(l.source.commandName),l.source instanceof Vp||o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(t,e,n,s){const o=this.editor,r=ii(s,Np),a="mergeTableCells",l=o.commands.get(a),u=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([l,...u],"isEnabled",(...h)=>h.some(m=>m)),this.listenTo(r.buttonView,"execute",()=>{o.execute(a),o.editing.view.focus()}),this.listenTo(r,"execute",h=>{o.execute(h.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(t,e){const n=this.editor,s=[],o=new En;for(const r of e)ase(r,n,s,o);return Za(t,o),s}}function ase(i,t,e,n){if(i.type==="button"||i.type==="switchbutton"){const s=i.model=new La(i.model),{commandName:o,bindIsOn:r}=i.model,a=t.commands.get(o);e.push(a),s.set({commandName:o}),s.bind("isEnabled").to(a),r&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}n.add(i)}class Ar extends te{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[xn,xn]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",(s,o)=>this._handleDeleteContent(s,o),{priority:"high"}),this.listenTo(n.document,"insertText",(s,o)=>this._handleInsertTextEvent(s,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(xn),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return n.length==0?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(xn),e=this.getSelectedTableCells();return e?this.editor.model.change(n=>{const s=n.createDocumentFragment(),{first:o,last:r}=t.getColumnIndexes(e),{first:a,last:l}=t.getRowIndexes(e),u=e[0].findAncestor("table");let h=l,m=r;if(t.isSelectionRectangular(e)){const C={firstColumn:o,lastColumn:r,firstRow:a,lastRow:l};h=MO(u,C),m=VO(u,C)}const v=EO(u,{startRow:a,startColumn:o,endRow:h,endColumn:m},n);return n.insert(v,s,0),s}):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change(s=>{s.setSelection(n.cells.map(o=>s.createRangeOn(o)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const t=this.editor.model.document.selection,n=Ln(t.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(s=>s.on("selection",(o,r,a)=>{const l=a.writer;n(l);const u=this.getSelectedTableCells();if(!u)return;for(const m of u){const p=a.mapper.toViewElement(m);l.addClass("ck-editor__editable_selected",p),e.add(p)}const h=a.mapper.toViewElement(u[u.length-1]);l.setSelection(h,0)},{priority:"lowest"}));function n(s){for(const o of e)s.removeClass("ck-editor__editable_selected",o);e.clear()}}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(n=>{const s=n.createPositionAt(e[0],0),o=t.model.schema.getNearestSelectionRange(s);n.setSelection(o)})}})}_handleDeleteContent(t,e){const n=this.editor.plugins.get(xn),s=e[0],o=e[1],r=this.editor.model,a=!o||o.direction=="backward",l=n.getSelectedTableCells(s);l.length&&(t.stop(),r.change(u=>{const h=l[a?l.length-1:0];r.change(p=>{for(const v of l)r.deleteContent(p.createSelection(v,"in"))});const m=r.schema.getNearestSelectionRange(u.createPositionAt(h,0));s.is("documentSelection")?u.setSelection(m):s.setTo(m)}))}_handleInsertTextEvent(t,e){const n=this.editor,s=this.getSelectedTableCells();if(!s)return;const o=n.editing.view,r=n.editing.mapper,a=s.map(l=>o.createRangeOn(r.toViewElement(l)));e.selection=o.createSelection(a),e.preventDefault()}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),s=n.getCellLocation(t),o=n.getCellLocation(e),r=Math.min(s.row,o.row),a=Math.max(s.row,o.row),l=Math.min(s.column,o.column),u=parseInt(e.getAttribute("colspan")||"1")-1,h=Math.max(s.column,o.column+u),m=new Array(a-r+1).fill(null).map(()=>[]),p={startRow:r,endRow:a,startColumn:l,endColumn:h};for(const{row:x,cell:k}of new pt(t.findAncestor("table"),p))m[x-r].push(k);const v=o.row<s.row,C=o.column<s.column;return v&&m.reverse(),C&&m.forEach(x=>x.reverse()),{cells:m.flat(),backward:v||C}}}class lse extends te{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Pd,ls,Ar,xn]}init(){const e=this.editor.editing.view.document;this.listenTo(e,"copy",(n,s)=>this._onCopyCut(n,s)),this.listenTo(e,"cut",(n,s)=>this._onCopyCut(n,s)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:t}=this,e=t.plugins.get(ls),n=t.plugins.get(Ar);let s=!1;e.on("contentInsertion",(o,r)=>{s=r.method==="paste"}),this.listenTo(t.model,"insertContent",(o,[r,a])=>{(s||n.getSelectedTableCells()!==null)&&this._onInsertContent(o,r,a)},{priority:"high"}),e.on("contentInsertion",()=>{s=!1},{priority:"lowest"})}_onCopyCut(t,e){const n=this.editor.editing.view,s=this.editor.plugins.get(Ar),o=this.editor.plugins.get(Pd);s.getSelectedTableCells()&&(t.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:t.name==="cut"},()=>{const r=o._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>s.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(r),method:t.name})})))}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const s=this.editor.model,o=this.editor.plugins.get(xn),r=this.editor.plugins.get(Pd),a=this.getTableIfOnlyTableInContent(e,s);if(!a)return;const l=o.getSelectionAffectedTableCells(s.document.selection);if(!l.length){v1(a,o);return}t.stop(),e.is("documentFragment")?r._pasteMarkersIntoTransformedElement(e.markers,u=>this._replaceSelectedCells(a,l,u)):this.editor.model.change(u=>{this._replaceSelectedCells(a,l,u)})}_replaceSelectedCells(t,e,n){const s=this.editor.plugins.get(xn),o={width:s.getColumns(t),height:s.getRows(t)},r=cse(e,o,n,s),a=r.lastRow-r.firstRow+1,l=r.lastColumn-r.firstColumn+1,u={startRow:0,startColumn:0,endRow:Math.min(a,o.height)-1,endColumn:Math.min(l,o.width)-1};t=EO(t,u,n);const h=e[0].findAncestor("table"),m=this._replaceSelectedCellsWithPasted(t,o,h,r,n);if(this.editor.plugins.get("TableSelection").isEnabled){const p=s.sortRanges(m.map(v=>n.createRangeOn(v)));n.setSelection(p)}else n.setSelection(m[0],0);return h}_replaceSelectedCellsWithPasted(t,e,n,s,o){const{width:r,height:a}=e,l=dse(t,r,a),u=[...new pt(n,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],h=[];let m;for(const k of u){const{row:S,column:I}=k;I===s.firstColumn&&(m=k.getPositionBefore());const P=S-s.firstRow,L=I-s.firstColumn,O=l[P%a][L%r],J=O?o.cloneElement(O):null,F=this._replaceTableSlotCell(k,J,m,o);F&&(PO(F,S,I,s.lastRow,s.lastColumn,o),h.push(F),m=o.createPositionAfter(F))}const p=parseInt(n.getAttribute("headingRows")||"0"),v=parseInt(n.getAttribute("headingColumns")||"0"),C=s.firstRow<p&&p<=s.lastRow,x=s.firstColumn<v&&v<=s.lastColumn;if(C){const k={first:s.firstColumn,last:s.lastColumn},S=xv(n,p,k,o,s.firstRow);h.push(...S)}if(x){const k={first:s.firstRow,last:s.lastRow},S=kv(n,v,k,o);h.push(...S)}return h}_replaceTableSlotCell(t,e,n,s){const{cell:o,isAnchor:r}=t;return r&&s.remove(o),e?(s.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(t.childCount==1&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const s of n.getItems())if(s.is("element","table")){const o=e.createRange(n.start,e.createPositionBefore(s));if(e.hasContent(o,{ignoreWhitespaces:!0}))return null;const r=e.createRange(e.createPositionAfter(s),n.end);return e.hasContent(r,{ignoreWhitespaces:!0})?null:s}return null}}function cse(i,t,e,n){const s=i[0].findAncestor("table"),o=n.getColumnIndexes(i),r=n.getRowIndexes(i),a={firstColumn:o.first,lastColumn:o.last,firstRow:r.first,lastRow:r.last},l=i.length===1;return l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,use(s,a.lastRow+1,a.lastColumn+1,n)),l||!n.isSelectionRectangular(i)?hse(s,a,e):(a.lastRow=MO(s,a),a.lastColumn=VO(s,a)),a}function use(i,t,e,n){const s=n.getColumns(i),o=n.getRows(i);e>s&&n.insertColumns(i,{at:s,columns:e-s}),t>o&&n.insertRows(i,{at:o,rows:t-o})}function dse(i,t,e){const n=new Array(e).fill(null).map(()=>new Array(t).fill(null));for(const{column:s,row:o,cell:r}of new pt(i))n[o][s]=r;return n}function hse(i,t,e){const{firstRow:n,lastRow:s,firstColumn:o,lastColumn:r}=t,a={first:n,last:s},l={first:o,last:r};kv(i,o,a,e),kv(i,r+1,a,e),xv(i,n,l,e),xv(i,s+1,l,e,n)}function xv(i,t,e,n,s=0){return t<1?void 0:SO(i,t,s).filter(({column:a,cellWidth:l})=>LO(a,l,e)).map(({cell:a})=>AO(a,t,n))}function kv(i,t,e,n){return t<1?void 0:RO(i,t).filter(({row:r,cellHeight:a})=>LO(r,a,e)).map(({cell:r,column:a})=>IO(r,a,t,n))}function LO(i,t,e){const n=i+t-1,{first:s,last:o}=e,r=i>=s&&i<=o,a=i<s&&n>=s;return r||a}class fse extends te{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Ar,xn]}init(){const t=this.editor,n=t.editing.view.document,s=t.t;this.listenTo(n,"arrowKey",(...o)=>this._onArrowKey(...o),{context:"table"}),this.listenTo(n,"tab",(...o)=>this._handleTabOnSelectedTable(...o),{context:"figure"}),this.listenTo(n,"tab",(...o)=>this._handleTab(...o),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:s("Keystrokes that can be used in a table cell"),keystrokes:[{label:s("Move the selection to the next cell"),keystroke:"Tab"},{label:s("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:s("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:s("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const n=this.editor,o=n.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(e.preventDefault(),e.stopPropagation(),t.stop(),n.model.change(r=>{r.setSelection(r.createRangeIn(o.getChild(0).getChild(0)))}))}_handleTab(t,e){const n=this.editor,s=this.editor.plugins.get(xn),o=this.editor.plugins.get("TableSelection"),r=n.model.document.selection,a=!e.shiftKey;let l=s.getTableCellsContainingSelection(r)[0];if(l||(l=o.getFocusCell()),!l)return;e.preventDefault(),e.stopPropagation(),t.stop();const u=l.parent,h=u.parent,m=h.getChildIndex(u),p=u.getChildIndex(l),v=p===0;if(!a&&v&&m===0){n.model.change(S=>{S.setSelection(S.createRangeOn(h))});return}const C=p===u.childCount-1,x=m===s.getRows(h)-1;if(a&&x&&C&&(n.execute("insertTableRowBelow"),m===s.getRows(h)-1)){n.model.change(S=>{S.setSelection(S.createRangeOn(h))});return}let k;if(a&&C)k=h.getChild(m+1).getChild(0);else if(!a&&v){const S=h.getChild(m-1);k=S.getChild(S.childCount-1)}else k=u.getChild(p+(a?1:-1));n.model.change(S=>{S.setSelection(S.createRangeIn(k))})}_onArrowKey(t,e){const n=this.editor,s=e.keyCode,o=I0(s,n.locale.contentLanguageDirection);this._handleArrowKeys(o,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(xn),s=this.editor.plugins.get("TableSelection"),o=this.editor.model,r=o.document.selection,a=["right","down"].includes(t),l=n.getSelectedTableCells(r);if(l.length){let h;return e?h=s.getFocusCell():h=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(h,t,e),!0}const u=r.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!u)return!1;if(!r.isCollapsed)if(e){if(r.isBackward==a&&!r.containsEntireContent(u))return!1}else{const h=r.getSelectedElement();if(!h||!o.schema.isObject(h))return!1}return this._isSelectionAtCellEdge(r,u,a)?(this._navigateFromCellInDirection(u,t,e),!0):!1}_isSelectionAtCellEdge(t,e,n){const s=this.editor.model,o=this.editor.model.schema,r=n?t.getLastPosition():t.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell"))return s.createPositionAt(e,n?"end":0).isTouching(r);const a=s.createSelection(r);return s.modifySelection(a,{direction:n?"forward":"backward"}),r.isEqual(a.focus)}_navigateFromCellInDirection(t,e,n=!1){const s=this.editor.model,o=t.findAncestor("table"),r=[...new pt(o,{includeAllSlots:!0})],{row:a,column:l}=r[r.length-1],u=r.find(({cell:I})=>I==t);let{row:h,column:m}=u;switch(e){case"left":m--;break;case"up":h--;break;case"right":m+=u.cellWidth;break;case"down":h+=u.cellHeight;break}const p=h<0||h>a,v=m<0&&h<=0,C=m>l&&h>=a;if(p||v||C){s.change(I=>{I.setSelection(I.createRangeOn(o))});return}m<0?(m=n?0:l,h--):m>l&&(m=n?l:0,h++);const x=r.find(I=>I.row==h&&I.column==m).cell,k=["right","down"].includes(e),S=this.editor.plugins.get("TableSelection");if(n&&S.isEnabled){const I=S.getAnchorCell()||t;S.setCellSelection(I,x)}else{const I=s.createPositionAt(x,k?0:"end");s.change(P=>{P.setSelection(I)})}}}class BO extends Bo{constructor(){super(...arguments);w(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class mse extends te{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[Ar,xn]}init(){this.editor.editing.view.addObserver(BO),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(xn);let n=!1;const s=t.plugins.get(Ar);this.listenTo(t.editing.view.document,"mousedown",(o,r)=>{const a=t.model.document.selection;if(!this.isEnabled||!s.isEnabled||!r.domEvent.shiftKey)return;const l=s.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!l)return;const u=this._getModelTableCellFromDomEvent(r);u&&SR(l,u)&&(n=!0,s.setCellSelection(l,u),r.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(t.editing.view.document,"selectionChange",o=>{n&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,s=!1,o=!1;const r=t.plugins.get(Ar);this.listenTo(t.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!r.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(l))}),this.listenTo(t.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!e)return;const u=this._getModelTableCellFromDomEvent(l);u&&SR(e,u)&&(n=u,!s&&n!=e&&(s=!0)),s&&(o=!0,r.setCellSelection(e,n),l.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{s=!1,o=!1,e=null,n=null}),this.listenTo(t.editing.view.document,"selectionChange",a=>{o&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function SR(i,t){return i.parent.parent==t.parent.parent}class gse extends te{static get requires(){return[Oh,rse,Ar,mse,fse,lse,Ph]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function Hg(i){const t=FO(i);return t||Bp(i)}function FO(i){const t=i.getSelectedElement();return t&&UO(t)?t:null}function Bp(i){const t=i.getFirstPosition();if(!t)return null;let e=t.parent;for(;e;){if(e.is("element")&&UO(e))return e;e=e.parent}return null}function UO(i){return!!i.getCustomProperty("table")&&Jt(i)}class pse extends te{static get requires(){return[Dg]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Dg),s=t.config.get("table.contentToolbar"),o=t.config.get("table.tableToolbar");s&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:Bp}),o&&n.register("table",{ariaLabel:e("Table toolbar"),items:o,getRelatedElement:FO})}}class bse extends fe{constructor(e,n){super(e);w(this,"options");w(this,"focusTracker");w(this,"focusCycler");w(this,"_focusables");w(this,"dropdownView");w(this,"inputView");w(this,"keystrokes");w(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=n,this.focusTracker=new yt,this._focusables=new Sn,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Ot,this._stillTyping=!1,this.focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(s,o,r)=>this._setInputValue(r))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,n=e.t,s=this.bindTemplate,o=this._createColorSelector(e),r=ii(e),a=new fe;return a.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:s.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",s.if("value","ck-hidden",l=>l!="")]}}]}),r.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),r.buttonView.children.add(a),r.buttonView.label=n("Color picker"),r.buttonView.tooltip=!0,r.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",r.panelView.children.add(o),r.bind("isEnabled").to(this,"isReadOnly",l=>!l),r.on("change:isOpen",(l,u,h)=>{h&&(o.updateSelectedColors(),o.showColorGridsFragment())}),r}_createInputTextView(){const e=this.locale,n=new rN(e);return n.extendTemplate({on:{blur:n.bindTemplate.to("blur")}}),n.value=this.value,n.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(n),n.on("input",()=>{const s=n.element.value,o=this.options.colorDefinitions.find(r=>s===r.label);this._stillTyping=!0,this.value=o&&o.color||s}),n.on("blur",()=>{this._stillTyping=!1,this._setInputValue(n.element.value)}),n.delegate("input").to(this),n}_createColorSelector(e){const n=e.t,s=this.options.defaultColorValue||"",o=n(s?"Restore default":"Remove color"),r=new n1(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:o,colorPickerLabel:n("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});r.appendUI(),r.on("execute",(l,u)=>{if(u.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=u.value||s,this.fire("input"),u.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let a=this.value;return r.on("colorPicker:cancel",()=>{this.value=a,this.fire("input"),this.dropdownView.isOpen=!1}),r.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{a=this.value}),r.bind("selectedColor").to(this,"value"),r}_setInputValue(e){if(!this._stillTyping){const n=AR(e),s=this.options.colorDefinitions.find(o=>n===AR(o.color));s?this.inputView.value=s.label:this.inputView.value=e||""}}}function AR(i){return i.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const T1=i=>i==="";function x1(i){return{none:i("None"),solid:i("Solid"),dotted:i("Dotted"),dashed:i("Dashed"),double:i("Double"),groove:i("Groove"),ridge:i("Ridge"),inset:i("Inset"),outset:i("Outset")}}function zO(i){return i('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function HO(i){return i('The value is invalid. Try "10px" or "2em" or simply "2".')}function Wg(i){return i=i.trim().toLowerCase(),T1(i)||vV(i)}function Vd(i){return i=i.trim(),T1(i)||GO(i)||Ip(i)||CV(i)}function WO(i){return i=i.trim(),T1(i)||GO(i)||Ip(i)}function qO(i,t){const e=new En,n=x1(i.t);for(const s in n){const o={type:"button",model:new La({_borderStyleValue:s,label:n[s],role:"menuitemradio",withText:!0})};s==="none"?o.model.bind("isOn").to(i,"borderStyle",r=>t==="none"?!r:r===s):o.model.bind("isOn").to(i,"borderStyle",r=>r===s),e.add(o)}return e}function Ev(i){const{view:t,icons:e,toolbar:n,labels:s,propertyName:o,nameToValue:r,defaultValue:a}=i;for(const l in s){const u=new xe(t.locale);u.set({role:"radio",isToggleable:!0,label:s[l],icon:e[l],tooltip:s[l]});const h=r?r(l):l;u.bind("isOn").to(t,o,m=>{let p=m;return m===""&&a&&(p=a),h===p}),u.on("execute",()=>{!a&&h&&t[o]===h?t[o]=void 0:t[o]=h}),n.items.add(u)}}const qg=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Gg(i){return(t,e,n)=>{const s=new bse(t.locale,{colorDefinitions:wse(i.colorConfig),columns:i.columns,defaultColorValue:i.defaultColorValue,colorPickerConfig:i.colorPickerConfig});return s.inputView.set({id:e,ariaDescribedById:n}),s.bind("isReadOnly").to(t,"isEnabled",o=>!o),s.bind("hasError").to(t,"errorText",o=>!!o),s.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused").to(s),s}}function GO(i){const t=parseFloat(i);return!Number.isNaN(t)&&i===String(t)}function wse(i){return i.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}class yse extends fe{constructor(e,n){super(e);w(this,"options");w(this,"focusTracker");w(this,"keystrokes");w(this,"children");w(this,"borderStyleDropdown");w(this,"borderWidthInput");w(this,"borderColorInput");w(this,"backgroundInput");w(this,"paddingInput");w(this,"widthInput");w(this,"heightInput");w(this,"horizontalAlignmentToolbar");w(this,"verticalAlignmentToolbar");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"_focusables");w(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:o,borderColorInput:r,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:u}=this._createBackgroundFields(),{widthInput:h,operatorLabel:m,heightInput:p,dimensionsLabel:v}=this._createDimensionFields(),{horizontalAlignmentToolbar:C,verticalAlignmentToolbar:x,alignmentLabel:k}=this._createAlignmentFields();this.focusTracker=new yt,this.keystrokes=new Ot,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=o,this.borderColorInput=r,this.backgroundInput=u,this.paddingInput=this._createPaddingField(),this.widthInput=h,this.heightInput=p,this.horizontalAlignmentToolbar=C,this.verticalAlignmentToolbar=x;const{saveButtonView:S,cancelButtonView:I}=this._createActionButtons();this.saveButtonView=S,this.cancelButtonView=I,this._focusables=new Sn,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new zo(e,{label:this.t("Cell properties")})),this.children.add(new Vn(e,{labelView:a,children:[a,s,r,o],class:"ck-table-form__border-row"})),this.children.add(new Vn(e,{labelView:l,children:[l,u],class:"ck-table-form__background-row"})),this.children.add(new Vn(e,{children:[new Vn(e,{labelView:v,children:[v,h,m,p],class:"ck-table-form__dimensions-row"}),new Vn(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new Vn(e,{labelView:k,children:[k,C,x],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new Vn(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=Gg({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),o=this.locale,r=this.t,a=r("Style"),l=new Qi(o);l.text=r("Border");const u=x1(r),h=new sn(o,hN);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",v=>u[v||"none"]),h.fieldView.on("execute",v=>{this.borderStyle=v.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",v=>!v),Za(h.fieldView,qO(this,n.style),{role:"menu",ariaLabel:a});const m=new sn(o,ti);m.set({label:r("Width"),class:"ck-table-form__border-width"}),m.fieldView.bind("value").to(this,"borderWidth"),m.bind("isEnabled").to(this,"borderStyle",Am),m.fieldView.on("input",()=>{this.borderWidth=m.fieldView.element.value});const p=new sn(o,s);return p.set({label:r("Color"),class:"ck-table-form__border-color"}),p.fieldView.bind("value").to(this,"borderColor"),p.bind("isEnabled").to(this,"borderStyle",Am),p.fieldView.on("input",()=>{this.borderColor=p.fieldView.value}),this.on("change:borderStyle",(v,C,x,k)=>{Am(x)||(this.borderColor="",this.borderWidth=""),Am(k)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:p,borderWidthInput:m}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Background");const o=Gg({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),r=new sn(e,o);return r.set({label:n("Color"),class:"ck-table-cell-properties-form__background"}),r.fieldView.bind("value").to(this,"backgroundColor"),r.fieldView.on("input",()=>{this.backgroundColor=r.fieldView.value}),{backgroundRowLabel:s,backgroundInput:r}}_createDimensionFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Dimensions");const o=new sn(e,ti);o.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),o.fieldView.bind("value").to(this,"width"),o.fieldView.on("input",()=>{this.width=o.fieldView.element.value});const r=new fe(e);r.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new sn(e,ti);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:o,operatorLabel:r,heightInput:a}}_createPaddingField(){const e=this.locale,n=this.t,s=new sn(e,ti);return s.set({label:n("Padding"),class:"ck-table-cell-properties-form__padding"}),s.fieldView.bind("value").to(this,"padding"),s.fieldView.on("input",()=>{this.padding=s.fieldView.element.value}),s}_createAlignmentFields(){const e=this.locale,n=this.t,s=new Qi(e),o={left:j0,center:PV,right:VV,justify:MV,top:Mj,middle:Pj,bottom:Ij};s.text=n("Table cell text alignment");const r=new Da(e),a=e.contentLanguageDirection==="rtl";r.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Horizontal text alignment toolbar")}),Ev({view:this,icons:o,toolbar:r,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:u=>{if(a){if(u==="left")return"right";if(u==="right")return"left"}return u},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const l=new Da(e);return l.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Vertical text alignment toolbar")}),Ev({view:this,icons:o,toolbar:l,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:r,verticalAlignmentToolbar:l,alignmentLabel:s}}_createActionButtons(){const e=this.locale,n=this.t,s=new xe(e),o=new xe(e),r=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return s.set({label:n("Save"),icon:Pp,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(r,"errorText",(...a)=>a.every(l=>!l)),o.set({label:n("Cancel"),icon:Rh,class:"ck-button-cancel",withText:!0}),o.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:o}}get _horizontalAlignmentLabels(){const e=this.locale,n=this.t,s=n("Align cell text to the left"),o=n("Align cell text to the center"),r=n("Align cell text to the right"),a=n("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:r,center:o,left:s,justify:a}:{left:s,center:o,right:r,justify:a}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Am(i){return i!=="none"}const Sv=[Qn.defaultPositions.northArrowSouth,Qn.defaultPositions.northArrowSouthWest,Qn.defaultPositions.northArrowSouthEast,Qn.defaultPositions.southArrowNorth,Qn.defaultPositions.southArrowNorthWest,Qn.defaultPositions.southArrowNorthEast,Qn.defaultPositions.viewportStickyNorth];function $O(i,t){const e=i.plugins.get("ContextualBalloon"),n=i.editing.view.document.selection;let s;t==="cell"?Bp(n)&&(s=KO(i)):Hg(n)&&(s=jO(i)),s&&e.updatePosition(s)}function jO(i){const t=i.model.document.selection,e=Sr(t),n=i.editing.mapper.toViewElement(e);return{target:i.editing.view.domConverter.mapViewToDom(n),positions:Sv}}function KO(i){const t=i.editing.mapper,e=i.editing.view.domConverter,n=i.model.document.selection;if(n.rangeCount>1)return{target:()=>_se(n.getRanges(),i),positions:Sv};const s=ZO(n.getFirstPosition()),o=t.toViewElement(s);return{target:e.mapViewToDom(o),positions:Sv}}function ZO(i){return i.nodeAfter&&i.nodeAfter.is("element","tableCell")?i.nodeAfter:i.findAncestor("tableCell")}function _se(i,t){const e=t.editing.mapper,n=t.editing.view.domConverter,s=Array.from(i).map(o=>{const r=ZO(o.start),a=e.toViewElement(r);return new Pe(n.mapViewToDom(a))});return Pe.getBoundingRect(s)}function Ja(i){if(!i||!is(i))return i;const{top:t,right:e,bottom:n,left:s}=i;if(t==e&&e==n&&n==s)return t}function Xa(i,t){const e=parseFloat(i);return Number.isNaN(e)||String(e)!==String(i)?i:`${e}${t}`}function Fp(i,t={}){const e={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...i};return t.includeAlignmentProperty&&!e.alignment&&(e.alignment="center"),t.includePaddingProperty&&!e.padding&&(e.padding=""),t.includeVerticalAlignmentProperty&&!e.verticalAlignment&&(e.verticalAlignment="middle"),t.includeHorizontalAlignmentProperty&&!e.horizontalAlignment&&(e.horizontalAlignment=t.isRightToLeftContent?"right":"left"),e}function YO(i,t){return Fp({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...i},t)}function k1(i,t){return Fp({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...i},t)}const vse=500,RR={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class Cse extends te{constructor(e){super(e);w(this,"_defaultContentTableCellProperties");w(this,"_defaultLayoutTableCellProperties");w(this,"_balloon");w(this,"view");w(this,"_viewWithContentTableDefaults");w(this,"_viewWithLayoutTableDefaults");w(this,"_undoStepBatch");w(this,"_isReady");e.config.define("table.tableCellProperties",{borderColors:qg,backgroundColors:qg})}static get requires(){return[as]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._defaultContentTableCellProperties=k1(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._defaultLayoutTableCellProperties=Fp(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(as),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",s=>{const o=new xe(s);o.set({label:n("Cell properties"),icon:cK,tooltip:!0}),this.listenTo(o,"execute",()=>this._showView());const r=Object.values(RR).map(a=>e.commands.get(a));return o.bind("isEnabled").toMany(r,"isEnabled",(...a)=>a.some(l=>l)),o})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const n=this.editor,s=n.config.get("table.tableCellProperties"),o=ah(s.borderColors),r=rh(n.locale,o),a=ah(s.backgroundColors),l=rh(n.locale,a),u=s.colorPicker!==!1,h=new yse(n.locale,{borderColors:r,backgroundColors:l,defaultTableCellProperties:e,colorPickerConfig:u?s.colorPicker||{}:!1}),m=n.t;h.render(),this.listenTo(h,"submit",()=>{this._hideView()}),this.listenTo(h,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),h.keystrokes.set("Esc",(C,x)=>{this._hideView(),x()}),Uo({emitter:h,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const p=zO(m),v=HO(m);return h.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),h.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:h.borderColorInput,commandName:"tableCellBorderColor",errorText:p,validator:Wg})),h.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:h.borderWidthInput,commandName:"tableCellBorderWidth",errorText:v,validator:WO})),h.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:h.paddingInput,commandName:"tableCellPadding",errorText:v,validator:Vd})),h.on("change:width",this._getValidatedPropertyChangeCallback({viewField:h.widthInput,commandName:"tableCellWidth",errorText:v,validator:Vd})),h.on("change:height",this._getValidatedPropertyChangeCallback({viewField:h.heightInput,commandName:"tableCellHeight",errorText:v,validator:Vd})),h.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:h.backgroundInput,commandName:"tableCellBackgroundColor",errorText:p,validator:Wg})),h.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),h.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),h}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableCellBorderStyle");Object.entries(RR).map(([s,o])=>{const r=s,a=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[r]||"":this._defaultLayoutTableCellProperties[r]||"";return[s,e.get(o).value||a]}).forEach(([s,o])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,o)}),this._isReady=!0}_showView(){const e=this.editor,n=Hg(e.editing.view.document.selection),s=n&&e.editing.mapper.toModelElement(n),o=!s||s.getAttribute("tableType")!=="layout";o&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):!o&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=o?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:KO(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;Bp(n.selection)?this._isViewVisible&&$O(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,o)=>{this._isReady&&this.editor.execute(e,{value:o,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:o,errorText:r}=e,a=ss(()=>{s.errorText=r},vse);return(l,u,h)=>{a.cancel(),this._isReady&&(o(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class Ho extends Ge{constructor(e,n,s){super(e);w(this,"attributeName");w(this,"_defaultValue");w(this,"_defaultContentTableValue");w(this,"_defaultLayoutTableValue");switch(this.attributeName=n,this._defaultContentTableValue=s,n){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const n=this.editor.model.document.selection,o=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n),r=Sr(n);this._defaultValue=!r||r.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!o.length,this.value=this._getSingleValue(o)}execute(e={}){const{value:n,batch:s}=e,o=this.editor.model,a=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(o.document.selection),l=this._getValueToSet(n);o.enqueueChange(s,u=>{l?a.forEach(h=>u.setAttribute(this.attributeName,l,h)):a.forEach(h=>u.removeAttribute(this.attributeName,h))})}_getAttribute(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const n=this._getAttribute(e[0]);return e.every(o=>this._getAttribute(o)===n)?n:void 0}}class Tse extends Ho{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if(t=Xa(t,"px"),t!==this._defaultValue)return t}}class JO extends te{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Oh]}init(){const t=this.editor,e=k1(t.config.get("table.tableCellProperties.defaultProperties"));tg(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),t.commands.add("tableCellWidth",new Tse(t,e.width))}}class xse extends Ho{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=Ja(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Xa(t,"px");if(e!==this._defaultValue)return e}}class kse extends Ho{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=Xa(t,"px");if(e!==this._defaultValue)return e}}class Ese extends Ho{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class Sse extends Ho{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class Ase extends Ho{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class Rse extends Ho{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=Ja(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Ise extends Ho{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=Ja(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Pse extends Ho{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=Ja(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Xa(t,"px");if(e!==this._defaultValue)return e}}const IR=/^(top|middle|bottom)$/,PR=/^(left|center|right|justify)$/;class Mse extends te{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Oh,JO]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const s=k1(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"});t.data.addStyleProcessorRules(xV),Vse(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableCellBorderStyle",new Rse(t,s.borderStyle)),t.commands.add("tableCellBorderColor",new Ise(t,s.borderColor)),t.commands.add("tableCellBorderWidth",new Pse(t,s.borderWidth)),tg(e,n,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableCellHeight",new kse(t,s.height)),t.data.addStyleProcessorRules(aj),tg(e,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),t.commands.add("tableCellPadding",new xse(t,s.padding)),t.data.addStyleProcessorRules($0),tg(e,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableCellBackgroundColor",new Ese(t,s.backgroundColor)),Nse(e,n,s.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new Ase(t,s.horizontalAlignment)),Ose(e,n,s.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new Sse(t,s.verticalAlignment))}}function Vse(i,t,e){const n={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(n)}),bv(t,"td",n,e),bv(t,"th",n,e),Md(t,{modelElement:"tableCell",modelAttribute:n.style,styleName:"border-style"}),Md(t,{modelElement:"tableCell",modelAttribute:n.color,styleName:"border-color"}),Md(t,{modelElement:"tableCell",modelAttribute:n.width,styleName:"border-width"})}function Nse(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:n=>({key:"style",value:{"text-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":PR}},model:{key:"tableCellHorizontalAlignment",value:(n,s,o)=>{const r=Er(e,"left",o),a=n.getStyle("text-align");return a===r?null:a}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:PR}},model:{key:"tableCellHorizontalAlignment",value:(n,s,o)=>{const r=Er(e,"left",o),a=n.getAttribute("align");return a===r?null:a}}})}function Ose(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:n=>({key:"style",value:{"vertical-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":IR}},model:{key:"tableCellVerticalAlignment",value:(n,s,o)=>{const r=Er(e,"middle",o),a=n.getStyle("vertical-align");return a===r?null:a}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:IR}},model:{key:"tableCellVerticalAlignment",value:(n,s,o)=>{const r=Er(e,"middle",o),a=n.getAttribute("valign");return a===r?null:a}}})}class Dse extends te{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[Mse,Cse]}}class Lse extends Ge{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:n}=this.editor;let{table:s=e.document.selection.getSelectedElement(),columnWidths:o,tableWidth:r}=t;o&&(o=Array.isArray(o)?o:o.split(",")),e.change(a=>{r?a.setAttribute("tableWidth",r,s):a.removeAttribute("tableWidth",s);const l=n.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!o&&!l)return;if(!o)return a.remove(l);const u=C1(o);if(l)Array.from(l.getChildren()).forEach((h,m)=>a.setAttribute("columnWidth",u[m],h));else{const h=a.createElement("tableColumnGroup");u.forEach(m=>a.appendElement("tableColumn",{columnWidth:m},h)),a.append(h,s)}})}}function Bse(i){return t=>t.on("element:colgroup",(e,n,s)=>{const o=n.modelCursor.findAncestor("table"),r=Vh(o);if(!r)return;const a=Nh(r),l=i.getColumns(o);let u=Nie(r,s.writer);u=Array.from({length:l},(h,m)=>u[m]||"auto"),(u.length!=a.length||u.includes("auto"))&&OO(a,r,C1(u),s.writer)},{priority:"low"})}function Fse(){return i=>i.on("insert:table",(t,e,n)=>{const s=n.writer,o=e.item,r=n.mapper.toViewElement(o),a=r.is("element","table")?r:Array.from(r.getChildren()).find(u=>u.is("element","table"));Vh(o)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}const MR=Nc("px");class Use extends te{constructor(e){super(e);w(this,"_isResizingActive");w(this,"_resizingData");w(this,"_domEmitter");w(this,"_tableUtilsPlugin");w(this,"_initialMouseEventData",null);this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Yn()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(n,s,o)=>{const r=o?"removeClass":"addClass";e.editing.view.change(a=>{for(const l of e.editing.view.document.roots)a[r]("ck-column-resize_disabled",e.editing.view.document.getRoot(l.rootName))})})}static get requires(){return[Oh,xn]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,n=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:r=>r.is("element","tableColumnGroup"),positionOffset:0});const o=new Lse(e);e.commands.add("resizeTableWidth",o),e.commands.add("resizeColumnWidths",o),this.bind("_isResizingAllowed").to(e,"isReadOnly",n,"isEnabled",o,"isEnabled",(r,a,l)=>!r&&a&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Vh(e)}getTableColumnElements(e){return Nh(e)}getTableColumnsWidths(e){return Vie(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const n=this.editor.model;n.document.registerPostFixer(r=>{let a=!1;for(const l of Eie(n)){const u=this.getColumnGroupElement(l),h=this.getTableColumnElements(u),m=this.getTableColumnsWidths(u);let p=C1(m);p=s(p,l,this),!vg(m,p)&&(OO(h,u,p,r),a=!0)}return a});function s(r,a,l){const u=l._tableUtilsPlugin.getColumns(a);if(u-r.length===0)return r;const m=r.map(v=>Number(v.replace("%",""))),p=o(l.editor.model.document.differ,a);for(const v of p){const C=u-m.length;if(C===0)continue;const x=C>0,k=l._tableUtilsPlugin.getCellLocation(v).column;if(x){const S=Sie(a,l.editor),I=Iie(C,S);m.splice(k,0,...I)}else{const S=m.splice(k,Math.abs(C));m[k]+=ch(S)}}return m.map(v=>v+"%")}function o(r,a){const l=new Set;for(const u of r.getChanges())if(u.type=="insert"&&u.position.nodeAfter&&u.position.nodeAfter.name=="tableCell"&&u.position.nodeAfter.getAncestors().includes(a))l.add(u.position.nodeAfter);else if(u.type=="remove"){const h=u.position.nodeBefore||u.position.nodeAfter;h.name=="tableCell"&&h.getAncestors().includes(a)&&l.add(h)}return l}}_registerConverters(){const n=this.editor.conversion;n.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:s=>s.getStyle("width")}}),n.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:s=>({name:"figure",key:"style",value:{width:s}})}),n.elementToElement({model:"tableColumnGroup",view:"colgroup"}),n.elementToElement({model:"tableColumn",view:"col"}),n.for("downcast").add(Fse()),n.for("upcast").add(Bse(this._tableUtilsPlugin)),n.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:s=>{const o=s.getStyle("width");return!o||!o.endsWith("%")&&!o.endsWith("pt")?"auto":o}}}),n.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),n.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:s=>({key:"style",value:{width:s}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(BO),e.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),e.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(he.window.document,"mousemove",vc(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(he.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(e){const n=this.editor,s=n.editing.view.domConverter,o=s.mapViewToDom(e.findAncestor("table")),r=s.mapViewToDom(e.findAncestor(m=>["td","th"].includes(m.name))),a=new Pe(o),l=new Pe(r),u=MR(Number((a.top-l.top).toFixed(4))),h=MR(Number((l.bottom-a.bottom).toFixed(4)));n.editing.view.change(m=>{m.setStyle("top",u,e),m.setStyle("bottom",h,e)})}_resetResizerStyles(e){this.editor.editing.view.change(n=>{n.removeStyle("top",e),n.removeStyle("bottom",e)})}_onMouseOverHandler(e,n){const s=n.target;s.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(s)}_onMouseOutHandler(e,n){const s=n.target;s.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(s))}_onMouseDownHandler(e,n){const s=n.target;if(!s.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const o=this.editor,r=o.editing.mapper.toModelElement(s.findAncestor("figure"));o.model.canEditAt(r)&&(n.preventDefault(),e.stop(),this._initialMouseEventData=n)}_startResizingAfterThreshold(){const e=this._initialMouseEventData,{target:n}=e,s=this.editor.editing.mapper.toModelElement(n.findAncestor("figure")),o=n.findAncestor("table"),r=a(s,this._tableUtilsPlugin,this.editor);Array.from(o.getChildren()).find(h=>h.is("element","colgroup"))||this.editor.editing.view.change(h=>{l(h,r,o)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,r),this.editor.editing.view.change(h=>u(h,o,this._resizingData));function a(h,m,p){const v=Array(m.getColumns(h)),C=new pt(h);for(const x of C){const k=p.editing.mapper.toViewElement(x.cell),S=p.editing.view.domConverter.mapViewToDom(k),I=Mie(S);(!v[x.column]||I<v[x.column])&&(v[x.column]=pi(I))}return v}function l(h,m,p){const v=h.createContainerElement("colgroup");for(let C=0;C<m.length;C++){const x=h.createEmptyElement("col"),k=`${pi(m[C]/ch(m)*100)}%`;h.setStyle("width",k,x),h.insert(h.createPositionAt(v,"end"),x)}h.insert(h.createPositionAt(p,0),v)}function u(h,m,p){const v=p.widths.viewFigureWidth/p.widths.viewFigureParentWidth;h.addClass("ck-table-resized",m),h.addClass("ck-table-column-resizer__active",p.elements.viewResizer),h.setStyle("width",`${pi(v*100)}%`,m.findAncestor("figure"))}}_onMouseMoveHandler(e,n){if(this._initialMouseEventData){const L=this._initialMouseEventData.domEvent;if(Math.abs(n.clientX-L.clientX)>=kie)this._startResizingAfterThreshold(),this._initialMouseEventData=null;else return}if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:s,flags:{isRightEdge:o,isTableCentered:r,isLtrContent:a},elements:{viewFigure:l,viewLeftColumn:u,viewRightColumn:h,viewResizer:m},widths:{viewFigureParentWidth:p,tableWidth:v,leftColumnWidth:C,rightColumnWidth:x}}=this._resizingData,k=-C+vv,S=o?p-v:x-vv,I=(a?1:-1)*(o&&r?2:1),P=Rie((n.clientX-s)*I,Math.min(k,0),Math.max(S,0));P!==0&&(this.editor.editing.view.change(L=>{const O=pi((C+P)*100/v);if(L.setStyle("width",`${O}%`,u),o){const J=pi((v+P)*100/p);L.setStyle("width",`${J}%`,l)}else{const J=pi((x-P)*100/v);L.setStyle("width",`${J}%`,h)}}),this._recalculateResizerElement(m))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:e,modelTable:n,viewFigure:s,viewColgroup:o}=this._resizingData.elements,r=this.editor,a=r.editing.view,l=this.getColumnGroupElement(n),u=Array.from(o.getChildren()).filter(S=>S.is("view:element")),h=l?this.getTableColumnsWidths(l):null,m=u.map(S=>S.getStyle("width")),p=!vg(h,m),v=n.getAttribute("tableWidth"),C=s.getStyle("width"),x=v!==C;(p||x)&&(this._isResizingAllowed?r.execute("resizeTableWidth",{table:n,tableWidth:`${pi(C)}%`,columnWidths:m}):a.change(S=>{if(h)for(const I of u)S.setStyle("width",h.shift(),I);else S.remove(o);x&&(v?S.setStyle("width",v,s):S.removeStyle("width",s)),!h&&!v&&S.removeClass("ck-table-resized",[...s.getChildren()].find(I=>I.name==="table"))})),a.change(S=>{S.removeClass("ck-table-column-resizer__active",e)}),a.domConverter.mapViewToDom(e).matches(":hover")||this._resetResizerStyles(e),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,n){const s=this.editor,o=e.domEvent.clientX,r=e.target,a=r.findAncestor("td")||r.findAncestor("th"),l=s.editing.mapper.toModelElement(a),u=l.findAncestor("table"),h=Aie(l,this._tableUtilsPlugin).rightEdge,m=this._tableUtilsPlugin.getColumns(u)-1,p=h===m,v=!u.hasAttribute("tableAlignment"),C=s.locale.contentLanguageDirection!=="rtl",x=a.findAncestor("table"),k=x.findAncestor("figure"),S=[...x.getChildren()].find(U=>U.is("element","colgroup")),I=S.getChild(h),P=p?void 0:S.getChild(h+1),L=Cv(s.editing.view.domConverter.mapViewToDom(k.parent)),O=Cv(s.editing.view.domConverter.mapViewToDom(k)),J=NO(u,s),F=n[h],j=p?void 0:n[h+1];return{columnPosition:o,flags:{isRightEdge:p,isTableCentered:v,isLtrContent:C},elements:{viewResizer:r,modelTable:u,viewFigure:k,viewColgroup:S,viewLeftColumn:I,viewRightColumn:P},widths:{viewFigureParentWidth:L,viewFigureWidth:O,tableWidth:J,leftColumnWidth:F,rightColumnWidth:j}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(n,s,o)=>{const r=s.item,a=o.mapper.toViewElement(r),l=o.writer;l.insert(l.createPositionAt(a,"end"),l.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class zse extends te{static get requires(){return[Use,JO]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}class Qa extends Ge{constructor(e,n,s){super(e);w(this,"attributeName");w(this,"_defaultValue");w(this,"_defaultContentTableValue");w(this,"_defaultLayoutTableValue");this.attributeName=n,this._defaultContentTableValue=s,this._defaultLayoutTableValue=n==="tableBorderStyle"?"none":void 0}refresh(){const n=this.editor.model.document.selection,s=Sr(n);this._defaultValue=!s||s.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!s,this.value=this._getValue(s)}execute(e={}){const n=this.editor.model,s=n.document.selection,{value:o,batch:r}=e,a=Sr(s),l=this._getValueToSet(o);n.enqueueChange(r,u=>{l?u.setAttribute(this.attributeName,l,a):u.removeAttribute(this.attributeName,a)})}_getValue(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}}class Hse extends Qa{constructor(t,e){super(t,"tableBackgroundColor",e)}}class Wse extends Qa{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=Ja(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class qse extends Qa{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=Ja(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Gse extends Qa{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=Ja(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Xa(t,"px");if(e!==this._defaultValue)return e}}class $se extends Qa{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if(t=Xa(t,"px"),t!==this._defaultValue)return t}}class jse extends Qa{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if(t=Xa(t,"px"),t!==this._defaultValue)return t}}class Kse extends Qa{constructor(t,e){super(t,"tableAlignment",e)}}const Zse=/^(left|center|right)$/,Yse=/^(left|none|right)$/;class Jse extends te{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Oh]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const s=YO(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(xV),Xse(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableBorderColor",new Wse(t,s.borderColor)),t.commands.add("tableBorderStyle",new qse(t,s.borderStyle)),t.commands.add("tableBorderWidth",new Gse(t,s.borderWidth)),Qse(e,n,s.alignment),t.commands.add("tableAlignment",new Kse(t,s.alignment)),VR(e,n,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),t.commands.add("tableWidth",new $se(t,s.width)),VR(e,n,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableHeight",new jse(t,s.height)),t.data.addStyleProcessorRules($0),eoe(e,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableBackgroundColor",new Hse(t,s.backgroundColor))}}function Xse(i,t,e){const n={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(n)}),bv(t,"table",n,e),Qm(t,{modelAttribute:n.color,styleName:"border-color"}),Qm(t,{modelAttribute:n.style,styleName:"border-style"}),Qm(t,{modelAttribute:n.width,styleName:"border-width"})}function Qse(i,t,e){i.extend("table",{allowAttributes:["tableAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(n,s,o)=>({key:"style",value:o.item.getAttribute("tableType")!=="layout"?{float:"none"}:{"margin-left":"auto","margin-right":"auto"}})},converterPriority:"high"}),t.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:Yse}},model:{key:"tableAlignment",value:(n,s,o)=>{const r=Er(e,"",o);let a=n.getStyle("float");return a==="none"&&(a="center"),a===r?null:a}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(n,s,o)=>{const r=Er(e,"",o),a="center";return a===r?null:a}}}).attributeToAttribute({view:{attributes:{align:Zse}},model:{name:"table",key:"tableAlignment",value:(n,s,o)=>{const r=Er(e,"",o),a=n.getAttribute("align");return a===r?null:a}}})}function eoe(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),_1(t,{viewElement:"table",...e}),Qm(t,e)}function VR(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),_1(t,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...e}),Md(t,{modelElement:"table",...e})}class toe extends fe{constructor(e,n){super(e);w(this,"options");w(this,"focusTracker");w(this,"keystrokes");w(this,"children");w(this,"borderStyleDropdown");w(this,"borderWidthInput");w(this,"borderColorInput");w(this,"backgroundInput");w(this,"widthInput");w(this,"heightInput");w(this,"alignmentToolbar");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"_focusables");w(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:o,borderColorInput:r,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:u}=this._createBackgroundFields(),{widthInput:h,operatorLabel:m,heightInput:p,dimensionsLabel:v}=this._createDimensionFields(),{alignmentToolbar:C,alignmentLabel:x}=this._createAlignmentFields();this.focusTracker=new yt,this.keystrokes=new Ot,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=o,this.borderColorInput=r,this.backgroundInput=u,this.widthInput=h,this.heightInput=p,this.alignmentToolbar=C;const{saveButtonView:k,cancelButtonView:S}=this._createActionButtons();this.saveButtonView=k,this.cancelButtonView=S,this._focusables=new Sn,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new zo(e,{label:this.t("Table properties")})),this.children.add(new Vn(e,{labelView:a,children:[a,s,r,o],class:"ck-table-form__border-row"})),this.children.add(new Vn(e,{labelView:l,children:[l,u],class:"ck-table-form__background-row"})),this.children.add(new Vn(e,{children:[new Vn(e,{labelView:v,children:[v,h,m,p],class:"ck-table-form__dimensions-row"}),new Vn(e,{labelView:x,children:[x,C],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new Vn(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=Gg({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),o=this.locale,r=this.t,a=r("Style"),l=new Qi(o);l.text=r("Border");const u=x1(r),h=new sn(o,hN);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",v=>u[v||"none"]),h.fieldView.on("execute",v=>{this.borderStyle=v.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",v=>!v),Za(h.fieldView,qO(this,n.style),{role:"menu",ariaLabel:a});const m=new sn(o,ti);m.set({label:r("Width"),class:"ck-table-form__border-width"}),m.fieldView.bind("value").to(this,"borderWidth"),m.bind("isEnabled").to(this,"borderStyle",Rm),m.fieldView.on("input",()=>{this.borderWidth=m.fieldView.element.value});const p=new sn(o,s);return p.set({label:r("Color"),class:"ck-table-form__border-color"}),p.fieldView.bind("value").to(this,"borderColor"),p.bind("isEnabled").to(this,"borderStyle",Rm),p.fieldView.on("input",()=>{this.borderColor=p.fieldView.value}),this.on("change:borderStyle",(v,C,x,k)=>{Rm(x)||(this.borderColor="",this.borderWidth=""),Rm(k)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:p,borderWidthInput:m}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Background");const o=Gg({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),r=new sn(e,o);return r.set({label:n("Color"),class:"ck-table-properties-form__background"}),r.fieldView.bind("value").to(this,"backgroundColor"),r.fieldView.on("input",()=>{this.backgroundColor=r.fieldView.value}),{backgroundRowLabel:s,backgroundInput:r}}_createDimensionFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Dimensions");const o=new sn(e,ti);o.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),o.fieldView.bind("value").to(this,"width"),o.fieldView.on("input",()=>{this.width=o.fieldView.element.value});const r=new fe(e);r.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new sn(e,ti);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:o,operatorLabel:r,heightInput:a}}_createAlignmentFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Alignment");const o=new Da(e);return o.set({role:"radiogroup",isCompact:!0,ariaLabel:n("Table alignment toolbar")}),Ev({view:this,icons:{left:K0,center:Mg,right:Vg},toolbar:o,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:s,alignmentToolbar:o}}_createActionButtons(){const e=this.locale,n=this.t,s=new xe(e),o=new xe(e),r=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return s.set({label:n("Save"),icon:Pp,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(r,"errorText",(...a)=>a.every(l=>!l)),o.set({label:n("Cancel"),icon:Rh,class:"ck-button-cancel",withText:!0}),o.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:o}}get _alignmentLabels(){const e=this.locale,n=this.t,s=n("Align table to the left"),o=n("Center table"),r=n("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:r,center:o,left:s}:{left:s,center:o,right:r}}}function Rm(i){return i!=="none"}const noe=500,NR={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class ioe extends te{constructor(e){super(e);w(this,"_defaultContentTableProperties");w(this,"_defaultLayoutTableProperties");w(this,"_balloon");w(this,"view",null);w(this,"_viewWithContentTableDefaults",null);w(this,"_viewWithLayoutTableDefaults",null);w(this,"_undoStepBatch");w(this,"_isReady");e.config.define("table.tableProperties",{borderColors:qg,backgroundColors:qg})}static get requires(){return[as]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;this._defaultContentTableProperties=YO(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=Fp(),this._balloon=e.plugins.get(as),e.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const e=this.editor,n=e.t,s=new xe(e.locale);s.set({label:n("Table properties"),icon:hK,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(NR).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const n=this.editor,s=n.config.get("table.tableProperties"),o=ah(s.borderColors),r=rh(n.locale,o),a=ah(s.backgroundColors),l=rh(n.locale,a),u=s.colorPicker!==!1,h=new toe(n.locale,{borderColors:r,backgroundColors:l,defaultTableProperties:e,colorPickerConfig:u?s.colorPicker||{}:!1}),m=n.t;h.render(),this.listenTo(h,"submit",()=>{this._hideView()}),this.listenTo(h,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),h.keystrokes.set("Esc",(C,x)=>{this._hideView(),x()}),Uo({emitter:h,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const p=zO(m),v=HO(m);return h.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),h.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:h.borderColorInput,commandName:"tableBorderColor",errorText:p,validator:Wg})),h.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:h.borderWidthInput,commandName:"tableBorderWidth",errorText:v,validator:WO})),h.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:h.backgroundInput,commandName:"tableBackgroundColor",errorText:p,validator:Wg})),h.on("change:width",this._getValidatedPropertyChangeCallback({viewField:h.widthInput,commandName:"tableWidth",errorText:v,validator:Vd})),h.on("change:height",this._getValidatedPropertyChangeCallback({viewField:h.heightInput,commandName:"tableHeight",errorText:v,validator:Vd})),h.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),h}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableBorderStyle");Object.entries(NR).map(([s,o])=>{const r=s,a=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[r]||"":this._defaultLayoutTableProperties[r]||"";return[r,e.get(o).value||a]}).forEach(([s,o])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,o)}),this._isReady=!0}_showView(){const e=this.editor,n=Hg(e.editing.view.document.selection),s=n&&e.editing.mapper.toModelElement(n),o=!s||s.getAttribute("tableType")!=="layout";o&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):!o&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=o?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:jO(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;Hg(n.selection)?this._isViewVisible&&$O(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,o)=>{this._isReady&&this.editor.execute(e,{value:o,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:o,errorText:r}=e,a=ss(()=>{s.errorText=r},noe);return(l,u,h)=>{a.cancel(),this._isReady&&(o(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class soe extends te{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[Jse,ioe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ooe(i){i.document.registerPostFixer(t=>roe(t,i))}function roe(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e){if(s.type!="insert")continue;const o=s.position.parent;if(o.is("element","table")||s.name=="table"){const r=s.name=="table"?s.position.nodeAfter:o,a=Array.from(r.getChildren()).filter(u=>u.is("element","caption")),l=a.shift();if(!l)continue;for(const u of a)i.move(i.createRangeIn(u),l,"end"),i.remove(u);l.nextSibling&&(i.move(i.createRangeOn(l),r,"end"),n=!0),n=!!a.length||n}}return n}function OR(i){return!!i&&i.is("element","table")}function Av(i){for(const t of i.getChildren())if(t.is("element","caption"))return t;return null}function aoe(i){const t=Sr(i);return t?Av(t):null}function loe(i){const t=i.parent;return i.name=="figcaption"&&t&&t.is("element","figure")&&t.hasClass("table")?{name:!0}:i.name=="caption"&&t&&t.is("element","table")?{name:!0}:null}class coe extends Ge{refresh(){const t=this.editor,e=Sr(t.model.document.selection);this.isEnabled=!!e&&t.model.schema.checkChild(e,"caption"),this.isEnabled?this.value=!!Av(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const n=this.editor.model,s=Sr(n.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||t.createElement("caption");n.insertContent(a,s,"end"),e&&t.setSelection(a,"in")}_hideTableCaption(t){const e=this.editor.model,n=Sr(e.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),o=Av(n);s._saveCaption(n,o),e.deleteContent(t.createSelection(o,"on"))}}class uoe extends te{constructor(e){super(e);w(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.editing.view,o=e.t;n.isRegistered("caption")?n.extend("caption",{allowIn:"table"}):n.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new coe(this.editor)),e.conversion.for("upcast").elementToElement({view:loe,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>OR(r.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>{if(!OR(r.parent))return null;const l=a.createEditableElement("figcaption");return a.setCustomProperty("tableCaption",!0,l),l.placeholder=o("Enter table caption"),O0({view:s,element:l,keepOnFocus:!0}),u1(l,a)}}),ooe(e.model)}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?Rt.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}}class doe extends te{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.t;t.ui.componentFactory.add("toggleTableCaption",s=>{const o=t.commands.get("toggleTableCaption"),r=new xe(s);return r.set({icon:OV,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",a=>n(a?"Toggle caption off":"Toggle caption on")),this.listenTo(r,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),o.value){const a=aoe(t.model.document.selection),l=t.editing.mapper.toViewElement(a);if(!l)return;e.scrollToTheSelection(),e.change(u=>{u.addClass("table__caption_highlighted",l)})}t.editing.view.focus()}),r})}}class hoe extends te{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[uoe,doe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const foe={ko:{dictionary:{"Words: %0":"단어 수: %0","Characters: %0":"문자 수: %0","Widget toolbar":"위젯 툴바","Insert paragraph before block":"블록 앞에 단락 삽입","Insert paragraph after block":"블록 뒤에 단락 삽입","Press Enter to type after or press Shift + Enter to type before the widget":"엔터를 눌러서 위젯 뒤에 입력하거나 시프트 + 엔터를 눌러서 위젯 앞에 입력하세요","Keystrokes that can be used when a widget is selected (for example: image, table, etc.)":"위젯이 선택되었을 때 사용할 수 있는 키 입력(예: 이미지, 표 등)","Insert a new paragraph directly after a widget":"위젯 바로 뒤에 새 단락 삽입","Insert a new paragraph directly before a widget":"위젯 바로 앞에 새 단락 삽입","Move the caret to allow typing directly before a widget":"위젯 바로 앞에 입력할 수 있도록 삽입 기호 이동","Move the caret to allow typing directly after a widget":"위젯 바로 뒤에 입력할 수 있도록 삽입 기호 이동","Move focus from an editable area back to the parent widget":"포커스를 편집 가능 영역에서 부모위젯으로 옮기기","Upload in progress":"업로드 진행 중",Undo:"실행 취소",Redo:"다시 실행","Rich Text Editor":"서식 있는 텍스트 편집기","Edit block":"편집 영역","Click to edit block":"클릭하여 블록 편집","Drag to move":"드래그하여 이동",Next:"다음",Previous:"이전","Editor toolbar":"편집기 툴바","Dropdown toolbar":"드롭다운 툴바","Dropdown menu":"드롭다운 메뉴",Black:"검은색","Dim grey":"진한 회색",Grey:"회색","Light grey":"밝은 회색",White:"흰색",Red:"빨간색",Orange:"주황색",Yellow:"노랑색","Light green":"연한 초록색",Green:"초록색",Aquamarine:"연한 청록색",Turquoise:"청록색","Light blue":"연한 파랑색",Blue:"파랑색",Purple:"보라색","Editor block content toolbar":"편집기 영역 내용 툴바","Editor contextual toolbar":"편집기 문맥 툴바",HEX:"HEX","No results found":"결과 찾을 수 없음","No searchable items":"검색 가능한 항목 없음","Editor dialog":"편집기 대화상자",Close:"닫기","Help Contents. To close this dialog press ESC.":"도움말 내용입니다. 이 대화 상자를 닫으려면 ESC 키를 누르세요.","Below, you can find a list of keyboard shortcuts that can be used in the editor.":"편집기에서 사용할 수 있는 키보드 단축키 목록을 아래에서 확인할 수 있습니다.","(may require <kbd>Fn</kbd>)":"(<kbd>Fn</kbd> 키가 필요할 수 있음)",Accessibility:"접근성","Accessibility help":"접근성 도움말","Press %0 for help.":"도움말을 보려면 %0 키를 누르세요.","Move focus in and out of an active dialog window":"활성화된 대화 창 안팎으로 포커스 이동",MENU_BAR_MENU_FILE:"파일",MENU_BAR_MENU_EDIT:"수정",MENU_BAR_MENU_VIEW:"보기",MENU_BAR_MENU_INSERT:"삽입",MENU_BAR_MENU_FORMAT:"서식",MENU_BAR_MENU_TOOLS:"도구",MENU_BAR_MENU_HELP:"도움말",MENU_BAR_MENU_TEXT:"텍스트",MENU_BAR_MENU_FONT:"글꼴","Editor menu bar":"편집기 메뉴 표시줄",'Please enter a valid color (e.g. "ff0000").':'유효한 색상을 입력해 주세요(예를 들어, "ff0000").',"Insert table":"테이블 삽입","Header column":"헤더 열","Insert column left":"왼쪽에 열 삽입","Insert column right":"오른쪽에 열 삽입","Delete column":"열 삭제","Select column":"열 선택",Column:"열","Header row":"헤더 행","Insert row below":"아래에 행 삽입","Insert row above":"위에 행 삽입","Delete row":"행 삭제","Select row":"행 선택",Row:"행","Merge cell up":"위 셀과 병합","Merge cell right":"오른쪽 셀과 병합","Merge cell down":"아래 셀과 병합","Merge cell left":"왼쪽 셀과 병합","Split cell vertically":"세로로 셀 분할","Split cell horizontally":"가로로 셀 분할","Merge cells":"셀 병합","Table toolbar":"표 도구 모음","Table properties":"표 속성","Cell properties":"셀 속성",Border:"테두리",Style:"스타일",Width:"가로",Height:"세로",Color:"색",Background:"배경색",Padding:"여백",Dimensions:"크기","Table cell text alignment":"표 셀 텍스트 정렬",Alignment:"정렬","Horizontal text alignment toolbar":"가로 텍스트 정렬 도구 모음","Vertical text alignment toolbar":"세로 텍스트 정렬 도구 모음","Table alignment toolbar":"표 정렬 도구 모음",None:"선 없음",Solid:"실선",Dotted:"점선",Dashed:"파선",Double:"이중선",Groove:"음각선",Ridge:"양각선",Inset:"측면 음각선",Outset:"측면 양각선","Align cell text to the left":"셀 텍스트를 왼쪽으로 정렬","Align cell text to the center":"셀 텍스트를 가로 가운데로 정렬","Align cell text to the right":"셀 텍스트를 오른쪽으로 정렬","Justify cell text":"셀 텍스트를 양쪽으로 정렬","Align cell text to the top":"셀 텍스트를 위로 정렬","Align cell text to the middle":"셀 텍스트를 세로 가운데로 정렬","Align cell text to the bottom":"셀 텍스트를 아래로 정렬","Align table to the left":"테이블을 왼쪽으로 정렬","Center table":"테이블을 가운데로 정렬","Align table to the right":"테이블을 오른쪽으로 정렬",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':'유효하지 않은 색입니다. "#FF0000"이나 "rgb(255,0,0)", 또는 "red"를 입력해 보세요.','The value is invalid. Try "10px" or "2em" or simply "2".':'유효하지 않은 값입니다. "10px"나 "2em" 또는 그냥 "2"를 입력해 보세요.',"Enter table caption":"테이블 캡션 입력","Keystrokes that can be used in a table cell":"표 셀에서 사용할 수 있는 키 입력","Move the selection to the next cell":"선택 항목을 다음 셀로 이동","Move the selection to the previous cell":"선택 항목을 이전 셀로 이동","Insert a new table row (when in the last cell of a table)":"새 표 행 삽입(표의 마지막 셀에 있을 때)","Navigate through the table":"표 탐색",Table:"표","Insert table layout":"표 레이아웃 삽입","Table layout":"표 레이아웃","Layout table":"레이아웃 표","Content table":"콘텐츠 표","Choose table type":"표 유형 선택","Table type":"표 유형","Table type options":"표 유형 옵션",Styles:"스타일","Multiple styles":"다중 스타일","Block styles":"블록 스타일","Text styles":"텍스트 스타일","Special characters":"특수 문자",Category:"카테고리",All:"전체",Arrows:"화살표",Currency:"통화",Latin:"라틴",Mathematical:"수식",Text:"텍스트","leftwards simple arrow":"왼쪽 단순 화살표","rightwards simple arrow":"오른쪽 단순 화살표","upwards simple arrow":"위쪽 단순 화살표","downwards simple arrow":"아래쪽 단순 화살표","leftwards double arrow":"왼쪽 겹화살표","rightwards double arrow":"오른쪽 겹화살표","upwards double arrow":"위쪽 겹화살표","downwards double arrow":"아래쪽 겹화살표","leftwards dashed arrow":"왼쪽 대시 화살표","rightwards dashed arrow":"오른쪽 대시 화살표","upwards dashed arrow":"위쪽 대시 화살표","downwards dashed arrow":"아래쪽 대시 화살표","leftwards arrow to bar":"왼쪽 바를 향한 화살표","rightwards arrow to bar":"오른쪽 바를 향한 화살표","upwards arrow to bar":"위쪽 바를 향한 화살표","downwards arrow to bar":"아래쪽 바를 향한 화살표","up down arrow with base":"받침이 있는 위아래 화살표","back with leftwards arrow above":"BACK 위 왼쪽 화살표","end with leftwards arrow above":"END 위 왼쪽 화살표","on with exclamation mark with left right arrow above":"ON! 위 왼쪽 오른쪽 화살표","soon with rightwards arrow above":"SOON 위 오른쪽 화살표","top with upwards arrow above":"TOP 위 위쪽 화살표","Dollar sign":"달러 기호","Euro sign":"유로 기호","Yen sign":"엔 기호","Pound sign":"파운드 기호","Cent sign":"센트 기호","Euro-currency sign":"유로화 기호","Colon sign":"콜론 기호","Cruzeiro sign":"크루제이루 기호","French franc sign":"프랑스 프랑 기호","Lira sign":"리라 기호","Currency sign":"통화 기호","Bitcoin sign":"비트코인 기호","Mill sign":"밀 기호","Naira sign":"나이라 기호","Peseta sign":"페세타 기호","Rupee sign":"루피 기호","Won sign":"원 기호","New sheqel sign":"뉴 세켈 기호","Dong sign":"동 기호","Kip sign":"킵 기호","Tugrik sign":"투그리크 기호","Drachma sign":"드라크마 기호","German penny sign":"독일 페니 기호","Peso sign":"페소 기호","Guarani sign":"과라니 기호","Austral sign":"오스트랄 기호","Hryvnia sign":"흐리브냐 기호","Cedi sign":"세디 기호","Livre tournois sign":"리브르 트르누아 기호","Spesmilo sign":"스페스밀로 기호","Tenge sign":"텡게 기호","Indian rupee sign":"인도 루피 기호","Turkish lira sign":"터키 리라 기호","Nordic mark sign":"노르딕 마크 기호","Manat sign":"마나트 기호","Ruble sign":"루블 기호","Latin capital letter a with macron":"장음 부호가 있는 라틴어 대문자 A","Latin small letter a with macron":"장음 부호가 있는 라틴어 소문자 a","Latin capital letter a with breve":"반달점 부호가 있는 라틴어 대문자 A","Latin small letter a with breve":"반달점 부호가 있는 라틴어 소문자 a","Latin capital letter a with ogonek":"꼬리 부호가 있는 라틴어 대문자 A","Latin small letter a with ogonek":"꼬리 부호가 있는 라틴어 소문자 a","Latin capital letter c with acute":"양음 부호가 있는 라틴어 대문자 C","Latin small letter c with acute":"양음 부호가 있는 라틴어 소문자 c","Latin capital letter c with circumflex":"곡절 부호가 있는 라틴어 대문자 C","Latin small letter c with circumflex":"곡절 부호가 있는 라틴어 소문자 c","Latin capital letter c with dot above":"위에 점 부호가 있는 라틴어 대문자 C","Latin small letter c with dot above":"위에 점 부호가 있는 라틴어 소문자 c","Latin capital letter c with caron":"반대 곡절 부호가 있는 라틴어 대문자 C","Latin small letter c with caron":"반대 곡절 부호가 있는 라틴어 소문자 c","Latin capital letter d with caron":"반대 곡절 부호가 있는 라틴어 대문자 D","Latin small letter d with caron":"반대 곡절 부호가 있는 라틴어 소문자 d","Latin capital letter d with stroke":"획 부호가 있는 라틴어 대문자 D","Latin small letter d with stroke":"획 부호가 있는 라틴어 소문자 d","Latin capital letter e with macron":"장음 부호가 있는 라틴어 대문자 E","Latin small letter e with macron":"장음 부호가 있는 라틴어 소문자 e","Latin capital letter e with breve":"반달점 부호가 있는 라틴어 대문자 E","Latin small letter e with breve":"반달점 부호가 있는 라틴어 소문자 e","Latin capital letter e with dot above":"위에 점 부호가 있는 라틴어 대문자 E","Latin small letter e with dot above":"위에 점 부호가 있는 라틴어 소문자 e","Latin capital letter e with ogonek":"꼬리 부호가 있는 라틴어 대문자 E","Latin small letter e with ogonek":"꼬리 부호가 있는 라틴어 소문자 e","Latin capital letter e with caron":"반대 곡절 부호가 있는 라틴어 대문자 E","Latin small letter e with caron":"반대 곡절 부호가 있는 라틴어 소문자 e","Latin capital letter g with circumflex":"곡절 부호가 있는 라틴어 대문자 G","Latin small letter g with circumflex":"곡절 부호가 있는 라틴어 소문자 g","Latin capital letter g with breve":"반달점 부호가 있는 라틴어 대문자 G","Latin small letter g with breve":"반달점 부호가 있는 라틴어 소문자 g","Latin capital letter g with dot above":"위에 점 부호가 있는 라틴어 대문자 G","Latin small letter g with dot above":"위에 점 부호가 있는 라틴어 소문자 g","Latin capital letter g with cedilla":"갈고리 부호가 있는 라틴어 대문자 G","Latin small letter g with cedilla":"갈고리 부호가 있는 라틴어 소문자 g","Latin capital letter h with circumflex":"곡절 부호가 있는 라틴어 대문자 H","Latin small letter h with circumflex":"곡절 부호가 있는 라틴어 소문자 h","Latin capital letter h with stroke":"획 부호가 있는 라틴어 대문자 H","Latin small letter h with stroke":"획 부호가 있는 라틴어 소문자 h","Latin capital letter i with tilde":"물결 부호가 있는 라틴어 대문자 I","Latin small letter i with tilde":"물결 부호가 있는 라틴어 소문자 i","Latin capital letter i with macron":"장음 부호가 있는 라틴어 대문자 I","Latin small letter i with macron":"장음 부호가 있는 라틴어 소문자 i","Latin capital letter i with breve":"반달점 부호가 있는 라틴어 대문자 I","Latin small letter i with breve":"반달점 부호가 있는 라틴어 소문자 i","Latin capital letter i with ogonek":"꼬리 부호가 있는 라틴어 대문자 I","Latin small letter i with ogonek":"꼬리 부호가 있는 라틴어 소문자 i","Latin capital letter i with dot above":"위에 점 부호가 있는 라틴어 대문자 I","Latin small letter dotless i":"라틴어 소문자 점 없는 i","Latin capital ligature ij":"라틴어 대문자 합자 IJ","Latin small ligature ij":"라틴어 소문자 합자 ij","Latin capital letter j with circumflex":"곡절 부호가 있는 라틴어 대문자 J","Latin small letter j with circumflex":"곡절 부호가 있는 라틴어 소문자 j","Latin capital letter k with cedilla":"갈고리 부호가 있는 라틴어 대문자 K","Latin small letter k with cedilla":"갈고리 부호가 있는 라틴어 소문자 k","Latin small letter kra":"라틴어 소문자 크라","Latin capital letter l with acute":"양음 부호가 있는 라틴어 대문자 I","Latin small letter l with acute":"양음 부호가 있는 라틴어 소문자 i","Latin capital letter l with cedilla":"갈고리 부호가 있는 라틴어 대문자 I","Latin small letter l with cedilla":"갈고리 부호가 있는 라틴어 소문자 i","Latin capital letter l with caron":"반대 곡절 부호가 있는 라틴어 대문자 I","Latin small letter l with caron":"반대 곡절 부호가 있는 라틴어 소문자 i","Latin capital letter l with middle dot":"중간에 점 부호가 있는 라틴어 대문자 I","Latin small letter l with middle dot":"중간에 점 부호가 있는 라틴어 소문자 i","Latin capital letter l with stroke":"획 부호가 있는 라틴어 대문자 I","Latin small letter l with stroke":"획 부호가 있는 라틴어 소문자 i","Latin capital letter n with acute":"양음 부호가 있는 라틴어 대문자 N","Latin small letter n with acute":"양음 부호가 있는 라틴어 소문자 n","Latin capital letter n with cedilla":"갈고리 부호가 있는 라틴어 대문자 N","Latin small letter n with cedilla":"갈고리 부호가 있는 라틴어 소문자 n","Latin capital letter n with caron":"반대 곡절 부호가 있는 라틴어 대문자 N","Latin small letter n with caron":"반대 곡절 부호가 있는 라틴어 소문자 n","Latin small letter n preceded by apostrophe":"아포스트로피 다음에 있는 라틴어 소문자 n","Latin capital letter eng":"라틴어 대문자 엥","Latin small letter eng":"라틴어 소문자 엥","Latin capital letter o with macron":"장음 부호가 있는 라틴어 대문자 O","Latin small letter o with macron":"장음 부호가 있는 라틴어 소문자 o","Latin capital letter o with breve":"반달점 부호가 있는 라틴어 대문자 O","Latin small letter o with breve":"반달점 부호가 있는 라틴어 소문자 o","Latin capital letter o with double acute":"이중 양음 부호가 있는 라틴어 대문자 O","Latin small letter o with double acute":"이중 양음 부호가 있는 라틴어 소문자 o","Latin capital ligature oe":"라틴어 대문자 합자 OE","Latin small ligature oe":"라틴어 소문자 합자 oe","Latin capital letter r with acute":"양음 부호가 있는 라틴어 대문자 R","Latin small letter r with acute":"양음 부호가 있는 라틴어 소문자 r","Latin capital letter r with cedilla":"갈고리 부호가 있는 라틴어 대문자 R","Latin small letter r with cedilla":"갈고리 부호가 있는 라틴어 소문자 r","Latin capital letter r with caron":"반대 곡절 부호가 있는 라틴어 대문자 R","Latin small letter r with caron":"반대 곡절 부호가 있는 라틴어 소문자 r","Latin capital letter s with acute":"양음 부호가 있는 라틴어 대문자 S","Latin small letter s with acute":"양음 부호가 있는 라틴어 소문자 s","Latin capital letter s with circumflex":"곡절 부호가 있는 라틴어 대문자 S","Latin small letter s with circumflex":"곡절 부호가 있는 라틴어 소문자 s","Latin capital letter s with cedilla":"갈고리 부호가 있는 라틴어 대문자 S","Latin small letter s with cedilla":"갈고리 부호가 있는 라틴어 소문자 s","Latin capital letter s with caron":"반대 곡절 부호가 있는 라틴어 대문자 S","Latin small letter s with caron":"반대 곡절 부호가 있는 라틴어 소문자 s","Latin capital letter t with cedilla":"갈고리 부호가 있는 라틴어 대문자 T","Latin small letter t with cedilla":"갈고리 부호가 있는 라틴어 소문자 t","Latin capital letter t with caron":"반대 곡절 부호가 있는 라틴어 대문자 T","Latin small letter t with caron":"반대 곡절 부호가 있는 라틴어 소문자 t","Latin capital letter t with stroke":"획 부호가 있는 라틴어 대문자 T","Latin small letter t with stroke":"획 부호가 있는 라틴어 소문자 t","Latin capital letter u with tilde":"물결 부호가 있는 라틴어 대문자 U","Latin small letter u with tilde":"물결 부호가 있는 라틴어 소문자 u","Latin capital letter u with macron":"장음 부호가 있는 라틴어 대문자 U","Latin small letter u with macron":"장음 부호가 있는 라틴어 소문자 u","Latin capital letter u with breve":"반달점 부호가 있는 라틴어 대문자 U","Latin small letter u with breve":"반달점 부호가 있는 라틴어 소문자 u","Latin capital letter u with ring above":"위에 고리가 있는 라틴어 대문자 U","Latin small letter u with ring above":"위에 고리가 있는 라틴어 소문자 u","Latin capital letter u with double acute":"이중 양음 부호가 있는 라틴어 대문자 U","Latin small letter u with double acute":"이중 양음 부호가 있는 라틴어 소문자 u","Latin capital letter u with ogonek":"꼬리 부호가 있는 라틴어 대문자 U","Latin small letter u with ogonek":"꼬리 부호가 있는 라틴어 소문자 u","Latin capital letter w with circumflex":"곡절 부호가 있는 라틴어 대문자 W","Latin small letter w with circumflex":"곡절 부호가 있는 라틴어 소문자 w","Latin capital letter y with circumflex":"곡절 부호가 있는 라틴어 대문자 Y","Latin small letter y with circumflex":"곡절 부호가 있는 라틴어 소문자 y","Latin capital letter y with diaeresis":"분음 부호가 있는 라틴어 대문자 Y","Latin capital letter z with acute":"양음 부호가 있는 라틴어 대문자 Z","Latin small letter z with acute":"양음 부호가 있는 라틴어 소문자 z","Latin capital letter z with dot above":"위에 점 부호가 있는 라틴어 대문자 Z","Latin small letter z with dot above":"위에 점 부호가 있는 라틴어 소문자 z","Latin capital letter z with caron":"반대 곡절 부호가 있는 라틴어 대문자 Z","Latin small letter z with caron":"반대 곡절 부호가 있는 라틴어 소문자 z","Latin small letter long s":"라틴어 소문자 긴 s","Less-than sign":"더 작음 기호","Greater-than sign":"더 큼 기호","Less-than or equal to":"더 작거나 같음","Greater-than or equal to":"더 크거나 같음","En dash":"엔 대시","Em dash":"엠 대시",Macron:"장음 부호",Overline:"윗줄","Degree sign":"도 기호","Minus sign":"빼기 기호","Plus-minus sign":"더하기 빼기 기호","Division sign":"나누기 기호","Fraction slash":"분수 슬래시","Multiplication sign":"곱하기 기호","Latin small letter f with hook":"밑이 구부러진 라틴어 소문자 f",Integral:"적분","N-ary summation":"누계합",Infinity:"무한대","Square root":"제곱근","Tilde operator":"물결표 연산자","Approximately equal to":"대략 같음","Almost equal to":"거의 같음","Not equal to":"같지 않음","Identical to":"합동","Element of":"원소","Not an element of":"원소가 아님","Contains as member":"원소로 포함","N-ary product":"중복순열","Logical and":"논리곱","Logical or":"논리합","Not sign":"부정 기호",Intersection:"교집합",Union:"합집합","Partial differential":"편미분","For all":"전칭","There exists":"존재","Empty set":"공집합",Nabla:"나블라","Asterisk operator":"별표 연산자","Proportional to":"비례",Angle:"각","Vulgar fraction one quarter":"4분의 1","Vulgar fraction one half":"2분의 1","Vulgar fraction three quarters":"4분의 3","Single left-pointing angle quotation mark":"왼쪽 홑화살괄호","Single right-pointing angle quotation mark":"오른쪽 홑화살괄호","Left-pointing double angle quotation mark":"왼쪽 겹화살괄호","Right-pointing double angle quotation mark":"오른쪽 겹화살괄호","Left single quotation mark":"왼쪽 작은따옴표","Right single quotation mark":"오른쪽 작은따옴표","Left double quotation mark":"왼쪽 큰따옴표","Right double quotation mark":"오른쪽 큰따옴표","Single low-9 quotation mark":"낮은 홑따옴표","Double low-9 quotation mark":"낮은 겹따옴표","Inverted exclamation mark":"역느낌표","Inverted question mark":"역물음표","Two dot leader":"두 점 줄임표","Horizontal ellipsis":"세 점 줄임표","Double dagger":"겹칼표","Per mille sign":"퍼 마일 기호","Per ten thousand sign":"만분율 기호","Double exclamation mark":"겹느낌표","Question exclamation mark":"물음표 느낌표","Exclamation question mark":"느낌표 물음표","Double question mark":"겹물음표","Copyright sign":"저작권 기호","Registered sign":"등록 상표 기호","Trade mark sign":"상표 기호","Section sign":"구역 기호","Paragraph sign":"단락 기호","Reversed paragraph sign":"반전된 단락 기호","Show source":"소스 표시","Show blocks":"블록 표시","Select all":"전체 선택","Disable editing":"편집 비활성화","Enable editing":"편집 활성화","Previous editable region":"이전 편집 가능한 구역","Next editable region":"다음 편집 가능한 구역","Navigate editable regions":"편집 가능한 구역 탐색","Remove Format":"서식 지우기","Page break":"페이지 나누기","media widget":"미디어 위젯","Media URL":"미디어 URL","Paste the media URL in the input.":"미디어 URL을 입력해주세요.","Tip: Paste the URL into the content to embed faster.":"팁: URL을 붙여넣으면 더 빨리 삽입할 수 있습니다.","The URL must not be empty.":"URL이 비어있을 수 없습니다.","This media URL is not supported.":"이 미디어 URL은 지원되지 않습니다.","Insert media":"미디어 삽입",Media:"미디어","Media toolbar":"미디어 툴바","Open media in new tab":"새 탭에서 미디어 열기","Media embed":"미디어 ㅅ","Numbered List":"번호 목록","Bulleted List":"불릿 목록","To-do List":"확인 목록","Bulleted list styles toolbar":"글머리 기호 목록 스타일 도구 모음","Numbered list styles toolbar":"번호 목록 스타일 도구 모음","Toggle the disc list style":"흰 원형 목록 스타일 전환","Toggle the circle list style":"검은 원형 목록 스타일 전환","Toggle the square list style":"검은 사각형 목록 스타일 전환","Toggle the decimal list style":"십진수 목록 스타일 전환","Toggle the decimal with leading zero list style":"앞에 0이 붙는 십진수 목록 스타일 전환","Toggle the lower–roman list style":"소문자 로마자 목록 스타일 전환","Toggle the upper–roman list style":"대문자 로마자 목록 스타일 전환","Toggle the lower–latin list style":"소문자 알파벳 목록 스타일 전환","Toggle the upper–latin list style":"대문자 알파벳 목록 스타일 전환",Disc:"검은 원형",Circle:"흰 원형",Square:"검은 사각형",Decimal:"십진수","Decimal with leading zero":"앞에 0이 붙는 십진수","Lower–roman":"소문자 로마자","Upper-roman":"대문자 로마자","Lower-latin":"소문자 알파벳","Upper-latin":"대문자 알파벳","List properties":"목록 속성","Start at":"시작 번호","Invalid start index value.":"잘못된 시작 인덱스 값입니다.","Start index must be greater than 0.":"시작 번호는 0보다 커야 합니다.","Reversed order":"역순","Keystrokes that can be used in a list":"목록에서 사용할 수 있는 키 입력","Increase list item indent":"목록 항목 들여쓰기 늘리기","Decrease list item indent":"목록 항목 들여쓰기 줄이기","Entering a to-do list":"할 일 목록 입력하는 중","Leaving a to-do list":"할 일 목록 남기는 중",Unlink:"링크 삭제",Link:"링크","Link URL":"링크 주소","Link URL must not be empty.":"링크 URL은 비워둘 수 없습니다.","Link image":"사진 링크","Edit link":"링크 편집","Open link in new tab":"새 탭에서 링크 열기","Open in a new tab":"새 탭에서 열기",Downloadable:"다운로드 가능","Create link":"링크 생성","Move out of a link":"링크 밖으로 이동","Link properties":"링크 속성","Displayed text":"표시 텍스트","No links available":"사용 가능한 링크 없음",Language:"언어","Choose language":"언어 선택","Remove language":"언어 제거","Increase indent":"들여쓰기 늘리기","Decrease indent":"들여쓰기 줄이기","image widget":"사진 위젯","Wrap text":"텍스트 줄 바꿈","Break text":"텍스트 분리","In line":"줄 안에","Side image":"본문 옆에 배치","Full size image":"꽉 찬 크기","Left aligned image":"왼쪽 정렬","Centered image":"가운데 정렬","Right aligned image":"오른쪽 정렬","Change image text alternative":"대체 문구 변경","Text alternative":"대체 문구","Enter image caption":"사진 설명을 입력하세요","Insert image":"사진 삽입","Replace image":"이미지 교체","Upload from computer":"컴퓨터에서 업로드","Replace from computer":"컴퓨터에서 교체","Upload image from computer":"컴퓨터에서 이미지 업로드","Image from computer":"컴퓨터에서 이미지 가져오기","From computer":"컴퓨터에서","Replace image from computer":"컴퓨터에서 이미지 교체","Upload failed":"업로드 실패","You have no image upload permissions.":"이미지를 업로드할 수 있는 권한이 없습니다.","Image toolbar":"사진 툴바","Resize image":"사진 크기 조절","Resize image to %0":"사진의 크기를 %0으로 조절","Resize image to the original size":"사진을 원래 크기로 돌려놓기","Resize image (in %0)":"이미지 크기 조정하기(%0 이내)",Original:"원본","Custom image size":"사용자 지정 이미지 크기",Custom:"사용자 지정","Image resize list":"사진 크기 목록","Insert image via URL":"URL로 이미지 삽입","Insert via URL":"URL 버튼으로 이미지 삽입","Image via URL":"URL 메뉴를 통한 이미지 삽입","Via URL":"이미지 메뉴에서 URL을 통한 이미지 삽입","Update image URL":"이미지 URL 업데이트","Caption for the image":"이미지용 캡션","Caption for image: %0":"이미지용 캡션: %0","The value must not be empty.":"값은 비워둘 수 없습니다.","The value should be a plain number.":"일반 숫자로 된 값을 입력해야 합니다.","Uploading image":"이미지 업로드 중","Image upload complete":"이미지 업로드 완료","Error during image upload":"이미지 업로드 중에 오류 발생",Image:"이미지 삽입 기능으로 삽입된 위젯","Image Resize":"이미지 크기 조절","Text Alternative":"대체 텍스트","HTML object":"HTML 오브젝트","Insert HTML":"HTML 삽입","HTML snippet":"HTML 코드 조각","Paste raw HTML here...":"원시 HTML을 여기에 붙여넣으세요...","Edit source":"소스 편집","Save changes":"변경사항 저장","No preview available":"미리보기를 이용할 수 없습니다","Empty snippet content":"빈 코드 조각 내용","Horizontal line":"수평선","Yellow marker":"노란색 마커","Green marker":"초록색 마커","Pink marker":"분홍색 마커","Blue marker":"파란색 마커","Red pen":"빨간색 펜","Green pen":"초록색 펜","Remove highlight":"강조 제거",Highlight:"강조","Text highlight toolbar":"글자 강조 툴바",Heading:"제목","Choose heading":"제목 선택","Heading 1":"제목 1","Heading 2":"제목 2","Heading 3":"제목 3","Heading 4":"제목 4","Heading 5":"제목 5","Heading 6":"제목 6","Type your title":"제목을 입력해주세요","Type or paste your content here.":"여기에 내용을 입력하거나 붙여넣으세요.","Enter fullscreen mode":"전체 화면으로 보기","Leave fullscreen mode":"전체 화면 나가기","Fullscreen mode":"전체 화면 모드","Toggle fullscreen mode":"전체 화면 모드 전환","Document outline":"문서 외곽선","Connected users":"참여 사용자","Font Size":"글자 크기",Tiny:"매우 작은",Small:"작은",Big:"큰",Huge:"매우 큰","Font Family":"글꼴 집합",Default:"기본","Font Color":"글자 색깔","Font Background Color":"글자 배경 색깔","Document colors":"문서 색깔들","Find and replace":"찾기 및 바꾸기","Find in text…":"텍스트에서 찾기...",Find:"찾기","Previous result":"이전 결과","Next result":"다음 결과",Replace:"바꾸기","Replace all":"모두 바꾸기","Match case":"대/소문자 구분","Whole words only":"전체 단어만","Replace with…":"바꿀 내용...","Text to find must not be empty.":"찾을 텍스트를 입력해야 합니다.","Tip: Find some text first in order to replace it.":"팁: 바꾸려는 텍스트를 먼저 찾으세요.","Advanced options":"고급 옵션","Find in the document":"문서에서 찾기","Insert a soft break (a <code>&lt;br&gt;</code> element)":"줄 바꿈 삽입(<code>&lt;br&gt;</code> 요소)","Insert a hard break (a new paragraph)":"단락 바꿈 삽입(새 단락)",Emoji:"이모지","Show all emoji...":"모든 이모지 표시...","Find an emoji (min. 2 characters)":"이모지 찾기(최소 2자)",'No emojis were found matching "%0".':'"%0"에 대한 이모지를 찾을 수 없습니다.',"Keep on typing to see the emoji.":"이모지를 보려면 계속 입력하세요.","The query must contain at least two characters.":"쿼리에는 2자 이상이 포함되어야 합니다.","Smileys & Expressions":"스마일 및 표정","Gestures & People":"제스처 및 사람","Animals & Nature":"동물 및 자연","Food & Drinks":"음식 및 음료","Travel & Places":"여행 및 장소",Activities:"활동",Objects:"사물",Symbols:"기호",Flags:"깃발","Select skin tone":"피부색 선택","Default skin tone":"기본 피부색","Light skin tone":"밝은 피부색","Medium Light skin tone":"약간 밝은 피부색","Medium skin tone":"중간 피부색","Medium Dark skin tone":"약간 어두운 피부색","Dark skin tone":"어두운 피부색","Emoji picker":"이모지 선택",Cancel:"취소",Clear:"지우기","Remove color":"색깔 제거","Restore default":"기본값 복원",Save:"저장","Show more items":"더보기","%0 of %1":"%0 / %1","Cannot upload file:":"파일 업로드할 수 없음: ","Rich Text Editor. Editing area: %0":"리치 텍스트 편집기. 편집 영역: %0","Insert with file manager":"파일 관리자를 사용하여 삽입","Replace with file manager":"파일 관리자를 사용하여 교체","Insert image with file manager":"파일 관리자를 사용하여 이미지 삽입","Replace image with file manager":"파일 관리자를 사용하여 이미지 교체",File:"파일","With file manager":"파일 관리 버튼으로 이미지 삽입","Toggle caption off":"캡션 지우기","Toggle caption on":"캡션 넣기","Content editing keystrokes":"콘텐츠 편집 키 입력","These keyboard shortcuts allow for quick access to content editing features.":"이러한 키보드 단축키를 사용하면 콘텐츠 편집 기능을 빠르게 사용할 수 있습니다.","User interface and content navigation keystrokes":"사용자 인터페이스 및 콘텐츠 탐색 키 입력","Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface.":"다음 키 입력을 사용하여 CKEditor 5 사용자 인터페이스를 더 효율적으로 탐색하세요.","Close contextual balloons, dropdowns, and dialogs":"상황별 풍선, 드롭다운, 대화 상자 닫기","Open the accessibility help dialog":"접근성 도움말 대화 상자 열기","Move focus between form fields (inputs, buttons, etc.)":"양식 필드(입력, 버튼 등) 간에 포커스 이동","Move focus to the menu bar, navigate between menu bars":"메뉴 표시줄로 포커스 이동, 메뉴 표시줄 탐색","Move focus to the toolbar, navigate between toolbars":"도구 모음으로 포커스 이동, 도구 모음 간 탐색","Navigate through the toolbar or menu bar":"도구 모음 또는 메뉴 표시줄 탐색","Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content.":"현재 포커스가 맞춰진 버튼을 실행합니다. 편집기 콘텐츠와 상호 작용하는 버튼을 실행하면 포커스가 다시 콘텐츠로 이동합니다.",Accept:"수락",Paragraph:"문단","Color picker":"색상 선택기","Please try a different phrase or check the spelling.":"다른 문구를 사용해 보시거나 철자를 확인해 주세요.",Source:"소스",Insert:"삽입",Update:"업데이트",Back:"뒤로","Insert code block":"코드 블럭 삽입","Plain text":"평문","Leaving %0 code snippet":"%0 코드 스니펫 남기는 중","Entering %0 code snippet":"%0 코드 스니펫 입력하는 중","Entering code snippet":"코드 스니펫 입력하는 중","Leaving code snippet":"코드 스니펫 남기는 중","Code block":"코드 블록","Copy selected content":"선택된 콘텐츠 복사","Paste content":"콘텐츠 붙여넣기","Paste content as plain text":"콘텐츠를 일반 텍스트로 붙여넣기","Insert image or file":"사진이나 파일을 삽입","Could not obtain resized image URL.":"크기가 조절된 사진의 URL을 가져오지 못했습니다.","Selecting resized image failed":"크기가 조절된 이미지 선택 실패","Could not insert image at the current position.":"현재 위치에 사진을 삽입할 수 없습니다.","Inserting image failed":"사진 삽입 실패","Open file manager":"파일 관리자 열기","Cannot determine a category for the uploaded file.":"업로드된 파일의 카테고리를 확인할 수 없습니다.","Cannot access default workspace.":"기본 작업 공간에 액세스할 수 없습니다.","You have no image editing permissions.":"이미지를 편집할 수 있는 권한이 없습니다.","Edit image":"이미지 편집","Processing the edited image.":"편집한 이미지를 처리 중입니다.","Server failed to process the image.":"서버가 이미지를 처리하지 못했습니다.","Failed to determine category of edited image.":"편집한 이미지의 카테고리를 결정하지 못했습니다.",Bookmark:"책갈피","Edit bookmark":"책갈피 편집","Remove bookmark":"책갈피 제거","Bookmark name":"책갈피 이름","Enter the bookmark name without spaces.":"공백 없이 책갈피 이름을 입력하세요.","Bookmark must not be empty.":"책갈피 이름은 비워 둘 수 없습니다.","Bookmark name cannot contain space characters.":"책갈피 이름에는 공백이 포함될 수 없습니다.","Bookmark name already exists.":"책갈피 이름이 이미 존재합니다.","bookmark widget":"책갈피 위젯","Bookmark toolbar":"북마크 도구 모음",Bookmarks:"북마크","No bookmarks available.":"사용 가능한 북마크가 없습니다.","Scroll to bookmark":"북마크로 이동","Block quote":"인용 단락",Bold:"굵게",Italic:"기울임꼴",Underline:"밑줄",Code:"코드",Strikethrough:"취소선",Subscript:"아래 첨자",Superscript:"위 첨자","Italic text":"기울인 텍스트","Move out of an inline code style":"인라인 코드 스타일 밖으로 이동","Bold text":"굵은 텍스트","Underline text":"텍스트 밑줄","Strikethrough text":"텍스트 취소선","Saving changes":"변경된 내용을 저장하고 있습니다","Revert autoformatting action":"자동 서식 작업 되돌리기","Align left":"왼쪽 정렬","Align right":"오른쪽 정렬","Align center":"가운데 정렬",Justify:"양쪽 정렬","Text alignment":"텍스트 정렬","Text alignment toolbar":"텍스트 정렬 툴바"},getPluralForm(i){return 0}}},moe="GPL";function goe(i){const t=i.setContent,e=H.useRef(null),n=H.useRef(null),[s,o]=H.useState(!1);H.useEffect(()=>(o(!0),()=>o(!1)),[]);const{editorConfig:r}=H.useMemo(()=>s?{editorConfig:{toolbar:{items:["undo","redo","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","|","emoji","link","insertImage","mediaEmbed","insertTable","|","alignment","|","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[VY,eJ,RQ,tJ,Aj,sJ,NX,$X,_Q,pQ,nQ,hQ,FQ,GQ,zQ,dee,rO,Cee,Vee,b1,Nee,oO,Bee,Uee,aJ,vte,Ate,zte,cne,hv,Qne,gse,hoe,Dse,zse,soe,pse,$Y,uJ],fontFamily:{supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},initialData:"",language:"ko",licenseKey:moe,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},mention:{feeds:[{marker:"@",feed:[]}]},placeholder:"",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]},translations:[foe]}}:{},[s]);return A.jsx("div",{className:"main-container",children:A.jsx("div",{className:"editor-container editor-container_classic-editor",ref:e,children:A.jsx("div",{className:"editor-container__editor",children:A.jsx("div",{ref:n,children:r&&A.jsx(LM,{editor:fX,config:r,onChange:(a,l)=>{t(l.getData())}})})})})})}function poe(){const[i,t]=H.useState(""),[e,n]=H.useState(""),s=async()=>{console.log(e),console.log(i),await Nt.post("http://localhost:8080/writeDo",{title:i,content:e})};return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/Guide"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full mb-4",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"유기동물 보호정보"}),A.jsxs("div",{children:[A.jsx("div",{children:A.jsx("input",{onChange:o=>t(o.target.value),type:"text",className:"w-full my-4 border border-gray-500 py-4"})}),A.jsx("div",{children:A.jsx(goe,{setContent:n})})]}),A.jsx("div",{className:"mt-4 text-end",children:A.jsx("button",{onClick:s,className:"px-4 py-2 border bg-gray-700 text-white cursor-pointer rounded-sm",children:"등록"})}),A.jsx("div",{dangerouslySetInnerHTML:{__html:e}})]})]})}var rt;(function(i){i.assertEqual=s=>s;function t(s){}i.assertIs=t;function e(s){throw new Error}i.assertNever=e,i.arrayToEnum=s=>{const o={};for(const r of s)o[r]=r;return o},i.getValidEnumValues=s=>{const o=i.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),r={};for(const a of o)r[a]=s[a];return i.objectValues(r)},i.objectValues=s=>i.objectKeys(s).map(function(o){return s[o]}),i.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&o.push(r);return o},i.find=(s,o)=>{for(const r of s)if(o(r))return r},i.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,o=" | "){return s.map(r=>typeof r=="string"?`'${r}'`:r).join(o)}i.joinValues=n,i.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(rt||(rt={}));var Rv;(function(i){i.mergeShapes=(t,e)=>({...t,...e})})(Rv||(Rv={}));const _e=rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xo=i=>{switch(typeof i){case"undefined":return _e.undefined;case"string":return _e.string;case"number":return isNaN(i)?_e.nan:_e.number;case"boolean":return _e.boolean;case"function":return _e.function;case"bigint":return _e.bigint;case"symbol":return _e.symbol;case"object":return Array.isArray(i)?_e.array:i===null?_e.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?_e.promise:typeof Map<"u"&&i instanceof Map?_e.map:typeof Set<"u"&&i instanceof Set?_e.set:typeof Date<"u"&&i instanceof Date?_e.date:_e.object;default:return _e.unknown}},ue=rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),boe=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class Oi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(o){return o.message},n={_errors:[]},s=o=>{for(const r of o.issues)if(r.code==="invalid_union")r.unionErrors.map(s);else if(r.code==="invalid_return_type")s(r.returnTypeError);else if(r.code==="invalid_arguments")s(r.argumentsError);else if(r.path.length===0)n._errors.push(e(r));else{let a=n,l=0;for(;l<r.path.length;){const u=r.path[l];l===r.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(e(r))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(this),n}static assert(t){if(!(t instanceof Oi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},n=[];for(const s of this.issues)s.path.length>0?(e[s.path[0]]=e[s.path[0]]||[],e[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}Oi.create=i=>new Oi(i);const Sc=(i,t)=>{let e;switch(i.code){case ue.invalid_type:i.received===_e.undefined?e="Required":e=`Expected ${i.expected}, received ${i.received}`;break;case ue.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(i.expected,rt.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:e=`Unrecognized key(s) in object: ${rt.joinValues(i.keys,", ")}`;break;case ue.invalid_union:e="Invalid input";break;case ue.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${rt.joinValues(i.options)}`;break;case ue.invalid_enum_value:e=`Invalid enum value. Expected ${rt.joinValues(i.options)}, received '${i.received}'`;break;case ue.invalid_arguments:e="Invalid function arguments";break;case ue.invalid_return_type:e="Invalid function return type";break;case ue.invalid_date:e="Invalid date";break;case ue.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(e=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?e=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?e=`Invalid input: must end with "${i.validation.endsWith}"`:rt.assertNever(i.validation):i.validation!=="regex"?e=`Invalid ${i.validation}`:e="Invalid";break;case ue.too_small:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:e="Invalid input";break;case ue.too_big:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?e=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:e="Invalid input";break;case ue.custom:e="Invalid input";break;case ue.invalid_intersection_types:e="Intersection results could not be merged";break;case ue.not_multiple_of:e=`Number must be a multiple of ${i.multipleOf}`;break;case ue.not_finite:e="Number must be finite";break;default:e=t.defaultError,rt.assertNever(i)}return{message:e}};let XO=Sc;function woe(i){XO=i}function $g(){return XO}const jg=i=>{const{data:t,path:e,errorMaps:n,issueData:s}=i,o=[...e,...s.path||[]],r={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let a="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)a=u(r,{data:t,defaultError:a}).message;return{...s,path:o,message:a}},yoe=[];function ye(i,t){const e=$g(),n=jg({issueData:t,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,e,e===Sc?void 0:Sc].filter(s=>!!s)});i.common.issues.push(n)}class Zn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const s of e){if(s.status==="aborted")return Be;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const s of e){const o=await s.key,r=await s.value;n.push({key:o,value:r})}return Zn.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const s of e){const{key:o,value:r}=s;if(o.status==="aborted"||r.status==="aborted")return Be;o.status==="dirty"&&t.dirty(),r.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof r.value<"u"||s.alwaysSet)&&(n[o.value]=r.value)}return{status:t.value,value:n}}}const Be=Object.freeze({status:"aborted"}),uc=i=>({status:"dirty",value:i}),oi=i=>({status:"valid",value:i}),Iv=i=>i.status==="aborted",Pv=i=>i.status==="dirty",Ba=i=>i.status==="valid",uh=i=>typeof Promise<"u"&&i instanceof Promise;function Kg(i,t,e,n){if(typeof t=="function"?i!==t||!0:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(i)}function QO(i,t,e,n,s){if(typeof t=="function"?i!==t||!0:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(i,e),e}var Ee;(function(i){i.errToObj=t=>typeof t=="string"?{message:t}:t||{},i.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ee||(Ee={}));var gd,pd;class Gs{constructor(t,e,n,s){this._cachedPath=[],this.parent=t,this.data=e,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const DR=(i,t)=>{if(Ba(t))return{success:!0,data:t.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new Oi(i.common.issues);return this._error=e,this._error}}};function qe(i){if(!i)return{};const{errorMap:t,invalid_type_error:e,required_error:n,description:s}=i;if(t&&(e||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(r,a)=>{var l,u;const{message:h}=i;return r.code==="invalid_enum_value"?{message:h??a.defaultError}:typeof a.data>"u"?{message:(l=h??n)!==null&&l!==void 0?l:a.defaultError}:r.code!=="invalid_type"?{message:a.defaultError}:{message:(u=h??e)!==null&&u!==void 0?u:a.defaultError}},description:s}}class Ye{get description(){return this._def.description}_getType(t){return xo(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:xo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Zn,ctx:{common:t.parent.common,data:t.data,parsedType:xo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(uh(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){var n;const s={common:{issues:[],async:(n=e==null?void 0:e.async)!==null&&n!==void 0?n:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xo(t)},o=this._parseSync({data:t,path:s.path,parent:s});return DR(s,o)}"~validate"(t){var e,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xo(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:s});return Ba(o)?{value:o.value}:{issues:s.common.issues}}catch(o){!((n=(e=o==null?void 0:o.message)===null||e===void 0?void 0:e.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(o=>Ba(o)?{value:o.value}:{issues:s.common.issues})}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xo(t)},s=this._parse({data:t,path:n.path,parent:n}),o=await(uh(s)?s:Promise.resolve(s));return DR(n,o)}refine(t,e){const n=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,o)=>{const r=t(s),a=()=>o.addIssue({code:ue.custom,...n(s)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(a(),!1)):r?!0:(a(),!1)})}refinement(t,e){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof e=="function"?e(n,s):e),!1))}_refinement(t){return new ks({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return qs.create(this,this._def)}nullable(){return Lr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _s.create(this)}promise(){return Rc.create(this,this._def)}or(t){return mh.create([this,t],this._def)}and(t){return gh.create(this,t,this._def)}transform(t){return new ks({...qe(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new _h({...qe(this._def),innerType:this,defaultValue:e,typeName:De.ZodDefault})}brand(){return new E1({typeName:De.ZodBranded,type:this,...qe(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new vh({...qe(this._def),innerType:this,catchValue:e,typeName:De.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return Dh.create(this,t)}readonly(){return Ch.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _oe=/^c[^\s-]{8,}$/i,voe=/^[0-9a-z]+$/,Coe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Toe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xoe=/^[a-z0-9_-]{21}$/i,koe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Eoe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Soe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Aoe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let m_;const Roe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ioe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Poe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Moe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Voe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Noe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ooe=new RegExp(`^${eD}$`);function tD(i){let t="[0-5]\\d";i.precision?t=`${t}\\.\\d{${i.precision}}`:i.precision==null&&(t=`${t}(\\.\\d+)?`);const e=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e}`}function Doe(i){return new RegExp(`^${tD(i)}$`)}function nD(i){let t=`${eD}T${tD(i)}`;const e=[];return e.push(i.local?"Z?":"Z"),i.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function Loe(i,t){return!!((t==="v4"||!t)&&Roe.test(i)||(t==="v6"||!t)&&Poe.test(i))}function Boe(i,t){if(!koe.test(i))return!1;try{const[e]=i.split("."),n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function Foe(i,t){return!!((t==="v4"||!t)&&Ioe.test(i)||(t==="v6"||!t)&&Moe.test(i))}class ws extends Ye{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==_e.string){const o=this._getOrReturnCtx(t);return ye(o,{code:ue.invalid_type,expected:_e.string,received:o.parsedType}),Be}const n=new Zn;let s;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")t.data.length>o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){const r=t.data.length>o.value,a=t.data.length<o.value;(r||a)&&(s=this._getOrReturnCtx(t,s),r?ye(s,{code:ue.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&ye(s,{code:ue.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Soe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"email",code:ue.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")m_||(m_=new RegExp(Aoe,"u")),m_.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"emoji",code:ue.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Toe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"uuid",code:ue.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")xoe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"nanoid",code:ue.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")_oe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"cuid",code:ue.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")voe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"cuid2",code:ue.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Coe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"ulid",code:ue.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),ye(s,{validation:"url",code:ue.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"regex",code:ue.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?nD(o).test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Ooe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Doe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?Eoe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"duration",code:ue.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Loe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"ip",code:ue.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?Boe(t.data,o.alg)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"jwt",code:ue.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?Foe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"cidr",code:ue.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Voe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"base64",code:ue.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?Noe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"base64url",code:ue.invalid_string,message:o.message}),n.dirty()):rt.assertNever(o);return{status:n.value,value:t.data}}_regex(t,e,n){return this.refinement(s=>t.test(s),{validation:e,code:ue.invalid_string,...Ee.errToObj(n)})}_addCheck(t){return new ws({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ee.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ee.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ee.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ee.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ee.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ee.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ee.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ee.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ee.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ee.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ee.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ee.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ee.errToObj(t)})}datetime(t){var e,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(e=t==null?void 0:t.offset)!==null&&e!==void 0?e:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Ee.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ee.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ee.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...Ee.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...Ee.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...Ee.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...Ee.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...Ee.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...Ee.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...Ee.errToObj(e)})}nonempty(t){return this.min(1,Ee.errToObj(t))}trim(){return new ws({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ws({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ws({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}ws.create=i=>{var t;return new ws({checks:[],typeName:De.ZodString,coerce:(t=i==null?void 0:i.coerce)!==null&&t!==void 0?t:!1,...qe(i)})};function Uoe(i,t){const e=(i.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=e>n?e:n,o=parseInt(i.toFixed(s).replace(".","")),r=parseInt(t.toFixed(s).replace(".",""));return o%r/Math.pow(10,s)}class Nr extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==_e.number){const o=this._getOrReturnCtx(t);return ye(o,{code:ue.invalid_type,expected:_e.number,received:o.parsedType}),Be}let n;const s=new Zn;for(const o of this._def.checks)o.kind==="int"?rt.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?Uoe(t.data,o.value)!==0&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.not_finite,message:o.message}),s.dirty()):rt.assertNever(o);return{status:s.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,Ee.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Ee.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Ee.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Ee.toString(e))}setLimit(t,e,n,s){return new Nr({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:Ee.toString(s)}]})}_addCheck(t){return new Nr({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ee.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:Ee.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&rt.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(e===null||n.value>e)&&(e=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}Nr.create=i=>new Nr({checks:[],typeName:De.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...qe(i)});class Or extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==_e.bigint)return this._getInvalidInput(t);let n;const s=new Zn;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ue.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):rt.assertNever(o);return{status:s.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return ye(e,{code:ue.invalid_type,expected:_e.bigint,received:e.parsedType}),Be}gte(t,e){return this.setLimit("min",t,!0,Ee.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Ee.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Ee.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Ee.toString(e))}setLimit(t,e,n,s){return new Or({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:Ee.toString(s)}]})}_addCheck(t){return new Or({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Or.create=i=>{var t;return new Or({checks:[],typeName:De.ZodBigInt,coerce:(t=i==null?void 0:i.coerce)!==null&&t!==void 0?t:!1,...qe(i)})};class dh extends Ye{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==_e.boolean){const n=this._getOrReturnCtx(t);return ye(n,{code:ue.invalid_type,expected:_e.boolean,received:n.parsedType}),Be}return oi(t.data)}}dh.create=i=>new dh({typeName:De.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...qe(i)});class Fa extends Ye{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==_e.date){const o=this._getOrReturnCtx(t);return ye(o,{code:ue.invalid_type,expected:_e.date,received:o.parsedType}),Be}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return ye(o,{code:ue.invalid_date}),Be}const n=new Zn;let s;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ue.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):rt.assertNever(o);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Fa({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:Ee.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:Ee.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}Fa.create=i=>new Fa({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:De.ZodDate,...qe(i)});class Zg extends Ye{_parse(t){if(this._getType(t)!==_e.symbol){const n=this._getOrReturnCtx(t);return ye(n,{code:ue.invalid_type,expected:_e.symbol,received:n.parsedType}),Be}return oi(t.data)}}Zg.create=i=>new Zg({typeName:De.ZodSymbol,...qe(i)});class hh extends Ye{_parse(t){if(this._getType(t)!==_e.undefined){const n=this._getOrReturnCtx(t);return ye(n,{code:ue.invalid_type,expected:_e.undefined,received:n.parsedType}),Be}return oi(t.data)}}hh.create=i=>new hh({typeName:De.ZodUndefined,...qe(i)});class fh extends Ye{_parse(t){if(this._getType(t)!==_e.null){const n=this._getOrReturnCtx(t);return ye(n,{code:ue.invalid_type,expected:_e.null,received:n.parsedType}),Be}return oi(t.data)}}fh.create=i=>new fh({typeName:De.ZodNull,...qe(i)});class Ac extends Ye{constructor(){super(...arguments),this._any=!0}_parse(t){return oi(t.data)}}Ac.create=i=>new Ac({typeName:De.ZodAny,...qe(i)});class Pa extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(t){return oi(t.data)}}Pa.create=i=>new Pa({typeName:De.ZodUnknown,...qe(i)});class Oo extends Ye{_parse(t){const e=this._getOrReturnCtx(t);return ye(e,{code:ue.invalid_type,expected:_e.never,received:e.parsedType}),Be}}Oo.create=i=>new Oo({typeName:De.ZodNever,...qe(i)});class Yg extends Ye{_parse(t){if(this._getType(t)!==_e.undefined){const n=this._getOrReturnCtx(t);return ye(n,{code:ue.invalid_type,expected:_e.void,received:n.parsedType}),Be}return oi(t.data)}}Yg.create=i=>new Yg({typeName:De.ZodVoid,...qe(i)});class _s extends Ye{_parse(t){const{ctx:e,status:n}=this._processInputParams(t),s=this._def;if(e.parsedType!==_e.array)return ye(e,{code:ue.invalid_type,expected:_e.array,received:e.parsedType}),Be;if(s.exactLength!==null){const r=e.data.length>s.exactLength.value,a=e.data.length<s.exactLength.value;(r||a)&&(ye(e,{code:r?ue.too_big:ue.too_small,minimum:a?s.exactLength.value:void 0,maximum:r?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&e.data.length<s.minLength.value&&(ye(e,{code:ue.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&e.data.length>s.maxLength.value&&(ye(e,{code:ue.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map((r,a)=>s.type._parseAsync(new Gs(e,r,e.path,a)))).then(r=>Zn.mergeArray(n,r));const o=[...e.data].map((r,a)=>s.type._parseSync(new Gs(e,r,e.path,a)));return Zn.mergeArray(n,o)}get element(){return this._def.type}min(t,e){return new _s({...this._def,minLength:{value:t,message:Ee.toString(e)}})}max(t,e){return new _s({...this._def,maxLength:{value:t,message:Ee.toString(e)}})}length(t,e){return new _s({...this._def,exactLength:{value:t,message:Ee.toString(e)}})}nonempty(t){return this.min(1,t)}}_s.create=(i,t)=>new _s({type:i,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...qe(t)});function rc(i){if(i instanceof qt){const t={};for(const e in i.shape){const n=i.shape[e];t[e]=qs.create(rc(n))}return new qt({...i._def,shape:()=>t})}else return i instanceof _s?new _s({...i._def,type:rc(i.element)}):i instanceof qs?qs.create(rc(i.unwrap())):i instanceof Lr?Lr.create(rc(i.unwrap())):i instanceof $s?$s.create(i.items.map(t=>rc(t))):i}class qt extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=rt.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==_e.object){const u=this._getOrReturnCtx(t);return ye(u,{code:ue.invalid_type,expected:_e.object,received:u.parsedType}),Be}const{status:n,ctx:s}=this._processInputParams(t),{shape:o,keys:r}=this._getCached(),a=[];if(!(this._def.catchall instanceof Oo&&this._def.unknownKeys==="strip"))for(const u in s.data)r.includes(u)||a.push(u);const l=[];for(const u of r){const h=o[u],m=s.data[u];l.push({key:{status:"valid",value:u},value:h._parse(new Gs(s,m,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Oo){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")a.length>0&&(ye(s,{code:ue.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const m=s.data[h];l.push({key:{status:"valid",value:h},value:u._parse(new Gs(s,m,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of l){const m=await h.key,p=await h.value;u.push({key:m,value:p,alwaysSet:h.alwaysSet})}return u}).then(u=>Zn.mergeObjectSync(n,u)):Zn.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Ee.errToObj,new qt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,n)=>{var s,o,r,a;const l=(r=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,e,n).message)!==null&&r!==void 0?r:n.defaultError;return e.code==="unrecognized_keys"?{message:(a=Ee.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new qt({...this._def,unknownKeys:"strip"})}passthrough(){return new qt({...this._def,unknownKeys:"passthrough"})}extend(t){return new qt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new qt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:De.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new qt({...this._def,catchall:t})}pick(t){const e={};return rt.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(e[n]=this.shape[n])}),new qt({...this._def,shape:()=>e})}omit(t){const e={};return rt.objectKeys(this.shape).forEach(n=>{t[n]||(e[n]=this.shape[n])}),new qt({...this._def,shape:()=>e})}deepPartial(){return rc(this)}partial(t){const e={};return rt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];t&&!t[n]?e[n]=s:e[n]=s.optional()}),new qt({...this._def,shape:()=>e})}required(t){const e={};return rt.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])e[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof qs;)o=o._def.innerType;e[n]=o}}),new qt({...this._def,shape:()=>e})}keyof(){return iD(rt.objectKeys(this.shape))}}qt.create=(i,t)=>new qt({shape:()=>i,unknownKeys:"strip",catchall:Oo.create(),typeName:De.ZodObject,...qe(t)});qt.strictCreate=(i,t)=>new qt({shape:()=>i,unknownKeys:"strict",catchall:Oo.create(),typeName:De.ZodObject,...qe(t)});qt.lazycreate=(i,t)=>new qt({shape:i,unknownKeys:"strip",catchall:Oo.create(),typeName:De.ZodObject,...qe(t)});class mh extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t),n=this._def.options;function s(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return e.common.issues.push(...a.ctx.common.issues),a.result;const r=o.map(a=>new Oi(a.ctx.common.issues));return ye(e,{code:ue.invalid_union,unionErrors:r}),Be}if(e.common.async)return Promise.all(n.map(async o=>{const r={...e,common:{...e.common,issues:[]},parent:null};return{result:await o._parseAsync({data:e.data,path:e.path,parent:r}),ctx:r}})).then(s);{let o;const r=[];for(const l of n){const u={...e,common:{...e.common,issues:[]},parent:null},h=l._parseSync({data:e.data,path:e.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!o&&(o={result:h,ctx:u}),u.common.issues.length&&r.push(u.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;const a=r.map(l=>new Oi(l));return ye(e,{code:ue.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}mh.create=(i,t)=>new mh({options:i,typeName:De.ZodUnion,...qe(t)});const _o=i=>i instanceof bh?_o(i.schema):i instanceof ks?_o(i.innerType()):i instanceof wh?[i.value]:i instanceof Dr?i.options:i instanceof yh?rt.objectValues(i.enum):i instanceof _h?_o(i._def.innerType):i instanceof hh?[void 0]:i instanceof fh?[null]:i instanceof qs?[void 0,..._o(i.unwrap())]:i instanceof Lr?[null,..._o(i.unwrap())]:i instanceof E1||i instanceof Ch?_o(i.unwrap()):i instanceof vh?_o(i._def.innerType):[];class Up extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==_e.object)return ye(e,{code:ue.invalid_type,expected:_e.object,received:e.parsedType}),Be;const n=this.discriminator,s=e.data[n],o=this.optionsMap.get(s);return o?e.common.async?o._parseAsync({data:e.data,path:e.path,parent:e}):o._parseSync({data:e.data,path:e.path,parent:e}):(ye(e,{code:ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,n){const s=new Map;for(const o of e){const r=_o(o.shape[t]);if(!r.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of r){if(s.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);s.set(a,o)}}return new Up({typeName:De.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:s,...qe(n)})}}function Mv(i,t){const e=xo(i),n=xo(t);if(i===t)return{valid:!0,data:i};if(e===_e.object&&n===_e.object){const s=rt.objectKeys(t),o=rt.objectKeys(i).filter(a=>s.indexOf(a)!==-1),r={...i,...t};for(const a of o){const l=Mv(i[a],t[a]);if(!l.valid)return{valid:!1};r[a]=l.data}return{valid:!0,data:r}}else if(e===_e.array&&n===_e.array){if(i.length!==t.length)return{valid:!1};const s=[];for(let o=0;o<i.length;o++){const r=i[o],a=t[o],l=Mv(r,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return e===_e.date&&n===_e.date&&+i==+t?{valid:!0,data:i}:{valid:!1}}class gh extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t),s=(o,r)=>{if(Iv(o)||Iv(r))return Be;const a=Mv(o.value,r.value);return a.valid?((Pv(o)||Pv(r))&&e.dirty(),{status:e.value,value:a.data}):(ye(n,{code:ue.invalid_intersection_types}),Be)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,r])=>s(o,r)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}gh.create=(i,t,e)=>new gh({left:i,right:t,typeName:De.ZodIntersection,...qe(e)});class $s extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==_e.array)return ye(n,{code:ue.invalid_type,expected:_e.array,received:n.parsedType}),Be;if(n.data.length<this._def.items.length)return ye(n,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&n.data.length>this._def.items.length&&(ye(n,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const o=[...n.data].map((r,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Gs(n,r,n.path,a)):null}).filter(r=>!!r);return n.common.async?Promise.all(o).then(r=>Zn.mergeArray(e,r)):Zn.mergeArray(e,o)}get items(){return this._def.items}rest(t){return new $s({...this._def,rest:t})}}$s.create=(i,t)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $s({items:i,typeName:De.ZodTuple,rest:null,...qe(t)})};class ph extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==_e.object)return ye(n,{code:ue.invalid_type,expected:_e.object,received:n.parsedType}),Be;const s=[],o=this._def.keyType,r=this._def.valueType;for(const a in n.data)s.push({key:o._parse(new Gs(n,a,n.path,a)),value:r._parse(new Gs(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Zn.mergeObjectAsync(e,s):Zn.mergeObjectSync(e,s)}get element(){return this._def.valueType}static create(t,e,n){return e instanceof Ye?new ph({keyType:t,valueType:e,typeName:De.ZodRecord,...qe(n)}):new ph({keyType:ws.create(),valueType:t,typeName:De.ZodRecord,...qe(e)})}}class Jg extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==_e.map)return ye(n,{code:ue.invalid_type,expected:_e.map,received:n.parsedType}),Be;const s=this._def.keyType,o=this._def.valueType,r=[...n.data.entries()].map(([a,l],u)=>({key:s._parse(new Gs(n,a,n.path,[u,"key"])),value:o._parse(new Gs(n,l,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of r){const u=await l.key,h=await l.value;if(u.status==="aborted"||h.status==="aborted")return Be;(u.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(u.value,h.value)}return{status:e.value,value:a}})}else{const a=new Map;for(const l of r){const u=l.key,h=l.value;if(u.status==="aborted"||h.status==="aborted")return Be;(u.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(u.value,h.value)}return{status:e.value,value:a}}}}Jg.create=(i,t,e)=>new Jg({valueType:t,keyType:i,typeName:De.ZodMap,...qe(e)});class Ua extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==_e.set)return ye(n,{code:ue.invalid_type,expected:_e.set,received:n.parsedType}),Be;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ye(n,{code:ue.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),e.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ye(n,{code:ue.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),e.dirty());const o=this._def.valueType;function r(l){const u=new Set;for(const h of l){if(h.status==="aborted")return Be;h.status==="dirty"&&e.dirty(),u.add(h.value)}return{status:e.value,value:u}}const a=[...n.data.values()].map((l,u)=>o._parse(new Gs(n,l,n.path,u)));return n.common.async?Promise.all(a).then(l=>r(l)):r(a)}min(t,e){return new Ua({...this._def,minSize:{value:t,message:Ee.toString(e)}})}max(t,e){return new Ua({...this._def,maxSize:{value:t,message:Ee.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}Ua.create=(i,t)=>new Ua({valueType:i,minSize:null,maxSize:null,typeName:De.ZodSet,...qe(t)});class wc extends Ye{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==_e.function)return ye(e,{code:ue.invalid_type,expected:_e.function,received:e.parsedType}),Be;function n(a,l){return jg({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,$g(),Sc].filter(u=>!!u),issueData:{code:ue.invalid_arguments,argumentsError:l}})}function s(a,l){return jg({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,$g(),Sc].filter(u=>!!u),issueData:{code:ue.invalid_return_type,returnTypeError:l}})}const o={errorMap:e.common.contextualErrorMap},r=e.data;if(this._def.returns instanceof Rc){const a=this;return oi(async function(...l){const u=new Oi([]),h=await a._def.args.parseAsync(l,o).catch(v=>{throw u.addIssue(n(l,v)),u}),m=await Reflect.apply(r,this,h);return await a._def.returns._def.type.parseAsync(m,o).catch(v=>{throw u.addIssue(s(m,v)),u})})}else{const a=this;return oi(function(...l){const u=a._def.args.safeParse(l,o);if(!u.success)throw new Oi([n(l,u.error)]);const h=Reflect.apply(r,this,u.data),m=a._def.returns.safeParse(h,o);if(!m.success)throw new Oi([s(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new wc({...this._def,args:$s.create(t).rest(Pa.create())})}returns(t){return new wc({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,n){return new wc({args:t||$s.create([]).rest(Pa.create()),returns:e||Pa.create(),typeName:De.ZodFunction,...qe(n)})}}class bh extends Ye{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}bh.create=(i,t)=>new bh({getter:i,typeName:De.ZodLazy,...qe(t)});class wh extends Ye{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return ye(e,{received:e.data,code:ue.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:t.data}}get value(){return this._def.value}}wh.create=(i,t)=>new wh({value:i,typeName:De.ZodLiteral,...qe(t)});function iD(i,t){return new Dr({values:i,typeName:De.ZodEnum,...qe(t)})}class Dr extends Ye{constructor(){super(...arguments),gd.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),n=this._def.values;return ye(e,{expected:rt.joinValues(n),received:e.parsedType,code:ue.invalid_type}),Be}if(Kg(this,gd)||QO(this,gd,new Set(this._def.values)),!Kg(this,gd).has(t.data)){const e=this._getOrReturnCtx(t),n=this._def.values;return ye(e,{received:e.data,code:ue.invalid_enum_value,options:n}),Be}return oi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return Dr.create(t,{...this._def,...e})}exclude(t,e=this._def){return Dr.create(this.options.filter(n=>!t.includes(n)),{...this._def,...e})}}gd=new WeakMap;Dr.create=iD;class yh extends Ye{constructor(){super(...arguments),pd.set(this,void 0)}_parse(t){const e=rt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==_e.string&&n.parsedType!==_e.number){const s=rt.objectValues(e);return ye(n,{expected:rt.joinValues(s),received:n.parsedType,code:ue.invalid_type}),Be}if(Kg(this,pd)||QO(this,pd,new Set(rt.getValidEnumValues(this._def.values))),!Kg(this,pd).has(t.data)){const s=rt.objectValues(e);return ye(n,{received:n.data,code:ue.invalid_enum_value,options:s}),Be}return oi(t.data)}get enum(){return this._def.values}}pd=new WeakMap;yh.create=(i,t)=>new yh({values:i,typeName:De.ZodNativeEnum,...qe(t)});class Rc extends Ye{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==_e.promise&&e.common.async===!1)return ye(e,{code:ue.invalid_type,expected:_e.promise,received:e.parsedType}),Be;const n=e.parsedType===_e.promise?e.data:Promise.resolve(e.data);return oi(n.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}}Rc.create=(i,t)=>new Rc({type:i,typeName:De.ZodPromise,...qe(t)});class ks extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:n}=this._processInputParams(t),s=this._def.effect||null,o={addIssue:r=>{ye(n,r),r.fatal?e.abort():e.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const r=s.transform(n.data,o);if(n.common.async)return Promise.resolve(r).then(async a=>{if(e.value==="aborted")return Be;const l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?Be:l.status==="dirty"||e.value==="dirty"?uc(l.value):l});{if(e.value==="aborted")return Be;const a=this._def.schema._parseSync({data:r,path:n.path,parent:n});return a.status==="aborted"?Be:a.status==="dirty"||e.value==="dirty"?uc(a.value):a}}if(s.type==="refinement"){const r=a=>{const l=s.refinement(a,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Be:(a.status==="dirty"&&e.dirty(),r(a.value),{status:e.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&e.dirty(),r(a.value).then(()=>({status:e.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ba(r))return r;const a=s.transform(r.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(r=>Ba(r)?Promise.resolve(s.transform(r.value,o)).then(a=>({status:e.value,value:a})):r);rt.assertNever(s)}}ks.create=(i,t,e)=>new ks({schema:i,typeName:De.ZodEffects,effect:t,...qe(e)});ks.createWithPreprocess=(i,t,e)=>new ks({schema:t,effect:{type:"preprocess",transform:i},typeName:De.ZodEffects,...qe(e)});class qs extends Ye{_parse(t){return this._getType(t)===_e.undefined?oi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}qs.create=(i,t)=>new qs({innerType:i,typeName:De.ZodOptional,...qe(t)});class Lr extends Ye{_parse(t){return this._getType(t)===_e.null?oi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Lr.create=(i,t)=>new Lr({innerType:i,typeName:De.ZodNullable,...qe(t)});class _h extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t);let n=e.data;return e.parsedType===_e.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}_h.create=(i,t)=>new _h({innerType:i,typeName:De.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...qe(t)});class vh extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t),n={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return uh(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Oi(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Oi(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}vh.create=(i,t)=>new vh({innerType:i,typeName:De.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...qe(t)});class Xg extends Ye{_parse(t){if(this._getType(t)!==_e.nan){const n=this._getOrReturnCtx(t);return ye(n,{code:ue.invalid_type,expected:_e.nan,received:n.parsedType}),Be}return{status:"valid",value:t.data}}}Xg.create=i=>new Xg({typeName:De.ZodNaN,...qe(i)});const zoe=Symbol("zod_brand");class E1 extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}}class Dh extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Be:o.status==="dirty"?(e.dirty(),uc(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Be:s.status==="dirty"?(e.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,e){return new Dh({in:t,out:e,typeName:De.ZodPipeline})}}class Ch extends Ye{_parse(t){const e=this._def.innerType._parse(t),n=s=>(Ba(s)&&(s.value=Object.freeze(s.value)),s);return uh(e)?e.then(s=>n(s)):n(e)}unwrap(){return this._def.innerType}}Ch.create=(i,t)=>new Ch({innerType:i,typeName:De.ZodReadonly,...qe(t)});function LR(i,t){const e=typeof i=="function"?i(t):typeof i=="string"?{message:i}:i;return typeof e=="string"?{message:e}:e}function sD(i,t={},e){return i?Ac.create().superRefine((n,s)=>{var o,r;const a=i(n);if(a instanceof Promise)return a.then(l=>{var u,h;if(!l){const m=LR(t,n),p=(h=(u=m.fatal)!==null&&u!==void 0?u:e)!==null&&h!==void 0?h:!0;s.addIssue({code:"custom",...m,fatal:p})}});if(!a){const l=LR(t,n),u=(r=(o=l.fatal)!==null&&o!==void 0?o:e)!==null&&r!==void 0?r:!0;s.addIssue({code:"custom",...l,fatal:u})}}):Ac.create()}const Hoe={object:qt.lazycreate};var De;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(De||(De={}));const Woe=(i,t={message:`Input not instance of ${i.name}`})=>sD(e=>e instanceof i,t),oD=ws.create,rD=Nr.create,qoe=Xg.create,Goe=Or.create,aD=dh.create,$oe=Fa.create,joe=Zg.create,Koe=hh.create,Zoe=fh.create,Yoe=Ac.create,Joe=Pa.create,Xoe=Oo.create,Qoe=Yg.create,ere=_s.create,tre=qt.create,nre=qt.strictCreate,ire=mh.create,sre=Up.create,ore=gh.create,rre=$s.create,are=ph.create,lre=Jg.create,cre=Ua.create,ure=wc.create,dre=bh.create,hre=wh.create,fre=Dr.create,mre=yh.create,gre=Rc.create,BR=ks.create,pre=qs.create,bre=Lr.create,wre=ks.createWithPreprocess,yre=Dh.create,_re=()=>oD().optional(),vre=()=>rD().optional(),Cre=()=>aD().optional(),Tre={string:i=>ws.create({...i,coerce:!0}),number:i=>Nr.create({...i,coerce:!0}),boolean:i=>dh.create({...i,coerce:!0}),bigint:i=>Or.create({...i,coerce:!0}),date:i=>Fa.create({...i,coerce:!0})},xre=Be;var At=Object.freeze({__proto__:null,defaultErrorMap:Sc,setErrorMap:woe,getErrorMap:$g,makeIssue:jg,EMPTY_PATH:yoe,addIssueToContext:ye,ParseStatus:Zn,INVALID:Be,DIRTY:uc,OK:oi,isAborted:Iv,isDirty:Pv,isValid:Ba,isAsync:uh,get util(){return rt},get objectUtil(){return Rv},ZodParsedType:_e,getParsedType:xo,ZodType:Ye,datetimeRegex:nD,ZodString:ws,ZodNumber:Nr,ZodBigInt:Or,ZodBoolean:dh,ZodDate:Fa,ZodSymbol:Zg,ZodUndefined:hh,ZodNull:fh,ZodAny:Ac,ZodUnknown:Pa,ZodNever:Oo,ZodVoid:Yg,ZodArray:_s,ZodObject:qt,ZodUnion:mh,ZodDiscriminatedUnion:Up,ZodIntersection:gh,ZodTuple:$s,ZodRecord:ph,ZodMap:Jg,ZodSet:Ua,ZodFunction:wc,ZodLazy:bh,ZodLiteral:wh,ZodEnum:Dr,ZodNativeEnum:yh,ZodPromise:Rc,ZodEffects:ks,ZodTransformer:ks,ZodOptional:qs,ZodNullable:Lr,ZodDefault:_h,ZodCatch:vh,ZodNaN:Xg,BRAND:zoe,ZodBranded:E1,ZodPipeline:Dh,ZodReadonly:Ch,custom:sD,Schema:Ye,ZodSchema:Ye,late:Hoe,get ZodFirstPartyTypeKind(){return De},coerce:Tre,any:Yoe,array:ere,bigint:Goe,boolean:aD,date:$oe,discriminatedUnion:sre,effect:BR,enum:fre,function:ure,instanceof:Woe,intersection:ore,lazy:dre,literal:hre,map:lre,nan:qoe,nativeEnum:mre,never:Xoe,null:Zoe,nullable:bre,number:rD,object:tre,oboolean:Cre,onumber:vre,optional:pre,ostring:_re,pipeline:yre,preprocess:wre,promise:gre,record:are,set:cre,strictObject:nre,string:oD,symbol:joe,transformer:BR,tuple:rre,undefined:Koe,union:ire,unknown:Joe,void:Qoe,NEVER:xre,ZodIssueCode:ue,quotelessJson:boe,ZodError:Oi});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kre,Ere;function Sre(){return{geminiUrl:kre,vertexUrl:Ere}}function Are(i,t,e){var n,s,o;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const r=Sre();return i.vertexai?(s=r.vertexUrl)!==null&&s!==void 0?s:t:(o=r.geminiUrl)!==null&&o!==void 0?o:e}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lh{}function Fe(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(n,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const o=t[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(i,t,e){for(let o=0;o<t.length-1;o++){const r=t[o];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in i))if(Array.isArray(e))i[a]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(i[a])){const l=i[a];if(Array.isArray(e))for(let u=0;u<l.length;u++){const h=l[u];y(h,t.slice(o+1),e[u])}else for(const u of l)y(u,t.slice(o+1),e)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in i||(i[a]=[{}]);const l=i[a];y(l[0],t.slice(o+1),e);return}(!i[r]||typeof i[r]!="object")&&(i[r]={}),i=i[r]}const n=t[t.length-1],s=i[n];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=e}function b(i,t){try{if(t.length===1&&t[0]==="_self")return i;for(let e=0;e<t.length;e++){if(typeof i!="object"||i===null)return;const n=t[e];if(n.endsWith("[]")){const s=n.slice(0,-2);if(s in i){const o=i[s];return Array.isArray(o)?o.map(r=>b(r,t.slice(e+1))):void 0}else return}else i=i[n]}return i}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var FR;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(FR||(FR={}));var UR;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(UR||(UR={}));var zR;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(zR||(zR={}));var HR;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(HR||(HR={}));var WR;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(WR||(WR={}));var Us;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT"})(Us||(Us={}));var qR;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(qR||(qR={}));var GR;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(GR||(GR={}));var $R;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY"})($R||($R={}));var jR;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(jR||(jR={}));var KR;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(KR||(KR={}));var ZR;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(ZR||(ZR={}));var YR;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(YR||(YR={}));var Qg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Qg||(Qg={}));var JR;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(JR||(JR={}));var Vv;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Vv||(Vv={}));var XR;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(XR||(XR={}));var QR;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(QR||(QR={}));var eI;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(eI||(eI={}));var tI;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(tI||(tI={}));var nI;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(nI||(nI={}));var iI;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(iI||(iI={}));var sI;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(sI||(sI={}));var oI;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(oI||(oI={}));var rI;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(rI||(rI={}));var aI;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(aI||(aI={}));var lI;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(lI||(lI={}));var cI;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cI||(cI={}));var uI;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uI||(uI={}));var dI;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(dI||(dI={}));var hI;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(hI||(hI={}));var fI;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(fI||(fI={}));var mI;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mI||(mI={}));var gI;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gI||(gI={}));var pI;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(pI||(pI={}));var bI;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(bI||(bI={}));var wI;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(wI||(wI={}));var yI;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yI||(yI={}));var _I;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY"})(_I||(_I={}));var dc;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(dc||(dc={}));class nd{get text(){var t,e,n,s,o,r,a,l;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const m=[];for(const p of(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,C]of Object.entries(p))v!=="text"&&v!=="thought"&&(C!==null||C!==void 0)&&m.push(v);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;h=!0,u+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var t,e,n,s,o,r,a,l;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const m of(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[p,v]of Object.entries(m))p!=="inlineData"&&(v!==null||v!==void 0)&&h.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,e,n,s,o,r,a,l;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,e,n,s,o,r,a,l,u;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,e,n,s,o,r,a,l,u;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class vI{}class CI{}class Rre{}class Ire{}class TI{}class xI{}class kI{}class Pre{}class EI{}class SI{}class AI{}class Mre{}class Nv{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Vre{}class Nre{}class Ore{get text(){var t,e,n;let s="",o=!1;const r=[];for(const a of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&r.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,s+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var t,e,n;let s="";const o=[];for(const r of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[a,l]of Object.entries(r))a!=="inlineData"&&l!==null&&o.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(s+=atob(r.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Dre{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ft(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function lD(i,t){const e=Ft(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function cD(i,t){return Array.isArray(t)?t.map(e=>ep(i,e)):[ep(i,t)]}function ep(i,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Lre(i,t){const e=ep(i,t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Bre(i,t){const e=ep(i,t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function RI(i,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function uD(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>RI(i,e)):[RI(i,t)]}function Ov(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function II(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function PI(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function yi(i,t){if(t==null)throw new Error("ContentUnion is required");return Ov(t)?t:{role:"user",parts:uD(i,t)}}function dD(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=yi(i,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const e=yi(i,t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>yi(i,e)):[yi(i,t)]}function vs(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(II(t)||PI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[yi(i,t)]}const e=[],n=[],s=Ov(t[0]);for(const o of t){const r=Ov(o);if(r!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(o);else{if(II(o)||PI(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return s||e.push({role:"user",parts:uD(i,n)}),e}const MI=At.enum(["string","number","integer","object","array","boolean","null"]),Fre=At.union([MI,At.array(MI)]);function Ure(i=!0){const t=At.lazy(()=>{const e=At.object({type:Fre.optional(),format:At.string().optional(),title:At.string().optional(),description:At.string().optional(),default:At.unknown().optional(),items:t.optional(),minItems:At.coerce.string().optional(),maxItems:At.coerce.string().optional(),enum:At.array(At.unknown()).optional(),properties:At.record(At.string(),t).optional(),required:At.array(At.string()).optional(),minProperties:At.coerce.string().optional(),maxProperties:At.coerce.string().optional(),propertyOrdering:At.array(At.string()).optional(),minimum:At.number().optional(),maximum:At.number().optional(),minLength:At.coerce.string().optional(),maxLength:At.coerce.string().optional(),pattern:At.string().optional(),anyOf:At.array(t).optional(),additionalProperties:At.boolean().optional()});return i?e.strict():e});return t}function zre(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(n=>n!=="null");if(e.length===1)t.type=Object.keys(Us).includes(e[0].toUpperCase())?Us[e[0].toUpperCase()]:Us.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.keys(Us).includes(n.toUpperCase())?Us[n.toUpperCase()]:Us.TYPE_UNSPECIFIED})}}function Nd(i){const t={},e=["items"],n=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=i.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,i=o[1]):o[1].type==="null"&&(t.nullable=!0,i=o[0])),i.type instanceof Array&&zre(i.type,t);for(const[r,a]of Object.entries(i))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.keys(Us).includes(a.toUpperCase())?a.toUpperCase():Us.TYPE_UNSPECIFIED}else if(e.includes(r))t[r]=Nd(a);else if(n.includes(r)){const l=[];for(const u of a){if(u.type=="null"){t.nullable=!0;continue}l.push(Nd(u))}t[r]=l}else if(s.includes(r)){const l={};for(const[u,h]of Object.entries(a))l[u]=Nd(h);t[r]=l}else{if(r==="additionalProperties")continue;t[r]=a}return t}function tp(i,t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=Ure().parse(t);return Nd(e)}else return Nd(t)}function hD(i,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function fD(i,t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function zp(i,t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=tp(i,e.parameters)),e.response&&(e.response=tp(i,e.response));return t}function Hp(i,t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Hre(i,t,e,n=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===n;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function Hr(i,t){if(typeof t!="string")throw new Error("name must be a string");return Hre(i,t,"cachedContents")}function mD(i,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Wr(i,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Wre(i){return i!=null&&typeof i=="object"&&"name"in i}function qre(i){return i!=null&&typeof i=="object"&&"video"in i}function Gre(i){return i!=null&&typeof i=="object"&&"uri"in i}function gD(i,t){var e;let n;if(Wre(t)&&(n=t.name),!(Gre(t)&&(n=t.uri,n===void 0))&&!(qre(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function pD(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function bD(i,t){for(const e of["models","tunedModels","publisherModels"])if($re(t,e))return t[e];return[]}function $re(i,t){return i!==null&&typeof i=="object"&&t in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jre(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function Kre(i,t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["data"]);n!=null&&y(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function Zre(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],jre(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],Kre(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function VI(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Zre(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function Yre(i,t){const e={},n=b(t,["behavior"]);n!=null&&y(e,["behavior"],n);const s=b(t,["description"]);s!=null&&y(e,["description"],s);const o=b(t,["name"]);o!=null&&y(e,["name"],o);const r=b(t,["parameters"]);r!=null&&y(e,["parameters"],r);const a=b(t,["response"]);return a!=null&&y(e,["response"],a),e}function Jre(i,t){const e={},n=b(t,["startTime"]);n!=null&&y(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&y(e,["endTime"],s),e}function Xre(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],Jre(i,n)),e}function Qre(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&y(e,["dynamicThreshold"],s),e}function eae(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],Qre(i,n)),e}function tae(){return{}}function nae(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Yre(i,u))),y(e,["functionDeclarations"],l)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=b(t,["googleSearch"]);s!=null&&y(e,["googleSearch"],Xre(i,s));const o=b(t,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],eae(i,o)),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(t,["urlContext"])!=null&&y(e,["urlContext"],tae());const a=b(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function iae(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&y(e,["allowedFunctionNames"],s),e}function sae(i,t){const e={},n=b(t,["latitude"]);n!=null&&y(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&y(e,["longitude"],s),e}function oae(i,t){const e={},n=b(t,["latLng"]);return n!=null&&y(e,["latLng"],sae(i,n)),e}function rae(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],iae(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&y(e,["retrievalConfig"],oae(i,s)),e}function aae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&y(e,["ttl"],s);const o=b(t,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const r=b(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let m=vs(i,a);Array.isArray(m)&&(m=m.map(p=>VI(i,p))),y(e,["contents"],m)}const l=b(t,["systemInstruction"]);e!==void 0&&l!=null&&y(e,["systemInstruction"],VI(i,yi(i,l)));const u=b(t,["tools"]);if(e!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(p=>nae(i,p))),y(e,["tools"],m)}const h=b(t,["toolConfig"]);if(e!==void 0&&h!=null&&y(e,["toolConfig"],rae(i,h)),b(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function lae(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["model"],lD(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],aae(i,s,e)),e}function cae(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function uae(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function dae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&y(e,["ttl"],s);const o=b(t,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),n}function hae(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],dae(i,s,e)),e}function fae(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),n}function mae(i,t){const e={},n=b(t,["config"]);return n!=null&&y(e,["config"],fae(i,n,e)),e}function gae(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function pae(i,t){const e={},n=b(t,["displayName"]);n!=null&&y(e,["displayName"],n);const s=b(t,["data"]);s!=null&&y(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function bae(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],gae(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],pae(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function NI(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>bae(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function wae(i,t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&y(e,["description"],n);const s=b(t,["name"]);s!=null&&y(e,["name"],s);const o=b(t,["parameters"]);o!=null&&y(e,["parameters"],o);const r=b(t,["response"]);return r!=null&&y(e,["response"],r),e}function yae(i,t){const e={},n=b(t,["startTime"]);n!=null&&y(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&y(e,["endTime"],s),e}function _ae(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],yae(i,n)),e}function vae(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&y(e,["dynamicThreshold"],s),e}function Cae(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],vae(i,n)),e}function Tae(){return{}}function xae(i,t){const e={},n=b(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function kae(i,t){const e={},n=b(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],xae(i,n));const s=b(t,["authType"]);s!=null&&y(e,["authType"],s);const o=b(t,["googleServiceAccountConfig"]);o!=null&&y(e,["googleServiceAccountConfig"],o);const r=b(t,["httpBasicAuthConfig"]);r!=null&&y(e,["httpBasicAuthConfig"],r);const a=b(t,["oauthConfig"]);a!=null&&y(e,["oauthConfig"],a);const l=b(t,["oidcConfig"]);return l!=null&&y(e,["oidcConfig"],l),e}function Eae(i,t){const e={},n=b(t,["authConfig"]);return n!=null&&y(e,["authConfig"],kae(i,n)),e}function Sae(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>wae(i,m))),y(e,["functionDeclarations"],h)}const s=b(t,["retrieval"]);s!=null&&y(e,["retrieval"],s);const o=b(t,["googleSearch"]);o!=null&&y(e,["googleSearch"],_ae(i,o));const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],Cae(i,r)),b(t,["enterpriseWebSearch"])!=null&&y(e,["enterpriseWebSearch"],Tae());const l=b(t,["googleMaps"]);if(l!=null&&y(e,["googleMaps"],Eae(i,l)),b(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(t,["codeExecution"]);return u!=null&&y(e,["codeExecution"],u),e}function Aae(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&y(e,["allowedFunctionNames"],s),e}function Rae(i,t){const e={},n=b(t,["latitude"]);n!=null&&y(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&y(e,["longitude"],s),e}function Iae(i,t){const e={},n=b(t,["latLng"]);return n!=null&&y(e,["latLng"],Rae(i,n)),e}function Pae(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Aae(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&y(e,["retrievalConfig"],Iae(i,s)),e}function Mae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&y(e,["ttl"],s);const o=b(t,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const r=b(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let p=vs(i,a);Array.isArray(p)&&(p=p.map(v=>NI(i,v))),y(e,["contents"],p)}const l=b(t,["systemInstruction"]);e!==void 0&&l!=null&&y(e,["systemInstruction"],NI(i,yi(i,l)));const u=b(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(v=>Sae(i,v))),y(e,["tools"],p)}const h=b(t,["toolConfig"]);e!==void 0&&h!=null&&y(e,["toolConfig"],Pae(i,h));const m=b(t,["kmsKeyName"]);return e!==void 0&&m!=null&&y(e,["encryption_spec","kmsKeyName"],m),n}function Vae(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["model"],lD(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],Mae(i,s,e)),e}function Nae(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function Oae(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function Dae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&y(e,["ttl"],s);const o=b(t,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),n}function Lae(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],Dae(i,s,e)),e}function Bae(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),n}function Fae(i,t){const e={},n=b(t,["config"]);return n!=null&&y(e,["config"],Bae(i,n,e)),e}function ng(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["displayName"]);s!=null&&y(e,["displayName"],s);const o=b(t,["model"]);o!=null&&y(e,["model"],o);const r=b(t,["createTime"]);r!=null&&y(e,["createTime"],r);const a=b(t,["updateTime"]);a!=null&&y(e,["updateTime"],a);const l=b(t,["expireTime"]);l!=null&&y(e,["expireTime"],l);const u=b(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function Uae(){return{}}function zae(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&y(e,["nextPageToken"],n);const s=b(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>ng(i,r))),y(e,["cachedContents"],o)}return e}function ig(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["displayName"]);s!=null&&y(e,["displayName"],s);const o=b(t,["model"]);o!=null&&y(e,["model"],o);const r=b(t,["createTime"]);r!=null&&y(e,["createTime"],r);const a=b(t,["updateTime"]);a!=null&&y(e,["updateTime"],a);const l=b(t,["expireTime"]);l!=null&&y(e,["expireTime"],l);const u=b(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function Hae(){return{}}function Wae(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&y(e,["nextPageToken"],n);const s=b(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>ig(i,r))),y(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ic;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ic||(Ic={}));class Wp{constructor(t,e,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,s)}init(t,e,n){var s,o;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let r={config:{}};n?typeof n=="object"?r=Object.assign({},n):r=n:r={config:{}},r.config&&(r.config.pageToken=e.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(o=(s=r.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qae extends Lh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Wp(Ic.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Vae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>ig(this.apiClient,h))}else{const u=lae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>ng(this.apiClient,h))}}async get(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Nae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>ig(this.apiClient,h))}else{const u=cae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>ng(this.apiClient,h))}}async delete(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Oae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(()=>{const h=Hae(),m=new SI;return Object.assign(m,h),m})}else{const u=uae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(()=>{const h=Uae(),m=new SI;return Object.assign(m,h),m})}}async update(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Lae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>ig(this.apiClient,h))}else{const u=hae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>ng(this.apiClient,h))}}async listInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Fae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Wae(this.apiClient,h),p=new AI;return Object.assign(p,m),p})}else{const u=mae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=zae(this.apiClient,h),p=new AI;return Object.assign(p,m),p})}}}function OI(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wt(i){return this instanceof Wt?(this.v=i,this):new Wt(i)}function Od(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),s[Symbol.asyncIterator]=function(){return this},s;function r(v){return function(C){return Promise.resolve(C).then(v,m)}}function a(v,C){n[v]&&(s[v]=function(x){return new Promise(function(k,S){o.push([v,x,k,S])>1||l(v,x)})},C&&(s[v]=C(s[v])))}function l(v,C){try{u(n[v](C))}catch(x){p(o[0][3],x)}}function u(v){v.value instanceof Wt?Promise.resolve(v.value.v).then(h,m):p(o[0][2],v)}function h(v){l("next",v)}function m(v){l("throw",v)}function p(v,C){v(C),o.shift(),o.length&&l(o[0][0],o[0][1])}}function sg(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof OI=="function"?OI(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=i[o]&&function(r){return new Promise(function(a,l){r=i[o](r),s(a,l,r.done,r.value)})}}function s(o,r,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gae(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:wD(e)}function wD(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function $ae(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function DI(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let n=0;for(;n<e;)if(i[n].role==="user")t.push(i[n]),n++;else{const s=[];let o=!0;for(;n<e&&i[n].role==="model";)s.push(i[n]),o&&!wD(i[n])&&(o=!1),n++;o?t.push(...s):t.pop()}return t}class jae{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Kae(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Kae{constructor(t,e,n,s={},o=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),$ae(o)}async sendMessage(t){var e;await this.sendPromise;const n=yi(this.apiClient,t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var o,r,a;const l=await s,u=(r=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content,h=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];h!=null&&(p=(a=h.slice(m))!==null&&a!==void 0?a:[]);const v=u?[u]:[];this.recordHistory(n,v,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var e;await this.sendPromise;const n=yi(this.apiClient,t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,n)}getHistory(t=!1){const e=t?DI(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var n,s;return Od(this,arguments,function*(){var r,a,l,u;const h=[];try{for(var m=!0,p=sg(t),v;v=yield Wt(p.next()),r=v.done,!r;m=!0){u=v.value,m=!1;const C=u;if(Gae(C)){const x=(s=(n=C.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;x!==void 0&&h.push(x)}yield yield Wt(C)}}catch(C){a={error:C}}finally{try{!m&&!r&&(l=p.return)&&(yield Wt(l.call(p)))}finally{if(a)throw a.error}}this.recordHistory(e,h)})}recordHistory(t,e,n){let s=[];e.length>0&&e.every(o=>o.role!==void 0)?s=e:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...DI(n)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zae(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),n}function Yae(i,t){const e={},n=b(t,["config"]);return n!=null&&y(e,["config"],Zae(i,n,e)),e}function Jae(i,t){const e={},n=b(t,["details"]);n!=null&&y(e,["details"],n);const s=b(t,["message"]);s!=null&&y(e,["message"],s);const o=b(t,["code"]);return o!=null&&y(e,["code"],o),e}function Xae(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["displayName"]);s!=null&&y(e,["displayName"],s);const o=b(t,["mimeType"]);o!=null&&y(e,["mimeType"],o);const r=b(t,["sizeBytes"]);r!=null&&y(e,["sizeBytes"],r);const a=b(t,["createTime"]);a!=null&&y(e,["createTime"],a);const l=b(t,["expirationTime"]);l!=null&&y(e,["expirationTime"],l);const u=b(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const h=b(t,["sha256Hash"]);h!=null&&y(e,["sha256Hash"],h);const m=b(t,["uri"]);m!=null&&y(e,["uri"],m);const p=b(t,["downloadUri"]);p!=null&&y(e,["downloadUri"],p);const v=b(t,["state"]);v!=null&&y(e,["state"],v);const C=b(t,["source"]);C!=null&&y(e,["source"],C);const x=b(t,["videoMetadata"]);x!=null&&y(e,["videoMetadata"],x);const k=b(t,["error"]);return k!=null&&y(e,["error"],Jae(i,k)),e}function Qae(i,t){const e={},n=b(t,["file"]);n!=null&&y(e,["file"],Xae(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function ele(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","file"],gD(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function tle(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","file"],gD(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function nle(i,t){const e={},n=b(t,["details"]);n!=null&&y(e,["details"],n);const s=b(t,["message"]);s!=null&&y(e,["message"],s);const o=b(t,["code"]);return o!=null&&y(e,["code"],o),e}function Dv(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["displayName"]);s!=null&&y(e,["displayName"],s);const o=b(t,["mimeType"]);o!=null&&y(e,["mimeType"],o);const r=b(t,["sizeBytes"]);r!=null&&y(e,["sizeBytes"],r);const a=b(t,["createTime"]);a!=null&&y(e,["createTime"],a);const l=b(t,["expirationTime"]);l!=null&&y(e,["expirationTime"],l);const u=b(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const h=b(t,["sha256Hash"]);h!=null&&y(e,["sha256Hash"],h);const m=b(t,["uri"]);m!=null&&y(e,["uri"],m);const p=b(t,["downloadUri"]);p!=null&&y(e,["downloadUri"],p);const v=b(t,["state"]);v!=null&&y(e,["state"],v);const C=b(t,["source"]);C!=null&&y(e,["source"],C);const x=b(t,["videoMetadata"]);x!=null&&y(e,["videoMetadata"],x);const k=b(t,["error"]);return k!=null&&y(e,["error"],nle(i,k)),e}function ile(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&y(e,["nextPageToken"],n);const s=b(t,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>Dv(i,r))),y(e,["files"],o)}return e}function sle(){return{}}function ole(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rle extends Lh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Wp(Ic.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>Dv(this.apiClient,e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Yae(this.apiClient,t);return o=Fe("files",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=ile(this.apiClient,l),h=new Mre;return Object.assign(h,u),h})}}async createInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Qae(this.apiClient,t);return o=Fe("upload/v1beta/files",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(()=>{const l=sle(),u=new Vre;return Object.assign(u,l),u})}}async get(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ele(this.apiClient,t);return o=Fe("files/{file}",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>Dv(this.apiClient,l))}}async delete(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tle(this.apiClient,t);return o=Fe("files/{file}",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(()=>{const l=ole(),u=new Nre;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ale(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function lle(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function yD(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],ale(i,n)),e}function cle(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],lle(i,n)),e}function ule(i,t){const e={},n=b(t,["speaker"]);n!=null&&y(e,["speaker"],n);const s=b(t,["voiceConfig"]);return s!=null&&y(e,["voiceConfig"],yD(i,s)),e}function dle(i,t){const e={},n=b(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>ule(i,o))),y(e,["speakerVoiceConfigs"],s)}return e}function hle(i,t){const e={},n=b(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],yD(i,n));const s=b(t,["multiSpeakerVoiceConfig"]);s!=null&&y(e,["multiSpeakerVoiceConfig"],dle(i,s));const o=b(t,["languageCode"]);return o!=null&&y(e,["languageCode"],o),e}function fle(i,t){const e={},n=b(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],cle(i,n)),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=b(t,["languageCode"]);return s!=null&&y(e,["languageCode"],s),e}function mle(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function gle(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function ple(i,t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["data"]);n!=null&&y(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function ble(i,t){const e={},n=b(t,["displayName"]);n!=null&&y(e,["displayName"],n);const s=b(t,["data"]);s!=null&&y(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function wle(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],mle(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],ple(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function yle(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],gle(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],ble(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function _le(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>wle(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function vle(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>yle(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function Cle(i,t){const e={},n=b(t,["behavior"]);n!=null&&y(e,["behavior"],n);const s=b(t,["description"]);s!=null&&y(e,["description"],s);const o=b(t,["name"]);o!=null&&y(e,["name"],o);const r=b(t,["parameters"]);r!=null&&y(e,["parameters"],r);const a=b(t,["response"]);return a!=null&&y(e,["response"],a),e}function Tle(i,t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&y(e,["description"],n);const s=b(t,["name"]);s!=null&&y(e,["name"],s);const o=b(t,["parameters"]);o!=null&&y(e,["parameters"],o);const r=b(t,["response"]);return r!=null&&y(e,["response"],r),e}function xle(i,t){const e={},n=b(t,["startTime"]);n!=null&&y(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&y(e,["endTime"],s),e}function kle(i,t){const e={},n=b(t,["startTime"]);n!=null&&y(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&y(e,["endTime"],s),e}function Ele(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],xle(i,n)),e}function Sle(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],kle(i,n)),e}function Ale(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&y(e,["dynamicThreshold"],s),e}function Rle(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&y(e,["dynamicThreshold"],s),e}function Ile(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],Ale(i,n)),e}function Ple(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],Rle(i,n)),e}function Mle(){return{}}function Vle(i,t){const e={},n=b(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function Nle(i,t){const e={},n=b(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],Vle(i,n));const s=b(t,["authType"]);s!=null&&y(e,["authType"],s);const o=b(t,["googleServiceAccountConfig"]);o!=null&&y(e,["googleServiceAccountConfig"],o);const r=b(t,["httpBasicAuthConfig"]);r!=null&&y(e,["httpBasicAuthConfig"],r);const a=b(t,["oauthConfig"]);a!=null&&y(e,["oauthConfig"],a);const l=b(t,["oidcConfig"]);return l!=null&&y(e,["oidcConfig"],l),e}function Ole(i,t){const e={},n=b(t,["authConfig"]);return n!=null&&y(e,["authConfig"],Nle(i,n)),e}function Dle(){return{}}function Lle(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Cle(i,u))),y(e,["functionDeclarations"],l)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=b(t,["googleSearch"]);s!=null&&y(e,["googleSearch"],Ele(i,s));const o=b(t,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],Ile(i,o)),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(t,["urlContext"])!=null&&y(e,["urlContext"],Dle());const a=b(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function Ble(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Tle(i,m))),y(e,["functionDeclarations"],h)}const s=b(t,["retrieval"]);s!=null&&y(e,["retrieval"],s);const o=b(t,["googleSearch"]);o!=null&&y(e,["googleSearch"],Sle(i,o));const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],Ple(i,r)),b(t,["enterpriseWebSearch"])!=null&&y(e,["enterpriseWebSearch"],Mle());const l=b(t,["googleMaps"]);if(l!=null&&y(e,["googleMaps"],Ole(i,l)),b(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(t,["codeExecution"]);return u!=null&&y(e,["codeExecution"],u),e}function Fle(i,t){const e={},n=b(t,["handle"]);if(n!=null&&y(e,["handle"],n),b(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ule(i,t){const e={},n=b(t,["handle"]);n!=null&&y(e,["handle"],n);const s=b(t,["transparent"]);return s!=null&&y(e,["transparent"],s),e}function LI(){return{}}function BI(){return{}}function zle(i,t){const e={},n=b(t,["disabled"]);n!=null&&y(e,["disabled"],n);const s=b(t,["startOfSpeechSensitivity"]);s!=null&&y(e,["startOfSpeechSensitivity"],s);const o=b(t,["endOfSpeechSensitivity"]);o!=null&&y(e,["endOfSpeechSensitivity"],o);const r=b(t,["prefixPaddingMs"]);r!=null&&y(e,["prefixPaddingMs"],r);const a=b(t,["silenceDurationMs"]);return a!=null&&y(e,["silenceDurationMs"],a),e}function Hle(i,t){const e={},n=b(t,["disabled"]);n!=null&&y(e,["disabled"],n);const s=b(t,["startOfSpeechSensitivity"]);s!=null&&y(e,["startOfSpeechSensitivity"],s);const o=b(t,["endOfSpeechSensitivity"]);o!=null&&y(e,["endOfSpeechSensitivity"],o);const r=b(t,["prefixPaddingMs"]);r!=null&&y(e,["prefixPaddingMs"],r);const a=b(t,["silenceDurationMs"]);return a!=null&&y(e,["silenceDurationMs"],a),e}function Wle(i,t){const e={},n=b(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],zle(i,n));const s=b(t,["activityHandling"]);s!=null&&y(e,["activityHandling"],s);const o=b(t,["turnCoverage"]);return o!=null&&y(e,["turnCoverage"],o),e}function qle(i,t){const e={},n=b(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],Hle(i,n));const s=b(t,["activityHandling"]);s!=null&&y(e,["activityHandling"],s);const o=b(t,["turnCoverage"]);return o!=null&&y(e,["turnCoverage"],o),e}function Gle(i,t){const e={},n=b(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function $le(i,t){const e={},n=b(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function jle(i,t){const e={},n=b(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const s=b(t,["slidingWindow"]);return s!=null&&y(e,["slidingWindow"],Gle(i,s)),e}function Kle(i,t){const e={},n=b(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const s=b(t,["slidingWindow"]);return s!=null&&y(e,["slidingWindow"],$le(i,s)),e}function Zle(i,t){const e={},n=b(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function Yle(i,t){const e={},n=b(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function Jle(i,t,e){const n={},s=b(t,["generationConfig"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig"],s);const o=b(t,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const r=b(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const a=b(t,["topP"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topP"],a);const l=b(t,["topK"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topK"],l);const u=b(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const h=b(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const m=b(t,["seed"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","seed"],m);const p=b(t,["speechConfig"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","speechConfig"],hle(i,fD(i,p)));const v=b(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],v);const C=b(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],_le(i,yi(i,C)));const x=b(t,["tools"]);if(e!==void 0&&x!=null){let J=Hp(i,x);Array.isArray(J)&&(J=J.map(F=>Lle(i,zp(i,F)))),y(e,["setup","tools"],J)}const k=b(t,["sessionResumption"]);e!==void 0&&k!=null&&y(e,["setup","sessionResumption"],Fle(i,k));const S=b(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&y(e,["setup","inputAudioTranscription"],LI());const I=b(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&y(e,["setup","outputAudioTranscription"],LI());const P=b(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&y(e,["setup","realtimeInputConfig"],Wle(i,P));const L=b(t,["contextWindowCompression"]);e!==void 0&&L!=null&&y(e,["setup","contextWindowCompression"],jle(i,L));const O=b(t,["proactivity"]);return e!==void 0&&O!=null&&y(e,["setup","proactivity"],Zle(i,O)),n}function Xle(i,t,e){const n={},s=b(t,["generationConfig"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig"],s);const o=b(t,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const r=b(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const a=b(t,["topP"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topP"],a);const l=b(t,["topK"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topK"],l);const u=b(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const h=b(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const m=b(t,["seed"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","seed"],m);const p=b(t,["speechConfig"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","speechConfig"],fle(i,fD(i,p)));const v=b(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],v);const C=b(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],vle(i,yi(i,C)));const x=b(t,["tools"]);if(e!==void 0&&x!=null){let J=Hp(i,x);Array.isArray(J)&&(J=J.map(F=>Ble(i,zp(i,F)))),y(e,["setup","tools"],J)}const k=b(t,["sessionResumption"]);e!==void 0&&k!=null&&y(e,["setup","sessionResumption"],Ule(i,k));const S=b(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&y(e,["setup","inputAudioTranscription"],BI());const I=b(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&y(e,["setup","outputAudioTranscription"],BI());const P=b(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&y(e,["setup","realtimeInputConfig"],qle(i,P));const L=b(t,["contextWindowCompression"]);e!==void 0&&L!=null&&y(e,["setup","contextWindowCompression"],Kle(i,L));const O=b(t,["proactivity"]);return e!==void 0&&O!=null&&y(e,["setup","proactivity"],Yle(i,O)),n}function Qle(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["setup","model"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],Jle(i,s,e)),e}function ece(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["setup","model"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],Xle(i,s,e)),e}function tce(){return{}}function nce(){return{}}function ice(){return{}}function sce(){return{}}function oce(i,t){const e={},n=b(t,["media"]);n!=null&&y(e,["mediaChunks"],cD(i,n));const s=b(t,["audio"]);s!=null&&y(e,["audio"],Bre(i,s));const o=b(t,["audioStreamEnd"]);o!=null&&y(e,["audioStreamEnd"],o);const r=b(t,["video"]);r!=null&&y(e,["video"],Lre(i,r));const a=b(t,["text"]);return a!=null&&y(e,["text"],a),b(t,["activityStart"])!=null&&y(e,["activityStart"],tce()),b(t,["activityEnd"])!=null&&y(e,["activityEnd"],ice()),e}function rce(i,t){const e={},n=b(t,["media"]);if(n!=null&&y(e,["mediaChunks"],cD(i,n)),b(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=b(t,["audioStreamEnd"]);if(s!=null&&y(e,["audioStreamEnd"],s),b(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(b(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return b(t,["activityStart"])!=null&&y(e,["activityStart"],nce()),b(t,["activityEnd"])!=null&&y(e,["activityEnd"],sce()),e}function _D(i,t){const e={},n=b(t,["text"]);n!=null&&y(e,["text"],n);const s=b(t,["weight"]);return s!=null&&y(e,["weight"],s),e}function ace(i,t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>_D(i,o))),y(e,["weightedPrompts"],s)}return e}function vD(i,t){const e={},n=b(t,["temperature"]);n!=null&&y(e,["temperature"],n);const s=b(t,["topK"]);s!=null&&y(e,["topK"],s);const o=b(t,["seed"]);o!=null&&y(e,["seed"],o);const r=b(t,["guidance"]);r!=null&&y(e,["guidance"],r);const a=b(t,["bpm"]);a!=null&&y(e,["bpm"],a);const l=b(t,["density"]);l!=null&&y(e,["density"],l);const u=b(t,["brightness"]);u!=null&&y(e,["brightness"],u);const h=b(t,["scale"]);h!=null&&y(e,["scale"],h);const m=b(t,["muteBass"]);m!=null&&y(e,["muteBass"],m);const p=b(t,["muteDrums"]);p!=null&&y(e,["muteDrums"],p);const v=b(t,["onlyBassAndDrums"]);v!=null&&y(e,["onlyBassAndDrums"],v);const C=b(t,["musicGenerationMode"]);return C!=null&&y(e,["musicGenerationMode"],C),e}function lce(i,t){const e={},n=b(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],vD(i,n)),e}function CD(i,t){const e={},n=b(t,["model"]);return n!=null&&y(e,["model"],n),e}function TD(i,t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>_D(i,o))),y(e,["weightedPrompts"],s)}return e}function Lv(i,t){const e={},n=b(t,["setup"]);n!=null&&y(e,["setup"],CD(i,n));const s=b(t,["clientContent"]);s!=null&&y(e,["clientContent"],TD(i,s));const o=b(t,["musicGenerationConfig"]);o!=null&&y(e,["musicGenerationConfig"],vD(i,o));const r=b(t,["playbackControl"]);return r!=null&&y(e,["playbackControl"],r),e}function cce(){return{}}function uce(){return{}}function dce(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function hce(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function fce(i,t){const e={},n=b(t,["data"]);n!=null&&y(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function mce(i,t){const e={},n=b(t,["displayName"]);n!=null&&y(e,["displayName"],n);const s=b(t,["data"]);s!=null&&y(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function gce(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],dce(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],fce(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function pce(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],hce(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],mce(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function bce(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>gce(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function wce(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>pce(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function FI(i,t){const e={},n=b(t,["text"]);n!=null&&y(e,["text"],n);const s=b(t,["finished"]);return s!=null&&y(e,["finished"],s),e}function UI(i,t){const e={},n=b(t,["text"]);n!=null&&y(e,["text"],n);const s=b(t,["finished"]);return s!=null&&y(e,["finished"],s),e}function yce(i,t){const e={},n=b(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const s=b(t,["urlRetrievalStatus"]);return s!=null&&y(e,["urlRetrievalStatus"],s),e}function _ce(i,t){const e={},n=b(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>yce(i,o))),y(e,["urlMetadata"],s)}return e}function vce(i,t){const e={},n=b(t,["modelTurn"]);n!=null&&y(e,["modelTurn"],bce(i,n));const s=b(t,["turnComplete"]);s!=null&&y(e,["turnComplete"],s);const o=b(t,["interrupted"]);o!=null&&y(e,["interrupted"],o);const r=b(t,["groundingMetadata"]);r!=null&&y(e,["groundingMetadata"],r);const a=b(t,["generationComplete"]);a!=null&&y(e,["generationComplete"],a);const l=b(t,["inputTranscription"]);l!=null&&y(e,["inputTranscription"],FI(i,l));const u=b(t,["outputTranscription"]);u!=null&&y(e,["outputTranscription"],FI(i,u));const h=b(t,["urlContextMetadata"]);return h!=null&&y(e,["urlContextMetadata"],_ce(i,h)),e}function Cce(i,t){const e={},n=b(t,["modelTurn"]);n!=null&&y(e,["modelTurn"],wce(i,n));const s=b(t,["turnComplete"]);s!=null&&y(e,["turnComplete"],s);const o=b(t,["interrupted"]);o!=null&&y(e,["interrupted"],o);const r=b(t,["groundingMetadata"]);r!=null&&y(e,["groundingMetadata"],r);const a=b(t,["generationComplete"]);a!=null&&y(e,["generationComplete"],a);const l=b(t,["inputTranscription"]);l!=null&&y(e,["inputTranscription"],UI(i,l));const u=b(t,["outputTranscription"]);return u!=null&&y(e,["outputTranscription"],UI(i,u)),e}function Tce(i,t){const e={},n=b(t,["id"]);n!=null&&y(e,["id"],n);const s=b(t,["args"]);s!=null&&y(e,["args"],s);const o=b(t,["name"]);return o!=null&&y(e,["name"],o),e}function xce(i,t){const e={},n=b(t,["args"]);n!=null&&y(e,["args"],n);const s=b(t,["name"]);return s!=null&&y(e,["name"],s),e}function kce(i,t){const e={},n=b(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Tce(i,o))),y(e,["functionCalls"],s)}return e}function Ece(i,t){const e={},n=b(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>xce(i,o))),y(e,["functionCalls"],s)}return e}function Sce(i,t){const e={},n=b(t,["ids"]);return n!=null&&y(e,["ids"],n),e}function Ace(i,t){const e={},n=b(t,["ids"]);return n!=null&&y(e,["ids"],n),e}function Im(i,t){const e={},n=b(t,["modality"]);n!=null&&y(e,["modality"],n);const s=b(t,["tokenCount"]);return s!=null&&y(e,["tokenCount"],s),e}function Pm(i,t){const e={},n=b(t,["modality"]);n!=null&&y(e,["modality"],n);const s=b(t,["tokenCount"]);return s!=null&&y(e,["tokenCount"],s),e}function Rce(i,t){const e={},n=b(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const s=b(t,["cachedContentTokenCount"]);s!=null&&y(e,["cachedContentTokenCount"],s);const o=b(t,["responseTokenCount"]);o!=null&&y(e,["responseTokenCount"],o);const r=b(t,["toolUsePromptTokenCount"]);r!=null&&y(e,["toolUsePromptTokenCount"],r);const a=b(t,["thoughtsTokenCount"]);a!=null&&y(e,["thoughtsTokenCount"],a);const l=b(t,["totalTokenCount"]);l!=null&&y(e,["totalTokenCount"],l);const u=b(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(C=>Im(i,C))),y(e,["promptTokensDetails"],v)}const h=b(t,["cacheTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(C=>Im(i,C))),y(e,["cacheTokensDetails"],v)}const m=b(t,["responseTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(C=>Im(i,C))),y(e,["responseTokensDetails"],v)}const p=b(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(C=>Im(i,C))),y(e,["toolUsePromptTokensDetails"],v)}return e}function Ice(i,t){const e={},n=b(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const s=b(t,["cachedContentTokenCount"]);s!=null&&y(e,["cachedContentTokenCount"],s);const o=b(t,["candidatesTokenCount"]);o!=null&&y(e,["responseTokenCount"],o);const r=b(t,["toolUsePromptTokenCount"]);r!=null&&y(e,["toolUsePromptTokenCount"],r);const a=b(t,["thoughtsTokenCount"]);a!=null&&y(e,["thoughtsTokenCount"],a);const l=b(t,["totalTokenCount"]);l!=null&&y(e,["totalTokenCount"],l);const u=b(t,["promptTokensDetails"]);if(u!=null){let C=u;Array.isArray(C)&&(C=C.map(x=>Pm(i,x))),y(e,["promptTokensDetails"],C)}const h=b(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(x=>Pm(i,x))),y(e,["cacheTokensDetails"],C)}const m=b(t,["candidatesTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(x=>Pm(i,x))),y(e,["responseTokensDetails"],C)}const p=b(t,["toolUsePromptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(x=>Pm(i,x))),y(e,["toolUsePromptTokensDetails"],C)}const v=b(t,["trafficType"]);return v!=null&&y(e,["trafficType"],v),e}function Pce(i,t){const e={},n=b(t,["timeLeft"]);return n!=null&&y(e,["timeLeft"],n),e}function Mce(i,t){const e={},n=b(t,["timeLeft"]);return n!=null&&y(e,["timeLeft"],n),e}function Vce(i,t){const e={},n=b(t,["newHandle"]);n!=null&&y(e,["newHandle"],n);const s=b(t,["resumable"]);s!=null&&y(e,["resumable"],s);const o=b(t,["lastConsumedClientMessageIndex"]);return o!=null&&y(e,["lastConsumedClientMessageIndex"],o),e}function Nce(i,t){const e={},n=b(t,["newHandle"]);n!=null&&y(e,["newHandle"],n);const s=b(t,["resumable"]);s!=null&&y(e,["resumable"],s);const o=b(t,["lastConsumedClientMessageIndex"]);return o!=null&&y(e,["lastConsumedClientMessageIndex"],o),e}function Oce(i,t){const e={};b(t,["setupComplete"])!=null&&y(e,["setupComplete"],cce());const s=b(t,["serverContent"]);s!=null&&y(e,["serverContent"],vce(i,s));const o=b(t,["toolCall"]);o!=null&&y(e,["toolCall"],kce(i,o));const r=b(t,["toolCallCancellation"]);r!=null&&y(e,["toolCallCancellation"],Sce(i,r));const a=b(t,["usageMetadata"]);a!=null&&y(e,["usageMetadata"],Rce(i,a));const l=b(t,["goAway"]);l!=null&&y(e,["goAway"],Pce(i,l));const u=b(t,["sessionResumptionUpdate"]);return u!=null&&y(e,["sessionResumptionUpdate"],Vce(i,u)),e}function Dce(i,t){const e={};b(t,["setupComplete"])!=null&&y(e,["setupComplete"],uce());const s=b(t,["serverContent"]);s!=null&&y(e,["serverContent"],Cce(i,s));const o=b(t,["toolCall"]);o!=null&&y(e,["toolCall"],Ece(i,o));const r=b(t,["toolCallCancellation"]);r!=null&&y(e,["toolCallCancellation"],Ace(i,r));const a=b(t,["usageMetadata"]);a!=null&&y(e,["usageMetadata"],Ice(i,a));const l=b(t,["goAway"]);l!=null&&y(e,["goAway"],Mce(i,l));const u=b(t,["sessionResumptionUpdate"]);return u!=null&&y(e,["sessionResumptionUpdate"],Nce(i,u)),e}function Lce(){return{}}function Bce(i,t){const e={},n=b(t,["text"]);n!=null&&y(e,["text"],n);const s=b(t,["weight"]);return s!=null&&y(e,["weight"],s),e}function Fce(i,t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Bce(i,o))),y(e,["weightedPrompts"],s)}return e}function Uce(i,t){const e={},n=b(t,["temperature"]);n!=null&&y(e,["temperature"],n);const s=b(t,["topK"]);s!=null&&y(e,["topK"],s);const o=b(t,["seed"]);o!=null&&y(e,["seed"],o);const r=b(t,["guidance"]);r!=null&&y(e,["guidance"],r);const a=b(t,["bpm"]);a!=null&&y(e,["bpm"],a);const l=b(t,["density"]);l!=null&&y(e,["density"],l);const u=b(t,["brightness"]);u!=null&&y(e,["brightness"],u);const h=b(t,["scale"]);h!=null&&y(e,["scale"],h);const m=b(t,["muteBass"]);m!=null&&y(e,["muteBass"],m);const p=b(t,["muteDrums"]);p!=null&&y(e,["muteDrums"],p);const v=b(t,["onlyBassAndDrums"]);v!=null&&y(e,["onlyBassAndDrums"],v);const C=b(t,["musicGenerationMode"]);return C!=null&&y(e,["musicGenerationMode"],C),e}function zce(i,t){const e={},n=b(t,["clientContent"]);n!=null&&y(e,["clientContent"],Fce(i,n));const s=b(t,["musicGenerationConfig"]);return s!=null&&y(e,["musicGenerationConfig"],Uce(i,s)),e}function Hce(i,t){const e={},n=b(t,["data"]);n!=null&&y(e,["data"],n);const s=b(t,["mimeType"]);s!=null&&y(e,["mimeType"],s);const o=b(t,["sourceMetadata"]);return o!=null&&y(e,["sourceMetadata"],zce(i,o)),e}function Wce(i,t){const e={},n=b(t,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Hce(i,o))),y(e,["audioChunks"],s)}return e}function qce(i,t){const e={},n=b(t,["text"]);n!=null&&y(e,["text"],n);const s=b(t,["filteredReason"]);return s!=null&&y(e,["filteredReason"],s),e}function Gce(i,t){const e={};b(t,["setupComplete"])!=null&&y(e,["setupComplete"],Lce());const s=b(t,["serverContent"]);s!=null&&y(e,["serverContent"],Wce(i,s));const o=b(t,["filteredPrompt"]);return o!=null&&y(e,["filteredPrompt"],qce(i,o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $ce(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function jce(i,t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["data"]);n!=null&&y(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function Kce(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],$ce(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],jce(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function qp(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Kce(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function Zce(i,t){const e={};if(b(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=b(t,["category"]);n!=null&&y(e,["category"],n);const s=b(t,["threshold"]);return s!=null&&y(e,["threshold"],s),e}function Yce(i,t){const e={},n=b(t,["behavior"]);n!=null&&y(e,["behavior"],n);const s=b(t,["description"]);s!=null&&y(e,["description"],s);const o=b(t,["name"]);o!=null&&y(e,["name"],o);const r=b(t,["parameters"]);r!=null&&y(e,["parameters"],r);const a=b(t,["response"]);return a!=null&&y(e,["response"],a),e}function Jce(i,t){const e={},n=b(t,["startTime"]);n!=null&&y(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&y(e,["endTime"],s),e}function Xce(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],Jce(i,n)),e}function Qce(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&y(e,["dynamicThreshold"],s),e}function eue(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],Qce(i,n)),e}function tue(){return{}}function nue(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Yce(i,u))),y(e,["functionDeclarations"],l)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=b(t,["googleSearch"]);s!=null&&y(e,["googleSearch"],Xce(i,s));const o=b(t,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],eue(i,o)),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(t,["urlContext"])!=null&&y(e,["urlContext"],tue());const a=b(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function iue(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&y(e,["allowedFunctionNames"],s),e}function sue(i,t){const e={},n=b(t,["latitude"]);n!=null&&y(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&y(e,["longitude"],s),e}function oue(i,t){const e={},n=b(t,["latLng"]);return n!=null&&y(e,["latLng"],sue(i,n)),e}function rue(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],iue(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&y(e,["retrievalConfig"],oue(i,s)),e}function aue(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function xD(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],aue(i,n)),e}function lue(i,t){const e={},n=b(t,["speaker"]);n!=null&&y(e,["speaker"],n);const s=b(t,["voiceConfig"]);return s!=null&&y(e,["voiceConfig"],xD(i,s)),e}function cue(i,t){const e={},n=b(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>lue(i,o))),y(e,["speakerVoiceConfigs"],s)}return e}function uue(i,t){const e={},n=b(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],xD(i,n));const s=b(t,["multiSpeakerVoiceConfig"]);s!=null&&y(e,["multiSpeakerVoiceConfig"],cue(i,s));const o=b(t,["languageCode"]);return o!=null&&y(e,["languageCode"],o),e}function due(i,t){const e={},n=b(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const s=b(t,["thinkingBudget"]);return s!=null&&y(e,["thinkingBudget"],s),e}function hue(i,t,e){const n={},s=b(t,["systemInstruction"]);e!==void 0&&s!=null&&y(e,["systemInstruction"],qp(i,yi(i,s)));const o=b(t,["temperature"]);o!=null&&y(n,["temperature"],o);const r=b(t,["topP"]);r!=null&&y(n,["topP"],r);const a=b(t,["topK"]);a!=null&&y(n,["topK"],a);const l=b(t,["candidateCount"]);l!=null&&y(n,["candidateCount"],l);const u=b(t,["maxOutputTokens"]);u!=null&&y(n,["maxOutputTokens"],u);const h=b(t,["stopSequences"]);h!=null&&y(n,["stopSequences"],h);const m=b(t,["responseLogprobs"]);m!=null&&y(n,["responseLogprobs"],m);const p=b(t,["logprobs"]);p!=null&&y(n,["logprobs"],p);const v=b(t,["presencePenalty"]);v!=null&&y(n,["presencePenalty"],v);const C=b(t,["frequencyPenalty"]);C!=null&&y(n,["frequencyPenalty"],C);const x=b(t,["seed"]);x!=null&&y(n,["seed"],x);const k=b(t,["responseMimeType"]);k!=null&&y(n,["responseMimeType"],k);const S=b(t,["responseSchema"]);if(S!=null&&y(n,["responseSchema"],tp(i,S)),b(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=b(t,["safetySettings"]);if(e!==void 0&&I!=null){let X=I;Array.isArray(X)&&(X=X.map(le=>Zce(i,le))),y(e,["safetySettings"],X)}const P=b(t,["tools"]);if(e!==void 0&&P!=null){let X=Hp(i,P);Array.isArray(X)&&(X=X.map(le=>nue(i,zp(i,le)))),y(e,["tools"],X)}const L=b(t,["toolConfig"]);if(e!==void 0&&L!=null&&y(e,["toolConfig"],rue(i,L)),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=b(t,["cachedContent"]);e!==void 0&&O!=null&&y(e,["cachedContent"],Hr(i,O));const J=b(t,["responseModalities"]);J!=null&&y(n,["responseModalities"],J);const F=b(t,["mediaResolution"]);F!=null&&y(n,["mediaResolution"],F);const j=b(t,["speechConfig"]);if(j!=null&&y(n,["speechConfig"],uue(i,hD(i,j))),b(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=b(t,["thinkingConfig"]);return U!=null&&y(n,["thinkingConfig"],due(i,U)),n}function zI(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>qp(i,a))),y(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&y(e,["generationConfig"],hue(i,o,e)),e}function fue(i,t,e){const n={},s=b(t,["taskType"]);e!==void 0&&s!=null&&y(e,["requests[]","taskType"],s);const o=b(t,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const r=b(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&y(e,["requests[]","outputDimensionality"],r),b(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function mue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);s!=null&&y(e,["requests[]","content"],dD(i,s));const o=b(t,["config"]);o!=null&&y(e,["config"],fue(i,o,e));const r=b(t,["model"]);return r!==void 0&&y(e,["requests[]","model"],Ft(i,r)),e}function gue(i,t,e){const n={};if(b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=b(t,["numberOfImages"]);e!==void 0&&s!=null&&y(e,["parameters","sampleCount"],s);const o=b(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const r=b(t,["guidanceScale"]);if(e!==void 0&&r!=null&&y(e,["parameters","guidanceScale"],r),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=b(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const l=b(t,["personGeneration"]);e!==void 0&&l!=null&&y(e,["parameters","personGeneration"],l);const u=b(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&y(e,["parameters","includeSafetyAttributes"],u);const h=b(t,["includeRaiReason"]);e!==void 0&&h!=null&&y(e,["parameters","includeRaiReason"],h);const m=b(t,["language"]);e!==void 0&&m!=null&&y(e,["parameters","language"],m);const p=b(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=b(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v),b(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function pue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&y(e,["instances[0]","prompt"],s);const o=b(t,["config"]);return o!=null&&y(e,["config"],gue(i,o,e)),e}function bue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function wue(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const r=b(t,["filter"]);e!==void 0&&r!=null&&y(e,["_query","filter"],r);const a=b(t,["queryBase"]);return e!==void 0&&a!=null&&y(e,["_url","models_url"],pD(i,a)),n}function yue(i,t){const e={},n=b(t,["config"]);return n!=null&&y(e,["config"],wue(i,n,e)),e}function _ue(i,t,e){const n={},s=b(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const o=b(t,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const r=b(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&y(e,["defaultCheckpointId"],r),n}function vue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],_ue(i,s,e)),e}function Cue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function Tue(i,t){const e={};if(b(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>qp(i,a))),y(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&y(e,["config"],Tue(i,o)),e}function kue(i,t){const e={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],Wr(i,n));const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function Eue(i,t,e){const n={},s=b(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&y(e,["parameters","sampleCount"],s),b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=b(t,["durationSeconds"]);if(e!==void 0&&o!=null&&y(e,["parameters","durationSeconds"],o),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=b(t,["aspectRatio"]);if(e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r),b(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=b(t,["personGeneration"]);if(e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a),b(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=b(t,["negativePrompt"]);if(e!==void 0&&l!=null&&y(e,["parameters","negativePrompt"],l),b(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Sue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&y(e,["instances[0]","prompt"],s);const o=b(t,["image"]);o!=null&&y(e,["instances[0]","image"],kue(i,o));const r=b(t,["config"]);return r!=null&&y(e,["config"],Eue(i,r,e)),e}function Aue(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function Rue(i,t){const e={},n=b(t,["displayName"]);n!=null&&y(e,["displayName"],n);const s=b(t,["data"]);s!=null&&y(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function Iue(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],Aue(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],Rue(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function Fc(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Iue(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function Pue(i,t){const e={},n=b(t,["featureSelectionPreference"]);return n!=null&&y(e,["featureSelectionPreference"],n),e}function Mue(i,t){const e={},n=b(t,["method"]);n!=null&&y(e,["method"],n);const s=b(t,["category"]);s!=null&&y(e,["category"],s);const o=b(t,["threshold"]);return o!=null&&y(e,["threshold"],o),e}function Vue(i,t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&y(e,["description"],n);const s=b(t,["name"]);s!=null&&y(e,["name"],s);const o=b(t,["parameters"]);o!=null&&y(e,["parameters"],o);const r=b(t,["response"]);return r!=null&&y(e,["response"],r),e}function Nue(i,t){const e={},n=b(t,["startTime"]);n!=null&&y(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&y(e,["endTime"],s),e}function Oue(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],Nue(i,n)),e}function Due(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&y(e,["dynamicThreshold"],s),e}function Lue(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],Due(i,n)),e}function Bue(){return{}}function Fue(i,t){const e={},n=b(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function Uue(i,t){const e={},n=b(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],Fue(i,n));const s=b(t,["authType"]);s!=null&&y(e,["authType"],s);const o=b(t,["googleServiceAccountConfig"]);o!=null&&y(e,["googleServiceAccountConfig"],o);const r=b(t,["httpBasicAuthConfig"]);r!=null&&y(e,["httpBasicAuthConfig"],r);const a=b(t,["oauthConfig"]);a!=null&&y(e,["oauthConfig"],a);const l=b(t,["oidcConfig"]);return l!=null&&y(e,["oidcConfig"],l),e}function zue(i,t){const e={},n=b(t,["authConfig"]);return n!=null&&y(e,["authConfig"],Uue(i,n)),e}function kD(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Vue(i,m))),y(e,["functionDeclarations"],h)}const s=b(t,["retrieval"]);s!=null&&y(e,["retrieval"],s);const o=b(t,["googleSearch"]);o!=null&&y(e,["googleSearch"],Oue(i,o));const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],Lue(i,r)),b(t,["enterpriseWebSearch"])!=null&&y(e,["enterpriseWebSearch"],Bue());const l=b(t,["googleMaps"]);if(l!=null&&y(e,["googleMaps"],zue(i,l)),b(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(t,["codeExecution"]);return u!=null&&y(e,["codeExecution"],u),e}function Hue(i,t){const e={},n=b(t,["mode"]);n!=null&&y(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&y(e,["allowedFunctionNames"],s),e}function Wue(i,t){const e={},n=b(t,["latitude"]);n!=null&&y(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&y(e,["longitude"],s),e}function que(i,t){const e={},n=b(t,["latLng"]);return n!=null&&y(e,["latLng"],Wue(i,n)),e}function Gue(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Hue(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&y(e,["retrievalConfig"],que(i,s)),e}function $ue(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function jue(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],$ue(i,n)),e}function Kue(i,t){const e={},n=b(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],jue(i,n)),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=b(t,["languageCode"]);return s!=null&&y(e,["languageCode"],s),e}function Zue(i,t){const e={},n=b(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const s=b(t,["thinkingBudget"]);return s!=null&&y(e,["thinkingBudget"],s),e}function Yue(i,t,e){const n={},s=b(t,["systemInstruction"]);e!==void 0&&s!=null&&y(e,["systemInstruction"],Fc(i,yi(i,s)));const o=b(t,["temperature"]);o!=null&&y(n,["temperature"],o);const r=b(t,["topP"]);r!=null&&y(n,["topP"],r);const a=b(t,["topK"]);a!=null&&y(n,["topK"],a);const l=b(t,["candidateCount"]);l!=null&&y(n,["candidateCount"],l);const u=b(t,["maxOutputTokens"]);u!=null&&y(n,["maxOutputTokens"],u);const h=b(t,["stopSequences"]);h!=null&&y(n,["stopSequences"],h);const m=b(t,["responseLogprobs"]);m!=null&&y(n,["responseLogprobs"],m);const p=b(t,["logprobs"]);p!=null&&y(n,["logprobs"],p);const v=b(t,["presencePenalty"]);v!=null&&y(n,["presencePenalty"],v);const C=b(t,["frequencyPenalty"]);C!=null&&y(n,["frequencyPenalty"],C);const x=b(t,["seed"]);x!=null&&y(n,["seed"],x);const k=b(t,["responseMimeType"]);k!=null&&y(n,["responseMimeType"],k);const S=b(t,["responseSchema"]);S!=null&&y(n,["responseSchema"],tp(i,S));const I=b(t,["routingConfig"]);I!=null&&y(n,["routingConfig"],I);const P=b(t,["modelSelectionConfig"]);P!=null&&y(n,["modelConfig"],Pue(i,P));const L=b(t,["safetySettings"]);if(e!==void 0&&L!=null){let ze=L;Array.isArray(ze)&&(ze=ze.map(ke=>Mue(i,ke))),y(e,["safetySettings"],ze)}const O=b(t,["tools"]);if(e!==void 0&&O!=null){let ze=Hp(i,O);Array.isArray(ze)&&(ze=ze.map(ke=>kD(i,zp(i,ke)))),y(e,["tools"],ze)}const J=b(t,["toolConfig"]);e!==void 0&&J!=null&&y(e,["toolConfig"],Gue(i,J));const F=b(t,["labels"]);e!==void 0&&F!=null&&y(e,["labels"],F);const j=b(t,["cachedContent"]);e!==void 0&&j!=null&&y(e,["cachedContent"],Hr(i,j));const U=b(t,["responseModalities"]);U!=null&&y(n,["responseModalities"],U);const X=b(t,["mediaResolution"]);X!=null&&y(n,["mediaResolution"],X);const le=b(t,["speechConfig"]);le!=null&&y(n,["speechConfig"],Kue(i,hD(i,le)));const me=b(t,["audioTimestamp"]);me!=null&&y(n,["audioTimestamp"],me);const Ie=b(t,["thinkingConfig"]);return Ie!=null&&y(n,["thinkingConfig"],Zue(i,Ie)),n}function HI(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>Fc(i,a))),y(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&y(e,["generationConfig"],Yue(i,o,e)),e}function Jue(i,t,e){const n={},s=b(t,["taskType"]);e!==void 0&&s!=null&&y(e,["instances[]","task_type"],s);const o=b(t,["title"]);e!==void 0&&o!=null&&y(e,["instances[]","title"],o);const r=b(t,["outputDimensionality"]);e!==void 0&&r!=null&&y(e,["parameters","outputDimensionality"],r);const a=b(t,["mimeType"]);e!==void 0&&a!=null&&y(e,["instances[]","mimeType"],a);const l=b(t,["autoTruncate"]);return e!==void 0&&l!=null&&y(e,["parameters","autoTruncate"],l),n}function Xue(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);s!=null&&y(e,["instances[]","content"],dD(i,s));const o=b(t,["config"]);return o!=null&&y(e,["config"],Jue(i,o,e)),e}function Que(i,t,e){const n={},s=b(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const o=b(t,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const l=b(t,["guidanceScale"]);e!==void 0&&l!=null&&y(e,["parameters","guidanceScale"],l);const u=b(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const h=b(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const m=b(t,["personGeneration"]);e!==void 0&&m!=null&&y(e,["parameters","personGeneration"],m);const p=b(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&y(e,["parameters","includeSafetyAttributes"],p);const v=b(t,["includeRaiReason"]);e!==void 0&&v!=null&&y(e,["parameters","includeRaiReason"],v);const C=b(t,["language"]);e!==void 0&&C!=null&&y(e,["parameters","language"],C);const x=b(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const k=b(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","compressionQuality"],k);const S=b(t,["addWatermark"]);e!==void 0&&S!=null&&y(e,["parameters","addWatermark"],S);const I=b(t,["enhancePrompt"]);return e!==void 0&&I!=null&&y(e,["parameters","enhancePrompt"],I),n}function ede(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&y(e,["instances[0]","prompt"],s);const o=b(t,["config"]);return o!=null&&y(e,["config"],Que(i,o,e)),e}function S1(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const s=b(t,["imageBytes"]);s!=null&&y(e,["bytesBase64Encoded"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function tde(i,t){const e={},n=b(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const s=b(t,["segmentationClasses"]);s!=null&&y(e,["maskClasses"],s);const o=b(t,["maskDilation"]);return o!=null&&y(e,["dilation"],o),e}function nde(i,t){const e={},n=b(t,["controlType"]);n!=null&&y(e,["controlType"],n);const s=b(t,["enableControlImageComputation"]);return s!=null&&y(e,["computeControl"],s),e}function ide(i,t){const e={},n=b(t,["styleDescription"]);return n!=null&&y(e,["styleDescription"],n),e}function sde(i,t){const e={},n=b(t,["subjectType"]);n!=null&&y(e,["subjectType"],n);const s=b(t,["subjectDescription"]);return s!=null&&y(e,["subjectDescription"],s),e}function ode(i,t){const e={},n=b(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],S1(i,n));const s=b(t,["referenceId"]);s!=null&&y(e,["referenceId"],s);const o=b(t,["referenceType"]);o!=null&&y(e,["referenceType"],o);const r=b(t,["maskImageConfig"]);r!=null&&y(e,["maskImageConfig"],tde(i,r));const a=b(t,["controlImageConfig"]);a!=null&&y(e,["controlImageConfig"],nde(i,a));const l=b(t,["styleImageConfig"]);l!=null&&y(e,["styleImageConfig"],ide(i,l));const u=b(t,["subjectImageConfig"]);return u!=null&&y(e,["subjectImageConfig"],sde(i,u)),e}function rde(i,t,e){const n={},s=b(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const o=b(t,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const l=b(t,["guidanceScale"]);e!==void 0&&l!=null&&y(e,["parameters","guidanceScale"],l);const u=b(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const h=b(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const m=b(t,["personGeneration"]);e!==void 0&&m!=null&&y(e,["parameters","personGeneration"],m);const p=b(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&y(e,["parameters","includeSafetyAttributes"],p);const v=b(t,["includeRaiReason"]);e!==void 0&&v!=null&&y(e,["parameters","includeRaiReason"],v);const C=b(t,["language"]);e!==void 0&&C!=null&&y(e,["parameters","language"],C);const x=b(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const k=b(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","compressionQuality"],k);const S=b(t,["editMode"]);e!==void 0&&S!=null&&y(e,["parameters","editMode"],S);const I=b(t,["baseSteps"]);return e!==void 0&&I!=null&&y(e,["parameters","editConfig","baseSteps"],I),n}function ade(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&y(e,["instances[0]","prompt"],s);const o=b(t,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>ode(i,l))),y(e,["instances[0]","referenceImages"],a)}const r=b(t,["config"]);return r!=null&&y(e,["config"],rde(i,r,e)),e}function lde(i,t,e){const n={},s=b(t,["includeRaiReason"]);e!==void 0&&s!=null&&y(e,["parameters","includeRaiReason"],s);const o=b(t,["outputMimeType"]);e!==void 0&&o!=null&&y(e,["parameters","outputOptions","mimeType"],o);const r=b(t,["outputCompressionQuality"]);e!==void 0&&r!=null&&y(e,["parameters","outputOptions","compressionQuality"],r);const a=b(t,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const l=b(t,["mode"]);return e!==void 0&&l!=null&&y(e,["parameters","mode"],l),n}function cde(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["image"]);s!=null&&y(e,["instances[0]","image"],S1(i,s));const o=b(t,["upscaleFactor"]);o!=null&&y(e,["parameters","upscaleConfig","upscaleFactor"],o);const r=b(t,["config"]);return r!=null&&y(e,["config"],lde(i,r,e)),e}function ude(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function dde(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const r=b(t,["filter"]);e!==void 0&&r!=null&&y(e,["_query","filter"],r);const a=b(t,["queryBase"]);return e!==void 0&&a!=null&&y(e,["_url","models_url"],pD(i,a)),n}function hde(i,t){const e={},n=b(t,["config"]);return n!=null&&y(e,["config"],dde(i,n,e)),e}function fde(i,t,e){const n={},s=b(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const o=b(t,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const r=b(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&y(e,["defaultCheckpointId"],r),n}function mde(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],fde(i,s,e)),e}function gde(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function pde(i,t,e){const n={},s=b(t,["systemInstruction"]);e!==void 0&&s!=null&&y(e,["systemInstruction"],Fc(i,yi(i,s)));const o=b(t,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>kD(i,l))),y(e,["tools"],a)}const r=b(t,["generationConfig"]);return e!==void 0&&r!=null&&y(e,["generationConfig"],r),n}function bde(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>Fc(i,a))),y(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&y(e,["config"],pde(i,o,e)),e}function wde(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>Fc(i,a))),y(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&y(e,["config"],o),e}function yde(i,t,e){const n={},s=b(t,["numberOfVideos"]);e!==void 0&&s!=null&&y(e,["parameters","sampleCount"],s);const o=b(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const r=b(t,["fps"]);e!==void 0&&r!=null&&y(e,["parameters","fps"],r);const a=b(t,["durationSeconds"]);e!==void 0&&a!=null&&y(e,["parameters","durationSeconds"],a);const l=b(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const u=b(t,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const h=b(t,["resolution"]);e!==void 0&&h!=null&&y(e,["parameters","resolution"],h);const m=b(t,["personGeneration"]);e!==void 0&&m!=null&&y(e,["parameters","personGeneration"],m);const p=b(t,["pubsubTopic"]);e!==void 0&&p!=null&&y(e,["parameters","pubsubTopic"],p);const v=b(t,["negativePrompt"]);e!==void 0&&v!=null&&y(e,["parameters","negativePrompt"],v);const C=b(t,["enhancePrompt"]);return e!==void 0&&C!=null&&y(e,["parameters","enhancePrompt"],C),n}function _de(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&y(e,["instances[0]","prompt"],s);const o=b(t,["image"]);o!=null&&y(e,["instances[0]","image"],S1(i,o));const r=b(t,["config"]);return r!=null&&y(e,["config"],yde(i,r,e)),e}function vde(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function Cde(i,t){const e={},n=b(t,["data"]);n!=null&&y(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function Tde(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],vde(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],Cde(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function xde(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Tde(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function kde(i,t){const e={},n=b(t,["citationSources"]);return n!=null&&y(e,["citations"],n),e}function Ede(i,t){const e={},n=b(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const s=b(t,["urlRetrievalStatus"]);return s!=null&&y(e,["urlRetrievalStatus"],s),e}function Sde(i,t){const e={},n=b(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Ede(i,o))),y(e,["urlMetadata"],s)}return e}function Ade(i,t){const e={},n=b(t,["content"]);n!=null&&y(e,["content"],xde(i,n));const s=b(t,["citationMetadata"]);s!=null&&y(e,["citationMetadata"],kde(i,s));const o=b(t,["tokenCount"]);o!=null&&y(e,["tokenCount"],o);const r=b(t,["finishReason"]);r!=null&&y(e,["finishReason"],r);const a=b(t,["urlContextMetadata"]);a!=null&&y(e,["urlContextMetadata"],Sde(i,a));const l=b(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const u=b(t,["groundingMetadata"]);u!=null&&y(e,["groundingMetadata"],u);const h=b(t,["index"]);h!=null&&y(e,["index"],h);const m=b(t,["logprobsResult"]);m!=null&&y(e,["logprobsResult"],m);const p=b(t,["safetyRatings"]);return p!=null&&y(e,["safetyRatings"],p),e}function WI(i,t){const e={},n=b(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Ade(i,l))),y(e,["candidates"],a)}const s=b(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const o=b(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const r=b(t,["usageMetadata"]);return r!=null&&y(e,["usageMetadata"],r),e}function Rde(i,t){const e={},n=b(t,["values"]);return n!=null&&y(e,["values"],n),e}function Ide(){return{}}function Pde(i,t){const e={},n=b(t,["embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Rde(i,r))),y(e,["embeddings"],o)}return b(t,["metadata"])!=null&&y(e,["metadata"],Ide()),e}function Mde(i,t){const e={},n=b(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],Wr(i,n));const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function ED(i,t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const s=b(t,["safetyAttributes","scores"]);s!=null&&y(e,["scores"],s);const o=b(t,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function Vde(i,t){const e={},n=b(t,["_self"]);n!=null&&y(e,["image"],Mde(i,n));const s=b(t,["raiFilteredReason"]);s!=null&&y(e,["raiFilteredReason"],s);const o=b(t,["_self"]);return o!=null&&y(e,["safetyAttributes"],ED(i,o)),e}function Nde(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Vde(i,r))),y(e,["generatedImages"],o)}const s=b(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],ED(i,s)),e}function Ode(i,t){const e={},n=b(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=b(t,["createTime"]);s!=null&&y(e,["createTime"],s);const o=b(t,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function Bv(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["displayName"]);s!=null&&y(e,["displayName"],s);const o=b(t,["description"]);o!=null&&y(e,["description"],o);const r=b(t,["version"]);r!=null&&y(e,["version"],r);const a=b(t,["_self"]);a!=null&&y(e,["tunedModelInfo"],Ode(i,a));const l=b(t,["inputTokenLimit"]);l!=null&&y(e,["inputTokenLimit"],l);const u=b(t,["outputTokenLimit"]);u!=null&&y(e,["outputTokenLimit"],u);const h=b(t,["supportedGenerationMethods"]);return h!=null&&y(e,["supportedActions"],h),e}function Dde(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&y(e,["nextPageToken"],n);const s=b(t,["_self"]);if(s!=null){let o=bD(i,s);Array.isArray(o)&&(o=o.map(r=>Bv(i,r))),y(e,["models"],o)}return e}function Lde(){return{}}function Bde(i,t){const e={},n=b(t,["totalTokens"]);n!=null&&y(e,["totalTokens"],n);const s=b(t,["cachedContentTokenCount"]);return s!=null&&y(e,["cachedContentTokenCount"],s),e}function Fde(i,t){const e={},n=b(t,["video","uri"]);n!=null&&y(e,["uri"],n);const s=b(t,["video","encodedVideo"]);s!=null&&y(e,["videoBytes"],Wr(i,s));const o=b(t,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function Ude(i,t){const e={},n=b(t,["_self"]);return n!=null&&y(e,["video"],Fde(i,n)),e}function zde(i,t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Ude(i,a))),y(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function Hde(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["metadata"]);s!=null&&y(e,["metadata"],s);const o=b(t,["done"]);o!=null&&y(e,["done"],o);const r=b(t,["error"]);r!=null&&y(e,["error"],r);const a=b(t,["response","generateVideoResponse"]);return a!=null&&y(e,["response"],zde(i,a)),e}function Wde(i,t){const e={},n=b(t,["fps"]);n!=null&&y(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&y(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&y(e,["startOffset"],o),e}function qde(i,t){const e={},n=b(t,["displayName"]);n!=null&&y(e,["displayName"],n);const s=b(t,["data"]);s!=null&&y(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function Gde(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],Wde(i,n));const s=b(t,["thought"]);s!=null&&y(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&y(e,["inlineData"],qde(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&y(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&y(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&y(e,["text"],m),e}function $de(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Gde(i,r))),y(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&y(e,["role"],s),e}function jde(i,t){const e={},n=b(t,["citations"]);return n!=null&&y(e,["citations"],n),e}function Kde(i,t){const e={},n=b(t,["content"]);n!=null&&y(e,["content"],$de(i,n));const s=b(t,["citationMetadata"]);s!=null&&y(e,["citationMetadata"],jde(i,s));const o=b(t,["finishMessage"]);o!=null&&y(e,["finishMessage"],o);const r=b(t,["finishReason"]);r!=null&&y(e,["finishReason"],r);const a=b(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const l=b(t,["groundingMetadata"]);l!=null&&y(e,["groundingMetadata"],l);const u=b(t,["index"]);u!=null&&y(e,["index"],u);const h=b(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const m=b(t,["safetyRatings"]);return m!=null&&y(e,["safetyRatings"],m),e}function qI(i,t){const e={},n=b(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>Kde(i,h))),y(e,["candidates"],u)}const s=b(t,["createTime"]);s!=null&&y(e,["createTime"],s);const o=b(t,["responseId"]);o!=null&&y(e,["responseId"],o);const r=b(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const a=b(t,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const l=b(t,["usageMetadata"]);return l!=null&&y(e,["usageMetadata"],l),e}function Zde(i,t){const e={},n=b(t,["truncated"]);n!=null&&y(e,["truncated"],n);const s=b(t,["token_count"]);return s!=null&&y(e,["tokenCount"],s),e}function Yde(i,t){const e={},n=b(t,["values"]);n!=null&&y(e,["values"],n);const s=b(t,["statistics"]);return s!=null&&y(e,["statistics"],Zde(i,s)),e}function Jde(i,t){const e={},n=b(t,["billableCharacterCount"]);return n!=null&&y(e,["billableCharacterCount"],n),e}function Xde(i,t){const e={},n=b(t,["predictions[]","embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Yde(i,r))),y(e,["embeddings"],o)}const s=b(t,["metadata"]);return s!=null&&y(e,["metadata"],Jde(i,s)),e}function Qde(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const s=b(t,["bytesBase64Encoded"]);s!=null&&y(e,["imageBytes"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function SD(i,t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const s=b(t,["safetyAttributes","scores"]);s!=null&&y(e,["scores"],s);const o=b(t,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function A1(i,t){const e={},n=b(t,["_self"]);n!=null&&y(e,["image"],Qde(i,n));const s=b(t,["raiFilteredReason"]);s!=null&&y(e,["raiFilteredReason"],s);const o=b(t,["_self"]);o!=null&&y(e,["safetyAttributes"],SD(i,o));const r=b(t,["prompt"]);return r!=null&&y(e,["enhancedPrompt"],r),e}function ehe(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>A1(i,r))),y(e,["generatedImages"],o)}const s=b(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],SD(i,s)),e}function the(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>A1(i,o))),y(e,["generatedImages"],s)}return e}function nhe(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>A1(i,o))),y(e,["generatedImages"],s)}return e}function ihe(i,t){const e={},n=b(t,["endpoint"]);n!=null&&y(e,["name"],n);const s=b(t,["deployedModelId"]);return s!=null&&y(e,["deployedModelId"],s),e}function she(i,t){const e={},n=b(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const s=b(t,["createTime"]);s!=null&&y(e,["createTime"],s);const o=b(t,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function ohe(i,t){const e={},n=b(t,["checkpointId"]);n!=null&&y(e,["checkpointId"],n);const s=b(t,["epoch"]);s!=null&&y(e,["epoch"],s);const o=b(t,["step"]);return o!=null&&y(e,["step"],o),e}function Fv(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["displayName"]);s!=null&&y(e,["displayName"],s);const o=b(t,["description"]);o!=null&&y(e,["description"],o);const r=b(t,["versionId"]);r!=null&&y(e,["version"],r);const a=b(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>ihe(i,v))),y(e,["endpoints"],p)}const l=b(t,["labels"]);l!=null&&y(e,["labels"],l);const u=b(t,["_self"]);u!=null&&y(e,["tunedModelInfo"],she(i,u));const h=b(t,["defaultCheckpointId"]);h!=null&&y(e,["defaultCheckpointId"],h);const m=b(t,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(v=>ohe(i,v))),y(e,["checkpoints"],p)}return e}function rhe(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&y(e,["nextPageToken"],n);const s=b(t,["_self"]);if(s!=null){let o=bD(i,s);Array.isArray(o)&&(o=o.map(r=>Fv(i,r))),y(e,["models"],o)}return e}function ahe(){return{}}function lhe(i,t){const e={},n=b(t,["totalTokens"]);return n!=null&&y(e,["totalTokens"],n),e}function che(i,t){const e={},n=b(t,["tokensInfo"]);return n!=null&&y(e,["tokensInfo"],n),e}function uhe(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const s=b(t,["bytesBase64Encoded"]);s!=null&&y(e,["videoBytes"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function dhe(i,t){const e={},n=b(t,["_self"]);return n!=null&&y(e,["video"],uhe(i,n)),e}function hhe(i,t){const e={},n=b(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>dhe(i,a))),y(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function fhe(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["metadata"]);s!=null&&y(e,["metadata"],s);const o=b(t,["done"]);o!=null&&y(e,["done"],o);const r=b(t,["error"]);r!=null&&y(e,["error"],r);const a=b(t,["response"]);return a!=null&&y(e,["response"],hhe(i,a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mhe="Content-Type",ghe="X-Server-Timeout",phe="User-Agent",Uv="x-goog-api-client",bhe="1.0.1",whe=`google-genai-sdk/${bhe}`,yhe="v1beta1",_he="v1beta",GI=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class AD extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class zv extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class vhe{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:yhe,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:_he,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const s=[this.getRequestUrlInternal(e)];return n&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[r,a]of Object.entries(t.queryParams))s.searchParams.append(r,String(a));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,e,t.abortSignal),this.unaryApiCall(s,o,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[s,o]of Object.entries(e))typeof o=="object"?n[s]=Object.assign(Object.assign({},n[s]),o):o!==void 0&&(n[s]=o);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,e,t.abortSignal),this.streamApiCall(s,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n){if(e&&e.timeout||n){const s=new AbortController,o=s.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>s.abort(),e.timeout),n&&n.addEventListener("abort",()=>{s.abort()}),t.signal=o}return t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await $I(s),new Nv(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await $I(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){var e;return Od(this,arguments,function*(){const s=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let r="";for(;;){const{done:a,value:l}=yield Wt(s.read());if(a){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=o.decode(l);try{const m=JSON.parse(u);if("error"in m){const p=JSON.parse(JSON.stringify(m.error)),v=p.status,C=p.code,x=`got status: ${v}. ${JSON.stringify(m)}`;if(C>=400&&C<500)throw new AD(x);if(C>=500&&C<600)throw new zv(x)}}catch(m){const p=m;if(p.name==="ClientError"||p.name==="ServerError")throw m}r+=u;let h=r.match(GI);for(;h;){const m=h[1];try{const p=new Response(m,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Wt(new Nv(p)),r=r.slice(h[0].length),h=r.match(GI)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=whe+" "+this.clientOptions.userAgentExtra;return t[phe]=e,t[Uv]=e,t[mhe]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[n,s]of Object.entries(t.headers))e.append(n,s);t.timeout&&t.timeout>0&&e.append(ghe,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var n;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,r=await o.stat(t);s.sizeBytes=String(r.size);const a=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,e);return o.upload(t,l,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var n;let s={};e!=null&&e.httpOptions?s=e.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const o={file:t},r=await this.request({path:Fe("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:s});if(!r||!(r!=null&&r.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(n=r==null?void 0:r.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function $I(i){var t;if(i===void 0)throw new zv("response is undefined");if(!i.ok){const e=i.status,n=i.statusText;let s;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const o=`got status: ${e} ${n}. ${JSON.stringify(s)}`;throw e>=400&&e<500?new AD(o):e>=500&&e<600?new zv(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jI="mcp_used/unknown";function RD(i){for(const t of i)if(R1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return!1}function ID(i){var t;const e=(t=i[Uv])!==null&&t!==void 0?t:"";e.includes(jI)||(i[Uv]=(e+` ${jI}`).trimStart())}function Che(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>R1(s)))!==null&&n!==void 0?n:!1}function The(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>!R1(s)))!==null&&n!==void 0?n:!1}function R1(i){return i!==null&&typeof i=="object"&&"tool"in i&&"callTool"in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xhe(i,t,e){const n=new Dre;let s;e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data);const o=Gce(i,s);Object.assign(n,o),t(n)}class khe{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),r=Ahe(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const h=new Promise(P=>{u=P}),m=t.callbacks,p=function(){u({})},v=this.apiClient,C={onopen:p,onmessage:P=>{xhe(v,m.onmessage,P)},onerror:(e=m==null?void 0:m.onerror)!==null&&e!==void 0?e:function(P){},onclose:(n=m==null?void 0:m.onclose)!==null&&n!==void 0?n:function(P){}},x=this.webSocketFactory.create(l,She(r),C);x.connect(),await h;const k=Ft(this.apiClient,t.model),S=CD(this.apiClient,{model:k}),I=Lv(this.apiClient,{setup:S});return x.send(JSON.stringify(I)),new Ehe(x,this.apiClient)}}class Ehe{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=ace(this.apiClient,t),n=TD(this.apiClient,e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=lce(this.apiClient,t),n=Lv(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const e=Lv(this.apiClient,{playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(dc.PLAY)}pause(){this.sendPlaybackControl(dc.PAUSE)}stop(){this.sendPlaybackControl(dc.STOP)}resetContext(){this.sendPlaybackControl(dc.RESET_CONTEXT)}close(){this.conn.close()}}function She(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function Ahe(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rhe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ihe(i,t,e){const n=new Ore;let s;if(e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),i.isVertexAI()){const o=Dce(i,s);Object.assign(n,o)}else{const o=Oce(i,s);Object.assign(n,o)}t(n)}class Phe{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new khe(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,s,o,r,a;const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const m=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&RD(t.config.tools)&&ID(m);const p=Ohe(m);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const U=this.apiClient.getApiKey();h=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${U}`}let v=()=>{};const C=new Promise(U=>{v=U}),x=t.callbacks,k=function(){var U;(U=x==null?void 0:x.onopen)===null||U===void 0||U.call(x),v({})},S=this.apiClient,I={onopen:k,onmessage:U=>{Ihe(S,x.onmessage,U)},onerror:(e=x==null?void 0:x.onerror)!==null&&e!==void 0?e:function(U){},onclose:(n=x==null?void 0:x.onclose)!==null&&n!==void 0?n:function(U){}},P=this.webSocketFactory.create(h,Nhe(p),I);P.connect(),await C;let L=Ft(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const U=this.apiClient.getProject(),X=this.apiClient.getLocation();L=`projects/${U}/locations/${X}/`+L}let O={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Qg.AUDIO]}:t.config.responseModalities=[Qg.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(a=(r=t.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],F=[];for(const U of J)if(this.isCallableTool(U)){const X=U;F.push(await X.tool())}else F.push(U);F.length>0&&(t.config.tools=F);const j={model:L,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?O=ece(this.apiClient,j):O=Qle(this.apiClient,j),delete O.config,P.send(JSON.stringify(O)),new Vhe(P,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Mhe={turnComplete:!0};class Vhe{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=vs(t,e.turns),t.isVertexAI()?n=n.map(s=>Fc(t,s)):n=n.map(s=>qp(t,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const o of n){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(Rhe)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},Mhe),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:rce(this.apiClient,t)}:e={realtimeInput:oce(this.apiClient,t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function Nhe(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function Ohe(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KI=10;function ZI(i){var t,e,n;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const r of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(og(r)){s=!0;break}if(!s)return!0;const o=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function og(i){return"callTool"in i&&typeof i.callTool=="function"}function YI(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dhe extends Lh{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var n,s,o,r,a;const l=await this.processParamsForMcpUsage(e);if(!Che(e)||ZI(e.config))return await this.generateContentInternal(l);if(The(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,h;const m=vs(this.apiClient,l.contents),p=(o=(s=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:KI;let v=0;for(;v<p&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const C=u.candidates[0].content,x=[];for(const k of(a=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(og(k)){const I=await k.callTool(u.functionCalls);x.push(...I)}v++,h={role:"user",parts:x},l.contents=vs(this.apiClient,l.contents),l.contents.push(C),l.contents.push(h),YI(l.config)&&(m.push(C),m.push(h))}return YI(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async e=>{if(ZI(e.config)){const n=await this.processParamsForMcpUsage(e);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var s;let o;const r=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:r.push(l);let a;return o?a={generatedImages:r,positivePromptSafetyAttributes:o}:a={generatedImages:r},a}),this.list=async e=>{var n;const r={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((n=r.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new Wp(Ic.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(t){var e,n,s;const o=(e=t.config)===null||e===void 0?void 0:e.tools;if(!o)return t;const r=await Promise.all(o.map(async l=>og(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:r})};if(a.config.tools=r,t.config&&t.config.tools&&RD(t.config.tools)){const l=(s=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),ID(u),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(t){var e,n,s;const o=new Map;for(const r of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(og(r)){const a=r,l=await a.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,a)}}return o}async processAfcStream(t){var e,n,s;const o=(s=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:KI;let r=!1,a=0;const l=await this.initAfcToolsMap(t);return function(u,h,m){var p,v;return Od(this,arguments,function*(){for(var C,x,k,S;a<o;){r&&(a++,r=!1);const O=yield Wt(u.processParamsForMcpUsage(m)),J=yield Wt(u.generateContentStreamInternal(O)),F=[],j=[];try{for(var I=!0,P=(x=void 0,sg(J)),L;L=yield Wt(P.next()),C=L.done,!C;I=!0){S=L.value,I=!1;const U=S;if(yield yield Wt(U),U.candidates&&(!((p=U.candidates[0])===null||p===void 0)&&p.content)){j.push(U.candidates[0].content);for(const X of(v=U.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<o&&X.functionCall){if(!X.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(X.functionCall.name)){const le=yield Wt(h.get(X.functionCall.name).callTool([X.functionCall]));F.push(...le)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${X.functionCall.name}`)}}}}catch(U){x={error:U}}finally{try{!I&&!C&&(k=P.return)&&(yield Wt(k.call(P)))}finally{if(x)throw x.error}}if(F.length>0){r=!0;const U=new nd;U.candidates=[{content:{role:"user",parts:F}}],yield yield Wt(U);const X=[];X.push(...j),X.push({role:"user",parts:F});const le=vs(u.apiClient,m.contents).concat(X);m.contents=le}else break}})}(this,l,t)}async generateContentInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=HI(this.apiClient,t);return a=Fe("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=qI(this.apiClient,h),p=new nd;return Object.assign(p,m),p})}else{const u=zI(this.apiClient,t);return a=Fe("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=WI(this.apiClient,h),p=new nd;return Object.assign(p,m),p})}}async generateContentStreamInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=HI(this.apiClient,t);a=Fe("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return r=h.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),r.then(function(m){return Od(this,arguments,function*(){var p,v,C,x;try{for(var k=!0,S=sg(m),I;I=yield Wt(S.next()),p=I.done,!p;k=!0){x=I.value,k=!1;const L=qI(h,yield Wt(x.json())),O=new nd;Object.assign(O,L),yield yield Wt(O)}}catch(P){v={error:P}}finally{try{!k&&!p&&(C=S.return)&&(yield Wt(C.call(S)))}finally{if(v)throw v.error}}})})}else{const u=zI(this.apiClient,t);a=Fe("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return r=h.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),r.then(function(m){return Od(this,arguments,function*(){var p,v,C,x;try{for(var k=!0,S=sg(m),I;I=yield Wt(S.next()),p=I.done,!p;k=!0){x=I.value,k=!1;const L=WI(h,yield Wt(x.json())),O=new nd;Object.assign(O,L),yield yield Wt(O)}}catch(P){v={error:P}}finally{try{!k&&!p&&(C=S.return)&&(yield Wt(C.call(S)))}finally{if(v)throw v.error}}})})}}async embedContent(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Xue(this.apiClient,t);return a=Fe("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Xde(this.apiClient,h),p=new vI;return Object.assign(p,m),p})}else{const u=mue(this.apiClient,t);return a=Fe("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Pde(this.apiClient,h),p=new vI;return Object.assign(p,m),p})}}async generateImagesInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=ede(this.apiClient,t);return a=Fe("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=ehe(this.apiClient,h),p=new CI;return Object.assign(p,m),p})}else{const u=pue(this.apiClient,t);return a=Fe("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Nde(this.apiClient,h),p=new CI;return Object.assign(p,m),p})}}async editImageInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=ade(this.apiClient,t);return o=Fe("{model}:predict",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=the(this.apiClient,l),h=new Rre;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=cde(this.apiClient,t);return o=Fe("{model}:predict",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=nhe(this.apiClient,l),h=new Ire;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=ude(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>Fv(this.apiClient,h))}else{const u=bue(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Bv(this.apiClient,h))}}async listInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=hde(this.apiClient,t);return a=Fe("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=rhe(this.apiClient,h),p=new TI;return Object.assign(p,m),p})}else{const u=yue(this.apiClient,t);return a=Fe("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Dde(this.apiClient,h),p=new TI;return Object.assign(p,m),p})}}async update(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=mde(this.apiClient,t);return a=Fe("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>Fv(this.apiClient,h))}else{const u=vue(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Bv(this.apiClient,h))}}async delete(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=gde(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(()=>{const h=ahe(),m=new xI;return Object.assign(m,h),m})}else{const u=Cue(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(()=>{const h=Lde(),m=new xI;return Object.assign(m,h),m})}}async countTokens(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=bde(this.apiClient,t);return a=Fe("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=lhe(this.apiClient,h),p=new kI;return Object.assign(p,m),p})}else{const u=xue(this.apiClient,t);return a=Fe("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Bde(this.apiClient,h),p=new kI;return Object.assign(p,m),p})}}async computeTokens(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=wde(this.apiClient,t);return o=Fe("{model}:computeTokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=che(this.apiClient,l),h=new Pre;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=_de(this.apiClient,t);return a=Fe("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>fhe(this.apiClient,h))}else{const u=Sue(this.apiClient,t);return a=Fe("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Hde(this.apiClient,h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lhe(i,t){const e={},n=b(t,["operationName"]);n!=null&&y(e,["_url","operationName"],n);const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function Bhe(i,t){const e={},n=b(t,["operationName"]);n!=null&&y(e,["_url","operationName"],n);const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function Fhe(i,t){const e={},n=b(t,["operationName"]);n!=null&&y(e,["operationName"],n);const s=b(t,["resourceName"]);s!=null&&y(e,["_url","resourceName"],s);const o=b(t,["config"]);return o!=null&&y(e,["config"],o),e}function Uhe(i,t){const e={},n=b(t,["video","uri"]);n!=null&&y(e,["uri"],n);const s=b(t,["video","encodedVideo"]);s!=null&&y(e,["videoBytes"],Wr(i,s));const o=b(t,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function zhe(i,t){const e={},n=b(t,["_self"]);return n!=null&&y(e,["video"],Uhe(i,n)),e}function Hhe(i,t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>zhe(i,a))),y(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function Whe(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["metadata"]);s!=null&&y(e,["metadata"],s);const o=b(t,["done"]);o!=null&&y(e,["done"],o);const r=b(t,["error"]);r!=null&&y(e,["error"],r);const a=b(t,["response","generateVideoResponse"]);return a!=null&&y(e,["response"],Hhe(i,a)),e}function qhe(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const s=b(t,["bytesBase64Encoded"]);s!=null&&y(e,["videoBytes"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function Ghe(i,t){const e={},n=b(t,["_self"]);return n!=null&&y(e,["video"],qhe(i,n)),e}function $he(i,t){const e={},n=b(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Ghe(i,a))),y(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function JI(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["metadata"]);s!=null&&y(e,["metadata"],s);const o=b(t,["done"]);o!=null&&y(e,["done"],o);const r=b(t,["error"]);r!=null&&y(e,["error"],r);const a=b(t,["response"]);return a!=null&&y(e,["response"],$he(i,a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jhe extends Lh{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let o;return n&&"httpOptions"in n&&(o=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:e.name,config:n})}async getVideosOperationInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Bhe(this.apiClient,t);return a=Fe("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>JI(this.apiClient,h))}else{const u=Lhe(this.apiClient,t);return a=Fe("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Whe(this.apiClient,h))}}async fetchPredictVideosOperationInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=Fhe(this.apiClient,t);return o=Fe("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>JI(this.apiClient,l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Khe(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],n);const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function Zhe(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const r=b(t,["filter"]);return e!==void 0&&r!=null&&y(e,["_query","filter"],r),n}function Yhe(i,t){const e={},n=b(t,["config"]);return n!=null&&y(e,["config"],Zhe(i,n,e)),e}function Jhe(i,t){const e={},n=b(t,["textInput"]);n!=null&&y(e,["textInput"],n);const s=b(t,["output"]);return s!=null&&y(e,["output"],s),e}function Xhe(i,t){const e={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Jhe(i,o))),y(e,["examples","examples"],s)}return e}function Qhe(i,t,e){const n={};if(b(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=b(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&y(e,["displayName"],s),b(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=b(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const r=b(t,["learningRateMultiplier"]);if(r!=null&&y(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),b(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=b(t,["batchSize"]);e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","batchSize"],a);const l=b(t,["learningRate"]);return e!==void 0&&l!=null&&y(e,["tuningTask","hyperparameters","learningRate"],l),n}function efe(i,t){const e={},n=b(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=b(t,["trainingDataset"]);s!=null&&y(e,["tuningTask","trainingData"],Xhe(i,s));const o=b(t,["config"]);return o!=null&&y(e,["config"],Qhe(i,o,e)),e}function tfe(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],n);const s=b(t,["config"]);return s!=null&&y(e,["config"],s),e}function nfe(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const r=b(t,["filter"]);return e!==void 0&&r!=null&&y(e,["_query","filter"],r),n}function ife(i,t){const e={},n=b(t,["config"]);return n!=null&&y(e,["config"],nfe(i,n,e)),e}function sfe(i,t,e){const n={},s=b(t,["gcsUri"]);if(e!==void 0&&s!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],s),b(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function ofe(i,t){const e={},n=b(t,["gcsUri"]);return n!=null&&y(e,["validationDatasetUri"],n),e}function rfe(i,t,e){const n={},s=b(t,["validationDataset"]);e!==void 0&&s!=null&&y(e,["supervisedTuningSpec"],ofe(i,s));const o=b(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const r=b(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const a=b(t,["epochCount"]);e!==void 0&&a!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const l=b(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const u=b(t,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const h=b(t,["adapterSize"]);if(e!==void 0&&h!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),b(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function afe(i,t){const e={},n=b(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=b(t,["trainingDataset"]);s!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],sfe(i,s,e));const o=b(t,["config"]);return o!=null&&y(e,["config"],rfe(i,o,e)),e}function lfe(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["model"],n);const s=b(t,["name"]);return s!=null&&y(e,["endpoint"],s),e}function PD(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["state"]);s!=null&&y(e,["state"],mD(i,s));const o=b(t,["createTime"]);o!=null&&y(e,["createTime"],o);const r=b(t,["tuningTask","startTime"]);r!=null&&y(e,["startTime"],r);const a=b(t,["tuningTask","completeTime"]);a!=null&&y(e,["endTime"],a);const l=b(t,["updateTime"]);l!=null&&y(e,["updateTime"],l);const u=b(t,["description"]);u!=null&&y(e,["description"],u);const h=b(t,["baseModel"]);h!=null&&y(e,["baseModel"],h);const m=b(t,["_self"]);m!=null&&y(e,["tunedModel"],lfe(i,m));const p=b(t,["distillationSpec"]);p!=null&&y(e,["distillationSpec"],p);const v=b(t,["experiment"]);v!=null&&y(e,["experiment"],v);const C=b(t,["labels"]);C!=null&&y(e,["labels"],C);const x=b(t,["pipelineJob"]);x!=null&&y(e,["pipelineJob"],x);const k=b(t,["tunedModelDisplayName"]);return k!=null&&y(e,["tunedModelDisplayName"],k),e}function cfe(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&y(e,["nextPageToken"],n);const s=b(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>PD(i,r))),y(e,["tuningJobs"],o)}return e}function ufe(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["metadata"]);s!=null&&y(e,["metadata"],s);const o=b(t,["done"]);o!=null&&y(e,["done"],o);const r=b(t,["error"]);return r!=null&&y(e,["error"],r),e}function dfe(i,t){const e={},n=b(t,["checkpointId"]);n!=null&&y(e,["checkpointId"],n);const s=b(t,["epoch"]);s!=null&&y(e,["epoch"],s);const o=b(t,["step"]);o!=null&&y(e,["step"],o);const r=b(t,["endpoint"]);return r!=null&&y(e,["endpoint"],r),e}function hfe(i,t){const e={},n=b(t,["model"]);n!=null&&y(e,["model"],n);const s=b(t,["endpoint"]);s!=null&&y(e,["endpoint"],s);const o=b(t,["checkpoints"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>dfe(i,a))),y(e,["checkpoints"],r)}return e}function Hv(i,t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const s=b(t,["state"]);s!=null&&y(e,["state"],mD(i,s));const o=b(t,["createTime"]);o!=null&&y(e,["createTime"],o);const r=b(t,["startTime"]);r!=null&&y(e,["startTime"],r);const a=b(t,["endTime"]);a!=null&&y(e,["endTime"],a);const l=b(t,["updateTime"]);l!=null&&y(e,["updateTime"],l);const u=b(t,["error"]);u!=null&&y(e,["error"],u);const h=b(t,["description"]);h!=null&&y(e,["description"],h);const m=b(t,["baseModel"]);m!=null&&y(e,["baseModel"],m);const p=b(t,["tunedModel"]);p!=null&&y(e,["tunedModel"],hfe(i,p));const v=b(t,["supervisedTuningSpec"]);v!=null&&y(e,["supervisedTuningSpec"],v);const C=b(t,["tuningDataStats"]);C!=null&&y(e,["tuningDataStats"],C);const x=b(t,["encryptionSpec"]);x!=null&&y(e,["encryptionSpec"],x);const k=b(t,["partnerModelTuningSpec"]);k!=null&&y(e,["partnerModelTuningSpec"],k);const S=b(t,["distillationSpec"]);S!=null&&y(e,["distillationSpec"],S);const I=b(t,["experiment"]);I!=null&&y(e,["experiment"],I);const P=b(t,["labels"]);P!=null&&y(e,["labels"],P);const L=b(t,["pipelineJob"]);L!=null&&y(e,["pipelineJob"],L);const O=b(t,["tunedModelDisplayName"]);return O!=null&&y(e,["tunedModelDisplayName"],O),e}function ffe(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&y(e,["nextPageToken"],n);const s=b(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>Hv(i,r))),y(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mfe extends Lh{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new Wp(Ic.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const n=await this.tuneMldevInternal(e);let s="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?s=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(s=n.name.split("/operations/")[0]),{name:s,state:Vv.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=tfe(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>Hv(this.apiClient,h))}else{const u=Khe(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>PD(this.apiClient,h))}}async listInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=ife(this.apiClient,t);return a=Fe("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=ffe(this.apiClient,h),p=new EI;return Object.assign(p,m),p})}else{const u=Yhe(this.apiClient,t);return a=Fe("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=cfe(this.apiClient,h),p=new EI;return Object.assign(p,m),p})}}async tuneInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=afe(this.apiClient,t);return o=Fe("tuningJobs",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>Hv(this.apiClient,l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=efe(this.apiClient,t);return o=Fe("tunedModels",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>ufe(this.apiClient,l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gfe{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pfe=1024*1024*8,bfe=3,wfe=1e3,yfe=2,g_="x-goog-upload-status";async function _fe(i,t,e){var n,s,o;let r=0,a=0,l=new Nv(new Response),u="upload";for(r=i.size;a<r;){const m=Math.min(pfe,r-a),p=i.slice(a,a+m);a+m>=r&&(u+=", finalize");let v=0,C=wfe;for(;v<bfe&&(l=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(m)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[g_]));)v++,await Cfe(C),C=C*yfe;if(a+=m,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[g_])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[g_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function vfe(i){return{size:i.size,type:i.type}}function Cfe(i){return new Promise(t=>setTimeout(t,i))}class Tfe{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await _fe(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await vfe(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xfe{create(t,e,n){return new kfe(t,e,n)}}class kfe{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XI="x-goog-api-key";class Efe{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(XI)===null&&t.append(XI,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sfe="gl-node/";class Afe{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=Are(t,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion;const s=new Efe(this.apiKey);this.apiClient=new vhe({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Sfe+"web",uploader:new Tfe,downloader:new gfe}),this.models=new Dhe(this.apiClient),this.live=new Phe(this.apiClient,s,new xfe),this.chats=new jae(this.models,this.apiClient),this.caches=new qae(this.apiClient),this.files=new rle(this.apiClient),this.operations=new jhe(this.apiClient),this.tunings=new mfe(this.apiClient)}}const Rfe=new Afe({apiKey:"AIzaSyCVRb_TXEp4ZFARql1uhqOlyfIz9MC0vLA"});function Ife(){const i=async()=>{const o=await Rfe.models.generateContent({model:"gemini-2.0-flash",contents:t+"<- 가독성이 좋게 html 태그 형식으로 대답해줘 html 문서 전체가 아니라 body태그 내부에 들어가는 코드로만 답을 해줘 태그를 화면에 나타날때 지운 상태로"});console.log(o.text);let r=o.text;r=r.replaceAll("`","").replaceAll("html",""),s(r)},[t,e]=H.useState(""),[n,s]=H.useState("");return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/QnA"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full my-4",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"무엇이든 물어보살"}),A.jsxs("div",{children:[A.jsx("input",{onChange:o=>e(o.target.value),type:"text"}),A.jsx("button",{onClick:i,children:"질문하기"})]}),A.jsxs("div",{children:[A.jsx("p",{children:"AI동물 전문가의 답변"}),A.jsx("div",{dangerouslySetInnerHTML:{__html:n}})]})]})]})}const Pfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///8UFBQAAAB6enoQEBD39/esrKwMDAw4ODg1NTWnp6f8/PwWFhYYGBgaGhphYWFvb29cXFzt7e1XV1dmZmbn5+fg4ODW1taGhoazs7NtbW0ICAg+Pj66urpFRUXGxsaQkJAtLS0iIiIoKChPT0+dnZ2VlZXZ2dnLy8t2dnafMPPcAAAGgklEQVR4nO2dgXaiOhCGkzGRagBdatUtbW1tu+2+/wveSUBWrFoKqQ3c/9uzR4/anHxMkgkQQAgAAAAAAAAAAAAAAAAAAIAPGG2MfeWX4s0AMXoxubWe9t8AMSJbkKLbofox2QspKWkm9EAVsydSsWTFhfMblqTRQiwpl5JjaBU5iEYMa7gxYpVGqQuhlLFTHJahEZtUqShxghxI+mWjOCRDcU+RimNZxDBlxRc9nOHG5r9X2rXQHfSgXdIYQiDZ4Q8pJeuGCb3ciIEMqEY8ErfPuqCN4ks2kNxvRiyYqkPFWNFVNohGKn4R28hEHYSQw0pPN6Lnc1SOUDajw+a511Anb72fht9cnxGUMp+s7K96bLh0c+2TJCravvU6hjdbSqoW+S+Y/96mkVSrHsbQTTm51is71+YhhS1TGo12XvZtygEsMmRE78Vu/0/X+ksY93+TR85IqUTRSK8rw7UeEX9WtN+E0o2b3Px0pb8I1/c+j51DzImC/hqxF0Nh/pJUSZkhVbTp3zScqzsmGW2LEKa8z3tgaBY8Uy2CyK+06dVwU+z4vfJUlMeRmHeVFM3spzVDIWY8yu4mqzH97s/+YjHG6Eeno1JuiwnNXdX3De0P55Rw+02LQNJY9MXRHZ1wU1EbGw5TzIOMq3nd0Bgebtz3xQ9p2pcBlWsuuJOVYwhPuGmuhbbfHMSQP52zYhHDNFX0yor6ZyvfCA6hrmZqsT1eYcqB8jCG/DlPyssYcnPmKPYghrbe2Z1TcYk+Lvug5SCGjrltzWXql/Ro/z5oSzdUvN3tmqhKWOZfuztmyH1R7lI/R/Ex9J0pu/lXV1RmAJvoOYKV4hFDbUfUXepXPNysA0/9VlBSmQBsop+5gafkmCHrzKrUHycxrfc2SVi4mShPRaMiw1WJfm++ecTQfVelfmUn6H9NqEcZXTK7z+WHRF9xrB9aaqmfN4tTDE/S9Z7prgvuJ/qKE4b11M95cRHmgGr725/d/nwt0VecimEt9cexpJkOMYa6FFQfEn3FyRjWUr+0iqGF0HZBbYf9o4m+4lQMHfXU/+J6dTCerttUU9EPib7irGEt9VvFkPY07Oa2U1GVHE30FecMa6nfNtSXoBZsFILxiURfcdZwP/XbEwB0rcMRZMM18ZRLxUcTfcU5w3rqd6U8hjSeZk/qdKKvONsPLbXUH9nTNt9X5S+ypDOJvuIzw3rqV7T8zip/kWUxlzme6Cs+jWE99YdkaLLJmURf8XkM91O/usqCaaSmnJDGvH83P/O7T2PomJM7lxrTNKDD4NyBbimXUURrfaZSjQyNXlMUyZxuA8oWxh4jmz5st3fTszPmZobCTO+224epDmk/0bjaLJdanN3uzQy5KL1cuq0WjKCjONvkJYZVWb2j2UjTZ2DYf2DYf2DYf2DYf2DYf2DYf2DYf2DYf2DYf2DYf2DYf2DYf8I37HouyJuh/5NSxnx6TqIJ/gyF7yuItdGr97esazEeW2n29r7yuux9uZBEd68dS/Fn+HpHJBcez/MvU3LLIjtWzJvhiFTKpaReFN0VMNvcLR6IadOp8fswtNXZlIsG8tTL2jcuYUWJWyoj6bbTGmw/hlrckl3jmciEVj5GGy5iTOX9LNRDp1PrXlopKz6U1y1GNPYTQjZM48iullGTTusj/BgaPbEr6GQUp+5qMB8pY1wsrHSGIcSwMLSXEY3bl1ODDYvFzcEYusoUV/R5YVyt/g3JUMLwC8CwKTBsBAxbAcOmwLARMGwFDJsCw0bAsBUwbAoMGwHDVsCwKTBsBAxbAcOmwLARMGwFDJsCw0bAsBUwbAoMGwHDVsCwKTBsBAxbAcOmddsz7FBKsIbmIIbtywnVUPwPWqnYezZC+0LCNTRG/CZ3wzOu2e/2SwrDNbQ3XX3OZRqlMn82ovUq9HANbd1WT5SnOT2tOpUSqGFxgcTNevI8Wd+YDreBCtawuAqE/zgrV8cPrx/6AoatgOFFgWErYHhRYNgKGF4UGLYChhcFhq2A4UWBYStgeFFg2AoYXhQYtqIyjCY/7Wcxk+j7Yvg8DYHn74uhTCkEUvkdhsVmc8+s+lliGZd18WXo7t7yw1an8HL3FkvIhj4wYhqs4dRH8irPTgdJl7PlNTKS5XO0AsKON9T5FnI7RruHGAeESn3eflHPiVQUForsM+x8YfT99VVoXN97fOKVzxsUeiSwZ3oBAAAAAAAAAAAAAAAAAKAj/wHG524nhJHPCgAAAABJRU5ErkJggg==";function Mfe(){const i="https://teachablemachine.withgoogle.com/models/cpWHuc8hV/",t=H.useRef(),e=H.useRef();async function n(){const u=i+"model.json",h=i+"metadata.json";t.current=await tmImage.load(u,h),e.current=t.current.getTotalClasses()}H.useEffect(()=>{n()},[]);async function s(){const u=await t.current.predict(document.getElementById("photo"));let h=0,m="";for(let p=0;p<e;p++){const v=u[p].className+": "+u[p].probability.toFixed(2);console.log(v),h<u[p].probability&&(h=u[p].probability,m=u[p].className)}console.log(h),console.log(m),a(m)}const o=H.useRef(),[r,a]=H.useState(""),l=u=>{console.log(u.target),console.log(u.target.files),console.log(u.target.files[0]);const h=new FileReader;h.onload=m=>{document.getElementById("photo").src=m.target.result,s()},h.readAsDataURL(u.target.files[0])};return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/Call"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:hidden",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"유기동물 신고"}),A.jsxs("div",{className:"w-4/5 m-auto",children:[A.jsx("input",{value:r,type:"file",accept:"image/*",onChange:u=>l(u),hidden:!0}),A.jsx("div",{className:"mt-10 h-80 flex justify-center",children:A.jsx("img",{src:Pfe,className:"h-full cursor-pointer",alt:"",id:"photo",onClick:()=>o.current.click()})}),A.jsxs("div",{className:"my-4 flex justify-center",children:[A.jsxs("select",{className:"ml-4 bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"--전체--"}),A.jsx("option",{value:"",children:"개"}),A.jsx("option",{value:"",children:"고양이"}),A.jsx("option",{value:"",children:"기타동물"})]}),A.jsx("input",{value:r,className:"mx-2 bg-white p-2 border border-gray-300",type:"text"}),A.jsx("button",{className:"bg-black text-white px-4",children:"신고"})]})]})]})]})}function Vfe(){return A.jsxs("div",{className:"container m-auto",children:[A.jsx(N4,{}),A.jsx("div",{className:"h-40",children:A.jsx("a",{href:"https://www.daejeon.go.kr/ani/AniContentsHtmlView.do?menuSeq=5861",rel:"noopener noreferrer",target:"_blank",children:A.jsx("img",{className:"h-full object-cover",src:I4,alt:""})})}),A.jsxs(K3,{children:[A.jsx(fs,{path:"/",element:A.jsx(g7,{})}),A.jsx(fs,{path:"/animalDetail",element:A.jsx(m7,{})}),A.jsx(fs,{path:"/contactUs",element:A.jsx(p7,{})}),A.jsx(fs,{path:"/Current",element:A.jsx(z8,{})}),A.jsx(fs,{path:"/Information",element:A.jsx(H8,{})}),A.jsx(fs,{path:"/Restaurant",element:A.jsx(q8,{})}),A.jsx(fs,{path:"/Guide",element:A.jsx(poe,{})}),A.jsx(fs,{path:"/QnA",element:A.jsx(Ife,{})}),A.jsx(fs,{path:"*",element:A.jsx(W8,{})}),A.jsx(fs,{path:"Call",element:A.jsx(Mfe,{})})]}),A.jsx(O4,{})]})}i3.createRoot(document.getElementById("root")).render(A.jsx(H.StrictMode,{children:A.jsx(y4,{children:A.jsx(Vfe,{})})}));
